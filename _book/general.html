<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 General Knowledge | R-Gallery-Book</title>
  <meta name="description" content="This is the complete guide to the R Gallery." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 General Knowledge | R-Gallery-Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the complete guide to the R Gallery." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 General Knowledge | R-Gallery-Book" />
  
  <meta name="twitter:description" content="This is the complete guide to the R Gallery." />
  

<meta name="author" content="Kyle W. Brown" />


<meta name="date" content="2021-01-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="flow.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/d3-4.13.0/d3.min.js"></script>
<script src="libs/d3-tip-0.8.1/index.js"></script>
<link href="libs/chorddiag-0.1.2.9000/chorddiag.css" rel="stylesheet" />
<script src="libs/chorddiag-0.1.2.9000/chorddiag.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Gallery Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>2</b> Distributions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="distributions.html"><a href="distributions.html#violin"><i class="fa fa-check"></i><b>2.1</b> Violin</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="distributions.html"><a href="distributions.html#base-r-violin-plot"><i class="fa fa-check"></i><b>2.1.1</b> Base R Violin Plot</a></li>
<li class="chapter" data-level="2.1.2" data-path="distributions.html"><a href="distributions.html#basic-ggplot-violin-plot"><i class="fa fa-check"></i><b>2.1.2</b> Basic ggplot Violin Plot</a></li>
<li class="chapter" data-level="2.1.3" data-path="distributions.html"><a href="distributions.html#note-on-input-format"><i class="fa fa-check"></i><b>2.1.3</b> Note on Input Format</a></li>
<li class="chapter" data-level="2.1.4" data-path="distributions.html"><a href="distributions.html#from-wide-format"><i class="fa fa-check"></i><b>2.1.4</b> From Wide Format</a></li>
<li class="chapter" data-level="2.1.5" data-path="distributions.html"><a href="distributions.html#reorder-a-variable-with-ggplot2"><i class="fa fa-check"></i><b>2.1.5</b> Reorder a variable with <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.1.6" data-path="distributions.html"><a href="distributions.html#method-1-the-forcats-library"><i class="fa fa-check"></i><b>2.1.6</b> Method 1: the <code>forcats</code> library</a></li>
<li class="chapter" data-level="2.1.7" data-path="distributions.html"><a href="distributions.html#method-2-using-dplyr-only"><i class="fa fa-check"></i><b>2.1.7</b> Method 2: Using Dplyr Only</a></li>
<li class="chapter" data-level="2.1.8" data-path="distributions.html"><a href="distributions.html#method-3-the-reorder-function-of-base-r"><i class="fa fa-check"></i><b>2.1.8</b> Method 3: the <code>reorder()</code> Function of Base R</a></li>
<li class="chapter" data-level="2.1.9" data-path="distributions.html"><a href="distributions.html#horizontal-violin-plot-with-ggplot2"><i class="fa fa-check"></i><b>2.1.9</b> Horizontal Violin Plot with <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.1.10" data-path="distributions.html"><a href="distributions.html#violin-plot-with-included-boxplot-and-sample-size-in-ggplot2"><i class="fa fa-check"></i><b>2.1.10</b> Violin Plot with included Boxplot and Sample Size in ggplot2</a></li>
<li class="chapter" data-level="2.1.11" data-path="distributions.html"><a href="distributions.html#grouped-violin-chart-with-ggplot2"><i class="fa fa-check"></i><b>2.1.11</b> Grouped Violin Chart with ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="distributions.html"><a href="distributions.html#density"><i class="fa fa-check"></i><b>2.2</b> Density</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="distributions.html"><a href="distributions.html#basic-density-chart-with-ggplot2"><i class="fa fa-check"></i><b>2.2.1</b> Basic density chart with ggplot2</a></li>
<li class="chapter" data-level="2.2.2" data-path="distributions.html"><a href="distributions.html#custom-with-theme_ipsum"><i class="fa fa-check"></i><b>2.2.2</b> Custom with <code>theme_ipsum</code></a></li>
<li class="chapter" data-level="2.2.3" data-path="distributions.html"><a href="distributions.html#mirror-density-chart-with-ggplot2"><i class="fa fa-check"></i><b>2.2.3</b> Mirror Density Chart with ggplot2</a></li>
<li class="chapter" data-level="2.2.4" data-path="distributions.html"><a href="distributions.html#density-with-geom_density"><i class="fa fa-check"></i><b>2.2.4</b> Density with <code>geom_density</code></a></li>
<li class="chapter" data-level="2.2.5" data-path="distributions.html"><a href="distributions.html#histogram-with-geom_histogram"><i class="fa fa-check"></i><b>2.2.5</b> Histogram with <code>geom_histogram</code></a></li>
<li class="chapter" data-level="2.2.6" data-path="distributions.html"><a href="distributions.html#density-chart-with-several-groups"><i class="fa fa-check"></i><b>2.2.6</b> Density Chart with Several Groups</a></li>
<li class="chapter" data-level="2.2.7" data-path="distributions.html"><a href="distributions.html#multi-density-chart"><i class="fa fa-check"></i><b>2.2.7</b> Multi density chart</a></li>
<li class="chapter" data-level="2.2.8" data-path="distributions.html"><a href="distributions.html#small-multiple-with-facet_wrap"><i class="fa fa-check"></i><b>2.2.8</b> Small Multiple with <code>facet_wrap()</code></a></li>
<li class="chapter" data-level="2.2.9" data-path="distributions.html"><a href="distributions.html#stacked-density-chart"><i class="fa fa-check"></i><b>2.2.9</b> Stacked Density Chart</a></li>
<li class="chapter" data-level="2.2.10" data-path="distributions.html"><a href="distributions.html#marginal-distribution-with-ggplot2-and-ggextra"><i class="fa fa-check"></i><b>2.2.10</b> Marginal distribution with ggplot2 and ggExtra</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="distributions.html"><a href="distributions.html#histogram"><i class="fa fa-check"></i><b>2.3</b> Histogram</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="distributions.html"><a href="distributions.html#ggplot2"><i class="fa fa-check"></i><b>2.3.1</b> GGPLOT2</a></li>
<li class="chapter" data-level="2.3.2" data-path="distributions.html"><a href="distributions.html#basic-histogram-with-ggplot2"><i class="fa fa-check"></i><b>2.3.2</b> Basic histogram with ggplot2</a></li>
<li class="chapter" data-level="2.3.3" data-path="distributions.html"><a href="distributions.html#basic-histogram-with-geom_histogram"><i class="fa fa-check"></i><b>2.3.3</b> Basic Histogram with <code>geom_histogram</code></a></li>
<li class="chapter" data-level="2.3.4" data-path="distributions.html"><a href="distributions.html#control-bin-size-with-binwidth"><i class="fa fa-check"></i><b>2.3.4</b> Control Bin Size with <code>binwidth</code></a></li>
<li class="chapter" data-level="2.3.5" data-path="distributions.html"><a href="distributions.html#histogram-with-several-groups---ggplot2"><i class="fa fa-check"></i><b>2.3.5</b> Histogram with Several Groups - ggplot2</a></li>
<li class="chapter" data-level="2.3.6" data-path="distributions.html"><a href="distributions.html#using-small-multiple"><i class="fa fa-check"></i><b>2.3.6</b> Using Small Multiple</a></li>
<li class="chapter" data-level="2.3.7" data-path="distributions.html"><a href="distributions.html#base-r"><i class="fa fa-check"></i><b>2.3.7</b> Base R</a></li>
<li class="chapter" data-level="2.3.8" data-path="distributions.html"><a href="distributions.html#two-histograms-with-melt-colors"><i class="fa fa-check"></i><b>2.3.8</b> Two Histograms with Melt Colors</a></li>
<li class="chapter" data-level="2.3.9" data-path="distributions.html"><a href="distributions.html#boxplot-on-top-of-histogram"><i class="fa fa-check"></i><b>2.3.9</b> Boxplot on top of Histogram</a></li>
<li class="chapter" data-level="2.3.10" data-path="distributions.html"><a href="distributions.html#histogram-with-colored-tail"><i class="fa fa-check"></i><b>2.3.10</b> Histogram with Colored Tail</a></li>
<li class="chapter" data-level="2.3.11" data-path="distributions.html"><a href="distributions.html#mirrored-histogram-in-base-r"><i class="fa fa-check"></i><b>2.3.11</b> Mirrored Histogram in Base R</a></li>
<li class="chapter" data-level="2.3.12" data-path="distributions.html"><a href="distributions.html#histogram-without-border"><i class="fa fa-check"></i><b>2.3.12</b> Histogram without Border</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="distributions.html"><a href="distributions.html#boxplot"><i class="fa fa-check"></i><b>2.4</b> Boxplot</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="distributions.html"><a href="distributions.html#ggplot2-1"><i class="fa fa-check"></i><b>2.4.1</b> Ggplot2</a></li>
<li class="chapter" data-level="2.4.2" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-parameters"><i class="fa fa-check"></i><b>2.4.2</b> Ggplot2 Boxplot Parameters</a></li>
<li class="chapter" data-level="2.4.3" data-path="distributions.html"><a href="distributions.html#control-ggplot2-boxplot-colors"><i class="fa fa-check"></i><b>2.4.3</b> Control ggplot2 Boxplot Colors</a></li>
<li class="chapter" data-level="2.4.4" data-path="distributions.html"><a href="distributions.html#highlighting-a-group"><i class="fa fa-check"></i><b>2.4.4</b> Highlighting a Group</a></li>
<li class="chapter" data-level="2.4.5" data-path="distributions.html"><a href="distributions.html#grouped-boxplot"><i class="fa fa-check"></i><b>2.4.5</b> Grouped Boxplot</a></li>
<li class="chapter" data-level="2.4.6" data-path="distributions.html"><a href="distributions.html#using-small-multiple-1"><i class="fa fa-check"></i><b>2.4.6</b> Using Small Multiple</a></li>
<li class="chapter" data-level="2.4.7" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-with-variable-width"><i class="fa fa-check"></i><b>2.4.7</b> Ggplot2 Boxplot with Variable Width</a></li>
<li class="chapter" data-level="2.4.8" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-from-continuous-variable"><i class="fa fa-check"></i><b>2.4.8</b> Ggplot2 Boxplot from Continuous Variable</a></li>
<li class="chapter" data-level="2.4.9" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-with-mean-value"><i class="fa fa-check"></i><b>2.4.9</b> Ggplot2 Boxplot with Mean Value</a></li>
<li class="chapter" data-level="2.4.10" data-path="distributions.html"><a href="distributions.html#basic-r"><i class="fa fa-check"></i><b>2.4.10</b> Basic R</a></li>
<li class="chapter" data-level="2.4.11" data-path="distributions.html"><a href="distributions.html#basic-r-x-axis-labels-on-several-lines"><i class="fa fa-check"></i><b>2.4.11</b> Basic R: X Axis Labels on Several Lines</a></li>
<li class="chapter" data-level="2.4.12" data-path="distributions.html"><a href="distributions.html#boxplot-with-jitter-in-base-r"><i class="fa fa-check"></i><b>2.4.12</b> Boxplot with Jitter in Base R</a></li>
<li class="chapter" data-level="2.4.13" data-path="distributions.html"><a href="distributions.html#ordering-boxplots-in-base-r"><i class="fa fa-check"></i><b>2.4.13</b> Ordering Boxplots in Base R</a></li>
<li class="chapter" data-level="2.4.14" data-path="distributions.html"><a href="distributions.html#give-a-specific-order"><i class="fa fa-check"></i><b>2.4.14</b> Give a Specific Order</a></li>
<li class="chapter" data-level="2.4.15" data-path="distributions.html"><a href="distributions.html#grouped-and-ordered-boxplot"><i class="fa fa-check"></i><b>2.4.15</b> Grouped and Ordered Boxplot</a></li>
<li class="chapter" data-level="2.4.16" data-path="distributions.html"><a href="distributions.html#add-text-over-boxplot-in-base-r"><i class="fa fa-check"></i><b>2.4.16</b> Add Text over Boxplot in Base R</a></li>
<li class="chapter" data-level="2.4.17" data-path="distributions.html"><a href="distributions.html#tukey-test-and-boxplot-in-r"><i class="fa fa-check"></i><b>2.4.17</b> Tukey Test and Boxplot in R</a></li>
<li class="chapter" data-level="2.4.18" data-path="distributions.html"><a href="distributions.html#tukey-test-result-on-top-of-boxplot"><i class="fa fa-check"></i><b>2.4.18</b> Tukey test result on top of boxplot</a></li>
<li class="chapter" data-level="2.4.19" data-path="distributions.html"><a href="distributions.html#control-box-type-with-the-bty-option"><i class="fa fa-check"></i><b>2.4.19</b> Control Box Type with the bty Option</a></li>
<li class="chapter" data-level="2.4.20" data-path="distributions.html"><a href="distributions.html#split-base-r-plot-window-with-layout"><i class="fa fa-check"></i><b>2.4.20</b> Split Base R Plot Window with <code>layout()</code></a></li>
<li class="chapter" data-level="2.4.21" data-path="distributions.html"><a href="distributions.html#subdivide-second-row"><i class="fa fa-check"></i><b>2.4.21</b> Subdivide Second Row</a></li>
<li class="chapter" data-level="2.4.22" data-path="distributions.html"><a href="distributions.html#custom-proportions"><i class="fa fa-check"></i><b>2.4.22</b> Custom Proportions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="distributions.html"><a href="distributions.html#ridgeline-chart"><i class="fa fa-check"></i><b>2.5</b> Ridgeline Chart</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="distributions.html"><a href="distributions.html#basic-ridgeline-plot"><i class="fa fa-check"></i><b>2.5.1</b> Basic Ridgeline Plot</a></li>
<li class="chapter" data-level="2.5.2" data-path="distributions.html"><a href="distributions.html#shape-variation"><i class="fa fa-check"></i><b>2.5.2</b> Shape Variation</a></li>
<li class="chapter" data-level="2.5.3" data-path="distributions.html"><a href="distributions.html#color-relative-to-numeric-value"><i class="fa fa-check"></i><b>2.5.3</b> Color Relative to Numeric Value</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>3</b> Correlation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="correlation.html"><a href="correlation.html#scatterplot"><i class="fa fa-check"></i><b>3.1</b> Scatterplot</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="correlation.html"><a href="correlation.html#custom-ggplot2-scatterplot"><i class="fa fa-check"></i><b>3.1.1</b> Custom <code>ggplot2</code> Scatterplot</a></li>
<li class="chapter" data-level="3.1.2" data-path="correlation.html"><a href="correlation.html#using-theme_ipsum"><i class="fa fa-check"></i><b>3.1.2</b> Using <code>theme_ipsum</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="correlation.html"><a href="correlation.html#map-a-variable-to-marker-feature-in-ggplot2-scatterplot"><i class="fa fa-check"></i><b>3.1.3</b> Map a Variable to Marker Feature in <code>ggplot2</code> Scatterplot</a></li>
<li class="chapter" data-level="3.1.4" data-path="correlation.html"><a href="correlation.html#works-with-any-aesthetics"><i class="fa fa-check"></i><b>3.1.4</b> Works with any Aesthetics</a></li>
<li class="chapter" data-level="3.1.5" data-path="correlation.html"><a href="correlation.html#mapping-to-several-features"><i class="fa fa-check"></i><b>3.1.5</b> Mapping to Several Features</a></li>
<li class="chapter" data-level="3.1.6" data-path="correlation.html"><a href="correlation.html#add-text-labels-with-ggplot2"><i class="fa fa-check"></i><b>3.1.6</b> Add Text Labels with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.1.7" data-path="correlation.html"><a href="correlation.html#add-labels-with-geom_label"><i class="fa fa-check"></i><b>3.1.7</b> Add Labels with <code>geom_label()</code></a></li>
<li class="chapter" data-level="3.1.8" data-path="correlation.html"><a href="correlation.html#add-one-text-label-only"><i class="fa fa-check"></i><b>3.1.8</b> Add One Text Label Only</a></li>
<li class="chapter" data-level="3.1.9" data-path="correlation.html"><a href="correlation.html#add-labels-for-a-selection-of-marker"><i class="fa fa-check"></i><b>3.1.9</b> Add Labels for a Selection of Marker</a></li>
<li class="chapter" data-level="3.1.10" data-path="correlation.html"><a href="correlation.html#ggplot2-scatterplot-with-rug"><i class="fa fa-check"></i><b>3.1.10</b> Ggplot2 Scatterplot with Rug</a></li>
<li class="chapter" data-level="3.1.11" data-path="distributions.html"><a href="distributions.html#marginal-distribution-with-ggplot2-and-ggextra"><i class="fa fa-check"></i><b>3.1.11</b> Marginal Distribution with <code>ggplot2</code> and <code>ggExtra</code></a></li>
<li class="chapter" data-level="3.1.12" data-path="distributions.html"><a href="distributions.html#more-customization"><i class="fa fa-check"></i><b>3.1.12</b> More Customization</a></li>
<li class="chapter" data-level="3.1.13" data-path="correlation.html"><a href="correlation.html#linear-model-and-confidence-interval-in-ggplot2"><i class="fa fa-check"></i><b>3.1.13</b> Linear Model and Confidence Interval in <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.1.14" data-path="correlation.html"><a href="correlation.html#using-base-r"><i class="fa fa-check"></i><b>3.1.14</b> Using Base R</a></li>
<li class="chapter" data-level="3.1.15" data-path="correlation.html"><a href="correlation.html#map-the-marker-color-to-a-categorical-variable"><i class="fa fa-check"></i><b>3.1.15</b> Map the Marker Color to a Categorical Variable</a></li>
<li class="chapter" data-level="3.1.16" data-path="correlation.html"><a href="correlation.html#map-the-marker-color-to-a-numeric-variable"><i class="fa fa-check"></i><b>3.1.16</b> Map the Marker Color to a Numeric Variable</a></li>
<li class="chapter" data-level="3.1.17" data-path="correlation.html"><a href="correlation.html#scatterplot-with-polynomial-curve-fitting"><i class="fa fa-check"></i><b>3.1.17</b> Scatterplot with Polynomial Curve Fitting</a></li>
<li class="chapter" data-level="3.1.18" data-path="correlation.html"><a href="correlation.html#polynomial-curve-fitting-and-confidence-interval"><i class="fa fa-check"></i><b>3.1.18</b> Polynomial Curve Fitting and Confidence Interval</a></li>
<li class="chapter" data-level="3.1.19" data-path="correlation.html"><a href="correlation.html#lattice-xy-plot-function"><i class="fa fa-check"></i><b>3.1.19</b> Lattice XY Plot Function</a></li>
<li class="chapter" data-level="3.1.20" data-path="correlation.html"><a href="correlation.html#correlation-between-discrete-variable"><i class="fa fa-check"></i><b>3.1.20</b> Correlation between Discrete Variable</a></li>
<li class="chapter" data-level="3.1.21" data-path="correlation.html"><a href="correlation.html#use-mtext-to-write-text-in-margin"><i class="fa fa-check"></i><b>3.1.21</b> Use <code>mtext()</code> to Write Text in Margin</a></li>
<li class="chapter" data-level="3.1.22" data-path="correlation.html"><a href="correlation.html#customizations-1"><i class="fa fa-check"></i><b>3.1.22</b> Customizations</a></li>
<li class="chapter" data-level="3.1.23" data-path="correlation.html"><a href="correlation.html#the-split_screen-function-of-r"><i class="fa fa-check"></i><b>3.1.23</b> The <code>split_screen()</code> Function of R</a></li>
<li class="chapter" data-level="3.1.24" data-path="correlation.html"><a href="correlation.html#use-par-mfrow-to-split-screen"><i class="fa fa-check"></i><b>3.1.24</b> Use par mfrow to Split Screen</a></li>
<li class="chapter" data-level="3.1.25" data-path="correlation.html"><a href="correlation.html#base-r-graph-parameters-a-cheatsheet."><i class="fa fa-check"></i><b>3.1.25</b> Base R Graph Parameters: A Cheatsheet.</a></li>
<li class="chapter" data-level="3.1.26" data-path="correlation.html"><a href="correlation.html#special-use-case-manhattan-plots"><i class="fa fa-check"></i><b>3.1.26</b> Special Use Case: Manhattan Plots</a></li>
<li class="chapter" data-level="3.1.27" data-path="correlation.html"><a href="correlation.html#highly-customizable-with-ggplot2"><i class="fa fa-check"></i><b>3.1.27</b> Highly Customizable with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.1.28" data-path="correlation.html"><a href="correlation.html#switch-to-an-interactive-version-with-plotly"><i class="fa fa-check"></i><b>3.1.28</b> Switch to an Interactive Version with <code>plotly</code></a></li>
<li class="chapter" data-level="3.1.29" data-path="correlation.html"><a href="correlation.html#circular-version-with-cmplot"><i class="fa fa-check"></i><b>3.1.29</b> Circular Version with CMplot</a></li>
<li class="chapter" data-level="3.1.30" data-path="correlation.html"><a href="correlation.html#snp-density-plot"><i class="fa fa-check"></i><b>3.1.30</b> SNP-Density Plot</a></li>
<li class="chapter" data-level="3.1.31" data-path="correlation.html"><a href="correlation.html#circular-manhattan-plot"><i class="fa fa-check"></i><b>3.1.31</b> Circular-Manhattan Plot</a></li>
<li class="chapter" data-level="3.1.32" data-path="correlation.html"><a href="correlation.html#single_track-rectangular-manhattan-plot"><i class="fa fa-check"></i><b>3.1.32</b> Single_track Rectangular-Manhattan Plot</a></li>
<li class="chapter" data-level="3.1.33" data-path="correlation.html"><a href="correlation.html#multi_tracks-rectangular-manhattan-plot"><i class="fa fa-check"></i><b>3.1.33</b> Multi_tracks Rectangular-Manhattan Plot</a></li>
<li class="chapter" data-level="3.1.34" data-path="correlation.html"><a href="correlation.html#single_track-q-q-plot"><i class="fa fa-check"></i><b>3.1.34</b> Single_track Q-Q Plot</a></li>
<li class="chapter" data-level="3.1.35" data-path="correlation.html"><a href="correlation.html#multi_tracks-q-q-plot"><i class="fa fa-check"></i><b>3.1.35</b> Multi_tracks Q-Q plot</a></li>
<li class="chapter" data-level="3.1.36" data-path="correlation.html"><a href="correlation.html#visualize-correlation-with-ggcorr"><i class="fa fa-check"></i><b>3.1.36</b> Visualize Correlation with <code>ggcorr()</code></a></li>
<li class="chapter" data-level="3.1.37" data-path="correlation.html"><a href="correlation.html#change-plot-types"><i class="fa fa-check"></i><b>3.1.37</b> Change Plot Types</a></li>
<li class="chapter" data-level="3.1.38" data-path="correlation.html"><a href="correlation.html#split-by-group"><i class="fa fa-check"></i><b>3.1.38</b> Split by Group</a></li>
<li class="chapter" data-level="3.1.39" data-path="correlation.html"><a href="correlation.html#using-the-corrgram-package"><i class="fa fa-check"></i><b>3.1.39</b> Using the <code>corrgram</code> Package</a></li>
<li class="chapter" data-level="3.1.40" data-path="correlation.html"><a href="correlation.html#visualize-correlation-with-ggcorr-1"><i class="fa fa-check"></i><b>3.1.40</b> Visualize Correlation with <code>ggcorr()</code></a></li>
<li class="chapter" data-level="3.1.41" data-path="correlation.html"><a href="correlation.html#split-by-group-1"><i class="fa fa-check"></i><b>3.1.41</b> Split by Group</a></li>
<li class="chapter" data-level="3.1.42" data-path="correlation.html"><a href="correlation.html#change-plot-types-1"><i class="fa fa-check"></i><b>3.1.42</b> Change plot types</a></li>
<li class="chapter" data-level="3.1.43" data-path="correlation.html"><a href="correlation.html#other-methods"><i class="fa fa-check"></i><b>3.1.43</b> Other Methods</a></li>
<li class="chapter" data-level="3.1.44" data-path="correlation.html"><a href="correlation.html#basic-scatterplot-matrix"><i class="fa fa-check"></i><b>3.1.44</b> Basic Scatterplot Matrix</a></li>
<li class="chapter" data-level="3.1.45" data-path="correlation.html"><a href="correlation.html#correlogram-with-the-car-package"><i class="fa fa-check"></i><b>3.1.45</b> Correlogram with the <code>car</code> Package</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="correlation.html"><a href="correlation.html#bubble-plot"><i class="fa fa-check"></i><b>3.2</b> Bubble Plot</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="correlation.html"><a href="correlation.html#most-basic-bubble-chart-with-geom_point"><i class="fa fa-check"></i><b>3.2.1</b> Most Basic bubble Chart with <code>geom_point()</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="correlation.html"><a href="correlation.html#control-circle-size-with-scale_size"><i class="fa fa-check"></i><b>3.2.2</b> Control Circle Size with <code>scale_size()</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="correlation.html"><a href="correlation.html#add-a-fourth-dimension-color"><i class="fa fa-check"></i><b>3.2.3</b> Add a Fourth Dimension: Color</a></li>
<li class="chapter" data-level="3.2.4" data-path="correlation.html"><a href="correlation.html#make-it-pretty"><i class="fa fa-check"></i><b>3.2.4</b> Make it Pretty</a></li>
<li class="chapter" data-level="3.2.5" data-path="correlation.html"><a href="correlation.html#interactive-version"><i class="fa fa-check"></i><b>3.2.5</b> Interactive Version</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="correlation.html"><a href="correlation.html#connected-scatterplot"><i class="fa fa-check"></i><b>3.3</b> Connected Scatterplot</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-with-r-and-ggplot2"><i class="fa fa-check"></i><b>3.3.1</b> Connected Scatterplot with R and Ggplot2</a></li>
<li class="chapter" data-level="3.3.2" data-path="correlation.html"><a href="correlation.html#customize-the-connected-scatterplot"><i class="fa fa-check"></i><b>3.3.2</b> Customize the Connected Scatterplot</a></li>
<li class="chapter" data-level="3.3.3" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-to-show-an-evolution"><i class="fa fa-check"></i><b>3.3.3</b> Connected Scatterplot to show an Evolution</a></li>
<li class="chapter" data-level="3.3.4" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-for-time-series"><i class="fa fa-check"></i><b>3.3.4</b> Connected Scatterplot for <code>Time Series</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-using-base-r"><i class="fa fa-check"></i><b>3.3.5</b> Connected Scatterplot using Base R</a></li>
<li class="chapter" data-level="3.3.6" data-path="correlation.html"><a href="correlation.html#manage-dates-data-with-base-r"><i class="fa fa-check"></i><b>3.3.6</b> Manage Dates Data with Base R</a></li>
<li class="chapter" data-level="3.3.7" data-path="correlation.html"><a href="correlation.html#switch-to-date-format"><i class="fa fa-check"></i><b>3.3.7</b> Switch to Date Format</a></li>
<li class="chapter" data-level="3.3.8" data-path="correlation.html"><a href="correlation.html#base-r-graph-parameters-cheatsheet"><i class="fa fa-check"></i><b>3.3.8</b> Base R Graph Parameters: Cheatsheet</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="correlation.html"><a href="correlation.html#density-2d"><i class="fa fa-check"></i><b>3.4</b> Density 2D</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="correlation.html"><a href="correlation.html#the-issue-with-geom_point"><i class="fa fa-check"></i><b>3.4.1</b> The Issue with <code>geom_point()</code></a></li>
<li class="chapter" data-level="3.4.2" data-path="correlation.html"><a href="correlation.html#d-histogram-with-geom_bin2d-1"><i class="fa fa-check"></i><b>3.4.2</b> 2d Histogram with <code>geom_bin2d()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="correlation.html"><a href="correlation.html#hexbin-chart-with-geom_hex"><i class="fa fa-check"></i><b>3.4.3</b> Hexbin Chart with <code>geom_hex()</code></a></li>
<li class="chapter" data-level="3.4.4" data-path="correlation.html"><a href="correlation.html#d-distribution-with-geom_density_2d-or-stat_density_2d"><i class="fa fa-check"></i><b>3.4.4</b> 2d Distribution with <code>geom_density_2d</code> or <code>stat_density_2d</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="correlation.html"><a href="correlation.html#customize-the-color-palette"><i class="fa fa-check"></i><b>3.4.5</b> Customize the Color Palette</a></li>
<li class="chapter" data-level="3.4.6" data-path="correlation.html"><a href="correlation.html#hexbin-chart-with-the-hexbin-package"><i class="fa fa-check"></i><b>3.4.6</b> Hexbin Chart with the Hexbin Package</a></li>
<li class="chapter" data-level="3.4.7" data-path="correlation.html"><a href="correlation.html#hexbin-chart-and-scatterplot-with-ggplot2"><i class="fa fa-check"></i><b>3.4.7</b> Hexbin Chart and Scatterplot with Ggplot2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ranking.html"><a href="ranking.html"><i class="fa fa-check"></i><b>4</b> Ranking</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ranking.html"><a href="ranking.html#barplot"><i class="fa fa-check"></i><b>4.1</b> Barplot</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ranking.html"><a href="ranking.html#basic-barplot-with-ggplot2"><i class="fa fa-check"></i><b>4.1.1</b> Basic Barplot with Ggplot2</a></li>
<li class="chapter" data-level="4.1.2" data-path="ranking.html"><a href="ranking.html#control-bar-color"><i class="fa fa-check"></i><b>4.1.2</b> Control Bar Color</a></li>
<li class="chapter" data-level="4.1.3" data-path="ranking.html"><a href="ranking.html#horizontal-barplot-with-coord_flip"><i class="fa fa-check"></i><b>4.1.3</b> Horizontal Barplot with <code>coord_flip()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="ranking.html"><a href="ranking.html#control-bar-width-with-width"><i class="fa fa-check"></i><b>4.1.4</b> Control Bar Width with <code>width</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="distributions.html"><a href="distributions.html#reorder-a-variable-with-ggplot2"><i class="fa fa-check"></i><b>4.1.5</b> Reorder a Variable with Ggplot2</a></li>
<li class="chapter" data-level="4.1.6" data-path="ranking.html"><a href="ranking.html#method-1-the-forecats-library"><i class="fa fa-check"></i><b>4.1.6</b> Method 1: the <code>Forecats</code> Library</a></li>
<li class="chapter" data-level="4.1.7" data-path="distributions.html"><a href="distributions.html#method-2-using-dplyr-only"><i class="fa fa-check"></i><b>4.1.7</b> Method 2: Using <code>dplyr</code> Only</a></li>
<li class="chapter" data-level="4.1.8" data-path="distributions.html"><a href="distributions.html#method-3-the-reorder-function-of-base-r"><i class="fa fa-check"></i><b>4.1.8</b> Method 3: the <code>reorder()</code> Function of Base R</a></li>
<li class="chapter" data-level="4.1.9" data-path="ranking.html"><a href="ranking.html#barplot-with-variable-width---ggplot2"><i class="fa fa-check"></i><b>4.1.9</b> Barplot with Variable Width - Ggplot2</a></li>
<li class="chapter" data-level="4.1.10" data-path="ranking.html"><a href="ranking.html#barplot-with-error-bars"><i class="fa fa-check"></i><b>4.1.10</b> Barplot with Error Bars</a></li>
<li class="chapter" data-level="4.1.11" data-path="ranking.html"><a href="ranking.html#customization"><i class="fa fa-check"></i><b>4.1.11</b> Customization</a></li>
<li class="chapter" data-level="4.1.12" data-path="ranking.html"><a href="ranking.html#basic-r-and-the-barplot-function"><i class="fa fa-check"></i><b>4.1.12</b> Basic R and the <code>barplot()</code> Function</a></li>
<li class="chapter" data-level="4.1.13" data-path="ranking.html"><a href="ranking.html#custom-color"><i class="fa fa-check"></i><b>4.1.13</b> Custom Color</a></li>
<li class="chapter" data-level="4.1.14" data-path="ranking.html"><a href="ranking.html#title-axis-label-custom-limits"><i class="fa fa-check"></i><b>4.1.14</b> Title, Axis label, Custom Limits</a></li>
<li class="chapter" data-level="4.1.15" data-path="ranking.html"><a href="ranking.html#horizontal-barplot"><i class="fa fa-check"></i><b>4.1.15</b> Horizontal Barplot</a></li>
<li class="chapter" data-level="4.1.16" data-path="ranking.html"><a href="ranking.html#bar-width-space-between-bars"><i class="fa fa-check"></i><b>4.1.16</b> Bar Width &amp; Space between Bars</a></li>
<li class="chapter" data-level="4.1.17" data-path="ranking.html"><a href="ranking.html#barplot-texture"><i class="fa fa-check"></i><b>4.1.17</b> Barplot Texture</a></li>
<li class="chapter" data-level="4.1.18" data-path="ranking.html"><a href="ranking.html#advanced-r-barplot-customization"><i class="fa fa-check"></i><b>4.1.18</b> Advanced R Barplot Customization</a></li>
<li class="chapter" data-level="4.1.19" data-path="ranking.html"><a href="ranking.html#axis-labels-orientation-with-las"><i class="fa fa-check"></i><b>4.1.19</b> Axis Labels Orientation with <code>las()</code></a></li>
<li class="chapter" data-level="4.1.20" data-path="ranking.html"><a href="ranking.html#change-group-labels-with-names.arg"><i class="fa fa-check"></i><b>4.1.20</b> Change Group Labels with <strong>names.arg</strong></a></li>
<li class="chapter" data-level="4.1.21" data-path="ranking.html"><a href="ranking.html#axis-labels-axis-title-style"><i class="fa fa-check"></i><b>4.1.21</b> Axis Labels &amp; Axis Title Style</a></li>
<li class="chapter" data-level="4.1.22" data-path="ranking.html"><a href="ranking.html#increase-margin-size"><i class="fa fa-check"></i><b>4.1.22</b> Increase Margin Size</a></li>
<li class="chapter" data-level="4.1.23" data-path="ranking.html"><a href="ranking.html#barplot-with-error-bars-1"><i class="fa fa-check"></i><b>4.1.23</b> Barplot with Error Bars</a></li>
<li class="chapter" data-level="4.1.24" data-path="ranking.html"><a href="ranking.html#customization-1"><i class="fa fa-check"></i><b>4.1.24</b> Customization</a></li>
<li class="chapter" data-level="4.1.25" data-path="ranking.html"><a href="ranking.html#standard-deviation-standard-error-or-confidence-interval"><i class="fa fa-check"></i><b>4.1.25</b> Standard Deviation, Standard Error or Confidence Interval?</a></li>
<li class="chapter" data-level="4.1.26" data-path="ranking.html"><a href="ranking.html#basic-r-use-the-arrows-function"><i class="fa fa-check"></i><b>4.1.26</b> Basic R: Use the <code>arrows()</code> Function</a></li>
<li class="chapter" data-level="4.1.27" data-path="ranking.html"><a href="ranking.html#barplot-with-number-of-observation"><i class="fa fa-check"></i><b>4.1.27</b> Barplot with Number of Observation</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ranking.html"><a href="ranking.html#radar-chart"><i class="fa fa-check"></i><b>4.2</b> Radar Chart</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="ranking.html"><a href="ranking.html#one-group-only---fmsb-library"><i class="fa fa-check"></i><b>4.2.1</b> One Group Only - <code>FMSB</code> Library</a></li>
<li class="chapter" data-level="4.2.2" data-path="ranking.html"><a href="ranking.html#customization-2"><i class="fa fa-check"></i><b>4.2.2</b> Customization</a></li>
<li class="chapter" data-level="4.2.3" data-path="ranking.html"><a href="ranking.html#several-groups"><i class="fa fa-check"></i><b>4.2.3</b> Several Groups</a></li>
<li class="chapter" data-level="4.2.4" data-path="ranking.html"><a href="ranking.html#customization-3"><i class="fa fa-check"></i><b>4.2.4</b> Customization</a></li>
<li class="chapter" data-level="4.2.5" data-path="ranking.html"><a href="ranking.html#about-axis-limits"><i class="fa fa-check"></i><b>4.2.5</b> About Axis Limits</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ranking.html"><a href="ranking.html#wordcloud"><i class="fa fa-check"></i><b>4.3</b> Wordcloud</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="ranking.html"><a href="ranking.html#wordcloud2"><i class="fa fa-check"></i><b>4.3.1</b> <code>wordcloud2</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="ranking.html"><a href="ranking.html#the-wordcloud2-library"><i class="fa fa-check"></i><b>4.3.2</b> The <strong>Wordcloud2</strong> Library</a></li>
<li class="chapter" data-level="4.3.3" data-path="ranking.html"><a href="ranking.html#color-background-color"><i class="fa fa-check"></i><b>4.3.3</b> Color &amp; Background Color</a></li>
<li class="chapter" data-level="4.3.4" data-path="ranking.html"><a href="ranking.html#shape"><i class="fa fa-check"></i><b>4.3.4</b> Shape</a></li>
<li class="chapter" data-level="4.3.5" data-path="ranking.html"><a href="ranking.html#word-orientation"><i class="fa fa-check"></i><b>4.3.5</b> Word Orientation</a></li>
<li class="chapter" data-level="4.3.6" data-path="ranking.html"><a href="ranking.html#chinese-version"><i class="fa fa-check"></i><b>4.3.6</b> Chinese Version</a></li>
<li class="chapter" data-level="4.3.7" data-path="ranking.html"><a href="ranking.html#use-letter-or-text-as-shape"><i class="fa fa-check"></i><b>4.3.7</b> Use Letter or Text as Shape</a></li>
<li class="chapter" data-level="4.3.8" data-path="ranking.html"><a href="ranking.html#export-the-wordcloud"><i class="fa fa-check"></i><b>4.3.8</b> Export the Wordcloud</a></li>
<li class="chapter" data-level="4.3.9" data-path="ranking.html"><a href="ranking.html#basic-wordcloud-in-r"><i class="fa fa-check"></i><b>4.3.9</b> Basic <code>wordcloud</code> in R</a></li>
<li class="chapter" data-level="4.3.10" data-path="ranking.html"><a href="ranking.html#text-mining-and-wordcloud-with-r"><i class="fa fa-check"></i><b>4.3.10</b> Text mining and <code>wordcloud</code> with R</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ranking.html"><a href="ranking.html#parallel-coordinates-chart"><i class="fa fa-check"></i><b>4.4</b> Parallel Coordinates Chart</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ranking.html"><a href="ranking.html#parallel-coordinates-chart-with-ggally"><i class="fa fa-check"></i><b>4.4.1</b> Parallel Coordinates Chart with ggally</a></li>
<li class="chapter" data-level="4.4.2" data-path="ranking.html"><a href="ranking.html#custom-color-theme-general-appearance"><i class="fa fa-check"></i><b>4.4.2</b> Custom Color, Theme, General Appearance</a></li>
<li class="chapter" data-level="4.4.3" data-path="ranking.html"><a href="ranking.html#scaling"><i class="fa fa-check"></i><b>4.4.3</b> Scaling</a></li>
<li class="chapter" data-level="4.4.4" data-path="ranking.html"><a href="ranking.html#highlight-a-group"><i class="fa fa-check"></i><b>4.4.4</b> Highlight a Group</a></li>
<li class="chapter" data-level="4.4.5" data-path="ranking.html"><a href="ranking.html#parallel-chart-with-the-mass-library"><i class="fa fa-check"></i><b>4.4.5</b> Parallel Chart with the <code>MASS</code> Library</a></li>
<li class="chapter" data-level="4.4.6" data-path="ranking.html"><a href="ranking.html#reorder-variables"><i class="fa fa-check"></i><b>4.4.6</b> Reorder Variables</a></li>
<li class="chapter" data-level="4.4.7" data-path="ranking.html"><a href="ranking.html#highlight-a-group-1"><i class="fa fa-check"></i><b>4.4.7</b> Highlight a Group</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ranking.html"><a href="ranking.html#lollipop-plot"><i class="fa fa-check"></i><b>4.5</b> Lollipop Plot</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ranking.html"><a href="ranking.html#most-basic-lollipop-plot"><i class="fa fa-check"></i><b>4.5.1</b> Most Basic Lollipop Plot</a></li>
<li class="chapter" data-level="4.5.2" data-path="ranking.html"><a href="ranking.html#from-1-numeric-and-1-categorical-variable"><i class="fa fa-check"></i><b>4.5.2</b> From 1 Numeric and 1 Categorical Variable</a></li>
<li class="chapter" data-level="4.5.3" data-path="ranking.html"><a href="ranking.html#custom-lollipop-chart"><i class="fa fa-check"></i><b>4.5.3</b> Custom Lollipop Chart</a></li>
<li class="chapter" data-level="4.5.4" data-path="ranking.html"><a href="ranking.html#stem"><i class="fa fa-check"></i><b>4.5.4</b> Stem</a></li>
<li class="chapter" data-level="4.5.5" data-path="ranking.html"><a href="ranking.html#general-appearance-with-theme"><i class="fa fa-check"></i><b>4.5.5</b> General Appearance with <code>theme()</code></a></li>
<li class="chapter" data-level="4.5.6" data-path="ranking.html"><a href="ranking.html#horizontal-version"><i class="fa fa-check"></i><b>4.5.6</b> Horizontal Version</a></li>
<li class="chapter" data-level="4.5.7" data-path="ranking.html"><a href="ranking.html#baseline"><i class="fa fa-check"></i><b>4.5.7</b> Baseline</a></li>
<li class="chapter" data-level="4.5.8" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-2-groups"><i class="fa fa-check"></i><b>4.5.8</b> Lollipop Chart with 2 Groups</a></li>
<li class="chapter" data-level="4.5.9" data-path="ranking.html"><a href="ranking.html#highlight-a-group-in-a-lollipop-chart"><i class="fa fa-check"></i><b>4.5.9</b> Highlight a Group in a Lollipop Chart</a></li>
<li class="chapter" data-level="4.5.10" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-conditional-color"><i class="fa fa-check"></i><b>4.5.10</b> Lollipop Chart with Conditional Color</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ranking.html"><a href="ranking.html#circular-barplot"><i class="fa fa-check"></i><b>4.6</b> Circular Barplot</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="ranking.html"><a href="ranking.html#most-basic-circular-barplot"><i class="fa fa-check"></i><b>4.6.1</b> Most Basic Circular Barplot</a></li>
<li class="chapter" data-level="4.6.2" data-path="ranking.html"><a href="ranking.html#add-labels-to-circular-barplot"><i class="fa fa-check"></i><b>4.6.2</b> Add Labels to Circular Barplot</a></li>
<li class="chapter" data-level="4.6.3" data-path="ranking.html"><a href="ranking.html#circular-barplot-with-groups"><i class="fa fa-check"></i><b>4.6.3</b> Circular Barplot with Groups</a></li>
<li class="chapter" data-level="4.6.4" data-path="ranking.html"><a href="ranking.html#space-between-groups"><i class="fa fa-check"></i><b>4.6.4</b> Space between Groups</a></li>
<li class="chapter" data-level="4.6.5" data-path="ranking.html"><a href="ranking.html#order-bars"><i class="fa fa-check"></i><b>4.6.5</b> Order Bars</a></li>
<li class="chapter" data-level="4.6.6" data-path="ranking.html"><a href="ranking.html#circular-barchart-customization"><i class="fa fa-check"></i><b>4.6.6</b> Circular Barchart Customization</a></li>
<li class="chapter" data-level="4.6.7" data-path="ranking.html"><a href="ranking.html#circular-stacked-barplot"><i class="fa fa-check"></i><b>4.6.7</b> Circular Stacked Barplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="part.html"><a href="part.html"><i class="fa fa-check"></i><b>5</b> Part of a Whole</a>
<ul>
<li class="chapter" data-level="5.1" data-path="part.html"><a href="part.html#grouped-and-stacked-barplot"><i class="fa fa-check"></i><b>5.1</b> Grouped and Stacked Barplot</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="part.html"><a href="part.html#grouped-stacked-and-percent-stacked-barplot-in-ggplot2"><i class="fa fa-check"></i><b>5.1.1</b> Grouped, Stacked and Percent Stacked Barplot in <code>ggplot2</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="part.html"><a href="part.html#stacked-barchart"><i class="fa fa-check"></i><b>5.1.2</b> Stacked Barchart</a></li>
<li class="chapter" data-level="5.1.3" data-path="part.html"><a href="part.html#percent-stacked-barchart"><i class="fa fa-check"></i><b>5.1.3</b> Percent Stacked Barchart</a></li>
<li class="chapter" data-level="5.1.4" data-path="part.html"><a href="part.html#grouped-barchart-customization"><i class="fa fa-check"></i><b>5.1.4</b> Grouped Barchart Customization</a></li>
<li class="chapter" data-level="5.1.5" data-path="part.html"><a href="part.html#small-multiple"><i class="fa fa-check"></i><b>5.1.5</b> Small Multiple</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="part.html"><a href="part.html#circular-stacked-barchart"><i class="fa fa-check"></i><b>5.2</b> Circular Stacked Barchart</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="ranking.html"><a href="ranking.html#circular-stacked-barplot"><i class="fa fa-check"></i><b>5.2.1</b> Circular Stacked Barplot</a></li>
<li class="chapter" data-level="5.2.2" data-path="part.html"><a href="part.html#stacked-barplot-for-evolution"><i class="fa fa-check"></i><b>5.2.2</b> Stacked Barplot for Evolution</a></li>
<li class="chapter" data-level="5.2.3" data-path="distributions.html"><a href="distributions.html#base-r"><i class="fa fa-check"></i><b>5.2.3</b> Base R</a></li>
<li class="chapter" data-level="5.2.4" data-path="part.html"><a href="part.html#stacking-barplot"><i class="fa fa-check"></i><b>5.2.4</b> Stacking Barplot</a></li>
<li class="chapter" data-level="5.2.5" data-path="part.html"><a href="part.html#three-periods-stacked-barplot"><i class="fa fa-check"></i><b>5.2.5</b> Three Periods Stacked Barplot</a></li>
<li class="chapter" data-level="5.2.6" data-path="part.html"><a href="part.html#base-r-1"><i class="fa fa-check"></i><b>5.2.6</b> Base R</a></li>
<li class="chapter" data-level="5.2.7" data-path="part.html"><a href="part.html#grouped-stacked-and-percent-stacked-barplot-in-base-r"><i class="fa fa-check"></i><b>5.2.7</b> Grouped, Stacked and Percent Stacked Barplot in Base R</a></li>
<li class="chapter" data-level="5.2.8" data-path="part.html"><a href="part.html#grouped-stacked-barchart"><i class="fa fa-check"></i><b>5.2.8</b> Grouped Stacked Barchart</a></li>
<li class="chapter" data-level="5.2.9" data-path="part.html"><a href="part.html#percent-stacked-barplot"><i class="fa fa-check"></i><b>5.2.9</b> Percent Stacked Barplot</a></li>
<li class="chapter" data-level="5.2.10" data-path="part.html"><a href="part.html#barplot-for-likert-type-items"><i class="fa fa-check"></i><b>5.2.10</b> Barplot for <code>likert</code> Type Items</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="part.html"><a href="part.html#treemap"><i class="fa fa-check"></i><b>5.3</b> Treemap</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="part.html"><a href="part.html#most-basic-treemap-with-r"><i class="fa fa-check"></i><b>5.3.1</b> Most Basic Treemap with R</a></li>
<li class="chapter" data-level="5.3.2" data-path="part.html"><a href="part.html#treemap-with-subgroups"><i class="fa fa-check"></i><b>5.3.2</b> Treemap with Subgroups</a></li>
<li class="chapter" data-level="5.3.3" data-path="part.html"><a href="part.html#customize-your-r-treemap"><i class="fa fa-check"></i><b>5.3.3</b> Customize your R Treemap</a></li>
<li class="chapter" data-level="5.3.4" data-path="part.html"><a href="part.html#borders"><i class="fa fa-check"></i><b>5.3.4</b> Borders</a></li>
<li class="chapter" data-level="5.3.5" data-path="part.html"><a href="part.html#general-features"><i class="fa fa-check"></i><b>5.3.5</b> General Features</a></li>
<li class="chapter" data-level="5.3.6" data-path="part.html"><a href="part.html#interactive-treemap-in-r"><i class="fa fa-check"></i><b>5.3.6</b> Interactive Treemap in R</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="part.html"><a href="part.html#donut-chart"><i class="fa fa-check"></i><b>5.4</b> Donut Chart</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="part.html"><a href="part.html#most-basic-doughnut-chart-with-ggplot2"><i class="fa fa-check"></i><b>5.4.1</b> Most Basic Doughnut Chart with <code>ggplot2</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="ranking.html"><a href="ranking.html#customization"><i class="fa fa-check"></i><b>5.4.2</b> Customization</a></li>
<li class="chapter" data-level="5.4.3" data-path="part.html"><a href="part.html#donut-thickness"><i class="fa fa-check"></i><b>5.4.3</b> Donut Thickness</a></li>
<li class="chapter" data-level="5.4.4" data-path="part.html"><a href="part.html#donut-chart-with-base-r"><i class="fa fa-check"></i><b>5.4.4</b> Donut Chart with Base R</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="part.html"><a href="part.html#piechart"><i class="fa fa-check"></i><b>5.5</b> Piechart</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="part.html"><a href="part.html#most-basic-piechart-with-pie"><i class="fa fa-check"></i><b>5.5.1</b> Most Basic Piechart with <code>pie()</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="part.html"><a href="part.html#change-labels-with-labels"><i class="fa fa-check"></i><b>5.5.2</b> Change Labels with <code>labels</code></a></li>
<li class="chapter" data-level="5.5.3" data-path="part.html"><a href="part.html#non-circular-piechart-with-edges"><i class="fa fa-check"></i><b>5.5.3</b> Non-Circular Piechart with <code>edges</code></a></li>
<li class="chapter" data-level="5.5.4" data-path="part.html"><a href="part.html#add-stripes-with-density"><i class="fa fa-check"></i><b>5.5.4</b> Add Stripes with <code>density</code></a></li>
<li class="chapter" data-level="5.5.5" data-path="part.html"><a href="part.html#color-with-col-and-border"><i class="fa fa-check"></i><b>5.5.5</b> Color with <code>col</code> and <code>border</code></a></li>
<li class="chapter" data-level="5.5.6" data-path="part.html"><a href="part.html#ggplot2-piechart"><i class="fa fa-check"></i><b>5.5.6</b> Ggplot2 Piechart</a></li>
<li class="chapter" data-level="5.5.7" data-path="part.html"><a href="part.html#improve-appearance"><i class="fa fa-check"></i><b>5.5.7</b> Improve Appearance</a></li>
<li class="chapter" data-level="5.5.8" data-path="part.html"><a href="part.html#adding-labels-with-geom_text"><i class="fa fa-check"></i><b>5.5.8</b> Adding Labels with <code>geom_text()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="part.html"><a href="part.html#dendrogram"><i class="fa fa-check"></i><b>5.6</b> Dendrogram</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="part.html"><a href="part.html#dendrogram-fromn-hierarchical-data"><i class="fa fa-check"></i><b>5.6.1</b> Dendrogram fromn Hierarchical Data</a></li>
<li class="chapter" data-level="5.6.2" data-path="part.html"><a href="part.html#dendrogram-from-edge-list"><i class="fa fa-check"></i><b>5.6.2</b> Dendrogram from Edge List</a></li>
<li class="chapter" data-level="5.6.3" data-path="part.html"><a href="part.html#dendrogram-from-a-nested-dataframe"><i class="fa fa-check"></i><b>5.6.3</b> Dendrogram from a Nested Dataframe</a></li>
<li class="chapter" data-level="5.6.4" data-path="part.html"><a href="part.html#dendrogram-customization-with-r-and-ggraph"><i class="fa fa-check"></i><b>5.6.4</b> Dendrogram Customization with R and <code>ggraph</code></a></li>
<li class="chapter" data-level="5.6.5" data-path="part.html"><a href="part.html#circular-or-linear-layout"><i class="fa fa-check"></i><b>5.6.5</b> Circular or Linear <code>layout</code></a></li>
<li class="chapter" data-level="5.6.6" data-path="part.html"><a href="part.html#edge-style"><i class="fa fa-check"></i><b>5.6.6</b> Edge Style</a></li>
<li class="chapter" data-level="5.6.7" data-path="part.html"><a href="part.html#labels-and-nodes"><i class="fa fa-check"></i><b>5.6.7</b> Labels and Nodes</a></li>
<li class="chapter" data-level="5.6.8" data-path="part.html"><a href="part.html#customize-aesthetics"><i class="fa fa-check"></i><b>5.6.8</b> Customize Aesthetics</a></li>
<li class="chapter" data-level="5.6.9" data-path="part.html"><a href="part.html#circular-dendrogram-with-r-and-ggraph"><i class="fa fa-check"></i><b>5.6.9</b> Circular Dendrogram with R and ggraph</a></li>
<li class="chapter" data-level="5.6.10" data-path="part.html"><a href="part.html#interactive-dendrogram-with-r"><i class="fa fa-check"></i><b>5.6.10</b> Interactive Dendrogram with R</a></li>
<li class="chapter" data-level="5.6.11" data-path="part.html"><a href="part.html#dendrogram-from-clustering-result"><i class="fa fa-check"></i><b>5.6.11</b> Dendrogram from <code>Clustering</code> Result</a></li>
<li class="chapter" data-level="5.6.12" data-path="part.html"><a href="part.html#zoom-on-a-group"><i class="fa fa-check"></i><b>5.6.12</b> Zoom on a Group</a></li>
<li class="chapter" data-level="5.6.13" data-path="part.html"><a href="part.html#dendrogram-with-color-and-legend-in-r"><i class="fa fa-check"></i><b>5.6.13</b> Dendrogram with Color and Legend in R</a></li>
<li class="chapter" data-level="5.6.14" data-path="part.html"><a href="part.html#more-customization-with-dendextend"><i class="fa fa-check"></i><b>5.6.14</b> More Customization with <code>Dendextend</code></a></li>
<li class="chapter" data-level="5.6.15" data-path="part.html"><a href="part.html#customized-dendrogram-with-r-and-the-dendextend-package"><i class="fa fa-check"></i><b>5.6.15</b> Customized Dendrogram with R and the Dendextend Package</a></li>
<li class="chapter" data-level="5.6.16" data-path="part.html"><a href="part.html#the-set-function"><i class="fa fa-check"></i><b>5.6.16</b> The <code>set()</code> Function</a></li>
<li class="chapter" data-level="5.6.17" data-path="part.html"><a href="part.html#highlight-clusters"><i class="fa fa-check"></i><b>5.6.17</b> Highlight Clusters</a></li>
<li class="chapter" data-level="5.6.18" data-path="part.html"><a href="part.html#comparing-with-an-expected-clustering"><i class="fa fa-check"></i><b>5.6.18</b> Comparing with an Expected Clustering</a></li>
<li class="chapter" data-level="5.6.19" data-path="part.html"><a href="part.html#comparing-2-dendrograms-with-tanglegram"><i class="fa fa-check"></i><b>5.6.19</b> Comparing 2 Dendrograms with <code>tanglegram()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="part.html"><a href="part.html#circular-packing"><i class="fa fa-check"></i><b>5.7</b> Circular Packing</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="part.html"><a href="part.html#basic-circle-packing-with-one-level"><i class="fa fa-check"></i><b>5.7.1</b> Basic Circle Packing with One Level</a></li>
<li class="chapter" data-level="5.7.2" data-path="part.html"><a href="part.html#circle-packing-customization-with-r"><i class="fa fa-check"></i><b>5.7.2</b> Circle Packing Customization with R</a></li>
<li class="chapter" data-level="5.7.3" data-path="part.html"><a href="part.html#map-color-to-bubble-value"><i class="fa fa-check"></i><b>5.7.3</b> Map Color to Bubble Value</a></li>
<li class="chapter" data-level="5.7.4" data-path="part.html"><a href="part.html#background-customization"><i class="fa fa-check"></i><b>5.7.4</b> Background Customization</a></li>
<li class="chapter" data-level="5.7.5" data-path="part.html"><a href="part.html#space-between-bubbles"><i class="fa fa-check"></i><b>5.7.5</b> Space between Bubbles</a></li>
<li class="chapter" data-level="5.7.6" data-path="part.html"><a href="part.html#interactive-circle-packing-with-r"><i class="fa fa-check"></i><b>5.7.6</b> Interactive Circle Packing with R</a></li>
<li class="chapter" data-level="5.7.7" data-path="part.html"><a href="part.html#basic-circle-packing-with-several-hierarchy-level"><i class="fa fa-check"></i><b>5.7.7</b> Basic Circle Packing with Several Hierarchy Level</a></li>
<li class="chapter" data-level="5.7.8" data-path="part.html"><a href="part.html#input-concept"><i class="fa fa-check"></i><b>5.7.8</b> Input &amp; Concept</a></li>
<li class="chapter" data-level="5.7.9" data-path="part.html"><a href="part.html#switching-to-another-chart-type"><i class="fa fa-check"></i><b>5.7.9</b> Switching to another Chart Type</a></li>
<li class="chapter" data-level="5.7.10" data-path="part.html"><a href="part.html#customized-circle-packing-with-r-and-ggraph"><i class="fa fa-check"></i><b>5.7.10</b> Customized Circle Packing with R and ggraph</a></li>
<li class="chapter" data-level="5.7.11" data-path="part.html"><a href="part.html#map-color-to-hierarchy-depth"><i class="fa fa-check"></i><b>5.7.11</b> Map Color to Hierarchy Depth</a></li>
<li class="chapter" data-level="5.7.12" data-path="part.html"><a href="part.html#map-color-to-hierarchy-depth-1"><i class="fa fa-check"></i><b>5.7.12</b> Map Color to Hierarchy Depth</a></li>
<li class="chapter" data-level="5.7.13" data-path="part.html"><a href="part.html#circular-packing-with-hidden-first-level-of-hierarchy"><i class="fa fa-check"></i><b>5.7.13</b> Circular Packing with Hidden First Level of Hierarchy</a></li>
<li class="chapter" data-level="5.7.14" data-path="part.html"><a href="part.html#hiding-the-first-level-for-better-styling"><i class="fa fa-check"></i><b>5.7.14</b> Hiding the First Level for Better Styling</a></li>
<li class="chapter" data-level="5.7.15" data-path="part.html"><a href="part.html#add-labels-to-a-specific-level-of-the-hierarchy"><i class="fa fa-check"></i><b>5.7.15</b> Add Labels to a Specific Level of the Hierarchy</a></li>
<li class="chapter" data-level="5.7.16" data-path="part.html"><a href="part.html#zoomable-circle-packing-with-r-and-circlepacker"><i class="fa fa-check"></i><b>5.7.16</b> Zoomable Circle Packing with R and circlePacker</a></li>
<li class="chapter" data-level="5.7.17" data-path="part.html"><a href="part.html#circular-packing-fom-edge-list"><i class="fa fa-check"></i><b>5.7.17</b> Circular Packing fom Edge List</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="evolution.html"><a href="evolution.html"><i class="fa fa-check"></i><b>6</b> Evolution</a>
<ul>
<li class="chapter" data-level="6.1" data-path="evolution.html"><a href="evolution.html#line-chart"><i class="fa fa-check"></i><b>6.1</b> Line Chart</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="evolution.html"><a href="evolution.html#line-chart-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.1.1</b> Line Chart with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="evolution.html"><a href="evolution.html#customize-the-line-chart"><i class="fa fa-check"></i><b>6.1.2</b> Customize the Line Chart</a></li>
<li class="chapter" data-level="6.1.3" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.1.3</b> Connected scatterplot with R and ggplot2</a></li>
<li class="chapter" data-level="6.1.4" data-path="correlation.html"><a href="correlation.html#most-basic-connected-scatterplot-geom_point-and-geom_line"><i class="fa fa-check"></i><b>6.1.4</b> Most Basic Connected Scatterplot: <code>geom_point()</code> and <code>geom_line()</code></a></li>
<li class="chapter" data-level="6.1.5" data-path="correlation.html"><a href="correlation.html#customize-the-connected-scatterplot"><i class="fa fa-check"></i><b>6.1.5</b> Customize the Connected Scatterplot</a></li>
<li class="chapter" data-level="6.1.6" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-to-show-an-evolution"><i class="fa fa-check"></i><b>6.1.6</b> Connected Scatterplot to Show an Evolution</a></li>
<li class="chapter" data-level="6.1.7" data-path="evolution.html"><a href="evolution.html#line-plot-with-log-scale"><i class="fa fa-check"></i><b>6.1.7</b> Line Plot with Log Scale</a></li>
<li class="chapter" data-level="6.1.8" data-path="evolution.html"><a href="evolution.html#without-log-transform"><i class="fa fa-check"></i><b>6.1.8</b> Without Log Transform</a></li>
<li class="chapter" data-level="6.1.9" data-path="evolution.html"><a href="evolution.html#multi-groups-line-chart-with-ggplot2"><i class="fa fa-check"></i><b>6.1.9</b> Multi Groups Line Chart with ggplot2</a></li>
<li class="chapter" data-level="6.1.10" data-path="evolution.html"><a href="evolution.html#customize-the-grouped-line-chart"><i class="fa fa-check"></i><b>6.1.10</b> Customize the Grouped Line Chart</a></li>
<li class="chapter" data-level="6.1.11" data-path="correlation.html"><a href="correlation.html#linear-model-and-confidence-interval-in-ggplot2"><i class="fa fa-check"></i><b>6.1.11</b> Linear Model and Confidence Interval in ggplot2</a></li>
<li class="chapter" data-level="6.1.12" data-path="evolution.html"><a href="evolution.html#line-chart-annotation-with-ggplot2"><i class="fa fa-check"></i><b>6.1.12</b> Line Chart Annotation with ggplot2</a></li>
<li class="chapter" data-level="6.1.13" data-path="evolution.html"><a href="evolution.html#dual-y-axis-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.1.13</b> Dual Y Axis with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.1.14" data-path="evolution.html"><a href="evolution.html#adding-a-second-y-axis-with-sec.axis-the-idea"><i class="fa fa-check"></i><b>6.1.14</b> Adding a Second Y Axis with <code>sec.axis()</code>: The Idea</a></li>
<li class="chapter" data-level="6.1.15" data-path="evolution.html"><a href="evolution.html#show-2-series-on-the-same-line-chart-with-sec.axis"><i class="fa fa-check"></i><b>6.1.15</b> Show 2 Series on the Same Line Chart with <code>sec.axis()</code></a></li>
<li class="chapter" data-level="6.1.16" data-path="evolution.html"><a href="evolution.html#dual-y-axis-customization-with-ggplot2"><i class="fa fa-check"></i><b>6.1.16</b> Dual Y Axis Customization with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.1.17" data-path="evolution.html"><a href="evolution.html#barplot-with-overlapping-line-chart"><i class="fa fa-check"></i><b>6.1.17</b> Barplot with Overlapping Line Chart</a></li>
<li class="chapter" data-level="6.1.18" data-path="evolution.html"><a href="evolution.html#line-chart-with-error-envelop-ggplot2-and-geom_ribbon"><i class="fa fa-check"></i><b>6.1.18</b> Line Chart with Error Envelop: ggplot2 and geom_ribbon()</a></li>
<li class="chapter" data-level="6.1.19" data-path="evolution.html"><a href="evolution.html#spaghetti-plot"><i class="fa fa-check"></i><b>6.1.19</b> Spaghetti Plot</a></li>
<li class="chapter" data-level="6.1.20" data-path="evolution.html"><a href="evolution.html#change-line-chart-color-according-to-y-value"><i class="fa fa-check"></i><b>6.1.20</b> Change Line Chart Color according to Y Value</a></li>
<li class="chapter" data-level="6.1.21" data-path="correlation.html"><a href="correlation.html#add-a-legend-to-a-base-r-chart"><i class="fa fa-check"></i><b>6.1.21</b> Add a Legend to a Base R Chart</a></li>
<li class="chapter" data-level="6.1.22" data-path="evolution.html"><a href="evolution.html#reversed-y-axis-in-base-r"><i class="fa fa-check"></i><b>6.1.22</b> Reversed Y Axis in Base R</a></li>
<li class="chapter" data-level="6.1.23" data-path="correlation.html"><a href="correlation.html#scatterplot-with-polynomial-curve-fitting"><i class="fa fa-check"></i><b>6.1.23</b> Scatterplot with Polynomial Curve Fitting</a></li>
<li class="chapter" data-level="6.1.24" data-path="evolution.html"><a href="evolution.html#base-r-graph-parameters-a-cheatsheet"><i class="fa fa-check"></i><b>6.1.24</b> Base R Graph Parameters: A Cheatsheet</a></li>
<li class="chapter" data-level="6.1.25" data-path="evolution.html"><a href="evolution.html#dual-y-axis-in-r"><i class="fa fa-check"></i><b>6.1.25</b> Dual Y Axis in R</a></li>
<li class="chapter" data-level="6.1.26" data-path="evolution.html"><a href="evolution.html#adding-a-second-y-axis-with-sec.axis-the-idea-1"><i class="fa fa-check"></i><b>6.1.26</b> Adding a Second Y axis with <code>sec.axis()</code>: The Idea</a></li>
<li class="chapter" data-level="6.1.27" data-path="evolution.html"><a href="evolution.html#show-2-series-on-the-same-line-chart-with-sec.axis-1"><i class="fa fa-check"></i><b>6.1.27</b> Show 2 Series on the Same Line Chart with <code>sec.axis()</code></a></li>
<li class="chapter" data-level="6.1.28" data-path="evolution.html"><a href="evolution.html#dual-y-axis-customization-with-ggplot2-1"><i class="fa fa-check"></i><b>6.1.28</b> Dual Y Axis Customization with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.1.29" data-path="evolution.html"><a href="evolution.html#barplot-with-overlapping-line-chart-1"><i class="fa fa-check"></i><b>6.1.29</b> Barplot with Overlapping Line Chart</a></li>
<li class="chapter" data-level="6.1.30" data-path="evolution.html"><a href="evolution.html#dual-y-axis-in-r-1"><i class="fa fa-check"></i><b>6.1.30</b> Dual Y axis in R</a></li>
<li class="chapter" data-level="6.1.31" data-path="evolution.html"><a href="evolution.html#dual-y-axis-line-chart"><i class="fa fa-check"></i><b>6.1.31</b> Dual Y Axis Line Chart</a></li>
<li class="chapter" data-level="6.1.32" data-path="evolution.html"><a href="evolution.html#add-legend"><i class="fa fa-check"></i><b>6.1.32</b> Add Legend</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="evolution.html"><a href="evolution.html#area-chart"><i class="fa fa-check"></i><b>6.2</b> Area Chart</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="evolution.html"><a href="evolution.html#area-chart-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.2.1</b> Area Chart with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="evolution.html"><a href="evolution.html#customize-the-line-chart-1"><i class="fa fa-check"></i><b>6.2.2</b> Customize the Line Chart</a></li>
<li class="chapter" data-level="6.2.3" data-path="evolution.html"><a href="evolution.html#basic-stacked-area-chart-with-r"><i class="fa fa-check"></i><b>6.2.3</b> Basic Stacked Area Chart with R</a></li>
<li class="chapter" data-level="6.2.4" data-path="evolution.html"><a href="evolution.html#control-stacking-order-with-ggplot2"><i class="fa fa-check"></i><b>6.2.4</b> Control Stacking Order with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.2.5" data-path="evolution.html"><a href="evolution.html#proportional-stacked-area-chart"><i class="fa fa-check"></i><b>6.2.5</b> Proportional Stacked Area Chart</a></li>
<li class="chapter" data-level="6.2.6" data-path="evolution.html"><a href="evolution.html#color-style"><i class="fa fa-check"></i><b>6.2.6</b> Color &amp; Style</a></li>
<li class="chapter" data-level="6.2.7" data-path="evolution.html"><a href="evolution.html#stacking-area-charts"><i class="fa fa-check"></i><b>6.2.7</b> Stacking Area Charts</a></li>
<li class="chapter" data-level="6.2.8" data-path="evolution.html"><a href="evolution.html#example-mental-arithmetic"><i class="fa fa-check"></i><b>6.2.8</b> Example: Mental Arithmetic</a></li>
<li class="chapter" data-level="6.2.9" data-path="evolution.html"><a href="evolution.html#interactive-area-chart-with-r-and-plotly"><i class="fa fa-check"></i><b>6.2.9</b> Interactive Area Chart with R and plotly</a></li>
<li class="chapter" data-level="6.2.10" data-path="evolution.html"><a href="evolution.html#basic-line-chart-with-ggplot2-and-geom_line-3"><i class="fa fa-check"></i><b>6.2.10</b> Basic Line Chart with ggplot2 and <code>geom_line()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="evolution.html"><a href="evolution.html#streamgraph"><i class="fa fa-check"></i><b>6.3</b> Streamgraph</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="evolution.html"><a href="evolution.html#most-basic-streamgraph"><i class="fa fa-check"></i><b>6.3.1</b> Most Basic Streamgraph</a></li>
<li class="chapter" data-level="6.3.2" data-path="evolution.html"><a href="evolution.html#control-streamgraph-offset"><i class="fa fa-check"></i><b>6.3.2</b> Control Streamgraph Offset</a></li>
<li class="chapter" data-level="6.3.3" data-path="evolution.html"><a href="evolution.html#change-streamgraph-shape"><i class="fa fa-check"></i><b>6.3.3</b> Change Streamgraph Shape</a></li>
<li class="chapter" data-level="6.3.4" data-path="evolution.html"><a href="evolution.html#change-streamgraph-color"><i class="fa fa-check"></i><b>6.3.4</b> Change Streamgraph Color</a></li>
<li class="chapter" data-level="6.3.5" data-path="evolution.html"><a href="evolution.html#streamgraph-with-dropdown-button"><i class="fa fa-check"></i><b>6.3.5</b> Streamgraph with Dropdown Button</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="evolution.html"><a href="evolution.html#time-series"><i class="fa fa-check"></i><b>6.4</b> Time Series</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="evolution.html"><a href="evolution.html#time-series-with-ggplot2"><i class="fa fa-check"></i><b>6.4.1</b> Time Series with <code>Ggplot2</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="evolution.html"><a href="evolution.html#format-used-on-the-x-axis"><i class="fa fa-check"></i><b>6.4.2</b> Format used on the X Axis</a></li>
<li class="chapter" data-level="6.4.3" data-path="evolution.html"><a href="evolution.html#breaks-and-minor-breaks"><i class="fa fa-check"></i><b>6.4.3</b> Breaks and Minor Breaks</a></li>
<li class="chapter" data-level="6.4.4" data-path="evolution.html"><a href="evolution.html#add-angle-to-x-axis-labels"><i class="fa fa-check"></i><b>6.4.4</b> Add Angle to X Axis Labels</a></li>
<li class="chapter" data-level="6.4.5" data-path="evolution.html"><a href="evolution.html#select-time-frame"><i class="fa fa-check"></i><b>6.4.5</b> Select Time Frame</a></li>
<li class="chapter" data-level="6.4.6" data-path="evolution.html"><a href="evolution.html#line-chart-annotation-with-ggplot2-1"><i class="fa fa-check"></i><b>6.4.6</b> Line Chart Annotation with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.4.7" data-path="evolution.html"><a href="evolution.html#dual-y-axis-with-r-and-ggplot2-1"><i class="fa fa-check"></i><b>6.4.7</b> Dual Y Axis with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.4.8" data-path="evolution.html"><a href="evolution.html#using-the-ggplotly-function"><i class="fa fa-check"></i><b>6.4.8</b> Using the <code>ggplotly()</code> Function</a></li>
<li class="chapter" data-level="6.4.9" data-path="evolution.html"><a href="evolution.html#using-plot_ly"><i class="fa fa-check"></i><b>6.4.9</b> Using <code>plot_ly()</code></a></li>
<li class="chapter" data-level="6.4.10" data-path="evolution.html"><a href="evolution.html#an-introduction-to-interactive-time-series-with-r-and-dygraphs"><i class="fa fa-check"></i><b>6.4.10</b> An Introduction to Interactive Time Series with R and Dygraphs</a></li>
<li class="chapter" data-level="6.4.11" data-path="evolution.html"><a href="evolution.html#if-time-is-a-numeric-variable"><i class="fa fa-check"></i><b>6.4.11</b> If Time is a <code>numeric</code> Variable</a></li>
<li class="chapter" data-level="6.4.12" data-path="evolution.html"><a href="evolution.html#if-time-is-a-date-variable"><i class="fa fa-check"></i><b>6.4.12</b> If Time is a <code>date</code> Variable</a></li>
<li class="chapter" data-level="6.4.13" data-path="evolution.html"><a href="evolution.html#several-series"><i class="fa fa-check"></i><b>6.4.13</b> Several Series</a></li>
<li class="chapter" data-level="6.4.14" data-path="evolution.html"><a href="evolution.html#getting-the-date-format"><i class="fa fa-check"></i><b>6.4.14</b> Getting the Date Format</a></li>
<li class="chapter" data-level="6.4.15" data-path="evolution.html"><a href="evolution.html#time-series-with-dygraph"><i class="fa fa-check"></i><b>6.4.15</b> Time Series With Dygraph</a></li>
<li class="chapter" data-level="6.4.16" data-path="evolution.html"><a href="evolution.html#area-chart-1"><i class="fa fa-check"></i><b>6.4.16</b> Area Chart</a></li>
<li class="chapter" data-level="6.4.17" data-path="evolution.html"><a href="evolution.html#step-chart"><i class="fa fa-check"></i><b>6.4.17</b> Step Chart</a></li>
<li class="chapter" data-level="6.4.18" data-path="ranking.html"><a href="ranking.html#lollipop-plot"><i class="fa fa-check"></i><b>6.4.18</b> Lollipop Plot</a></li>
<li class="chapter" data-level="6.4.19" data-path="evolution.html"><a href="evolution.html#candlestick-chart"><i class="fa fa-check"></i><b>6.4.19</b> Candlestick Chart</a></li>
<li class="chapter" data-level="6.4.20" data-path="evolution.html"><a href="evolution.html#line-chart-with-interval"><i class="fa fa-check"></i><b>6.4.20</b> Line Chart with Interval</a></li>
<li class="chapter" data-level="6.4.21" data-path="evolution.html"><a href="evolution.html#custom-dygraphs-time-series-example"><i class="fa fa-check"></i><b>6.4.21</b> Custom Dygraphs Time Series Example</a></li>
<li class="chapter" data-level="6.4.22" data-path="evolution.html"><a href="evolution.html#heatmap-for-time-series"><i class="fa fa-check"></i><b>6.4.22</b> Heatmap for Time Series</a></li>
<li class="chapter" data-level="6.4.23" data-path="evolution.html"><a href="evolution.html#dual-y-axis-in-r-2"><i class="fa fa-check"></i><b>6.4.23</b> Dual Y Axis in R</a></li>
<li class="chapter" data-level="6.4.24" data-path="evolution.html"><a href="evolution.html#dual-y-axis-line-chart-1"><i class="fa fa-check"></i><b>6.4.24</b> Dual Y Axis Line Chart</a></li>
<li class="chapter" data-level="6.4.25" data-path="evolution.html"><a href="evolution.html#add-legend-1"><i class="fa fa-check"></i><b>6.4.25</b> Add Legend</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>7</b> Map</a>
<ul>
<li class="chapter" data-level="7.1" data-path="map.html"><a href="map.html#basic-map"><i class="fa fa-check"></i><b>7.1</b> Basic Map</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="map.html"><a href="map.html#background-map-in-r"><i class="fa fa-check"></i><b>7.1.1</b> Background map in R</a></li>
<li class="chapter" data-level="7.1.2" data-path="map.html"><a href="map.html#most-basic-background-map-with-r-and-leaflet"><i class="fa fa-check"></i><b>7.1.2</b> Most Basic Background Map with R and Leaflet</a></li>
<li class="chapter" data-level="7.1.3" data-path="map.html"><a href="map.html#change-background-tile-with-leaflet-and-r"><i class="fa fa-check"></i><b>7.1.3</b> Change Background Tile with <code>leaflet</code> and R</a></li>
<li class="chapter" data-level="7.1.4" data-path="map.html"><a href="map.html#the-ggmap-package-for-static-maps-with-background-titles"><i class="fa fa-check"></i><b>7.1.4</b> The <code>ggmap</code> Package for Static Maps with Background Titles</a></li>
<li class="chapter" data-level="7.1.5" data-path="map.html"><a href="map.html#calling-stamen-background"><i class="fa fa-check"></i><b>7.1.5</b> Calling Stamen Background</a></li>
<li class="chapter" data-level="7.1.6" data-path="map.html"><a href="map.html#the-maps-mapdata-and-oz-packages-to-get-most-common-boundaries"><i class="fa fa-check"></i><b>7.1.6</b> The <code>Maps</code>, <code>Mapdata</code> and <code>Oz</code> Packages to get Most Common Boundaries</a></li>
<li class="chapter" data-level="7.1.7" data-path="map.html"><a href="map.html#mapdata-package"><i class="fa fa-check"></i><b>7.1.7</b> <code>mapdata</code> Package</a></li>
<li class="chapter" data-level="7.1.8" data-path="map.html"><a href="map.html#oz-package"><i class="fa fa-check"></i><b>7.1.8</b> <code>oz</code> Package</a></li>
<li class="chapter" data-level="7.1.9" data-path="map.html"><a href="map.html#rgdal-and-geojsonio-to-read-shapefiles-and-.geojson-files"><i class="fa fa-check"></i><b>7.1.9</b> <code>Rgdal</code> and <code>Geojsonio</code> to Read Shapefiles and .geojson Files</a></li>
<li class="chapter" data-level="7.1.10" data-path="map.html"><a href="map.html#find-and-download-a-shapefile"><i class="fa fa-check"></i><b>7.1.10</b> Find and Download a Shapefile</a></li>
<li class="chapter" data-level="7.1.11" data-path="map.html"><a href="map.html#read-it-with-rgdal"><i class="fa fa-check"></i><b>7.1.11</b> Read it with <code>rgdal</code></a></li>
<li class="chapter" data-level="7.1.12" data-path="map.html"><a href="map.html#plot-it-with-base-r"><i class="fa fa-check"></i><b>7.1.12</b> Plot it with <code>base R</code></a></li>
<li class="chapter" data-level="7.1.13" data-path="map.html"><a href="map.html#plot-it-with-ggplot2"><i class="fa fa-check"></i><b>7.1.13</b> Plot it with <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.1.14" data-path="map.html"><a href="map.html#open-and-plot-geojson-files-in-r"><i class="fa fa-check"></i><b>7.1.14</b> Open and Plot Geojson files in R</a></li>
<li class="chapter" data-level="7.1.15" data-path="map.html"><a href="map.html#find-and-download-a-.geojson-file"><i class="fa fa-check"></i><b>7.1.15</b> Find and download a <code>.geoJSON</code> file</a></li>
<li class="chapter" data-level="7.1.16" data-path="map.html"><a href="map.html#plot-it-with-base-r-1"><i class="fa fa-check"></i><b>7.1.16</b> Plot it with <code>base R</code></a></li>
<li class="chapter" data-level="7.1.17" data-path="map.html"><a href="map.html#plot-it-with-ggplot2-1"><i class="fa fa-check"></i><b>7.1.17</b> Plot it with <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.1.18" data-path="map.html"><a href="map.html#geospatial-data-manipulation"><i class="fa fa-check"></i><b>7.1.18</b> Geospatial Data Manipulation</a></li>
<li class="chapter" data-level="7.1.19" data-path="map.html"><a href="map.html#simplify-geospatial-object"><i class="fa fa-check"></i><b>7.1.19</b> Simplify Geospatial Object</a></li>
<li class="chapter" data-level="7.1.20" data-path="map.html"><a href="map.html#compute-region-centroid"><i class="fa fa-check"></i><b>7.1.20</b> Compute Region Centroid</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="map.html"><a href="map.html#choropleth-map"><i class="fa fa-check"></i><b>7.2</b> Choropleth Map</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="map.html"><a href="map.html#choropleth-map-with-r-and-ggplot2"><i class="fa fa-check"></i><b>7.2.1</b> Choropleth map with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.2.2" data-path="map.html"><a href="map.html#basic-background-map"><i class="fa fa-check"></i><b>7.2.2</b> Basic Background Map</a></li>
<li class="chapter" data-level="7.2.3" data-path="map.html"><a href="map.html#read-the-numeric-variable"><i class="fa fa-check"></i><b>7.2.3</b> Read the Numeric Variable</a></li>
<li class="chapter" data-level="7.2.4" data-path="map.html"><a href="map.html#merge-geospatial-and-numeric-data"><i class="fa fa-check"></i><b>7.2.4</b> Merge Geospatial and Numeric Data</a></li>
<li class="chapter" data-level="7.2.5" data-path="map.html"><a href="map.html#read-the-numeric-variable-1"><i class="fa fa-check"></i><b>7.2.5</b> Read the Numeric Variable</a></li>
<li class="chapter" data-level="7.2.6" data-path="map.html"><a href="map.html#customized-choropleth-map-with-r-and-ggplot2"><i class="fa fa-check"></i><b>7.2.6</b> Customized Choropleth Map with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.2.7" data-path="map.html"><a href="map.html#choropleth-map-with-r"><i class="fa fa-check"></i><b>7.2.7</b> Choropleth Map with R</a></li>
<li class="chapter" data-level="7.2.8" data-path="map.html"><a href="map.html#find-and-download-a-shape-file"><i class="fa fa-check"></i><b>7.2.8</b> Find and Download a Shape File</a></li>
<li class="chapter" data-level="7.2.9" data-path="map.html"><a href="map.html#plot-the-map"><i class="fa fa-check"></i><b>7.2.9</b> Plot the Map</a></li>
<li class="chapter" data-level="7.2.10" data-path="map.html"><a href="map.html#visualize-the-numeric-variable"><i class="fa fa-check"></i><b>7.2.10</b> Visualize the Numeric Variable</a></li>
<li class="chapter" data-level="7.2.11" data-path="map.html"><a href="map.html#build-the-choropleth"><i class="fa fa-check"></i><b>7.2.11</b> Build the Choropleth</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="map.html"><a href="map.html#interactive-choropleth-map"><i class="fa fa-check"></i><b>7.3</b> Interactive Choropleth Map</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="map.html"><a href="map.html#find-download-and-load-geospatial-data"><i class="fa fa-check"></i><b>7.3.1</b> Find, Download and Load Geospatial Data</a></li>
<li class="chapter" data-level="7.3.2" data-path="map.html"><a href="map.html#default-choropleth"><i class="fa fa-check"></i><b>7.3.2</b> Default Choropleth</a></li>
<li class="chapter" data-level="7.3.3" data-path="map.html"><a href="map.html#visualize-the-numeric-variable-1"><i class="fa fa-check"></i><b>7.3.3</b> Visualize the Numeric Variable</a></li>
<li class="chapter" data-level="7.3.4" data-path="map.html"><a href="map.html#change-color-scale"><i class="fa fa-check"></i><b>7.3.4</b> Change Color Scale</a></li>
<li class="chapter" data-level="7.3.5" data-path="map.html"><a href="map.html#customizied-leaflet-choropleth-map"><i class="fa fa-check"></i><b>7.3.5</b> Customizied <code>leaflet</code> Choropleth Map</a></li>
<li class="chapter" data-level="7.3.6" data-path="map.html"><a href="map.html#basic-choropleth-map-with-the-cartography-package"><i class="fa fa-check"></i><b>7.3.6</b> Basic Choropleth Map with the Cartography Package</a></li>
<li class="chapter" data-level="7.3.7" data-path="map.html"><a href="map.html#data-provided-in-a-shape-file"><i class="fa fa-check"></i><b>7.3.7</b> Data Provided in a Shape File</a></li>
<li class="chapter" data-level="7.3.8" data-path="map.html"><a href="map.html#customized-choropleth-map-with-the-cartography-package"><i class="fa fa-check"></i><b>7.3.8</b> Customized Choropleth Map with the Cartography Package</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="map.html"><a href="map.html#hexbin-map"><i class="fa fa-check"></i><b>7.4</b> Hexbin Map</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="map.html"><a href="map.html#hexbin-map-in-r-example-with-us-states"><i class="fa fa-check"></i><b>7.4.1</b> Hexbin Map in R: Example with US states</a></li>
<li class="chapter" data-level="7.4.2" data-path="map.html"><a href="map.html#ggplot2-and-state-name"><i class="fa fa-check"></i><b>7.4.2</b> <code>ggplot2</code> and State Name</a></li>
<li class="chapter" data-level="7.4.3" data-path="map.html"><a href="map.html#basic-choropleth"><i class="fa fa-check"></i><b>7.4.3</b> Basic Choropleth</a></li>
<li class="chapter" data-level="7.4.4" data-path="map.html"><a href="map.html#customized-hexbin-choropleth-map"><i class="fa fa-check"></i><b>7.4.4</b> Customized Hexbin Choropleth Map</a></li>
<li class="chapter" data-level="7.4.5" data-path="map.html"><a href="map.html#hexbin-map-from-list-of-coordinates"><i class="fa fa-check"></i><b>7.4.5</b> Hexbin Map from List of Coordinates</a></li>
<li class="chapter" data-level="7.4.6" data-path="map.html"><a href="map.html#hexbin-map-for-2d-density-visualization"><i class="fa fa-check"></i><b>7.4.6</b> Hexbin Map for 2D Density Visualization</a></li>
<li class="chapter" data-level="7.4.7" data-path="map.html"><a href="map.html#hexbin-maps"><i class="fa fa-check"></i><b>7.4.7</b> Hexbin Maps</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="map.html"><a href="map.html#cartogram"><i class="fa fa-check"></i><b>7.5</b> Cartogram</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="map.html"><a href="map.html#basic-cartogram-with-r"><i class="fa fa-check"></i><b>7.5.1</b> Basic Cartogram with R</a></li>
<li class="chapter" data-level="7.5.2" data-path="map.html"><a href="map.html#distort-country-size-with-cartogram"><i class="fa fa-check"></i><b>7.5.2</b> Distort Country Size with <code>cartogram</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="map.html"><a href="map.html#cartogram-and-choropleth"><i class="fa fa-check"></i><b>7.5.3</b> Cartogram and Choropleth</a></li>
<li class="chapter" data-level="7.5.4" data-path="correlation.html"><a href="correlation.html#make-it-pretty"><i class="fa fa-check"></i><b>7.5.4</b> Make it Pretty</a></li>
<li class="chapter" data-level="7.5.5" data-path="map.html"><a href="map.html#application-on-hexbin-map"><i class="fa fa-check"></i><b>7.5.5</b> Application on Hexbin Map</a></li>
<li class="chapter" data-level="7.5.6" data-path="map.html"><a href="map.html#basic-cartogram-with-r-1"><i class="fa fa-check"></i><b>7.5.6</b> Basic Cartogram with R</a></li>
<li class="chapter" data-level="7.5.7" data-path="map.html"><a href="map.html#distort-hexagone-size-with-cartogram"><i class="fa fa-check"></i><b>7.5.7</b> Distort Hexagone Size with <code>cartogram</code></a></li>
<li class="chapter" data-level="7.5.8" data-path="map.html"><a href="map.html#cartogram-and-choropleth-1"><i class="fa fa-check"></i><b>7.5.8</b> Cartogram and Choropleth</a></li>
<li class="chapter" data-level="7.5.9" data-path="map.html"><a href="map.html#a-smooth-transition-between-choropleth-and-cartogram"><i class="fa fa-check"></i><b>7.5.9</b> A Smooth Transition between Choropleth and Cartogram</a></li>
<li class="chapter" data-level="7.5.10" data-path="map.html"><a href="map.html#a-basic-map-of-africa"><i class="fa fa-check"></i><b>7.5.10</b> A Basic Map of Africa</a></li>
<li class="chapter" data-level="7.5.11" data-path="map.html"><a href="map.html#compute-cartogram-boundaries"><i class="fa fa-check"></i><b>7.5.11</b> Compute Cartogram Boundaries</a></li>
<li class="chapter" data-level="7.5.12" data-path="map.html"><a href="map.html#a-nicer-representation-using-ggplot2"><i class="fa fa-check"></i><b>7.5.12</b> A Nicer Representation using <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.5.13" data-path="map.html"><a href="map.html#compute-several-intermediate-maps"><i class="fa fa-check"></i><b>7.5.13</b> Compute Several Intermediate Maps</a></li>
<li class="chapter" data-level="7.5.14" data-path="map.html"><a href="map.html#make-the-animation-with-gganimate"><i class="fa fa-check"></i><b>7.5.14</b> Make the Animation with <code>gganimate</code></a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="map.html"><a href="map.html#connection-map"><i class="fa fa-check"></i><b>7.6</b> Connection Map</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="map.html"><a href="map.html#how-to-draw-connecting-routes-on-map-with-r"><i class="fa fa-check"></i><b>7.6.1</b> How to Draw Connecting Routes on Map with R</a></li>
<li class="chapter" data-level="7.6.2" data-path="map.html"><a href="map.html#add-3-cities"><i class="fa fa-check"></i><b>7.6.2</b> Add 3 Cities</a></li>
<li class="chapter" data-level="7.6.3" data-path="map.html"><a href="map.html#show-connection-between-cities"><i class="fa fa-check"></i><b>7.6.3</b> Show Connection between Cities</a></li>
<li class="chapter" data-level="7.6.4" data-path="map.html"><a href="map.html#correcting-gcintermediate"><i class="fa fa-check"></i><b>7.6.4</b> Correcting <code>gcIntermediate</code></a></li>
<li class="chapter" data-level="7.6.5" data-path="map.html"><a href="map.html#apply-it-to-several-pairs-of-cities"><i class="fa fa-check"></i><b>7.6.5</b> Apply it to Several Pairs of Cities</a></li>
<li class="chapter" data-level="7.6.6" data-path="map.html"><a href="map.html#an-alternative-using-the-greatcircle-function"><i class="fa fa-check"></i><b>7.6.6</b> An Alternative using the <code>greatCircle</code> Function</a></li>
<li class="chapter" data-level="7.6.7" data-path="map.html"><a href="map.html#visualizing-geographic-connections"><i class="fa fa-check"></i><b>7.6.7</b> Visualizing Geographic Connections</a></li>
<li class="chapter" data-level="7.6.8" data-path="map.html"><a href="map.html#showing-few-connections-on-a-map"><i class="fa fa-check"></i><b>7.6.8</b> Showing Few Connections on a Map</a></li>
<li class="chapter" data-level="7.6.9" data-path="map.html"><a href="map.html#showing-many-connections-on-a-map"><i class="fa fa-check"></i><b>7.6.9</b> Showing Many Connections on a Map</a></li>
<li class="chapter" data-level="7.6.10" data-path="map.html"><a href="map.html#bubble-map"><i class="fa fa-check"></i><b>7.6.10</b> Bubble Map</a></li>
<li class="chapter" data-level="7.6.11" data-path="map.html"><a href="map.html#use-leaflet-control-widget"><i class="fa fa-check"></i><b>7.6.11</b> Use leaflet control widget</a></li>
<li class="chapter" data-level="7.6.12" data-path="map.html"><a href="map.html#interactive-earthquake-bubble-map-with-r-and-leaflet"><i class="fa fa-check"></i><b>7.6.12</b> Interactive Earthquake Bubble Map with R and leaflet</a></li>
<li class="chapter" data-level="7.6.13" data-path="map.html"><a href="map.html#bubble-map-with-ggplot2"><i class="fa fa-check"></i><b>7.6.13</b> Bubble map with <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.6.14" data-path="map.html"><a href="map.html#basic-scatterplot-map"><i class="fa fa-check"></i><b>7.6.14</b> Basic Scatterplot Map</a></li>
<li class="chapter" data-level="7.6.15" data-path="map.html"><a href="map.html#basic-bubble-map"><i class="fa fa-check"></i><b>7.6.15</b> Basic Bubble Map</a></li>
<li class="chapter" data-level="7.6.16" data-path="map.html"><a href="map.html#customized-bubble-map"><i class="fa fa-check"></i><b>7.6.16</b> Customized Bubble Map</a></li>
<li class="chapter" data-level="7.6.17" data-path="map.html"><a href="map.html#interactive-bubble-map-with-plotly"><i class="fa fa-check"></i><b>7.6.17</b> Interactive Bubble Map with Plotly</a></li>
<li class="chapter" data-level="7.6.18" data-path="map.html"><a href="map.html#proportional-symbol-map-with-the-cartography-package"><i class="fa fa-check"></i><b>7.6.18</b> Proportional Symbol Map with the Cartography Package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="flow.html"><a href="flow.html"><i class="fa fa-check"></i><b>8</b> Flow</a>
<ul>
<li class="chapter" data-level="8.1" data-path="flow.html"><a href="flow.html#chord-diagram"><i class="fa fa-check"></i><b>8.1</b> Chord Diagram</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="flow.html"><a href="flow.html#introduction-to-the-circlize-package"><i class="fa fa-check"></i><b>8.1.1</b> Introduction to the <code>circlize</code> Package</a></li>
<li class="chapter" data-level="8.1.2" data-path="flow.html"><a href="flow.html#circular-chart-customization-for-the-circlize-r-package"><i class="fa fa-check"></i><b>8.1.2</b> Circular Chart Customization for the <code>Circlize</code> R package</a></li>
<li class="chapter" data-level="8.1.3" data-path="flow.html"><a href="flow.html#most-basic-circular-chart"><i class="fa fa-check"></i><b>8.1.3</b> Most Basic Circular Chart</a></li>
<li class="chapter" data-level="8.1.4" data-path="ranking.html"><a href="ranking.html#customization"><i class="fa fa-check"></i><b>8.1.4</b> Customization</a></li>
<li class="chapter" data-level="8.1.5" data-path="flow.html"><a href="flow.html#available-circular-chart-types-with-circlize"><i class="fa fa-check"></i><b>8.1.5</b> Available Circular Chart Types with Circlize</a></li>
<li class="chapter" data-level="8.1.6" data-path="flow.html"><a href="flow.html#circular-line-chart"><i class="fa fa-check"></i><b>8.1.6</b> Circular Line Chart</a></li>
<li class="chapter" data-level="8.1.7" data-path="flow.html"><a href="flow.html#vertical-ablines"><i class="fa fa-check"></i><b>8.1.7</b> Vertical Ablines</a></li>
<li class="chapter" data-level="8.1.8" data-path="flow.html"><a href="flow.html#circular-histogram"><i class="fa fa-check"></i><b>8.1.8</b> Circular Histogram</a></li>
<li class="chapter" data-level="8.1.9" data-path="flow.html"><a href="flow.html#circular-chart-with-several-tracks"><i class="fa fa-check"></i><b>8.1.9</b> Circular Chart with Several Tracks</a></li>
<li class="chapter" data-level="8.1.10" data-path="flow.html"><a href="flow.html#display-several-chord-diagrams-on-same-figure"><i class="fa fa-check"></i><b>8.1.10</b> Display Several Chord Diagrams on same Figure</a></li>
<li class="chapter" data-level="8.1.11" data-path="flow.html"><a href="flow.html#draw-part-of-the-circular-chart-only"><i class="fa fa-check"></i><b>8.1.11</b> Draw Part of the Circular Chart Only</a></li>
<li class="chapter" data-level="8.1.12" data-path="flow.html"><a href="flow.html#advanced-chord-diagram-with-r-and-circlize"><i class="fa fa-check"></i><b>8.1.12</b> Advanced Chord Diagram with R and Circlize</a></li>
<li class="chapter" data-level="8.1.13" data-path="flow.html"><a href="flow.html#chord-diagram-from-edge-list"><i class="fa fa-check"></i><b>8.1.13</b> Chord Diagram from Edge List</a></li>
<li class="chapter" data-level="8.1.14" data-path="flow.html"><a href="flow.html#chord-diagram-1"><i class="fa fa-check"></i><b>8.1.14</b> Chord Diagram</a></li>
<li class="chapter" data-level="8.1.15" data-path="flow.html"><a href="flow.html#variations"><i class="fa fa-check"></i><b>8.1.15</b> Variations</a></li>
<li class="chapter" data-level="8.1.16" data-path="flow.html"><a href="flow.html#static-chord-diagram"><i class="fa fa-check"></i><b>8.1.16</b> Static Chord Diagram</a></li>
<li class="chapter" data-level="8.1.17" data-path="flow.html"><a href="flow.html#introduction-to-chord-diagram"><i class="fa fa-check"></i><b>8.1.17</b> Introduction to Chord Diagram</a></li>
<li class="chapter" data-level="8.1.18" data-path="flow.html"><a href="flow.html#chord-diagram-from-adjacency-matrix-1"><i class="fa fa-check"></i><b>8.1.18</b> Chord Diagram from Adjacency Matrix</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="flow.html"><a href="flow.html#network-graph"><i class="fa fa-check"></i><b>8.2</b> Network Graph</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="flow.html"><a href="flow.html#network-chart-with-r-and-igraph-from-any-type-of-input"><i class="fa fa-check"></i><b>8.2.1</b> Network Chart with R and igraph from any Type of Input</a></li>
<li class="chapter" data-level="8.2.2" data-path="flow.html"><a href="flow.html#incidence-matrix"><i class="fa fa-check"></i><b>8.2.2</b> Incidence Matrix</a></li>
<li class="chapter" data-level="8.2.3" data-path="flow.html"><a href="flow.html#edge-list"><i class="fa fa-check"></i><b>8.2.3</b> Edge List</a></li>
<li class="chapter" data-level="8.2.4" data-path="flow.html"><a href="flow.html#literal-list-of-connections"><i class="fa fa-check"></i><b>8.2.4</b> Literal List of Connections</a></li>
<li class="chapter" data-level="8.2.5" data-path="flow.html"><a href="flow.html#default-network-chart-with-igraph"><i class="fa fa-check"></i><b>8.2.5</b> Default Network Chart with <code>igraph</code></a></li>
<li class="chapter" data-level="8.2.6" data-path="flow.html"><a href="flow.html#customize-node-features"><i class="fa fa-check"></i><b>8.2.6</b> Customize Node Features</a></li>
<li class="chapter" data-level="8.2.7" data-path="flow.html"><a href="flow.html#customize-label-features"><i class="fa fa-check"></i><b>8.2.7</b> Customize Label Features</a></li>
<li class="chapter" data-level="8.2.8" data-path="flow.html"><a href="flow.html#customize-link-features"><i class="fa fa-check"></i><b>8.2.8</b> Customize Link Features</a></li>
<li class="chapter" data-level="8.2.9" data-path="flow.html"><a href="flow.html#all-customization"><i class="fa fa-check"></i><b>8.2.9</b> All Customization</a></li>
<li class="chapter" data-level="8.2.10" data-path="flow.html"><a href="flow.html#network-layouts"><i class="fa fa-check"></i><b>8.2.10</b> Network Layouts</a></li>
<li class="chapter" data-level="8.2.11" data-path="flow.html"><a href="flow.html#map-variable-to-node-and-links-feature-in-r-igraph-network"><i class="fa fa-check"></i><b>8.2.11</b> Map Variable to Node and Links Feature in R <code>igraph</code> Network</a></li>
<li class="chapter" data-level="8.2.12" data-path="flow.html"><a href="flow.html#map-variable-to-link-features"><i class="fa fa-check"></i><b>8.2.12</b> Map Variable to Link Features</a></li>
<li class="chapter" data-level="8.2.13" data-path="flow.html"><a href="flow.html#clustering-result-visualization-with-network-diagram"><i class="fa fa-check"></i><b>8.2.13</b> Clustering Result Visualization with Network Diagram</a></li>
<li class="chapter" data-level="8.2.14" data-path="flow.html"><a href="flow.html#basic-network-diagram"><i class="fa fa-check"></i><b>8.2.14</b> Basic Network Diagram</a></li>
<li class="chapter" data-level="8.2.15" data-path="ranking.html"><a href="ranking.html#customization-1"><i class="fa fa-check"></i><b>8.2.15</b> Customization</a></li>
<li class="chapter" data-level="8.2.16" data-path="flow.html"><a href="flow.html#customize-link-features-1"><i class="fa fa-check"></i><b>8.2.16</b> Customize Link Features</a></li>
<li class="chapter" data-level="8.2.17" data-path="flow.html"><a href="flow.html#all-customization-1"><i class="fa fa-check"></i><b>8.2.17</b> All Customization</a></li>
<li class="chapter" data-level="8.2.18" data-path="flow.html"><a href="flow.html#network-with-node-size-based-on-edge-number"><i class="fa fa-check"></i><b>8.2.18</b> Network with Node Size Based on Edge Number</a></li>
<li class="chapter" data-level="8.2.19" data-path="flow.html"><a href="flow.html#most-basic-network-diagram"><i class="fa fa-check"></i><b>8.2.19</b> Most Basic Network Diagram</a></li>
<li class="chapter" data-level="8.2.20" data-path="flow.html"><a href="flow.html#interactive-network-customization"><i class="fa fa-check"></i><b>8.2.20</b> Interactive Network Customization</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="flow.html"><a href="flow.html#sankey-diagram"><i class="fa fa-check"></i><b>8.3</b> Sankey Diagram</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="flow.html"><a href="flow.html#most-basic-sankey-diagram"><i class="fa fa-check"></i><b>8.3.1</b> Most Basic Sankey Diagram</a></li>
<li class="chapter" data-level="8.3.2" data-path="flow.html"><a href="flow.html#from-incidence-matrix"><i class="fa fa-check"></i><b>8.3.2</b> From Incidence Matrix</a></li>
<li class="chapter" data-level="8.3.3" data-path="flow.html"><a href="flow.html#customize-colors-in-sankey-diagram"><i class="fa fa-check"></i><b>8.3.3</b> Customize Colors in Sankey Diagram</a></li>
<li class="chapter" data-level="8.3.4" data-path="flow.html"><a href="flow.html#set-color-for-groups-of-nodes"><i class="fa fa-check"></i><b>8.3.4</b> Set Color for Groups of Nodes</a></li>
<li class="chapter" data-level="8.3.5" data-path="flow.html"><a href="flow.html#set-color-of-connections"><i class="fa fa-check"></i><b>8.3.5</b> Set Color of Connections</a></li>
<li class="chapter" data-level="8.3.6" data-path="flow.html"><a href="flow.html#sankey-diagram-interactive"><i class="fa fa-check"></i><b>8.3.6</b> Sankey Diagram Interactive</a></li>
<li class="chapter" data-level="8.3.7" data-path="flow.html"><a href="flow.html#what-for"><i class="fa fa-check"></i><b>8.3.7</b> What For</a></li>
<li class="chapter" data-level="8.3.8" data-path="flow.html"><a href="flow.html#variation"><i class="fa fa-check"></i><b>8.3.8</b> Variation</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="flow.html"><a href="flow.html#arc-diagram"><i class="fa fa-check"></i><b>8.4</b> Arc Diagram</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="flow.html"><a href="flow.html#arc-diagrams"><i class="fa fa-check"></i><b>8.4.1</b> Arc Diagrams</a></li>
<li class="chapter" data-level="8.4.2" data-path="flow.html"><a href="flow.html#common-mistakes"><i class="fa fa-check"></i><b>8.4.2</b> Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="flow.html"><a href="flow.html#edge-bundling"><i class="fa fa-check"></i><b>8.5</b> Edge Bundling</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="flow.html"><a href="flow.html#hierarchical-edge-bundling"><i class="fa fa-check"></i><b>8.5.1</b> Hierarchical Edge Bundling</a></li>
<li class="chapter" data-level="8.5.2" data-path="flow.html"><a href="flow.html#introduction-to-hierarchical-edge-bundling-with-r"><i class="fa fa-check"></i><b>8.5.2</b> Introduction to Hierarchical Edge Bundling with R</a></li>
<li class="chapter" data-level="8.5.3" data-path="flow.html"><a href="flow.html#add-a-few-connections"><i class="fa fa-check"></i><b>8.5.3</b> Add a Few Connections</a></li>
<li class="chapter" data-level="8.5.4" data-path="flow.html"><a href="flow.html#hierarchical-edge-bundling-1"><i class="fa fa-check"></i><b>8.5.4</b> Hierarchical Edge Bundling</a></li>
<li class="chapter" data-level="8.5.5" data-path="flow.html"><a href="flow.html#customize-hierarchical-edge-bundling"><i class="fa fa-check"></i><b>8.5.5</b> Customize Hierarchical Edge Bundling</a></li>
<li class="chapter" data-level="8.5.6" data-path="flow.html"><a href="flow.html#playing-with-tension"><i class="fa fa-check"></i><b>8.5.6</b> Playing with <code>tension</code></a></li>
<li class="chapter" data-level="8.5.7" data-path="flow.html"><a href="flow.html#connection-features"><i class="fa fa-check"></i><b>8.5.7</b> Connection Features</a></li>
<li class="chapter" data-level="8.5.8" data-path="flow.html"><a href="flow.html#node-features"><i class="fa fa-check"></i><b>8.5.8</b> Node Features</a></li>
<li class="chapter" data-level="8.5.9" data-path="flow.html"><a href="flow.html#without-labels"><i class="fa fa-check"></i><b>8.5.9</b> Without Labels</a></li>
<li class="chapter" data-level="8.5.10" data-path="flow.html"><a href="flow.html#create-the-labels"><i class="fa fa-check"></i><b>8.5.10</b> Create the Labels</a></li>
<li class="chapter" data-level="8.5.11" data-path="flow.html"><a href="flow.html#plot-the-labels"><i class="fa fa-check"></i><b>8.5.11</b> Plot the Labels</a></li>
<li class="chapter" data-level="8.5.12" data-path="flow.html"><a href="flow.html#with-customization"><i class="fa fa-check"></i><b>8.5.12</b> With Customization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="general.html"><a href="general.html"><i class="fa fa-check"></i><b>9</b> General Knowledge</a>
<ul>
<li class="chapter" data-level="9.1" data-path="distributions.html"><a href="distributions.html#ggplot2"><i class="fa fa-check"></i><b>9.1</b> <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="correlation.html"><a href="correlation.html#add-text-labels-with-ggplot2"><i class="fa fa-check"></i><b>9.1.1</b> Add Text Labels with ggplot2</a></li>
<li class="chapter" data-level="9.1.2" data-path="correlation.html"><a href="correlation.html#add-labels-with-geom_label"><i class="fa fa-check"></i><b>9.1.2</b> Add Labels with <code>geom_label()</code></a></li>
<li class="chapter" data-level="9.1.3" data-path="correlation.html"><a href="correlation.html#add-one-text-label-only"><i class="fa fa-check"></i><b>9.1.3</b> Add One Text Label Only</a></li>
<li class="chapter" data-level="9.1.4" data-path="correlation.html"><a href="correlation.html#add-labels-for-a-selection-of-marker"><i class="fa fa-check"></i><b>9.1.4</b> Add Labels for a Selection of Marker</a></li>
<li class="chapter" data-level="9.1.5" data-path="general.html"><a href="general.html#how-to-annotate-a-plot-in-ggplot2"><i class="fa fa-check"></i><b>9.1.5</b> How to Annotate a Plot in <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.6" data-path="general.html"><a href="general.html#adding-text-with-geom_text-or-geom_label"><i class="fa fa-check"></i><b>9.1.6</b> Adding text with <code>geom_text()</code> or <code>geom_label()</code></a></li>
<li class="chapter" data-level="9.1.7" data-path="general.html"><a href="general.html#add-shapes-with-annotate"><i class="fa fa-check"></i><b>9.1.7</b> Add Shapes with <code>annotate()</code></a></li>
<li class="chapter" data-level="9.1.8" data-path="general.html"><a href="general.html#add-ablines-with-geom_hline-and-geom_vline"><i class="fa fa-check"></i><b>9.1.8</b> Add Ablines with <code>geom_hline()</code> and <code>geom_vline()</code></a></li>
<li class="chapter" data-level="9.1.9" data-path="general.html"><a href="general.html#add-a-point-and-a-range-with-pointrange"><i class="fa fa-check"></i><b>9.1.9</b> Add a Point and a Range with <code>pointrange()</code></a></li>
<li class="chapter" data-level="9.1.10" data-path="general.html"><a href="general.html#marginal-plot"><i class="fa fa-check"></i><b>9.1.10</b> Marginal Plot</a></li>
<li class="chapter" data-level="9.1.11" data-path="distributions.html"><a href="distributions.html#marginal-distribution-with-ggplot2-and-ggextra"><i class="fa fa-check"></i><b>9.1.11</b> Marginal Distribution with <code>ggplot2</code> and <code>ggExtra</code></a></li>
<li class="chapter" data-level="9.1.12" data-path="distributions.html"><a href="distributions.html#more-customization"><i class="fa fa-check"></i><b>9.1.12</b> More Customization</a></li>
<li class="chapter" data-level="9.1.13" data-path="general.html"><a href="general.html#ggplot2-chart-appearance"><i class="fa fa-check"></i><b>9.1.13</b> <code>ggplot2</code> Chart Appearance</a></li>
<li class="chapter" data-level="9.1.14" data-path="general.html"><a href="general.html#set-axis-title-and-limits-with-xlab-and-xlim"><i class="fa fa-check"></i><b>9.1.14</b> Set Axis Title and Limits with <code>xlab()</code> and <code>xlim()</code></a></li>
<li class="chapter" data-level="9.1.15" data-path="general.html"><a href="general.html#customize-axis-title-appearance-axis.title"><i class="fa fa-check"></i><b>9.1.15</b> Customize Axis Title Appearance: <code>axis.title</code></a></li>
<li class="chapter" data-level="9.1.16" data-path="general.html"><a href="general.html#customize-axis-labels-axis.text"><i class="fa fa-check"></i><b>9.1.16</b> Customize Axis Labels: <code>axis.text</code></a></li>
<li class="chapter" data-level="9.1.17" data-path="general.html"><a href="general.html#customize-axis-ticks-and-axis-line-with-axis.ticks-and-axis.line"><i class="fa fa-check"></i><b>9.1.17</b> Customize Axis Ticks and Axis Line with <code>axis.ticks()</code> and <code>axis.line()</code></a></li>
<li class="chapter" data-level="9.1.18" data-path="general.html"><a href="general.html#background-manipulation-with-r-and-ggplot2"><i class="fa fa-check"></i><b>9.1.18</b> Background Manipulation with R and ggplot2</a></li>
<li class="chapter" data-level="9.1.19" data-path="general.html"><a href="general.html#background-color-plot.background-and-panel.background"><i class="fa fa-check"></i><b>9.1.19</b> Background Color: <code>plot.background</code> and <code>panel.background</code></a></li>
<li class="chapter" data-level="9.1.20" data-path="general.html"><a href="general.html#customize-the-grid-panel.grid.major-and-panel.grid.minor"><i class="fa fa-check"></i><b>9.1.20</b> Customize the Grid: <code>panel.grid.major</code> and <code>panel.grid.minor</code></a></li>
<li class="chapter" data-level="9.1.21" data-path="general.html"><a href="general.html#building-a-nice-legend-with-r-and-ggplot2"><i class="fa fa-check"></i><b>9.1.21</b> Building a Nice Legend with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.22" data-path="general.html"><a href="general.html#change-legend-title-with-labs"><i class="fa fa-check"></i><b>9.1.22</b> Change Legend Title with <code>labs()</code></a></li>
<li class="chapter" data-level="9.1.23" data-path="general.html"><a href="general.html#get-rid-of-the-legend-guides-and-theme"><i class="fa fa-check"></i><b>9.1.23</b> Get Rid of the Legend: <code>guides()</code> and <code>theme()</code></a></li>
<li class="chapter" data-level="9.1.24" data-path="general.html"><a href="general.html#control-legend-position-with-legend.position"><i class="fa fa-check"></i><b>9.1.24</b> Control Legend Position with <code>legend.position</code></a></li>
<li class="chapter" data-level="9.1.25" data-path="general.html"><a href="general.html#legend-appearance"><i class="fa fa-check"></i><b>9.1.25</b> Legend Appearance</a></li>
<li class="chapter" data-level="9.1.26" data-path="distributions.html"><a href="distributions.html#reorder-a-variable-with-ggplot2"><i class="fa fa-check"></i><b>9.1.26</b> Reorder a Variable with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.27" data-path="ranking.html"><a href="ranking.html#method-1-the-forecats-library"><i class="fa fa-check"></i><b>9.1.27</b> Method 1: the <code>Forecats</code> library</a></li>
<li class="chapter" data-level="9.1.28" data-path="distributions.html"><a href="distributions.html#method-2-using-dplyr-only"><i class="fa fa-check"></i><b>9.1.28</b> Method 2: Using <code>dplyr</code> Only</a></li>
<li class="chapter" data-level="9.1.29" data-path="distributions.html"><a href="distributions.html#method-3-the-reorder-function-of-base-r"><i class="fa fa-check"></i><b>9.1.29</b> Method 3: the <code>reorder()</code> function of Base R</a></li>
<li class="chapter" data-level="9.1.30" data-path="general.html"><a href="general.html#ggplot2-title"><i class="fa fa-check"></i><b>9.1.30</b> <code>ggplot2</code> Title</a></li>
<li class="chapter" data-level="9.1.31" data-path="general.html"><a href="general.html#title-on-several-lines"><i class="fa fa-check"></i><b>9.1.31</b> Title on Several Lines</a></li>
<li class="chapter" data-level="9.1.32" data-path="general.html"><a href="general.html#title-appearance-and-position"><i class="fa fa-check"></i><b>9.1.32</b> Title Appearance and Position</a></li>
<li class="chapter" data-level="9.1.33" data-path="general.html"><a href="general.html#customize-a-specific-word-only"><i class="fa fa-check"></i><b>9.1.33</b> Customize a Specific Word Only</a></li>
<li class="chapter" data-level="9.1.34" data-path="general.html"><a href="general.html#small-multiples-facet_wrap-and-facet_grid"><i class="fa fa-check"></i><b>9.1.34</b> Small Multiples: <code>facet_wrap()</code> and <code>facet_grid()</code></a></li>
<li class="chapter" data-level="9.1.35" data-path="general.html"><a href="general.html#faceting-with-ggplot2"><i class="fa fa-check"></i><b>9.1.35</b> Faceting with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.36" data-path="general.html"><a href="general.html#faceting-with-facet_wrap"><i class="fa fa-check"></i><b>9.1.36</b> Faceting with <code>facet_wrap()</code></a></li>
<li class="chapter" data-level="9.1.37" data-path="general.html"><a href="general.html#facet_grid"><i class="fa fa-check"></i><b>9.1.37</b> <code>facet_grid()</code></a></li>
<li class="chapter" data-level="9.1.38" data-path="general.html"><a href="general.html#customize-small-multiple-appearance-with-ggplot2"><i class="fa fa-check"></i><b>9.1.38</b> Customize Small Multiple Appearance with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.39" data-path="general.html"><a href="general.html#multiple-ggplot2-charts-on-a-single-page"><i class="fa fa-check"></i><b>9.1.39</b> Multiple ggplot2 Charts on a Single Page</a></li>
<li class="chapter" data-level="9.1.40" data-path="general.html"><a href="general.html#plotly-turn-your-ggplot-interactive"><i class="fa fa-check"></i><b>9.1.40</b> <code>Plotly</code>: Turn your <code>ggplot</code> Interactive</a></li>
<li class="chapter" data-level="9.1.41" data-path="general.html"><a href="general.html#an-overview-of-ggplot2-possibilities"><i class="fa fa-check"></i><b>9.1.41</b> An Overview of <code>ggplot2</code> Possibilities</a></li>
<li class="chapter" data-level="9.1.42" data-path="distributions.html"><a href="distributions.html#boxplot-with-individual-data-points"><i class="fa fa-check"></i><b>9.1.42</b> Boxplot with Individual Data Points</a></li>
<li class="chapter" data-level="9.1.43" data-path="correlation.html"><a href="correlation.html#map-a-variable-to-marker-feature-in-ggplot2-scatterplot"><i class="fa fa-check"></i><b>9.1.43</b> Map a Variable to Marker Feature in <code>ggplot2</code> Scatterplot</a></li>
<li class="chapter" data-level="9.1.44" data-path="correlation.html"><a href="correlation.html#basic-example"><i class="fa fa-check"></i><b>9.1.44</b> Basic Example</a></li>
<li class="chapter" data-level="9.1.45" data-path="correlation.html"><a href="correlation.html#works-with-any-aesthetics"><i class="fa fa-check"></i><b>9.1.45</b> Works with any Aesthetics</a></li>
<li class="chapter" data-level="9.1.46" data-path="correlation.html"><a href="correlation.html#mapping-to-several-features"><i class="fa fa-check"></i><b>9.1.46</b> Mapping to Several Features</a></li>
<li class="chapter" data-level="9.1.47" data-path="general.html"><a href="general.html#bubble-plot-with-ggplot2"><i class="fa fa-check"></i><b>9.1.47</b> Bubble Plot with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.48" data-path="correlation.html"><a href="correlation.html#control-circle-size-with-scale_size"><i class="fa fa-check"></i><b>9.1.48</b> Control Circle Size with <code>scale_size()</code></a></li>
<li class="chapter" data-level="9.1.49" data-path="correlation.html"><a href="correlation.html#add-a-fourth-dimension-color"><i class="fa fa-check"></i><b>9.1.49</b> Add a Fourth Dimension: Color</a></li>
<li class="chapter" data-level="9.1.50" data-path="correlation.html"><a href="correlation.html#make-it-pretty"><i class="fa fa-check"></i><b>9.1.50</b> Make it Pretty</a></li>
<li class="chapter" data-level="9.1.51" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-with-r-and-ggplot2"><i class="fa fa-check"></i><b>9.1.51</b> Connected Scatterplot with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.52" data-path="correlation.html"><a href="correlation.html#customize-the-connected-scatterplot"><i class="fa fa-check"></i><b>9.1.52</b> Customize the Connected Scatterplot</a></li>
<li class="chapter" data-level="9.1.53" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-to-show-an-evolution"><i class="fa fa-check"></i><b>9.1.53</b> Connected Scatterplot to Show an Evolution</a></li>
<li class="chapter" data-level="9.1.54" data-path="ranking.html"><a href="ranking.html#parallel-coordinates-chart-with-ggally"><i class="fa fa-check"></i><b>9.1.54</b> Parallel Coordinates Chart with <code>ggally</code></a></li>
<li class="chapter" data-level="9.1.55" data-path="ranking.html"><a href="ranking.html#custom-color-theme-general-appearance"><i class="fa fa-check"></i><b>9.1.55</b> Custom Color, Theme, General Appearance</a></li>
<li class="chapter" data-level="9.1.56" data-path="ranking.html"><a href="ranking.html#scaling"><i class="fa fa-check"></i><b>9.1.56</b> Scaling</a></li>
<li class="chapter" data-level="9.1.57" data-path="ranking.html"><a href="ranking.html#highlight-a-group"><i class="fa fa-check"></i><b>9.1.57</b> Highlight a Group</a></li>
<li class="chapter" data-level="9.1.58" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-conditional-color"><i class="fa fa-check"></i><b>9.1.58</b> Lollipop Chart with Conditional Color</a></li>
<li class="chapter" data-level="9.1.59" data-path="ranking.html"><a href="ranking.html#marker"><i class="fa fa-check"></i><b>9.1.59</b> Marker</a></li>
<li class="chapter" data-level="9.1.60" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-2-groups"><i class="fa fa-check"></i><b>9.1.60</b> Lollipop Chart with 2 Groups</a></li>
<li class="chapter" data-level="9.1.61" data-path="ranking.html"><a href="ranking.html#circular-barplot-with-groups"><i class="fa fa-check"></i><b>9.1.61</b> Circular Barplot with Groups</a></li>
<li class="chapter" data-level="9.1.62" data-path="ranking.html"><a href="ranking.html#add-a-gap-in-the-circle"><i class="fa fa-check"></i><b>9.1.62</b> Add a Gap in the Circle</a></li>
<li class="chapter" data-level="9.1.63" data-path="ranking.html"><a href="ranking.html#space-between-groups"><i class="fa fa-check"></i><b>9.1.63</b> Space between Groups</a></li>
<li class="chapter" data-level="9.1.64" data-path="ranking.html"><a href="ranking.html#order-bars"><i class="fa fa-check"></i><b>9.1.64</b> Order Bars</a></li>
<li class="chapter" data-level="9.1.65" data-path="ranking.html"><a href="ranking.html#circular-barchart-customization"><i class="fa fa-check"></i><b>9.1.65</b> Circular Barchart Customization</a></li>
<li class="chapter" data-level="9.1.66" data-path="evolution.html"><a href="evolution.html#what-is-stacking"><i class="fa fa-check"></i><b>9.1.66</b> What is Stacking</a></li>
<li class="chapter" data-level="9.1.67" data-path="general.html"><a href="general.html#example-optical-illusion"><i class="fa fa-check"></i><b>9.1.67</b> Example: Optical Illusion</a></li>
<li class="chapter" data-level="9.1.68" data-path="evolution.html"><a href="evolution.html#workaround"><i class="fa fa-check"></i><b>9.1.68</b> Workaround</a></li>
<li class="chapter" data-level="9.1.69" data-path="evolution.html"><a href="evolution.html#basic-stacked-area-chart-with-r"><i class="fa fa-check"></i><b>9.1.69</b> Basic Stacked area Chart with R</a></li>
<li class="chapter" data-level="9.1.70" data-path="evolution.html"><a href="evolution.html#most-basic-stacked-area-with-ggplot2"><i class="fa fa-check"></i><b>9.1.70</b> Most Basic Stacked Area with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.71" data-path="evolution.html"><a href="evolution.html#control-stacking-order-with-ggplot2"><i class="fa fa-check"></i><b>9.1.71</b> Control Stacking Order with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.72" data-path="evolution.html"><a href="evolution.html#proportional-stacked-area-chart"><i class="fa fa-check"></i><b>9.1.72</b> Proportional Stacked Area Chart</a></li>
<li class="chapter" data-level="9.1.73" data-path="evolution.html"><a href="evolution.html#color-style"><i class="fa fa-check"></i><b>9.1.73</b> Color &amp; Style</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="general.html"><a href="general.html#data-art"><i class="fa fa-check"></i><b>9.2</b> Data Art</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="general.html"><a href="general.html#using-r-and-ggplot2-for-data-art."><i class="fa fa-check"></i><b>9.2.1</b> Using R and ggplot2 for Data Art.</a></li>
<li class="chapter" data-level="9.2.2" data-path="general.html"><a href="general.html#r-snail"><i class="fa fa-check"></i><b>9.2.2</b> R Snail</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="general.html"><a href="general.html#animation"><i class="fa fa-check"></i><b>9.3</b> Animation</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="general.html"><a href="general.html#animated-bubble-chart-with-r-and-gganimate"><i class="fa fa-check"></i><b>9.3.1</b> Animated Bubble Chart with R and <code>gganimate</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="general.html"><a href="general.html#animated-bubble-chart"><i class="fa fa-check"></i><b>9.3.2</b> Animated Bubble Chart</a></li>
<li class="chapter" data-level="9.3.3" data-path="general.html"><a href="general.html#use-small-multiple"><i class="fa fa-check"></i><b>9.3.3</b> Use Small Multiple</a></li>
<li class="chapter" data-level="9.3.4" data-path="general.html"><a href="general.html#smooth-barplot-transition"><i class="fa fa-check"></i><b>9.3.4</b> Smooth Barplot Transition</a></li>
<li class="chapter" data-level="9.3.5" data-path="general.html"><a href="general.html#progressive-line-chart-rendering"><i class="fa fa-check"></i><b>9.3.5</b> Progressive Line Chart Rendering</a></li>
<li class="chapter" data-level="9.3.6" data-path="general.html"><a href="general.html#concatenate-.png-images-with-image-magick"><i class="fa fa-check"></i><b>9.3.6</b> Concatenate <code>.png</code> Images with <code>Image Magick</code></a></li>
<li class="chapter" data-level="9.3.7" data-path="general.html"><a href="general.html#most-basic-animation-with-r-and-image-magick"><i class="fa fa-check"></i><b>9.3.7</b> Most Basic Animation with R and Image Magick</a></li>
<li class="chapter" data-level="9.3.8" data-path="general.html"><a href="general.html#animated-3d-chart-with-r"><i class="fa fa-check"></i><b>9.3.8</b> Animated 3d Chart with R</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="general.html"><a href="general.html#d-charts"><i class="fa fa-check"></i><b>9.4</b> 3D Charts</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="general.html"><a href="general.html#d-surface-plot-with-r-and-plotly"><i class="fa fa-check"></i><b>9.4.1</b> 3d Surface Plot with R and <code>plotly</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="general.html"><a href="general.html#building-a-3d-knot-with-r-and-rgl"><i class="fa fa-check"></i><b>9.4.2</b> Building a 3D Knot with R and <code>rgl</code></a></li>
<li class="chapter" data-level="9.4.3" data-path="general.html"><a href="general.html#nifty-graph-a-3d-imitation-with-r"><i class="fa fa-check"></i><b>9.4.3</b> Nifty Graph: A 3d Imitation with R</a></li>
<li class="chapter" data-level="9.4.4" data-path="general.html"><a href="general.html#animated-3d-chart-with-r-1"><i class="fa fa-check"></i><b>9.4.4</b> Animated 3d Chart with R</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="general.html"><a href="general.html#interactive-charts"><i class="fa fa-check"></i><b>9.5</b> Interactive Charts</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="evolution.html"><a href="evolution.html#streamgraph-with-dropdown-button"><i class="fa fa-check"></i><b>9.5.1</b> Streamgraph with Dropdown Button</a></li>
<li class="chapter" data-level="9.5.2" data-path="general.html"><a href="general.html#interactive-chord-diagram-with-r"><i class="fa fa-check"></i><b>9.5.2</b> Interactive Chord Diagram with R</a></li>
<li class="chapter" data-level="9.5.3" data-path="general.html"><a href="general.html#interactive-network-chart-with-r"><i class="fa fa-check"></i><b>9.5.3</b> Interactive Network Chart with R</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="general.html"><a href="general.html#caveats"><i class="fa fa-check"></i><b>9.6</b> Caveats</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/kyle-w-brown" target="blank">Kyle W. Brown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-Gallery-Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="general" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> General Knowledge</h1>
<hr />
<div id="ggplot2" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> <code>ggplot2</code></h2>
<hr />
<center>
<img src="https://www.r-graph-gallery.com/img/other/ggplot2Hex.jpg" />
</center>
<p><br></p>
<p><code>ggplot2</code> is a <code>R</code> package dedicated to data visualization. It can greatly improve the quality and aesthetics of your graphics, and will make you much more efficient in creating them.</p>
<p><code>ggplot2</code> allows to build almost any type of chart. The R graph
gallery focuses on it so almost every section there starts with <code>ggplot2</code> examples.</p>
<p>This page is dedicated to general <code>ggplot2</code> tips that you can apply to any chart, like customizing a title, adding annotation, or using faceting. If youre new to <code>ggplot2</code>, a good starting point is probably this <a href="https://www.datacamp.com/?tap_a=5644-dce66f&amp;tap_s=230804-f65650">online course</a>.</p>
<div id="add-text-labels-with-ggplot2" class="section level3" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Add Text Labels with ggplot2</h3>
<p>This document is dedicated to text annotation with <code>ggplot2</code>. It provides several examples with reproducible code showing how to use function like <code>geom_label</code> and <code>geom_text</code>.</p>
<div id="adding-text-with-geom_text" class="section level4" number="9.1.1.1">
<h4><span class="header-section-number">9.1.1.1</span> Adding Text with <code>geom_text()</code></h4>
<p>This example demonstrates how to use <code>geom_text()</code> to add text as markers. It works pretty much the same as <code>geom_point()</code>, but add text instead of circles. A few arguments must be provided:</p>
<ul>
<li><code>label</code>: what text you want to display.</li>
<li><code>nudge_x</code> and <code>nudge_y</code>: shifts the text along X and Y axis.</li>
<li><code>check_overlap</code> tries to avoid text overlap. Note that a package called <code>ggrepel</code> extends this concept further.</li>
</ul>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="general.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb628-2"><a href="general.html#cb628-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb628-3"><a href="general.html#cb628-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb628-4"><a href="general.html#cb628-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep 30 first rows in the mtcars natively available dataset</span></span>
<span id="cb628-5"><a href="general.html#cb628-5" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span><span class="fu">head</span>(mtcars, <span class="dv">30</span>)</span>
<span id="cb628-6"><a href="general.html#cb628-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb628-7"><a href="general.html#cb628-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 1/ add text with geom_text, use nudge to nudge the text</span></span>
<span id="cb628-8"><a href="general.html#cb628-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb628-9"><a href="general.html#cb628-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co"># Show dots</span></span>
<span id="cb628-10"><a href="general.html#cb628-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb628-11"><a href="general.html#cb628-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">label=</span><span class="fu">rownames</span>(data), </span>
<span id="cb628-12"><a href="general.html#cb628-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.25</span>, <span class="at">nudge_y =</span> <span class="fl">0.25</span>, </span>
<span id="cb628-13"><a href="general.html#cb628-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> T</span>
<span id="cb628-14"><a href="general.html#cb628-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-package-1.png" width="672" /></p>
</div>
</div>
<div id="add-labels-with-geom_label" class="section level3" number="9.1.2">
<h3><span class="header-section-number">9.1.2</span> Add Labels with <code>geom_label()</code></h3>
<p><code>geom_label()</code> works pretty much the same way as <code>geom_text()</code>. However, text is wrapped in a rectangle that you can customize (see next example).</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="general.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb629-2"><a href="general.html#cb629-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb629-3"><a href="general.html#cb629-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb629-4"><a href="general.html#cb629-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep 30 first rows in the mtcars natively available dataset</span></span>
<span id="cb629-5"><a href="general.html#cb629-5" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span><span class="fu">head</span>(mtcars, <span class="dv">30</span>)</span>
<span id="cb629-6"><a href="general.html#cb629-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb629-7"><a href="general.html#cb629-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 1/ add text with geom_text, use nudge to nudge the text</span></span>
<span id="cb629-8"><a href="general.html#cb629-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb629-9"><a href="general.html#cb629-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co"># Show dots</span></span>
<span id="cb629-10"><a href="general.html#cb629-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb629-11"><a href="general.html#cb629-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">label=</span><span class="fu">rownames</span>(data), </span>
<span id="cb629-12"><a href="general.html#cb629-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.25</span>, <span class="at">nudge_y =</span> <span class="fl">0.25</span>, </span>
<span id="cb629-13"><a href="general.html#cb629-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_overlap =</span> T</span>
<span id="cb629-14"><a href="general.html#cb629-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-add-labels-1.png" width="672" /></p>
</div>
<div id="add-one-text-label-only" class="section level3" number="9.1.3">
<h3><span class="header-section-number">9.1.3</span> Add One Text Label Only</h3>
<p>Of course, you dont have to label all dots on the chart. You can also add a piece of text on a specific position. Since were here, note that you can custom the annotation of <code>geom_label</code> with <code>label.padding</code>, <code>label.size</code>, <code>color</code> and <code>fill</code> as described below:</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="general.html#cb630-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb630-2"><a href="general.html#cb630-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb630-3"><a href="general.html#cb630-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb630-4"><a href="general.html#cb630-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep 30 first rows in the mtcars natively available dataset</span></span>
<span id="cb630-5"><a href="general.html#cb630-5" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span><span class="fu">head</span>(mtcars, <span class="dv">30</span>)</span>
<span id="cb630-6"><a href="general.html#cb630-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb630-7"><a href="general.html#cb630-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add one annotation</span></span>
<span id="cb630-8"><a href="general.html#cb630-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb630-9"><a href="general.html#cb630-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co"># Show dots</span></span>
<span id="cb630-10"><a href="general.html#cb630-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb630-11"><a href="general.html#cb630-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">label=</span><span class="st">&quot;Look at this!&quot;</span>, </span>
<span id="cb630-12"><a href="general.html#cb630-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="fl">4.1</span>,</span>
<span id="cb630-13"><a href="general.html#cb630-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="dv">20</span>,</span>
<span id="cb630-14"><a href="general.html#cb630-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.padding =</span> <span class="fu">unit</span>(<span class="fl">0.55</span>, <span class="st">&quot;lines&quot;</span>), <span class="co"># Rectangle size around label</span></span>
<span id="cb630-15"><a href="general.html#cb630-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">label.size =</span> <span class="fl">0.35</span>,</span>
<span id="cb630-16"><a href="general.html#cb630-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb630-17"><a href="general.html#cb630-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span></span>
<span id="cb630-18"><a href="general.html#cb630-18" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-add-one-text-label-only-1.png" width="672" /></p>
</div>
<div id="add-labels-for-a-selection-of-marker" class="section level3" number="9.1.4">
<h3><span class="header-section-number">9.1.4</span> Add Labels for a Selection of Marker</h3>
<p>Last but not least, you can also select a group of marker and annotate them only. Here, only car with <code>mpg</code> &gt; 20 and <code>wt</code> &gt; 3 are annotated thanks to a data filtering in the <code>geom_label()</code> call.</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="general.html#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb631-2"><a href="general.html#cb631-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb631-3"><a href="general.html#cb631-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb631-4"><a href="general.html#cb631-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb631-5"><a href="general.html#cb631-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep 30 first rows in the mtcars natively available dataset</span></span>
<span id="cb631-6"><a href="general.html#cb631-6" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span><span class="fu">head</span>(mtcars, <span class="dv">30</span>)</span>
<span id="cb631-7"><a href="general.html#cb631-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Change data rownames as a real column called &#39;carName&#39;</span></span>
<span id="cb631-8"><a href="general.html#cb631-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb631-9"><a href="general.html#cb631-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var=</span><span class="st">&quot;carName&quot;</span>)</span>
<span id="cb631-10"><a href="general.html#cb631-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb631-11"><a href="general.html#cb631-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb631-12"><a href="general.html#cb631-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb631-13"><a href="general.html#cb631-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb631-14"><a href="general.html#cb631-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>( </span>
<span id="cb631-15"><a href="general.html#cb631-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mpg<span class="sc">&gt;</span><span class="dv">20</span> <span class="sc">&amp;</span> wt<span class="sc">&gt;</span><span class="dv">3</span>), <span class="co"># Filter data first</span></span>
<span id="cb631-16"><a href="general.html#cb631-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label=</span>carName)</span>
<span id="cb631-17"><a href="general.html#cb631-17" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-add-labels-selection-marker-1.png" width="672" /></p>
</div>
<div id="how-to-annotate-a-plot-in-ggplot2" class="section level3" number="9.1.5">
<h3><span class="header-section-number">9.1.5</span> How to Annotate a Plot in <code>ggplot2</code></h3>
<p>Once your chart is done, annotating it is a crucial step to make it more insightful. This section will guide you through the best practices using <code>R</code> and <code>ggplot2</code>.</p>
</div>
<div id="adding-text-with-geom_text-or-geom_label" class="section level3" number="9.1.6">
<h3><span class="header-section-number">9.1.6</span> Adding text with <code>geom_text()</code> or <code>geom_label()</code></h3>
<p>Text is the most common kind of annotation. It allows to give more information on the most important part of the chart.</p>
<p>Using <code>ggplot2</code>, 2 main functions are available for that kind of annotation:</p>
<ul>
<li><code>geom_text</code>: to add a simple piece of text.</li>
<li><code>geom_label</code>: to add a label: framed text.</li>
</ul>
<p>Note that the <code>annotate()</code> function is a good alternative that can reduces the code length for simple cases.</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="general.html#cb632-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb632-2"><a href="general.html#cb632-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb632-3"><a href="general.html#cb632-3" aria-hidden="true" tabindex="-1"></a><span class="co"># basic graph</span></span>
<span id="cb632-4"><a href="general.html#cb632-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span> </span>
<span id="cb632-5"><a href="general.html#cb632-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb632-6"><a href="general.html#cb632-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb632-7"><a href="general.html#cb632-7" aria-hidden="true" tabindex="-1"></a><span class="co"># a data frame with all the annotation info</span></span>
<span id="cb632-8"><a href="general.html#cb632-8" aria-hidden="true" tabindex="-1"></a>annotation <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb632-9"><a href="general.html#cb632-9" aria-hidden="true" tabindex="-1"></a>   <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="fl">4.5</span>),</span>
<span id="cb632-10"><a href="general.html#cb632-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">25</span>),</span>
<span id="cb632-11"><a href="general.html#cb632-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">label =</span> <span class="fu">c</span>(<span class="st">&quot;label 1&quot;</span>, <span class="st">&quot;label 2&quot;</span>)</span>
<span id="cb632-12"><a href="general.html#cb632-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb632-13"><a href="general.html#cb632-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add text</span></span>
<span id="cb632-14"><a href="general.html#cb632-14" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="at">data=</span>annotation, <span class="fu">aes</span>( <span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">label=</span>label),                 </span>
<span id="cb632-15"><a href="general.html#cb632-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, </span>
<span id="cb632-16"><a href="general.html#cb632-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">size=</span><span class="dv">7</span> , <span class="at">angle=</span><span class="dv">45</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span> )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-annotation-1.png" width="672" /></p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="general.html#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: possible to shorten with annotate:</span></span>
<span id="cb633-2"><a href="general.html#cb633-2" aria-hidden="true" tabindex="-1"></a><span class="co"># p +</span></span>
<span id="cb633-3"><a href="general.html#cb633-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  annotate(&quot;text&quot;, x = c(2,4.5), y = c(20,25), </span></span>
<span id="cb633-4"><a href="general.html#cb633-4" aria-hidden="true" tabindex="-1"></a><span class="co">#           label = c(&quot;label 1&quot;, &quot;label 2&quot;) , color=&quot;orange&quot;, </span></span>
<span id="cb633-5"><a href="general.html#cb633-5" aria-hidden="true" tabindex="-1"></a><span class="co">#           size=7 , angle=45, fontface=&quot;bold&quot;)</span></span>
<span id="cb633-6"><a href="general.html#cb633-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Right chart: using labels</span></span>
<span id="cb633-7"><a href="general.html#cb633-7" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="at">data=</span>annotation, <span class="fu">aes</span>( <span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">label=</span>label),                  </span>
<span id="cb633-8"><a href="general.html#cb633-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, </span>
<span id="cb633-9"><a href="general.html#cb633-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">size=</span><span class="dv">7</span> , <span class="at">angle=</span><span class="dv">45</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span> )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-annotation-2.png" width="672" /></p>
</div>
<div id="add-shapes-with-annotate" class="section level3" number="9.1.7">
<h3><span class="header-section-number">9.1.7</span> Add Shapes with <code>annotate()</code></h3>
<p>The <code>annotate()</code> function allows to add all kind of shape on a ggplot2 chart. The first argument will control what kind is used: rect or segment for rectangle, segment or arrow.</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="general.html#cb634-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add rectangles</span></span>
<span id="cb634-2"><a href="general.html#cb634-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="at">xmin=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="at">xmax=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>), <span class="at">ymin=</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">10</span>) , <span class="at">ymax=</span><span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">20</span>), <span class="at">alpha=</span><span class="fl">0.2</span>, <span class="at">color=</span><span class="st">&quot;blue&quot;</span>, <span class="at">fill=</span><span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-annotation-shapes-1.png" width="672" /></p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="general.html#cb635-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add segments</span></span>
<span id="cb635-2"><a href="general.html#cb635-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">xend =</span> <span class="dv">3</span>, <span class="at">y =</span> <span class="dv">25</span>, <span class="at">yend =</span> <span class="dv">15</span>, <span class="at">colour =</span> <span class="st">&quot;purple&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">alpha=</span><span class="fl">0.6</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-annotation-shapes-2.png" width="672" /></p>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="general.html#cb636-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add arrow</span></span>
<span id="cb636-2"><a href="general.html#cb636-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">2</span>, <span class="at">xend =</span> <span class="dv">4</span>, <span class="at">y =</span> <span class="dv">15</span>, <span class="at">yend =</span> <span class="dv">25</span>, <span class="at">colour =</span> <span class="st">&quot;pink&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">arrow=</span><span class="fu">arrow</span>())</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-annotation-shapes-3.png" width="672" /></p>
</div>
<div id="add-ablines-with-geom_hline-and-geom_vline" class="section level3" number="9.1.8">
<h3><span class="header-section-number">9.1.8</span> Add Ablines with <code>geom_hline()</code> and <code>geom_vline()</code></h3>
<p>An abline is a segment that goes from one chart extremity to the other. <code>ggplot2</code> offers the <code>geom_hline()</code> and <code>geom_vline()</code> functions that are dedicated to it.</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="general.html#cb637-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> </span>
<span id="cb637-2"><a href="general.html#cb637-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># horizontal</span></span>
<span id="cb637-3"><a href="general.html#cb637-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">25</span>, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb637-4"><a href="general.html#cb637-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># vertical</span></span>
<span id="cb637-5"><a href="general.html#cb637-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">3</span>, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, <span class="at">size=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-add-ablines-1.png" width="672" /></p>
</div>
<div id="add-a-point-and-a-range-with-pointrange" class="section level3" number="9.1.9">
<h3><span class="header-section-number">9.1.9</span> Add a Point and a Range with <code>pointrange()</code></h3>
<p>Last kind of annotation, add a dot and a segment directly with <code>pointrange()</code>.</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="general.html#cb638-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add point and range</span></span>
<span id="cb638-2"><a href="general.html#cb638-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">&quot;pointrange&quot;</span>, <span class="at">x =</span> <span class="fl">3.5</span>, <span class="at">y =</span> <span class="dv">20</span>, <span class="at">ymin =</span> <span class="dv">12</span>, <span class="at">ymax =</span> <span class="dv">28</span>,<span class="at">colour =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha=</span><span class="fl">0.4</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-add-point-range-1.png" width="672" /></p>
</div>
<div id="marginal-plot" class="section level3" number="9.1.10">
<h3><span class="header-section-number">9.1.10</span> Marginal Plot</h3>
<p>Marginal plots are not natively supported by <code>ggplot2, but their realisation is straightforward thanks to the</code>ggExtra<code>library as illustrated in [graph #277](https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2.html). ####</code>ggplot2` Scatterplot with Rug</p>
<p>This section demonstrates how to build a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> with rug with <code>R</code> and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. Adding rug gives insight about variable distribution and is especially helpful when markers overlap.
#### Adding Rug with <code>geom_rug()</code></p>
<p>A <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> displays the relationship between 2 numeric variables. You can easily add rug on X and Y axis thanks to the <code>geom_rug()</code> function to illustrate the distribution of dots.</p>
<p>Note you can as well add <a href="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2.html">marginal plots</a> to show these distributions.</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="general.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb639-2"><a href="general.html#cb639-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb639-3"><a href="general.html#cb639-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Iris dataset</span></span>
<span id="cb639-4"><a href="general.html#cb639-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="general.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb641-2"><a href="general.html#cb641-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, Petal.Length)) <span class="sc">+</span></span>
<span id="cb641-3"><a href="general.html#cb641-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb641-4"><a href="general.html#cb641-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>(<span class="at">col=</span><span class="st">&quot;steelblue&quot;</span>,<span class="at">alpha=</span><span class="fl">0.1</span>, <span class="at">size=</span><span class="fl">1.5</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-scatterplot-rug-1.png" width="672" /></p>
</div>
<div id="marginal-distribution-with-ggplot2-and-ggextra" class="section level3" number="9.1.11">
<h3><span class="header-section-number">9.1.11</span> Marginal Distribution with <code>ggplot2</code> and <code>ggExtra</code></h3>
<p>This section explains how to add marginal distributions to the X and Y axis of a <code>ggplot2</code> <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a>. It can be done using <a href="https://www.r-graph-gallery.com/histogram.html">histogram</a>, <a href="https://www.r-graph-gallery.com/boxplot.html">boxplot</a> or <a href="https://www.r-graph-gallery.com/density-plot.html">density plot</a> using the <code>ggExtra</code> library.</p>
<div id="basic-use-of-ggmarginal" class="section level4" number="9.1.11.1">
<h4><span class="header-section-number">9.1.11.1</span> Basic use of <code>ggMarginal()</code></h4>
<p>Here are 3 examples of marginal distribution added on X and Y axis of a scatterplot. The <code>ggExtra</code> library makes it a breeze thanks to the <code>ggMarginal()</code> function. Three main types of distribution are available: <a href="https://www.r-graph-gallery.com/histogram.html">histogram</a>, <a href="https://www.r-graph-gallery.com/density-plot.html">density</a> and <a href="https://www.r-graph-gallery.com/boxplot.html">boxplot</a>.</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="general.html#cb642-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb642-2"><a href="general.html#cb642-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb642-3"><a href="general.html#cb642-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb642-4"><a href="general.html#cb642-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb642-5"><a href="general.html#cb642-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The mtcars dataset is proposed in R</span></span>
<span id="cb642-6"><a href="general.html#cb642-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span>
<span id="cb642-7"><a href="general.html#cb642-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb642-8"><a href="general.html#cb642-8" aria-hidden="true" tabindex="-1"></a><span class="co"># classic plot :</span></span>
<span id="cb642-9"><a href="general.html#cb642-9" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg, <span class="at">color=</span>cyl, <span class="at">size=</span>cyl)) <span class="sc">+</span></span>
<span id="cb642-10"><a href="general.html#cb642-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb642-11"><a href="general.html#cb642-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb642-12"><a href="general.html#cb642-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb642-13"><a href="general.html#cb642-13" aria-hidden="true" tabindex="-1"></a><span class="co"># with marginal histogram</span></span>
<span id="cb642-14"><a href="general.html#cb642-14" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;histogram&quot;</span>)</span>
<span id="cb642-15"><a href="general.html#cb642-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb642-16"><a href="general.html#cb642-16" aria-hidden="true" tabindex="-1"></a><span class="co"># marginal density</span></span>
<span id="cb642-17"><a href="general.html#cb642-17" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;density&quot;</span>)</span>
<span id="cb642-18"><a href="general.html#cb642-18" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb642-19"><a href="general.html#cb642-19" aria-hidden="true" tabindex="-1"></a><span class="co"># marginal boxplot</span></span>
<span id="cb642-20"><a href="general.html#cb642-20" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;boxplot&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="general.html#cb643-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2_files/figure-html/unnamed-chunk-1-1.png" /></p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="general.html#cb644-1" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2_files/figure-html/unnamed-chunk-2-1.png" /></p>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="general.html#cb645-1" aria-hidden="true" tabindex="-1"></a>p3</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2_files/figure-html/unnamed-chunk-3-1.png" /></p>
</div>
</div>
<div id="more-customization" class="section level3" number="9.1.12">
<h3><span class="header-section-number">9.1.12</span> More Customization</h3>
<p>Three additional examples to show possible customization:</p>
<ul>
<li>Change marginal plot size with <code>size</code>.</li>
<li>Custom marginal plot appearance with all usual parameters.</li>
<li>Show only one marginal plot with <code>margins = 'x'</code> or <code>margins = 'y'</code>.</li>
</ul>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="general.html#cb646-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb646-2"><a href="general.html#cb646-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb646-3"><a href="general.html#cb646-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb646-4"><a href="general.html#cb646-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb646-5"><a href="general.html#cb646-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The mtcars dataset is proposed in R</span></span>
<span id="cb646-6"><a href="general.html#cb646-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span>
<span id="cb646-7"><a href="general.html#cb646-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb646-8"><a href="general.html#cb646-8" aria-hidden="true" tabindex="-1"></a><span class="co"># classic plot :</span></span>
<span id="cb646-9"><a href="general.html#cb646-9" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg, <span class="at">color=</span>cyl, <span class="at">size=</span>cyl)) <span class="sc">+</span></span>
<span id="cb646-10"><a href="general.html#cb646-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb646-11"><a href="general.html#cb646-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb646-12"><a href="general.html#cb646-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb646-13"><a href="general.html#cb646-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Set relative size of marginal plots (main plot 10x bigger than marginals)</span></span>
<span id="cb646-14"><a href="general.html#cb646-14" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;histogram&quot;</span>, <span class="at">size=</span><span class="dv">10</span>)</span>
<span id="cb646-15"><a href="general.html#cb646-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb646-16"><a href="general.html#cb646-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom marginal plots:</span></span>
<span id="cb646-17"><a href="general.html#cb646-17" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;histogram&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;slateblue&quot;</span>, <span class="at">xparams =</span> <span class="fu">list</span>(  <span class="at">bins=</span><span class="dv">10</span>))</span>
<span id="cb646-18"><a href="general.html#cb646-18" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb646-19"><a href="general.html#cb646-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Show only marginal plot for x axis</span></span>
<span id="cb646-20"><a href="general.html#cb646-20" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggMarginal</span>(p, <span class="at">margins =</span> <span class="st">&#39;x&#39;</span>, <span class="at">color=</span><span class="st">&quot;purple&quot;</span>, <span class="at">size=</span><span class="dv">4</span>)</span></code></pre></div>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="general.html#cb647-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2_files/figure-html/unnamed-chunk-4-1.png" /></p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="general.html#cb648-1" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2_files/figure-html/unnamed-chunk-5-1.png" /></p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="general.html#cb649-1" aria-hidden="true" tabindex="-1"></a>p3</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/277-marginal-histogram-for-ggplot2_files/figure-html/unnamed-chunk-6-1.png" /></p>
</div>
<div id="ggplot2-chart-appearance" class="section level3" number="9.1.13">
<h3><span class="header-section-number">9.1.13</span> <code>ggplot2</code> Chart Appearance</h3>
<p>The <code>theme()</code> function of <code>ggplot2</code> allows to customize the chart appearance. It controls 3 main types of components:</p>
<ul>
<li><a href="https://www.r-graph-gallery.com/238-custom-layout-axis-ggplot2.html">Axis</a>: controls the title, label, line and ticks.</li>
<li>Background: controls the background color and the major and minor grid lines.</li>
<li>Legend: controls position, text, symbols and more.</li>
</ul>
<div id="axis-manipulation-with-r-and-ggplot2" class="section level4" number="9.1.13.1">
<h4><span class="header-section-number">9.1.13.1</span> Axis Manipulation with R and <code>ggplot2</code></h4>
<p>This section describes all the available options to customize chart axis with <code>R</code> and <code>ggplot2</code>. It shows how to control the axis itself, its label, title, position and more.</p>
</div>
<div id="default-ggplot2-axis" class="section level4" number="9.1.13.2">
<h4><span class="header-section-number">9.1.13.2</span> Default <code>ggplot2</code> Axis</h4>
<p>Lets start with a very basic <code>ggplot2</code> <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a>. The axis usually looks very good with default option as you can see here.</p>
<p>Basically two main functions will allow to customize it:</p>
<ul>
<li><code>theme()</code> to change the axis appearance.</li>
<li><code>scale_x_</code> and <code>scale_y_</code> to change the axis type.</li>
</ul>
<p>Lets see how to use them</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb650-1"><a href="general.html#cb650-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load ggplot2</span></span>
<span id="cb650-2"><a href="general.html#cb650-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb650-3"><a href="general.html#cb650-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Very basic chart</span></span>
<span id="cb650-4"><a href="general.html#cb650-4" aria-hidden="true" tabindex="-1"></a>basic <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt)) <span class="sc">+</span> </span>
<span id="cb650-5"><a href="general.html#cb650-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb650-6"><a href="general.html#cb650-6" aria-hidden="true" tabindex="-1"></a>basic</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-default-axis-1.png" width="672" /></p>
</div>
</div>
<div id="set-axis-title-and-limits-with-xlab-and-xlim" class="section level3" number="9.1.14">
<h3><span class="header-section-number">9.1.14</span> Set Axis Title and Limits with <code>xlab()</code> and <code>xlim()</code></h3>
<p>Two basic options that are used in almost every charts are <code>xlab()</code> and <code>xlim()</code> to control the axis title and the axis limits respectively.</p>
<p><u>Note</u>: its possible to specify only the lower or upper bound of a limit. For instance, try <code>xlim(0,NA)</code></p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="general.html#cb651-1" aria-hidden="true" tabindex="-1"></a>basic<span class="sc">+</span></span>
<span id="cb651-2"><a href="general.html#cb651-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;mpg value&quot;</span>) <span class="sc">+</span> </span>
<span id="cb651-3"><a href="general.html#cb651-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">50</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-set-axis-title-and-limits-1.png" width="672" /></p>
</div>
<div id="customize-axis-title-appearance-axis.title" class="section level3" number="9.1.15">
<h3><span class="header-section-number">9.1.15</span> Customize Axis Title Appearance: <code>axis.title</code></h3>
<p>The <code>theme()</code> function allows to customize all parts of the <code>ggplot2</code> chart. The <code>axis.title</code>. controls the axis title appearance. Since it is text, features are wrapped in a <code>element_text()</code> function. The code below shows how to change the most common features:</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="general.html#cb652-1" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>( <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">15</span>, <span class="at">face=</span><span class="dv">3</span>)) <span class="co"># face = title location</span></span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/238-custom-layout-axis-ggplot2_files/figure-html/thecode3a-1.png" /></p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="general.html#cb653-1" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title.x =</span> <span class="fu">element_text</span>( <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">15</span>, <span class="at">face=</span><span class="dv">3</span>))</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-customize-axis-title-appearence-1.png" width="672" /></p>
</div>
<div id="customize-axis-labels-axis.text" class="section level3" number="9.1.16">
<h3><span class="header-section-number">9.1.16</span> Customize Axis Labels: <code>axis.text</code></h3>
<p>Using pretty much the same process, the <code>axis.text()</code> function allows to control text label features. Once more, using <code>axis.text.x()</code> would modify the x axis only.</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="general.html#cb654-1" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> </span>
<span id="cb654-2"><a href="general.html#cb654-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>( </span>
<span id="cb654-3"><a href="general.html#cb654-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle =</span> <span class="dv">90</span>, </span>
<span id="cb654-4"><a href="general.html#cb654-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="st">&quot;blue&quot;</span>, </span>
<span id="cb654-5"><a href="general.html#cb654-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">15</span>, </span>
<span id="cb654-6"><a href="general.html#cb654-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">face=</span><span class="dv">3</span>)</span>
<span id="cb654-7"><a href="general.html#cb654-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-customize-axis-labels-1.png" width="672" /></p>
</div>
<div id="customize-axis-ticks-and-axis-line-with-axis.ticks-and-axis.line" class="section level3" number="9.1.17">
<h3><span class="header-section-number">9.1.17</span> Customize Axis Ticks and Axis Line with <code>axis.ticks()</code> and <code>axis.line()</code></h3>
<p>The <code>axis.ticks()</code> function controls the ticks appearance. <code>axis.line()</code> controles the axis line. Both of them are lines, so options are wrapped in a <code>element_line()</code> statement.</p>
<p><code>linetype</code> controls the type of line in use, see the <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2 section</a> for more.</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="general.html#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart 1: ticks</span></span>
<span id="cb655-2"><a href="general.html#cb655-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb655-3"><a href="general.html#cb655-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>) , </span>
<span id="cb655-4"><a href="general.html#cb655-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb655-5"><a href="general.html#cb655-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/238-custom-layout-axis-ggplot2_files/figure-html/thecode5a-1.png" /></p>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="general.html#cb656-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart 2: axis lines</span></span>
<span id="cb656-2"><a href="general.html#cb656-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">colour =</span> <span class="st">&quot;green&quot;</span>, <span class="at">linetype=</span><span class="dv">2</span>))</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/238-custom-layout-axis-ggplot2_files/figure-html/thecode5b-1.png" /></p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="general.html#cb657-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chart 3: combination</span></span>
<span id="cb657-2"><a href="general.html#cb657-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb657-3"><a href="general.html#cb657-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb657-4"><a href="general.html#cb657-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>( <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">15</span>, <span class="at">face=</span><span class="dv">2</span>),</span>
<span id="cb657-5"><a href="general.html#cb657-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">colour =</span> <span class="st">&quot;green&quot;</span>, <span class="at">linetype=</span><span class="dv">2</span>),</span>
<span id="cb657-6"><a href="general.html#cb657-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>( <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">color=</span><span class="st">&quot;blue&quot;</span>, <span class="at">size=</span><span class="dv">15</span>, <span class="at">face=</span><span class="dv">2</span>)</span>
<span id="cb657-7"><a href="general.html#cb657-7" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/238-custom-layout-axis-ggplot2_files/figure-html/thecode5c-1.png" /></p>
</div>
<div id="background-manipulation-with-r-and-ggplot2" class="section level3" number="9.1.18">
<h3><span class="header-section-number">9.1.18</span> Background Manipulation with R and ggplot2</h3>
<p>This section describes all the available options to customize chart background with <code>R</code> and <code>ggplot2</code>. It shows how to control the background color and the minor and major gridlines.</p>
<div id="default-ggplot2-background" class="section level4" number="9.1.18.1">
<h4><span class="header-section-number">9.1.18.1</span> Default <code>ggplot2</code> Background</h4>
<p>Lets start with a very basic <code>ggplot2</code> <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a>. By default, ggplot2 offers a grey background with white major and minor gridlines.</p>
<p>It is possible to change that thanks to the <code>theme()</code> function. Keep reading to learn how!</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="general.html#cb658-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load ggplot2</span></span>
<span id="cb658-2"><a href="general.html#cb658-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb658-3"><a href="general.html#cb658-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Very basic chart</span></span>
<span id="cb658-4"><a href="general.html#cb658-4" aria-hidden="true" tabindex="-1"></a>basic <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt)) <span class="sc">+</span></span>
<span id="cb658-5"><a href="general.html#cb658-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb658-6"><a href="general.html#cb658-6" aria-hidden="true" tabindex="-1"></a>basic</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-default-background-1.png" width="672" /></p>
</div>
</div>
<div id="background-color-plot.background-and-panel.background" class="section level3" number="9.1.19">
<h3><span class="header-section-number">9.1.19</span> Background Color: <code>plot.background</code> and <code>panel.background</code></h3>
<p>Two options of the <code>theme()</code> functions are available to control the map background color. <code>plot_background</code> controls the color of the whole chart. <code>panel.background</code> controls the part between the axis.</p>
<p>Both are rectangles, with features specified through an <code>element_rect()</code> function.</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="general.html#cb659-1" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb659-2"><a href="general.html#cb659-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;green&quot;</span>), </span>
<span id="cb659-3"><a href="general.html#cb659-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;red&quot;</span>, <span class="at">colour=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb659-4"><a href="general.html#cb659-4" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-background-color-1.png" width="672" /></p>
</div>
<div id="customize-the-grid-panel.grid.major-and-panel.grid.minor" class="section level3" number="9.1.20">
<h3><span class="header-section-number">9.1.20</span> Customize the Grid: <code>panel.grid.major</code> and <code>panel.grid.minor</code></h3>
<p>Two main types of grid exist with <code>ggplot2</code>: major and minor. They are controlled thanks to the <code>panel.grid.major</code> and <code>panel.grid.minor</code> options.</p>
<p>Once more, you can add the options <code>.y</code> or <code>.x</code> at the end of the function name to control one orientation only.</p>
<p>Features are wrapped in an <code>element_line()</code> function. Specifying <code>element_blanck()</code> will simply removing the grid.</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="general.html#cb660-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify for both axis</span></span>
<span id="cb660-2"><a href="general.html#cb660-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb660-3"><a href="general.html#cb660-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dotted&quot;</span>),</span>
<span id="cb660-4"><a href="general.html#cb660-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb660-5"><a href="general.html#cb660-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-background-customize-grid-1.png" width="672" /></p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="general.html#cb661-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify y axis only (remove)</span></span>
<span id="cb661-2"><a href="general.html#cb661-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb661-3"><a href="general.html#cb661-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb661-4"><a href="general.html#cb661-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb661-5"><a href="general.html#cb661-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-background-customize-grid-2.png" width="672" /></p>
</div>
<div id="building-a-nice-legend-with-r-and-ggplot2" class="section level3" number="9.1.21">
<h3><span class="header-section-number">9.1.21</span> Building a Nice Legend with R and <code>ggplot2</code></h3>
<p>This section describes all the available options to customize the chart legend with <code>R</code> and <code>ggplot2</code>. It shows how to control the <strong>title</strong>, <strong>text</strong>, <strong>location</strong>, <strong>symbols</strong> and more.</p>
<div id="default-legend-with-ggplot2" class="section level4" number="9.1.21.1">
<h4><span class="header-section-number">9.1.21.1</span> Default Legend with <code>ggplot2</code></h4>
<p>By default, <code>ggplot2</code> will automatically build a legend on your chart as soon as a shape feature is mapped to a variable in <code>aes()</code> part of the <code>ggplot()</code> call. So if you use color, shape or alpha, a legend will be available.</p>
<p>Here is an example based on the mtcars dataset. This section is gonna show how to use the <code>theme()</code> function to apply all type of customization on this default legend.</p>
<p><u>Note</u>: this post is strongly inspired by the doc you get typing <code>ggplot2::theme</code>, give it a go!</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="general.html#cb662-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load ggplot2</span></span>
<span id="cb662-2"><a href="general.html#cb662-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb662-3"><a href="general.html#cb662-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Very basic chart</span></span>
<span id="cb662-4"><a href="general.html#cb662-4" aria-hidden="true" tabindex="-1"></a>basic <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">colour =</span> <span class="fu">factor</span>(cyl), <span class="at">shape =</span> <span class="fu">factor</span>(vs) )) <span class="sc">+</span></span>
<span id="cb662-5"><a href="general.html#cb662-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_point</span>()</span>
<span id="cb662-6"><a href="general.html#cb662-6" aria-hidden="true" tabindex="-1"></a>basic</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-building-background-grid-1.png" width="672" /></p>
</div>
</div>
<div id="change-legend-title-with-labs" class="section level3" number="9.1.22">
<h3><span class="header-section-number">9.1.22</span> Change Legend Title with <code>labs()</code></h3>
<p>The <code>labs()</code> function allows to change the legend titles. You can specify one title per section of the legend, i.e.per aesthetics in use in the chart.</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="general.html#cb663-1" aria-hidden="true" tabindex="-1"></a>basic<span class="sc">+</span></span>
<span id="cb663-2"><a href="general.html#cb663-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb663-3"><a href="general.html#cb663-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">colour =</span> <span class="st">&quot;name1&quot;</span>,</span>
<span id="cb663-4"><a href="general.html#cb663-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">shape =</span> <span class="st">&quot;name2&quot;</span></span>
<span id="cb663-5"><a href="general.html#cb663-5" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-change-legend-title-1.png" width="672" /></p>
</div>
<div id="get-rid-of-the-legend-guides-and-theme" class="section level3" number="9.1.23">
<h3><span class="header-section-number">9.1.23</span> Get Rid of the Legend: <code>guides()</code> and <code>theme()</code></h3>
<p>It is possible to remove a specific part or the whole legend thanks to the <code>theme()</code> and the <code>guides()</code> function. See code below:</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="general.html#cb664-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Left -&gt; get rid of one part of the legend</span></span>
<span id="cb664-2"><a href="general.html#cb664-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">shape=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-delete-legend-1.png" width="672" /></p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="general.html#cb665-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Right -&gt; only the x axis is modified</span></span>
<span id="cb665-2"><a href="general.html#cb665-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-delete-legend-2.png" width="672" /></p>
</div>
<div id="control-legend-position-with-legend.position" class="section level3" number="9.1.24">
<h3><span class="header-section-number">9.1.24</span> Control Legend Position with <code>legend.position</code></h3>
<p>You can place the legend literally anywhere.</p>
<p>To put it around the chart, use the <code>legend.position</code> option and specify <code>top</code>, <code>right</code>, <code>bottom</code>, or <code>left</code>. To put it inside the plot area, specify a vector of length 2, both values going between 0 and 1 and giving the x and y coordinates.</p>
<p>Note: the command <code>legend.justification</code> sets the corner that the position refers to.</p>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="general.html#cb666-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Left -&gt; legend around the plot</span></span>
<span id="cb666-2"><a href="general.html#cb666-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-legend-position-1.png" width="672" /></p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="general.html#cb667-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Right -&gt; inside the plot area</span></span>
<span id="cb667-2"><a href="general.html#cb667-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb667-3"><a href="general.html#cb667-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">95</span>, .<span class="dv">95</span>),</span>
<span id="cb667-4"><a href="general.html#cb667-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>),</span>
<span id="cb667-5"><a href="general.html#cb667-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.just =</span> <span class="st">&quot;right&quot;</span>,</span>
<span id="cb667-6"><a href="general.html#cb667-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)</span>
<span id="cb667-7"><a href="general.html#cb667-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-legend-position-2.png" width="672" /></p>
</div>
<div id="legend-appearance" class="section level3" number="9.1.25">
<h3><span class="header-section-number">9.1.25</span> Legend Appearance</h3>
<p>Here are 4 examples showing how to customize the legend main features:</p>
<ul>
<li>Box with <code>legend.box.</code>: it is a rectangle that frames the legend. Give features with <code>element_rect()</code>.</li>
<li>Key with <code>legend.key</code>: the key is the part showing the symbols. Note that symbols will automatically be the ones used on the chart.</li>
<li>Text with <code>legend.text</code>: here you can control the color, the size of the right part of the legend.</li>
<li>Title with <code>legend.title</code>.</li>
</ul>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="general.html#cb668-1" aria-hidden="true" tabindex="-1"></a><span class="co"># custom box around legend</span></span>
<span id="cb668-2"><a href="general.html#cb668-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb668-3"><a href="general.html#cb668-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">2</span>),</span>
<span id="cb668-4"><a href="general.html#cb668-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="dv">116</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)</span>
<span id="cb668-5"><a href="general.html#cb668-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-legend-appearance-1.png" width="672" /></p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="general.html#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="co"># custom the key</span></span>
<span id="cb669-2"><a href="general.html#cb669-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>))</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-legend-appearance-2.png" width="672" /></p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="general.html#cb670-1" aria-hidden="true" tabindex="-1"></a><span class="co"># custom the text</span></span>
<span id="cb670-2"><a href="general.html#cb670-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>))</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-legend-appearance-3.png" width="672" /></p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="general.html#cb671-1" aria-hidden="true" tabindex="-1"></a><span class="co"># custom the title</span></span>
<span id="cb671-2"><a href="general.html#cb671-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-legend-appearance-4.png" width="672" /></p>
</div>
<div id="reorder-a-variable-with-ggplot2" class="section level3" number="9.1.26">
<h3><span class="header-section-number">9.1.26</span> Reorder a Variable with <code>ggplot2</code></h3>
<p>This section describes how to reorder a variable in a <code>ggplot2</code> chart. Several methods are suggested, always providing examples with reproducible code chunks.</p>
<p>Reordering groups in a <code>ggplot2</code> chart can be a struggle. This is due to the fact that ggplot2 takes into account the order of the <code>factor</code> levels, not the order you observe in your data frame. You can sort your input data frame with <code>sort()</code> or <code>arrange()</code>, it will never have any impact on your <code>ggplot2</code> output.</p>
<p>This post explains how to reorder the level of your factor through several examples. Examples are based on 2 dummy datasets:</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="general.html#cb672-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb672-2"><a href="general.html#cb672-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb672-3"><a href="general.html#cb672-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb672-4"><a href="general.html#cb672-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 1: one value per group</span></span>
<span id="cb672-5"><a href="general.html#cb672-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb672-6"><a href="general.html#cb672-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">c</span>(<span class="st">&quot;north&quot;</span>,<span class="st">&quot;south&quot;</span>,<span class="st">&quot;south-east&quot;</span>,<span class="st">&quot;north-west&quot;</span>,<span class="st">&quot;south-west&quot;</span>,<span class="st">&quot;north-east&quot;</span>,<span class="st">&quot;west&quot;</span>,<span class="st">&quot;east&quot;</span>),</span>
<span id="cb672-7"><a href="general.html#cb672-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">val=</span><span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>), <span class="dv">8</span> )</span>
<span id="cb672-8"><a href="general.html#cb672-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb672-9"><a href="general.html#cb672-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb672-10"><a href="general.html#cb672-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 2: several values per group (natively provided in R)</span></span>
<span id="cb672-11"><a href="general.html#cb672-11" aria-hidden="true" tabindex="-1"></a><span class="co"># mpg</span></span></code></pre></div>
</div>
<div id="method-1-the-forecats-library" class="section level3" number="9.1.27">
<h3><span class="header-section-number">9.1.27</span> Method 1: the <code>Forecats</code> library</h3>
<p>The <a href="https://github.com/tidyverse/forcats">Forecats</a> library is a library from the <a href="https://www.tidyverse.org/">tidyverse</a> especially made to handle factors in R. It provides a suite of useful tools that solve common problems with factors. The <code>fact_reorder()</code> function allows to reorder the factor (<code>data$name</code> for example) following the value of another column (<code>data$val</code> here).</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="general.html#cb673-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load the library</span></span>
<span id="cb673-2"><a href="general.html#cb673-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb673-3"><a href="general.html#cb673-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder following the value of another column:</span></span>
<span id="cb673-4"><a href="general.html#cb673-4" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb673-5"><a href="general.html#cb673-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, val)) <span class="sc">%&gt;%</span></span>
<span id="cb673-6"><a href="general.html#cb673-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>val)) <span class="sc">+</span></span>
<span id="cb673-7"><a href="general.html#cb673-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;#f68060&quot;</span>, <span class="at">alpha=</span>.<span class="dv">6</span>, <span class="at">width=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb673-8"><a href="general.html#cb673-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb673-9"><a href="general.html#cb673-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb673-10"><a href="general.html#cb673-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb673-11"><a href="general.html#cb673-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb673-12"><a href="general.html#cb673-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Reverse side</span></span>
<span id="cb673-13"><a href="general.html#cb673-13" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb673-14"><a href="general.html#cb673-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, <span class="fu">desc</span>(val))) <span class="sc">%&gt;%</span></span>
<span id="cb673-15"><a href="general.html#cb673-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>val)) <span class="sc">+</span></span>
<span id="cb673-16"><a href="general.html#cb673-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;#f68060&quot;</span>, <span class="at">alpha=</span>.<span class="dv">6</span>, <span class="at">width=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb673-17"><a href="general.html#cb673-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb673-18"><a href="general.html#cb673-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb673-19"><a href="general.html#cb673-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-2-1.png" style="width:50.0%" /><img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-2-2.png" style="width:50.0%" />
</center>
<p>If you have several values per level of your factor, you can specify which function to apply to determine the order. The default is to use the median, but you can use the number of data points per group to make the classification:</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="general.html#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using median</span></span>
<span id="cb674-2"><a href="general.html#cb674-2" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb674-3"><a href="general.html#cb674-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, hwy, <span class="at">.fun=</span><span class="st">&#39;median&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb674-4"><a href="general.html#cb674-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(class, hwy), <span class="at">y=</span>hwy, <span class="at">fill=</span>class)) <span class="sc">+</span> </span>
<span id="cb674-5"><a href="general.html#cb674-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb674-6"><a href="general.html#cb674-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;class&quot;</span>) <span class="sc">+</span></span>
<span id="cb674-7"><a href="general.html#cb674-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb674-8"><a href="general.html#cb674-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb674-9"><a href="general.html#cb674-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb674-10"><a href="general.html#cb674-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Using number of observation per group</span></span>
<span id="cb674-11"><a href="general.html#cb674-11" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb674-12"><a href="general.html#cb674-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, hwy, <span class="at">.fun=</span><span class="st">&#39;length&#39;</span> )) <span class="sc">%&gt;%</span></span>
<span id="cb674-13"><a href="general.html#cb674-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>class, <span class="at">y=</span>hwy, <span class="at">fill=</span>class)) <span class="sc">+</span> </span>
<span id="cb674-14"><a href="general.html#cb674-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb674-15"><a href="general.html#cb674-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;class&quot;</span>) <span class="sc">+</span></span>
<span id="cb674-16"><a href="general.html#cb674-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb674-17"><a href="general.html#cb674-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb674-18"><a href="general.html#cb674-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-3-1.png" style="width:50.0%" /><img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-3-2.png" style="width:50.0%" />
</center>
<p>The last common operation is to provide a specific order to your levels, you can do so using the <code>fct_relevel()</code> function as follow:</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="general.html#cb675-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder following a precise order</span></span>
<span id="cb675-2"><a href="general.html#cb675-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb675-3"><a href="general.html#cb675-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_relevel</span>(name, </span>
<span id="cb675-4"><a href="general.html#cb675-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;north&quot;</span>, <span class="st">&quot;north-east&quot;</span>, <span class="st">&quot;east&quot;</span>, </span>
<span id="cb675-5"><a href="general.html#cb675-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;south-east&quot;</span>, <span class="st">&quot;south&quot;</span>, <span class="st">&quot;south-west&quot;</span>, </span>
<span id="cb675-6"><a href="general.html#cb675-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;west&quot;</span>, <span class="st">&quot;north-west&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb675-7"><a href="general.html#cb675-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>val)) <span class="sc">+</span></span>
<span id="cb675-8"><a href="general.html#cb675-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb675-9"><a href="general.html#cb675-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb675-10"><a href="general.html#cb675-10" aria-hidden="true" tabindex="-1"></a><span class="co">#p</span></span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-5-1.png" style="width:75.0%" />
</center>
</div>
<div id="method-2-using-dplyr-only" class="section level3" number="9.1.28">
<h3><span class="header-section-number">9.1.28</span> Method 2: Using <code>dplyr</code> Only</h3>
<p>The <code>mutate()</code> function of <code>dplyr</code> allows to create a new variable or modify an existing one. It is possible to use it to recreate a factor with a specific order. Here are 2 examples:</p>
<ul>
<li>The first use <code>arrange()</code> to sort your data frame, and reorder the factor following this desired order.</li>
<li>The second specifies a custom order for the factor giving the levels one by one.</li>
</ul>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="general.html#cb676-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb676-2"><a href="general.html#cb676-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(val) <span class="sc">%&gt;%</span>    <span class="co"># First sort by val. This sort the dataframe but NOT the factor levels</span></span>
<span id="cb676-3"><a href="general.html#cb676-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name=</span><span class="fu">factor</span>(name, <span class="at">levels=</span>name)) <span class="sc">%&gt;%</span>   <span class="co"># This trick update the factor levels</span></span>
<span id="cb676-4"><a href="general.html#cb676-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>val)) <span class="sc">+</span></span>
<span id="cb676-5"><a href="general.html#cb676-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">xend=</span>name, <span class="at">yend=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb676-6"><a href="general.html#cb676-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>( <span class="at">size=</span><span class="dv">4</span>, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>) <span class="sc">+</span></span>
<span id="cb676-7"><a href="general.html#cb676-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb676-8"><a href="general.html#cb676-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb676-9"><a href="general.html#cb676-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb676-10"><a href="general.html#cb676-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb676-11"><a href="general.html#cb676-11" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb676-12"><a href="general.html#cb676-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(val) <span class="sc">%&gt;%</span></span>
<span id="cb676-13"><a href="general.html#cb676-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">factor</span>(name, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;north&quot;</span>, <span class="st">&quot;north-east&quot;</span>, <span class="st">&quot;east&quot;</span>, <span class="st">&quot;south-east&quot;</span>, <span class="st">&quot;south&quot;</span>, <span class="st">&quot;south-west&quot;</span>, <span class="st">&quot;west&quot;</span>, <span class="st">&quot;north-west&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb676-14"><a href="general.html#cb676-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>val)) <span class="sc">+</span></span>
<span id="cb676-15"><a href="general.html#cb676-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">xend=</span>name, <span class="at">yend=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb676-16"><a href="general.html#cb676-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>( <span class="at">size=</span><span class="dv">4</span>, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>) <span class="sc">+</span></span>
<span id="cb676-17"><a href="general.html#cb676-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb676-18"><a href="general.html#cb676-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-6-1.png" style="width:50.0%" /><img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-6-2.png" style="width:50.0%" /></p>
</div>
<div id="method-3-the-reorder-function-of-base-r" class="section level3" number="9.1.29">
<h3><span class="header-section-number">9.1.29</span> Method 3: the <code>reorder()</code> function of Base R</h3>
<p>In case your an unconditional user of the good old R, here is how to control the order using the <code>reorder()</code> function inside a <code>with()</code> call:</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="general.html#cb677-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reorder is close to order, but is made to change the order of the factor levels.</span></span>
<span id="cb677-2"><a href="general.html#cb677-2" aria-hidden="true" tabindex="-1"></a>mpg<span class="sc">$</span>class <span class="ot">=</span> <span class="fu">with</span>(mpg, <span class="fu">reorder</span>(class, hwy, median))</span>
<span id="cb677-3"><a href="general.html#cb677-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb677-4"><a href="general.html#cb677-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>class, <span class="at">y=</span>hwy, <span class="at">fill=</span>class)) <span class="sc">+</span> </span>
<span id="cb677-5"><a href="general.html#cb677-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb677-6"><a href="general.html#cb677-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;class&quot;</span>) <span class="sc">+</span></span>
<span id="cb677-7"><a href="general.html#cb677-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb677-8"><a href="general.html#cb677-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb677-9"><a href="general.html#cb677-9" aria-hidden="true" tabindex="-1"></a><span class="co">#p</span></span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2_files/figure-html/unnamed-chunk-8-1.png" style="width:75.0%" />
</center>
</div>
<div id="ggplot2-title" class="section level3" number="9.1.30">
<h3><span class="header-section-number">9.1.30</span> <code>ggplot2</code> Title</h3>
<p>The <code>ggtitle()</code> function allows to add a title to the chart. The following post will guide you through its usage, showing how to control title main features: position, font, color, text and more.</p>
<div id="title-manipulation-with-r-and-ggplot2" class="section level4" number="9.1.30.1">
<h4><span class="header-section-number">9.1.30.1</span> Title Manipulation with R and ggplot2</h4>
<p>This section describes all the available options to customize the chart title with <code>R</code> and <code>ggplot2</code>. It shows how to control its color, its position, and more.</p>
</div>
<div id="default-ggplot2-title" class="section level4" number="9.1.30.2">
<h4><span class="header-section-number">9.1.30.2</span> Default <code>ggplot2</code> Title</h4>
<p>It is possible to add a title to a ggplot2 chart using the <code>ggtitle()</code> function. It works as follow:</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="general.html#cb678-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library &amp; data</span></span>
<span id="cb678-2"><a href="general.html#cb678-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb678-3"><a href="general.html#cb678-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb678-4"><a href="general.html#cb678-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb678-5"><a href="general.html#cb678-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic plot with title</span></span>
<span id="cb678-6"><a href="general.html#cb678-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="at">data=</span>data, <span class="fu">aes</span>(<span class="at">x=</span>x)) <span class="sc">+</span> </span>
<span id="cb678-7"><a href="general.html#cb678-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill=</span><span class="st">&quot;skyblue&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb678-8"><a href="general.html#cb678-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;A blue Histogram&quot;</span>) <span class="sc">+</span></span>
<span id="cb678-9"><a href="general.html#cb678-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/289-control-ggplot2-title_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
</div>
<div id="title-on-several-lines" class="section level3" number="9.1.31">
<h3><span class="header-section-number">9.1.31</span> Title on Several Lines</h3>
<p>It is a common need to set the title on several lines. To add a break and skip to a second line, just add a <code>\n</code> in the text.</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="general.html#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="co"># title on several lines</span></span>
<span id="cb679-2"><a href="general.html#cb679-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="at">data=</span>data, <span class="fu">aes</span>(<span class="at">x=</span>x)) <span class="sc">+</span> </span>
<span id="cb679-3"><a href="general.html#cb679-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill=</span><span class="st">&quot;skyblue&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb679-4"><a href="general.html#cb679-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;A blue </span><span class="sc">\n</span><span class="st">Histogram&quot;</span>) <span class="sc">+</span></span>
<span id="cb679-5"><a href="general.html#cb679-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() </span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/289-control-ggplot2-title_files/figure-html/thecode2-1.png" style="width:75.0%" />
</center>
</div>
<div id="title-appearance-and-position" class="section level3" number="9.1.32">
<h3><span class="header-section-number">9.1.32</span> Title Appearance and Position</h3>
<p>Here are 2 tricks to control text appearance and its position. Both features are controlled thanks to the <code>plot.title</code> argument of the <code>theme()</code> function. Appearance can be controlled with option such as <code>family</code>, <code>size</code> or <code>color</code>, when position is controlled with <code>hjust</code> and <code>vjust</code>.</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="general.html#cb680-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom title appearance</span></span>
<span id="cb680-2"><a href="general.html#cb680-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="at">data=</span>data, <span class="fu">aes</span>(<span class="at">x=</span>x)) <span class="sc">+</span> </span>
<span id="cb680-3"><a href="general.html#cb680-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill=</span><span class="st">&quot;skyblue&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb680-4"><a href="general.html#cb680-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;A blue Histogram&quot;</span>) <span class="sc">+</span></span>
<span id="cb680-5"><a href="general.html#cb680-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb680-6"><a href="general.html#cb680-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb680-7"><a href="general.html#cb680-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">family=</span><span class="st">&#39;&#39;</span>, <span class="at">face=</span><span class="st">&#39;bold&#39;</span>, <span class="at">colour=</span><span class="st">&#39;purple&#39;</span>, <span class="at">size=</span><span class="dv">26</span>)</span>
<span id="cb680-8"><a href="general.html#cb680-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/289-control-ggplot2-title_files/figure-html/thecode3a-1.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="general.html#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust the position of title</span></span>
<span id="cb681-2"><a href="general.html#cb681-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="at">data=</span>data, <span class="fu">aes</span>(<span class="at">x=</span>x)) <span class="sc">+</span> </span>
<span id="cb681-3"><a href="general.html#cb681-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill=</span><span class="st">&quot;skyblue&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb681-4"><a href="general.html#cb681-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;With title on the right&quot;</span>) <span class="sc">+</span></span>
<span id="cb681-5"><a href="general.html#cb681-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb681-6"><a href="general.html#cb681-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb681-7"><a href="general.html#cb681-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title=</span><span class="fu">element_text</span>( <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">vjust=</span><span class="fl">0.5</span>, <span class="at">face=</span><span class="st">&#39;bold&#39;</span>)</span>
<span id="cb681-8"><a href="general.html#cb681-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/289-control-ggplot2-title_files/figure-html/thecode3b-1.png" style="width:75.0%" />
</center>
</div>
<div id="customize-a-specific-word-only" class="section level3" number="9.1.33">
<h3><span class="header-section-number">9.1.33</span> Customize a Specific Word Only</h3>
<p>If you want to highlight a specific set of words in the title, it is double thanks to the <code>expression()</code> function.</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="general.html#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom a few word of the title only:</span></span>
<span id="cb682-2"><a href="general.html#cb682-2" aria-hidden="true" tabindex="-1"></a>my_title <span class="ot">&lt;-</span> <span class="fu">expression</span>(<span class="fu">paste</span>(<span class="st">&quot;A &quot;</span>, <span class="fu">italic</span>(<span class="fu">bold</span>(<span class="st">&quot;blue&quot;</span>)), <span class="st">&quot; histogram&quot;</span>))</span>
<span id="cb682-3"><a href="general.html#cb682-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="at">data=</span>data, <span class="fu">aes</span>(<span class="at">x=</span>x)) <span class="sc">+</span> </span>
<span id="cb682-4"><a href="general.html#cb682-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill=</span><span class="st">&quot;skyblue&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb682-5"><a href="general.html#cb682-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(my_title) <span class="sc">+</span></span>
<span id="cb682-6"><a href="general.html#cb682-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/289-control-ggplot2-title_files/figure-html/thecode5-1.png" style="width:75.0%" />
</center>
</div>
<div id="small-multiples-facet_wrap-and-facet_grid" class="section level3" number="9.1.34">
<h3><span class="header-section-number">9.1.34</span> Small Multiples: <code>facet_wrap()</code> and <code>facet_grid()</code></h3>
<p>Small multiples is a very powerful dataviz technique. It split the chart window in many small similar charts: each represents a specific group of a categorical variable. The following post describes the main use cases using <code>facet_wrap()</code> and <code>facet_grid()</code> and should get you started quickly.</p>
</div>
<div id="faceting-with-ggplot2" class="section level3" number="9.1.35">
<h3><span class="header-section-number">9.1.35</span> Faceting with <code>ggplot2</code></h3>
<p>This section describes all the available options to use small multiples with R and ggplot2. it shows how to efficiently split the chart window by row, column or both to show every group of the dataset separately.</p>
<div id="what-is-small-multiple" class="section level4" number="9.1.35.1">
<h4><span class="header-section-number">9.1.35.1</span> What is Small Multiple</h4>
<p>Faceting is the process that split the chart window in several small parts (a grid), and display a similar chart in each section. Each section usually shows the same graph for a specific group of the dataset. The result is usually called small multiple.</p>
<p>It is a very <a href="https://www.data-to-viz.com/graph/area.html">powerful technique</a> in data visualization, and a major advantage of using <code>ggplot2</code> is that it offers functions allowing to build it in a single line of code. Here is an example showing the evolution of a few baby names in the US. (<a href="https://www.data-to-viz.com/graph/area.html">source</a>)</p>
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb683-1"><a href="general.html#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb683-2"><a href="general.html#cb683-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb683-3"><a href="general.html#cb683-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb683-4"><a href="general.html#cb683-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb683-5"><a href="general.html#cb683-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb683-6"><a href="general.html#cb683-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb683-7"><a href="general.html#cb683-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb683-8"><a href="general.html#cb683-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb683-9"><a href="general.html#cb683-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb683-10"><a href="general.html#cb683-10" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb683-11"><a href="general.html#cb683-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Amanda&quot;</span>, <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Deborah&quot;</span>,   <span class="st">&quot;Dorothy&quot;</span>, <span class="st">&quot;Betty&quot;</span>, <span class="st">&quot;Helen&quot;</span>, <span class="st">&quot;Jennifer&quot;</span>, <span class="st">&quot;Shirley&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb683-12"><a href="general.html#cb683-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb683-13"><a href="general.html#cb683-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb683-14"><a href="general.html#cb683-14" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span></span>
<span id="cb683-15"><a href="general.html#cb683-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb683-16"><a href="general.html#cb683-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>() <span class="sc">+</span></span>
<span id="cb683-17"><a href="general.html#cb683-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb683-18"><a href="general.html#cb683-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb683-19"><a href="general.html#cb683-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb683-20"><a href="general.html#cb683-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb683-21"><a href="general.html#cb683-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb683-22"><a href="general.html#cb683-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb683-23"><a href="general.html#cb683-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb683-24"><a href="general.html#cb683-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb683-25"><a href="general.html#cb683-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb683-26"><a href="general.html#cb683-26" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb683-27"><a href="general.html#cb683-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>name, <span class="at">scale=</span><span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-faceting-small-multiple-1.png" width="672" /></p>
</div>
</div>
<div id="faceting-with-facet_wrap" class="section level3" number="9.1.36">
<h3><span class="header-section-number">9.1.36</span> Faceting with <code>facet_wrap()</code></h3>
<p><code>facet_wrap()</code> is the most common function for faceting with ggplot2. It builds a new chart for each level of a categorical variable. You can add the charts horizontally (graph1) or vertically (graph2, using <code>dir="v"</code>). Note that if the number of group is big enough, ggplot2 will automatically display charts on several rows/columns.</p>
<p>The grey bar showing the related level can be placed on top or on the bottom thanks to the <code>strip.position</code> option (graph3).</p>
<p>Last but not least, you can choose whether every graph have the same scale or not with the <code>scales</code> option (graph4).</p>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="general.html#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library &amp; datset</span></span>
<span id="cb684-2"><a href="general.html#cb684-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb684-3"><a href="general.html#cb684-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="general.html#cb686-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split by columns (default)</span></span>
<span id="cb686-2"><a href="general.html#cb686-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span><span class="fu">as.factor</span>(cyl) )) <span class="sc">+</span> </span>
<span id="cb686-3"><a href="general.html#cb686-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span>  </span>
<span id="cb686-4"><a href="general.html#cb686-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cyl) <span class="sc">+</span></span>
<span id="cb686-5"><a href="general.html#cb686-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-facet-wrap-1.png" width="672" /></p>
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb687-1"><a href="general.html#cb687-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split by row</span></span>
<span id="cb687-2"><a href="general.html#cb687-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span><span class="fu">as.factor</span>(cyl)  )) <span class="sc">+</span> </span>
<span id="cb687-3"><a href="general.html#cb687-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span>  </span>
<span id="cb687-4"><a href="general.html#cb687-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cyl , <span class="at">dir=</span><span class="st">&quot;v&quot;</span>)  <span class="sc">+</span></span>
<span id="cb687-5"><a href="general.html#cb687-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-facet-wrap-2.png" width="672" /></p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="general.html#cb688-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add label at the bottom</span></span>
<span id="cb688-2"><a href="general.html#cb688-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span><span class="fu">as.factor</span>(cyl)  )) <span class="sc">+</span> </span>
<span id="cb688-3"><a href="general.html#cb688-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span>  </span>
<span id="cb688-4"><a href="general.html#cb688-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cyl , <span class="at">strip.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb688-5"><a href="general.html#cb688-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-facet-wrap-3.png" width="672" /></p>
<div class="sourceCode" id="cb689"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb689-1"><a href="general.html#cb689-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use same scales for all</span></span>
<span id="cb689-2"><a href="general.html#cb689-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span><span class="fu">as.factor</span>(cyl)  )) <span class="sc">+</span> </span>
<span id="cb689-3"><a href="general.html#cb689-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span>  </span>
<span id="cb689-4"><a href="general.html#cb689-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cyl , <span class="at">scales=</span><span class="st">&quot;free&quot;</span> ) <span class="sc">+</span></span>
<span id="cb689-5"><a href="general.html#cb689-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-facet-wrap-4.png" width="672" /></p>
</div>
<div id="facet_grid" class="section level3" number="9.1.37">
<h3><span class="header-section-number">9.1.37</span> <code>facet_grid()</code></h3>
<p><code>facet_grid()</code> is the second function allowing to build small multiples with <code>ggplot2</code>. It allows to build one chart for each combinations of 2 categorical variables. One variable will be used for rows, the other for columns.</p>
<p>The two variables must be given around a ~, the first being displayed as row, the second as column. The <code>facet-grid()</code> function also accepts the <code>scales</code> argument described above.</p>
<div class="sourceCode" id="cb690"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb690-1"><a href="general.html#cb690-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Faceted ggplot2 using facet_grid():</span></span>
<span id="cb690-2"><a href="general.html#cb690-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( mtcars , <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt )) <span class="sc">+</span> </span>
<span id="cb690-3"><a href="general.html#cb690-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb690-4"><a href="general.html#cb690-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>( cyl <span class="sc">~</span> gear)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-facet-grid-1.png" width="672" /></p>
</div>
<div id="customize-small-multiple-appearance-with-ggplot2" class="section level3" number="9.1.38">
<h3><span class="header-section-number">9.1.38</span> Customize Small Multiple Appearance with <code>ggplot2</code></h3>
<p><a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a> makes it a breeze to build small multiples. This post shows how to customize the layout, notably using the strip options</p>
<p>This section aims to provide useful R code to customize the strips of a <code>ggplot2</code> plots when using faceting. For other ggplot2 customization, visit the <a href="https://www.r-graph-gallery.com/ggplot2-package.html">dedicated page</a>.</p>
<p>Here we want to modify non-data components, which is often done trough the <code>theme()</code> command. This page is strongly inspired from the help page of ggplot2 (<code>?theme</code>). Also, do not hesitate to visit the very strong <a href="http://docs.ggplot2.org/0.9.3/theme.html">ggplot2 documentation</a> for more information.</p>
<p>Chart 1 is a really basic plot relying on the <code>mtcars</code> dataset. The 3 following charts show how to customize <code>strip</code> background, text, and how to modify the space between sections.</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb691-1"><a href="general.html#cb691-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb691-2"><a href="general.html#cb691-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb691-3"><a href="general.html#cb691-3" aria-hidden="true" tabindex="-1"></a><span class="co"># basic chart</span></span>
<span id="cb691-4"><a href="general.html#cb691-4" aria-hidden="true" tabindex="-1"></a>basic<span class="ot">=</span><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb691-5"><a href="general.html#cb691-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb691-6"><a href="general.html#cb691-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> cyl)</span>
<span id="cb691-7"><a href="general.html#cb691-7" aria-hidden="true" tabindex="-1"></a>basic</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/241-custom-layout-strip-ggplot2_files/figure-html/thecodeA-1.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb692-1"><a href="general.html#cb692-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change background</span></span>
<span id="cb692-2"><a href="general.html#cb692-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">fill =</span> <span class="fu">alpha</span>(<span class="st">&quot;blue&quot;</span>,<span class="fl">0.2</span>) ))</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/241-custom-layout-strip-ggplot2_files/figure-html/thecodeB-1.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="general.html#cb693-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the text </span></span>
<span id="cb693-2"><a href="general.html#cb693-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size=</span><span class="dv">10</span>, <span class="at">angle=</span><span class="dv">30</span>))</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/241-custom-layout-strip-ggplot2_files/figure-html/thecodeC-1.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb694-1"><a href="general.html#cb694-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the space between parts:</span></span>
<span id="cb694-2"><a href="general.html#cb694-2" aria-hidden="true" tabindex="-1"></a>basic <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="dv">4</span>, <span class="st">&quot;lines&quot;</span>))</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/241-custom-layout-strip-ggplot2_files/figure-html/thecodeD-1.png" style="width:75.0%" />
</center>
</div>
<div id="multiple-ggplot2-charts-on-a-single-page" class="section level3" number="9.1.39">
<h3><span class="header-section-number">9.1.39</span> Multiple ggplot2 Charts on a Single Page</h3>
<p>This section shows how to use the <code>gridExtra</code> library to combine several <code>ggplot2</code> charts on the same figure. Several examples are provided, illustrating several ways to split the graphing window.</p>
<p>Mixing multiple graphs on the same page is a common practice. It allows to summarize a lot of information on the same figure, and is for instance widely used for scientific publication.</p>
<p>The gridExtra package makes it a breeze. It offers the <code>grid.arrange()</code> function that does exactly that. Its <code>nrow</code> argument allows to specify how to arrange the layout.</p>
<p>For more complex layout, the <code>arrangeGrob()</code> functions allows to do some nesting. Here are 4 examples to illustrate how <code>gridExtra</code> works:</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb695-1"><a href="general.html#cb695-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries</span></span>
<span id="cb695-2"><a href="general.html#cb695-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb695-3"><a href="general.html#cb695-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb695-4"><a href="general.html#cb695-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb695-5"><a href="general.html#cb695-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Make 3 simple graphics:</span></span>
<span id="cb695-6"><a href="general.html#cb695-6" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>qsec)) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">&quot;slateblue&quot;</span>)</span>
<span id="cb695-7"><a href="general.html#cb695-7" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>drat, <span class="at">y=</span>qsec, <span class="at">color=</span>cyl)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb695-8"><a href="general.html#cb695-8" aria-hidden="true" tabindex="-1"></a>g3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(cyl), <span class="at">y=</span>qsec, <span class="at">fill=</span>cyl)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb695-9"><a href="general.html#cb695-9" aria-hidden="true" tabindex="-1"></a>g4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars , <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(cyl), <span class="at">fill=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span>  <span class="fu">geom_bar</span>()</span>
<span id="cb695-10"><a href="general.html#cb695-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb695-11"><a href="general.html#cb695-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plots</span></span>
<span id="cb695-12"><a href="general.html#cb695-12" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(g2, <span class="fu">arrangeGrob</span>(g3, g4, <span class="at">ncol=</span><span class="dv">2</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-multiple-charts-one-page-1.png" width="672" /></p>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb696-1"><a href="general.html#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(g1, g2, g3, <span class="at">nrow =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-multiple-charts-one-page-2.png" width="672" /></p>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb697-1"><a href="general.html#cb697-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(g2, <span class="fu">arrangeGrob</span>(g3, g4, <span class="at">ncol=</span><span class="dv">2</span>), <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-multiple-charts-one-page-3.png" width="672" /></p>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="general.html#cb698-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(g2, <span class="fu">arrangeGrob</span>(g3, g4, <span class="at">nrow=</span><span class="dv">2</span>), <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-multiple-charts-one-page-4.png" width="672" /></p>
</div>
<div id="plotly-turn-your-ggplot-interactive" class="section level3" number="9.1.40">
<h3><span class="header-section-number">9.1.40</span> <code>Plotly</code>: Turn your <code>ggplot</code> Interactive</h3>
<p>Another awesome feature of <code>ggplot2</code> is its link with the <code>plotly</code> library. If you know how to make a <code>ggplot2</code> chart, you are 10 seconds away to rendering an interactive version. Just call the <code>ggplotly()</code> function, and youre done. Visit the interactive graphic section of the gallery for more.</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb699-1"><a href="general.html#cb699-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb699-2"><a href="general.html#cb699-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb699-3"><a href="general.html#cb699-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb699-4"><a href="general.html#cb699-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb699-5"><a href="general.html#cb699-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">1977</span>) <span class="sc">%&gt;%</span></span>
<span id="cb699-6"><a href="general.html#cb699-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">color=</span>continent)) <span class="sc">+</span></span>
<span id="cb699-7"><a href="general.html#cb699-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb699-8"><a href="general.html#cb699-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb699-9"><a href="general.html#cb699-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code></pre></div>
<div id="htmlwidget-021580370c8827103160" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-021580370c8827103160">{"x":{"data":[{"x":[4910.416756,3008.647355,1029.161251,3214.857818,743.3870368,556.1032651,1783.432873,1109.374338,1133.98495,1172.603047,795.757282,3259.178978,2517.736547,3081.761022,2785.493582,958.5668124,505.7538077,556.8083834,21745.57328,884.7552507,993.2239571,874.6858643,764.7259628,1267.613204,745.3695408,640.3224383,21951.21176,1544.228586,663.2236766,686.3952693,1497.492223,3710.982963,2370.619976,502.3197334,3876.485958,808.8970728,1981.951806,4319.804067,670.0806011,1737.561657,1561.769116,1348.285159,1450.992513,8028.651439,2202.988423,3781.410618,962.4922932,1532.776998,3120.876811,843.7331372,1588.688299,685.5876821],"y":[58.014,39.483,49.19,59.319,46.137,45.91,49.355,46.775,47.383,50.939,47.804,55.625,52.374,46.519,53.319,42.024,44.535,44.51,52.79,41.842,51.756,40.762,37.465,56.155,52.208,43.764,57.442,46.881,43.767,41.714,50.852,64.93,55.73,42.495,56.437,41.291,44.514,67.064,45,58.55,48.879,36.788,41.974,55.527,47.8,52.537,49.919,52.887,59.837,50.35,51.386,57.674],"text":["gdpPercap:  4910.4168<br />lifeExp: 58.01400<br />pop:  17152804<br />continent: Africa","gdpPercap:  3008.6474<br />lifeExp: 39.48300<br />pop:   6162675<br />continent: Africa","gdpPercap:  1029.1613<br />lifeExp: 49.19000<br />pop:   3168267<br />continent: Africa","gdpPercap:  3214.8578<br />lifeExp: 59.31900<br />pop:    781472<br />continent: Africa","gdpPercap:   743.3870<br />lifeExp: 46.13700<br />pop:   5889574<br />continent: Africa","gdpPercap:   556.1033<br />lifeExp: 45.91000<br />pop:   3834415<br />continent: Africa","gdpPercap:  1783.4329<br />lifeExp: 49.35500<br />pop:   7959865<br />continent: Africa","gdpPercap:  1109.3743<br />lifeExp: 46.77500<br />pop:   2167533<br />continent: Africa","gdpPercap:  1133.9850<br />lifeExp: 47.38300<br />pop:   4388260<br />continent: Africa","gdpPercap:  1172.6030<br />lifeExp: 50.93900<br />pop:    304739<br />continent: Africa","gdpPercap:   795.7573<br />lifeExp: 47.80400<br />pop:  26480870<br />continent: Africa","gdpPercap:  3259.1790<br />lifeExp: 55.62500<br />pop:   1536769<br />continent: Africa","gdpPercap:  2517.7365<br />lifeExp: 52.37400<br />pop:   7459574<br />continent: Africa","gdpPercap:  3081.7610<br />lifeExp: 46.51900<br />pop:    228694<br />continent: Africa","gdpPercap:  2785.4936<br />lifeExp: 53.31900<br />pop:  38783863<br />continent: Africa","gdpPercap:   958.5668<br />lifeExp: 42.02400<br />pop:    192675<br />continent: Africa","gdpPercap:   505.7538<br />lifeExp: 44.53500<br />pop:   2512642<br />continent: Africa","gdpPercap:   556.8084<br />lifeExp: 44.51000<br />pop:  34617799<br />continent: Africa","gdpPercap: 21745.5733<br />lifeExp: 52.79000<br />pop:    706367<br />continent: Africa","gdpPercap:   884.7553<br />lifeExp: 41.84200<br />pop:    608274<br />continent: Africa","gdpPercap:   993.2240<br />lifeExp: 51.75600<br />pop:  10538093<br />continent: Africa","gdpPercap:   874.6859<br />lifeExp: 40.76200<br />pop:   4227026<br />continent: Africa","gdpPercap:   764.7260<br />lifeExp: 37.46500<br />pop:    745228<br />continent: Africa","gdpPercap:  1267.6132<br />lifeExp: 56.15500<br />pop:  14500404<br />continent: Africa","gdpPercap:   745.3695<br />lifeExp: 52.20800<br />pop:   1251524<br />continent: Africa","gdpPercap:   640.3224<br />lifeExp: 43.76400<br />pop:   1703617<br />continent: Africa","gdpPercap: 21951.2118<br />lifeExp: 57.44200<br />pop:   2721783<br />continent: Africa","gdpPercap:  1544.2286<br />lifeExp: 46.88100<br />pop:   8007166<br />continent: Africa","gdpPercap:   663.2237<br />lifeExp: 43.76700<br />pop:   5637246<br />continent: Africa","gdpPercap:   686.3953<br />lifeExp: 41.71400<br />pop:   6491649<br />continent: Africa","gdpPercap:  1497.4922<br />lifeExp: 50.85200<br />pop:   1456688<br />continent: Africa","gdpPercap:  3710.9830<br />lifeExp: 64.93000<br />pop:    913025<br />continent: Africa","gdpPercap:  2370.6200<br />lifeExp: 55.73000<br />pop:  18396941<br />continent: Africa","gdpPercap:   502.3197<br />lifeExp: 42.49500<br />pop:  11127868<br />continent: Africa","gdpPercap:  3876.4860<br />lifeExp: 56.43700<br />pop:    977026<br />continent: Africa","gdpPercap:   808.8971<br />lifeExp: 41.29100<br />pop:   5682086<br />continent: Africa","gdpPercap:  1981.9518<br />lifeExp: 44.51400<br />pop:  62209173<br />continent: Africa","gdpPercap:  4319.8041<br />lifeExp: 67.06400<br />pop:    492095<br />continent: Africa","gdpPercap:   670.0806<br />lifeExp: 45.00000<br />pop:   4657072<br />continent: Africa","gdpPercap:  1737.5617<br />lifeExp: 58.55000<br />pop:     86796<br />continent: Africa","gdpPercap:  1561.7691<br />lifeExp: 48.87900<br />pop:   5260855<br />continent: Africa","gdpPercap:  1348.2852<br />lifeExp: 36.78800<br />pop:   3140897<br />continent: Africa","gdpPercap:  1450.9925<br />lifeExp: 41.97400<br />pop:   4353666<br />continent: Africa","gdpPercap:  8028.6514<br />lifeExp: 55.52700<br />pop:  27129932<br />continent: Africa","gdpPercap:  2202.9884<br />lifeExp: 47.80000<br />pop:  17104986<br />continent: Africa","gdpPercap:  3781.4106<br />lifeExp: 52.53700<br />pop:    551425<br />continent: Africa","gdpPercap:   962.4923<br />lifeExp: 49.91900<br />pop:  17129565<br />continent: Africa","gdpPercap:  1532.7770<br />lifeExp: 52.88700<br />pop:   2308582<br />continent: Africa","gdpPercap:  3120.8768<br />lifeExp: 59.83700<br />pop:   6005061<br />continent: Africa","gdpPercap:   843.7331<br />lifeExp: 50.35000<br />pop:  11457758<br />continent: Africa","gdpPercap:  1588.6883<br />lifeExp: 51.38600<br />pop:   5216550<br />continent: Africa","gdpPercap:   685.5877<br />lifeExp: 57.67400<br />pop:   6642107<br />continent: Africa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":[6.32127781530702,5.29612899121632,4.85958274371316,4.29233940761101,5.26165272498491,4.97061767194295,5.5059176412168,4.66704214356912,5.05559917855771,4.06676322554192,6.94049569932146,4.52040583610645,5.45016604603988,4.01129639562885,7.60694585246374,3.97973112975184,4.73782100329548,7.39505365224446,4.26382530133105,4.22383634289638,5.76860640347983,5.03145493864573,4.27878249624843,6.11542223529683,4.44354450304809,4.56187177172394,4.77827606357594,5.51109590728372,5.22907021838905,5.3366454219231,4.49965617393791,4.33879188894232,6.41229679974379,5.82395887424691,4.36004866819238,5.23491359575959,8.62896025232351,4.17122854948148,5.09486783222961,3.77952755905512,5.17905878226218,4.854775454452,5.05045749460444,6.97912565512447,6.31771439639559,4.19891947998289,6.31954665895726,4.69663035294985,5.27632870617264,5.85427629024999,5.17305387000117,5.35482857766587],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10079.02674,3548.097832,6660.118654,22090.88306,4756.763836,3815.80787,5926.876967,6380.494966,2681.9889,6679.62326,5138.922374,4879.992748,1874.298931,3203.208066,6650.195573,7674.929108,5486.371089,5351.912144,3248.373311,6281.290855,9770.524921,7899.554209,24072.63213,6504.339663,13143.95095],"y":[68.481,50.023,61.489,74.21,67.052,63.837,70.75,72.649,61.788,61.31,56.696,56.029,49.923,57.402,70.11,65.032,57.47,68.681,66.353,58.447,73.44,68.3,73.38,69.481,67.456],"text":["gdpPercap: 10079.0267<br />lifeExp: 68.48100<br />pop:  26983828<br />continent: Americas","gdpPercap:  3548.0978<br />lifeExp: 50.02300<br />pop:   5079716<br />continent: Americas","gdpPercap:  6660.1187<br />lifeExp: 61.48900<br />pop: 114313951<br />continent: Americas","gdpPercap: 22090.8831<br />lifeExp: 74.21000<br />pop:  23796400<br />continent: Americas","gdpPercap:  4756.7638<br />lifeExp: 67.05200<br />pop:  10599793<br />continent: Americas","gdpPercap:  3815.8079<br />lifeExp: 63.83700<br />pop:  25094412<br />continent: Americas","gdpPercap:  5926.8770<br />lifeExp: 70.75000<br />pop:   2108457<br />continent: Americas","gdpPercap:  6380.4950<br />lifeExp: 72.64900<br />pop:   9537988<br />continent: Americas","gdpPercap:  2681.9889<br />lifeExp: 61.78800<br />pop:   5302800<br />continent: Americas","gdpPercap:  6679.6233<br />lifeExp: 61.31000<br />pop:   7278866<br />continent: Americas","gdpPercap:  5138.9224<br />lifeExp: 56.69600<br />pop:   4282586<br />continent: Americas","gdpPercap:  4879.9927<br />lifeExp: 56.02900<br />pop:   5703430<br />continent: Americas","gdpPercap:  1874.2989<br />lifeExp: 49.92300<br />pop:   4908554<br />continent: Americas","gdpPercap:  3203.2081<br />lifeExp: 57.40200<br />pop:   3055235<br />continent: Americas","gdpPercap:  6650.1956<br />lifeExp: 70.11000<br />pop:   2156814<br />continent: Americas","gdpPercap:  7674.9291<br />lifeExp: 65.03200<br />pop:  63759976<br />continent: Americas","gdpPercap:  5486.3711<br />lifeExp: 57.47000<br />pop:   2554598<br />continent: Americas","gdpPercap:  5351.9121<br />lifeExp: 68.68100<br />pop:   1839782<br />continent: Americas","gdpPercap:  3248.3733<br />lifeExp: 66.35300<br />pop:   2984494<br />continent: Americas","gdpPercap:  6281.2909<br />lifeExp: 58.44700<br />pop:  15990099<br />continent: Americas","gdpPercap:  9770.5249<br />lifeExp: 73.44000<br />pop:   3080828<br />continent: Americas","gdpPercap:  7899.5542<br />lifeExp: 68.30000<br />pop:   1039009<br />continent: Americas","gdpPercap: 24072.6321<br />lifeExp: 73.38000<br />pop: 220239000<br />continent: Americas","gdpPercap:  6504.3397<br />lifeExp: 69.48100<br />pop:   2873520<br />continent: Americas","gdpPercap: 13143.9510<br />lifeExp: 67.45600<br />pop:  13503563<br />continent: Americas"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":[6.97047083068522,5.15434238640086,10.3553727984455,6.77543956769576,5.77446910007444,6.85635435789675,4.65435232683653,5.6710443310913,5.18472018302092,5.42956521861593,5.0398270921093,5.23768683822733,5.13057191783969,4.83958883002819,4.66475315834704,8.68911697083458,4.74607251669638,4.59414954550014,4.82688148286866,6.23316601826461,4.84414878929001,4.37991825947829,12.9086371873162,4.80663028657321,6.03320025163606],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[786.11336,19340.10196,659.8772322,524.9721832,741.2374699,11186.14125,813.337323,1382.702056,11888.59508,14688.23507,13306.61921,16610.37701,2852.351568,4106.301249,4657.22102,59265.47714,8659.696836,3827.921571,1647.511665,371,694.1124398,11848.34392,1175.921193,2373.204287,34167.7626,11210.08948,1348.775651,3195.484582,5596.519826,1961.224635,713.5371196,3682.831494,1829.765177],"y":[38.438,65.593,46.923,31.22,63.96736,73.6,54.208,52.702,57.702,60.413,73.06,75.38,61.134,67.159,64.766,69.343,66.099,65.256,55.491,56.059,46.748,57.367,54.043,60.06,58.69,70.795,65.949,61.195,70.59,62.494,55.764,60.765,44.175],"text":["gdpPercap:   786.1134<br />lifeExp: 38.43800<br />pop:  14880372<br />continent: Asia","gdpPercap: 19340.1020<br />lifeExp: 65.59300<br />pop:    297410<br />continent: Asia","gdpPercap:   659.8772<br />lifeExp: 46.92300<br />pop:  80428306<br />continent: Asia","gdpPercap:   524.9722<br />lifeExp: 31.22000<br />pop:   6978607<br />continent: Asia","gdpPercap:   741.2375<br />lifeExp: 63.96736<br />pop: 943455000<br />continent: Asia","gdpPercap: 11186.1413<br />lifeExp: 73.60000<br />pop:   4583700<br />continent: Asia","gdpPercap:   813.3373<br />lifeExp: 54.20800<br />pop: 634000000<br />continent: Asia","gdpPercap:  1382.7021<br />lifeExp: 52.70200<br />pop: 136725000<br />continent: Asia","gdpPercap: 11888.5951<br />lifeExp: 57.70200<br />pop:  35480679<br />continent: Asia","gdpPercap: 14688.2351<br />lifeExp: 60.41300<br />pop:  11882916<br />continent: Asia","gdpPercap: 13306.6192<br />lifeExp: 73.06000<br />pop:   3495918<br />continent: Asia","gdpPercap: 16610.3770<br />lifeExp: 75.38000<br />pop: 113872473<br />continent: Asia","gdpPercap:  2852.3516<br />lifeExp: 61.13400<br />pop:   1937652<br />continent: Asia","gdpPercap:  4106.3012<br />lifeExp: 67.15900<br />pop:  16325320<br />continent: Asia","gdpPercap:  4657.2210<br />lifeExp: 64.76600<br />pop:  36436000<br />continent: Asia","gdpPercap: 59265.4771<br />lifeExp: 69.34300<br />pop:   1140357<br />continent: Asia","gdpPercap:  8659.6968<br />lifeExp: 66.09900<br />pop:   3115787<br />continent: Asia","gdpPercap:  3827.9216<br />lifeExp: 65.25600<br />pop:  12845381<br />continent: Asia","gdpPercap:  1647.5117<br />lifeExp: 55.49100<br />pop:   1528000<br />continent: Asia","gdpPercap:   371.0000<br />lifeExp: 56.05900<br />pop:  31528087<br />continent: Asia","gdpPercap:   694.1124<br />lifeExp: 46.74800<br />pop:  13933198<br />continent: Asia","gdpPercap: 11848.3439<br />lifeExp: 57.36700<br />pop:   1004533<br />continent: Asia","gdpPercap:  1175.9212<br />lifeExp: 54.04300<br />pop:  78152686<br />continent: Asia","gdpPercap:  2373.2043<br />lifeExp: 60.06000<br />pop:  46850962<br />continent: Asia","gdpPercap: 34167.7626<br />lifeExp: 58.69000<br />pop:   8128505<br />continent: Asia","gdpPercap: 11210.0895<br />lifeExp: 70.79500<br />pop:   2325300<br />continent: Asia","gdpPercap:  1348.7757<br />lifeExp: 65.94900<br />pop:  14116836<br />continent: Asia","gdpPercap:  3195.4846<br />lifeExp: 61.19500<br />pop:   7932503<br />continent: Asia","gdpPercap:  5596.5198<br />lifeExp: 70.59000<br />pop:  16785196<br />continent: Asia","gdpPercap:  1961.2246<br />lifeExp: 62.49400<br />pop:  44148285<br />continent: Asia","gdpPercap:   713.5371<br />lifeExp: 55.76400<br />pop:  50533506<br />continent: Asia","gdpPercap:  3682.8315<br />lifeExp: 60.76500<br />pop:   1261091<br />continent: Asia","gdpPercap:  1829.7652<br />lifeExp: 44.17500<br />pop:   8403990<br />continent: Asia"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":[6.14601109401926,4.06189233680308,9.29441811927379,5.39475462377927,22.6771653543307,5.08426676230058,19.2706113323364,10.9715821633898,7.43994831281003,5.89270757284543,4.9155533082844,10.342652961876,4.61658106384004,6.25889092142746,7.4890188516279,4.41106157328659,4.85034613145665,5.97722629927717,4.51816213431315,7.2295116202132,6.06899974449858,4.36894912815136,9.21575428359059,7.98702151037774,5.52430918996644,4.70007429187427,6.08413180764231,5.50291508915639,6.29375367739212,7.86362869673143,8.14954658274176,4.44626602186696,5.5539430462659],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3533.00391,19749.4223,19117.97448,3528.481305,7612.240438,11305.38517,14800.16062,20422.9015,15605.42283,18292.63514,20512.92123,14195.52428,11674.83737,19654.96247,11150.98113,14255.98475,9595.929905,21209.0592,23311.34939,9508.141454,10172.48572,9356.39724,12980.66956,10922.66404,15277.03017,13236.92117,18855.72521,26982.29052,4269.122326,17428.74846],"y":[68.93,72.17,72.8,69.86,70.81,70.64,70.71,74.69,72.52,73.83,72.5,73.68,69.95,76.11,72.03,73.48,73.066,75.24,75.37,70.67,70.41,69.46,70.3,70.45,70.97,74.39,75.44,75.39,59.507,72.76],"text":["gdpPercap:  3533.0039<br />lifeExp: 68.93000<br />pop:   2509048<br />continent: Europe","gdpPercap: 19749.4223<br />lifeExp: 72.17000<br />pop:   7568430<br />continent: Europe","gdpPercap: 19117.9745<br />lifeExp: 72.80000<br />pop:   9821800<br />continent: Europe","gdpPercap:  3528.4813<br />lifeExp: 69.86000<br />pop:   4086000<br />continent: Europe","gdpPercap:  7612.2404<br />lifeExp: 70.81000<br />pop:   8797022<br />continent: Europe","gdpPercap: 11305.3852<br />lifeExp: 70.64000<br />pop:   4318673<br />continent: Europe","gdpPercap: 14800.1606<br />lifeExp: 70.71000<br />pop:  10161915<br />continent: Europe","gdpPercap: 20422.9015<br />lifeExp: 74.69000<br />pop:   5088419<br />continent: Europe","gdpPercap: 15605.4228<br />lifeExp: 72.52000<br />pop:   4738902<br />continent: Europe","gdpPercap: 18292.6351<br />lifeExp: 73.83000<br />pop:  53165019<br />continent: Europe","gdpPercap: 20512.9212<br />lifeExp: 72.50000<br />pop:  78160773<br />continent: Europe","gdpPercap: 14195.5243<br />lifeExp: 73.68000<br />pop:   9308479<br />continent: Europe","gdpPercap: 11674.8374<br />lifeExp: 69.95000<br />pop:  10637171<br />continent: Europe","gdpPercap: 19654.9625<br />lifeExp: 76.11000<br />pop:    221823<br />continent: Europe","gdpPercap: 11150.9811<br />lifeExp: 72.03000<br />pop:   3271900<br />continent: Europe","gdpPercap: 14255.9847<br />lifeExp: 73.48000<br />pop:  56059245<br />continent: Europe","gdpPercap:  9595.9299<br />lifeExp: 73.06600<br />pop:    560073<br />continent: Europe","gdpPercap: 21209.0592<br />lifeExp: 75.24000<br />pop:  13852989<br />continent: Europe","gdpPercap: 23311.3494<br />lifeExp: 75.37000<br />pop:   4043205<br />continent: Europe","gdpPercap:  9508.1415<br />lifeExp: 70.67000<br />pop:  34621254<br />continent: Europe","gdpPercap: 10172.4857<br />lifeExp: 70.41000<br />pop:   9662600<br />continent: Europe","gdpPercap:  9356.3972<br />lifeExp: 69.46000<br />pop:  21658597<br />continent: Europe","gdpPercap: 12980.6696<br />lifeExp: 70.30000<br />pop:   8686367<br />continent: Europe","gdpPercap: 10922.6640<br />lifeExp: 70.45000<br />pop:   4827803<br />continent: Europe","gdpPercap: 15277.0302<br />lifeExp: 70.97000<br />pop:   1746919<br />continent: Europe","gdpPercap: 13236.9212<br />lifeExp: 74.39000<br />pop:  36439000<br />continent: Europe","gdpPercap: 18855.7252<br />lifeExp: 75.44000<br />pop:   8251648<br />continent: Europe","gdpPercap: 26982.2905<br />lifeExp: 75.39000<br />pop:   6316424<br />continent: Europe","gdpPercap:  4269.1223<br />lifeExp: 59.50700<br />pop:  42404033<br />continent: Europe","gdpPercap: 17428.7485<br />lifeExp: 72.76000<br />pop:  56179000<br />continent: Europe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":[4.73711086274366,5.46245399673978,5.69923465730081,5.00994841135964,5.59538443706805,5.04523525790558,5.73248147708556,5.15554006271282,5.10659105931128,8.26207702648979,9.21603585103979,5.64793676344929,5.77801236958701,4.00561540333621,4.87759423629259,8.38266622872152,4.20280449359801,6.06235892227666,5.00334741211677,7.39523452347783,5.68347312501541,6.63718460047671,5.58381321630558,5.11921103857739,4.57227899402677,7.48917192574021,5.53761739047554,5.31519777193933,7.78197424302696,8.38758788519898],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18334.19751,16233.7177],"y":[73.49,72.22],"text":["gdpPercap: 18334.1975<br />lifeExp: 73.49000<br />pop:  14074100<br />continent: Oceania","gdpPercap: 16233.7177<br />lifeExp: 72.22000<br />pop:   3164900<br />continent: Oceania"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":[6.08061917751821,4.85899251590851],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2573.723857,62210.200997],"tickmode":"array","ticktext":["0","20000","40000","60000"],"tickvals":[0,20000,40000,60000],"categoryorder":"array","categoryarray":["0","20000","40000","60000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"gdpPercap","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[28.9755,78.3545],"tickmode":"array","ticktext":["30","40","50","60","70"],"tickvals":[30,40,50,60,70],"categoryorder":"array","categoryarray":["30","40","50","60","70"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"lifeExp","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.93503937007874},"annotations":[{"text":"continent<br />pop","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"1ff4742541f9":{"x":{},"y":{},"size":{},"colour":{},"type":"scatter"}},"cur_data":"1ff4742541f9","visdat":{"1ff4742541f9":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>AN OVERVIEW OF GGPLOT2 POSSIBILITIES</p>
</div>
<div id="an-overview-of-ggplot2-possibilities" class="section level3" number="9.1.41">
<h3><span class="header-section-number">9.1.41</span> An Overview of <code>ggplot2</code> Possibilities</h3>
<p>Each section of the gallery provides several examples implemented with <code>ggplot2</code>. Here is an overview of my favorite examples:</p>
<div id="violin-plot-with-included-boxplot-and-sample-size-in-ggplot2" class="section level4" number="9.1.41.1">
<h4><span class="header-section-number">9.1.41.1</span> Violin Plot with included Boxplot and Sample Size in <code>ggplot2</code></h4>
<p>It can be handy to include a <a href="https://www.r-graph-gallery.com/boxplot.html">boxplot</a> in the <a href="https://www.r-graph-gallery.com/violin%20plot">violin plot</a> to see both the distribution of the data and its summary statistics. Moreover, adding sample size of each group on the X axis is often a necessary step. Here is how to do it with <code>R</code> and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>.</p>
<p>Building a <a href="https://www.r-graph-gallery.com/violin.html">violin plot</a> with <code>ggplot2</code> is pretty straightforward thanks to the dedicated <code>geom_violin()</code> function. It is possible to use <code>geom_boxplot()</code> with a small <code>width</code> in addition to display a boxplot that provides summary statistics.</p>
<p>Moreover, note a small trick that allows to provide sample size of each group on the X axis: a new column called <code>myaxis</code> is created and is then used for the X axis.</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="general.html#cb700-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb700-2"><a href="general.html#cb700-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb700-3"><a href="general.html#cb700-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb700-4"><a href="general.html#cb700-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb700-5"><a href="general.html#cb700-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb700-6"><a href="general.html#cb700-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dataset</span></span>
<span id="cb700-7"><a href="general.html#cb700-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb700-8"><a href="general.html#cb700-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">c</span>( <span class="fu">rep</span>(<span class="st">&quot;A&quot;</span>,<span class="dv">500</span>), <span class="fu">rep</span>(<span class="st">&quot;B&quot;</span>,<span class="dv">500</span>), <span class="fu">rep</span>(<span class="st">&quot;B&quot;</span>,<span class="dv">500</span>), <span class="fu">rep</span>(<span class="st">&quot;C&quot;</span>,<span class="dv">20</span>), <span class="fu">rep</span>(<span class="st">&#39;D&#39;</span>, <span class="dv">100</span>)  ),</span>
<span id="cb700-9"><a href="general.html#cb700-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">c</span>( <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">10</span>, <span class="dv">5</span>), <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">18</span>, <span class="dv">1</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">4</span>), <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">12</span>, <span class="dv">1</span>) )</span>
<span id="cb700-10"><a href="general.html#cb700-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb700-11"><a href="general.html#cb700-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sample size</span></span>
<span id="cb700-12"><a href="general.html#cb700-12" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">=</span> data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">num=</span><span class="fu">n</span>())</span>
<span id="cb700-13"><a href="general.html#cb700-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb700-14"><a href="general.html#cb700-14" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb700-15"><a href="general.html#cb700-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(sample_size) <span class="sc">%&gt;%</span></span>
<span id="cb700-16"><a href="general.html#cb700-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">myaxis =</span> <span class="fu">paste0</span>(name, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;n=&quot;</span>, num)) <span class="sc">%&gt;%</span></span>
<span id="cb700-17"><a href="general.html#cb700-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>myaxis, <span class="at">y=</span>value, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb700-18"><a href="general.html#cb700-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">width=</span><span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb700-19"><a href="general.html#cb700-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width=</span><span class="fl">0.1</span>, <span class="at">color=</span><span class="st">&quot;grey&quot;</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb700-20"><a href="general.html#cb700-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb700-21"><a href="general.html#cb700-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb700-22"><a href="general.html#cb700-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb700-23"><a href="general.html#cb700-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb700-24"><a href="general.html#cb700-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>)</span>
<span id="cb700-25"><a href="general.html#cb700-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb700-26"><a href="general.html#cb700-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;A Violin wrapping a boxplot&quot;</span>) <span class="sc">+</span></span>
<span id="cb700-27"><a href="general.html#cb700-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/violin_and_boxplot_ggplot2_files/figure-html/unnamed-chunk-1-1.png" /></p>
</div>
</div>
<div id="boxplot-with-individual-data-points" class="section level3" number="9.1.42">
<h3><span class="header-section-number">9.1.42</span> Boxplot with Individual Data Points</h3>
<p>A <a href="https://www.r-graph-gallery.com/boxplot.html">boxplot</a> summarizes the distribution of a continuous variable. it is often criticized for hiding the underlying distribution of each group. Thus, showing individual observation using jitter on top of boxes is a good practice. This post explains how to do so using <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>.</p>
<p>If youre not convinced about that danger of using basic boxplot, please read <a href="https://www.data-to-viz.com/caveat/boxplot.html">this post</a> that explains it in depth.</p>
<p>Fortunately, <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a> makes it a breeze to add invdividual observation on top of boxes thanks to the <code>geom_jitter()</code> function. This function shifts all dots by a random value ranging from 0 to <code>size</code>, avoiding overlaps.</p>
<p>Now, do you see the bimodal distribution hidden behind group B?</p>
<div class="sourceCode" id="cb701"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb701-1"><a href="general.html#cb701-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb701-2"><a href="general.html#cb701-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb701-3"><a href="general.html#cb701-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb701-4"><a href="general.html#cb701-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb701-5"><a href="general.html#cb701-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dataset</span></span>
<span id="cb701-6"><a href="general.html#cb701-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb701-7"><a href="general.html#cb701-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">c</span>( <span class="fu">rep</span>(<span class="st">&quot;A&quot;</span>,<span class="dv">500</span>), <span class="fu">rep</span>(<span class="st">&quot;B&quot;</span>,<span class="dv">500</span>), <span class="fu">rep</span>(<span class="st">&quot;B&quot;</span>,<span class="dv">500</span>), <span class="fu">rep</span>(<span class="st">&quot;C&quot;</span>,<span class="dv">20</span>), <span class="fu">rep</span>(<span class="st">&#39;D&#39;</span>, <span class="dv">100</span>)  ),</span>
<span id="cb701-8"><a href="general.html#cb701-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">c</span>( <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">10</span>, <span class="dv">5</span>), <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">18</span>, <span class="dv">1</span>), <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">4</span>), <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">12</span>, <span class="dv">1</span>) )</span>
<span id="cb701-9"><a href="general.html#cb701-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb701-10"><a href="general.html#cb701-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb701-11"><a href="general.html#cb701-11" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb701-12"><a href="general.html#cb701-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>value, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb701-13"><a href="general.html#cb701-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb701-14"><a href="general.html#cb701-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb701-15"><a href="general.html#cb701-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="fl">0.4</span>, <span class="at">alpha=</span><span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb701-16"><a href="general.html#cb701-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb701-17"><a href="general.html#cb701-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb701-18"><a href="general.html#cb701-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb701-19"><a href="general.html#cb701-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>)</span>
<span id="cb701-20"><a href="general.html#cb701-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb701-21"><a href="general.html#cb701-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;A boxplot with jitter&quot;</span>) <span class="sc">+</span></span>
<span id="cb701-22"><a href="general.html#cb701-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2_files/figure-html/unnamed-chunk-1-1.png" /></p>
<p>In case youre not convinced, here is how the basic <a href="https://www.r-graph-gallery.com/boxplot.html">boxplot</a> and the basic <a href="https://www.r-graph-gallery.com/violin.html">violin plot</a> look like:</p>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb702-1"><a href="general.html#cb702-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot basic</span></span>
<span id="cb702-2"><a href="general.html#cb702-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb702-3"><a href="general.html#cb702-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>value, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb702-4"><a href="general.html#cb702-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb702-5"><a href="general.html#cb702-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">option=</span><span class="st">&quot;A&quot;</span>) <span class="sc">+</span></span>
<span id="cb702-6"><a href="general.html#cb702-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb702-7"><a href="general.html#cb702-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb702-8"><a href="general.html#cb702-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb702-9"><a href="general.html#cb702-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>)</span>
<span id="cb702-10"><a href="general.html#cb702-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb702-11"><a href="general.html#cb702-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Basic boxplot&quot;</span>) <span class="sc">+</span></span>
<span id="cb702-12"><a href="general.html#cb702-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2_files/figure-html/unnamed-chunk-3-1.png" /></p>
<div class="sourceCode" id="cb703"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb703-1"><a href="general.html#cb703-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin basic</span></span>
<span id="cb703-2"><a href="general.html#cb703-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb703-3"><a href="general.html#cb703-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>value, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb703-4"><a href="general.html#cb703-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb703-5"><a href="general.html#cb703-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">option=</span><span class="st">&quot;A&quot;</span>) <span class="sc">+</span></span>
<span id="cb703-6"><a href="general.html#cb703-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb703-7"><a href="general.html#cb703-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb703-8"><a href="general.html#cb703-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb703-9"><a href="general.html#cb703-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>)</span>
<span id="cb703-10"><a href="general.html#cb703-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb703-11"><a href="general.html#cb703-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Violin chart&quot;</span>) <span class="sc">+</span></span>
<span id="cb703-12"><a href="general.html#cb703-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2_files/figure-html/unnamed-chunk-3-2.png" /></p>
</div>
<div id="map-a-variable-to-marker-feature-in-ggplot2-scatterplot" class="section level3" number="9.1.43">
<h3><span class="header-section-number">9.1.43</span> Map a Variable to Marker Feature in <code>ggplot2</code> Scatterplot</h3>
<p><code>ggplot2</code> allows to easily map a variable to marker features of a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a>. This post explaines how it works through several examples, with explanation and code.</p>
</div>
<div id="basic-example" class="section level3" number="9.1.44">
<h3><span class="header-section-number">9.1.44</span> Basic Example</h3>
<p>Here is the magick of <a href="https://www.r-graph-gallery.com/ggplot2">ggplot2</a>: the ability to map a variable to marker features. Here, the marker <code>color</code> depends on its value in the field called <code>Species</code> in the input data frame.</p>
<p>Note that the legend is built automatically.</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb704-1"><a href="general.html#cb704-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load ggplot2</span></span>
<span id="cb704-2"><a href="general.html#cb704-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb704-3"><a href="general.html#cb704-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb704-4"><a href="general.html#cb704-4" aria-hidden="true" tabindex="-1"></a><span class="co"># mtcars dataset is natively available in R</span></span>
<span id="cb704-5"><a href="general.html#cb704-5" aria-hidden="true" tabindex="-1"></a><span class="co"># head(mtcars)</span></span>
<span id="cb704-6"><a href="general.html#cb704-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb704-7"><a href="general.html#cb704-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A basic scatterplot with color depending on Species</span></span>
<span id="cb704-8"><a href="general.html#cb704-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">color=</span>Species)) <span class="sc">+</span> </span>
<span id="cb704-9"><a href="general.html#cb704-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb704-10"><a href="general.html#cb704-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/274-map-a-variable-to-ggplot2-scatterplot_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="works-with-any-aesthetics" class="section level3" number="9.1.45">
<h3><span class="header-section-number">9.1.45</span> Works with any Aesthetics</h3>
<p>You can map variables to any marker features. For instance, specie is represent below using <code>transparency</code> (left), <code>shape</code> (middle) and <code>size</code> (right).</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb705-1"><a href="general.html#cb705-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load ggplot2</span></span>
<span id="cb705-2"><a href="general.html#cb705-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb705-3"><a href="general.html#cb705-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb705-4"><a href="general.html#cb705-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Transparency</span></span>
<span id="cb705-5"><a href="general.html#cb705-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">alpha=</span>Species)) <span class="sc">+</span> </span>
<span id="cb705-6"><a href="general.html#cb705-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">6</span>, <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb705-7"><a href="general.html#cb705-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/274-map-a-variable-to-ggplot2-scatterplot_files/figure-html/unnamed-chunk-2-1.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb706"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb706-1"><a href="general.html#cb706-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape</span></span>
<span id="cb706-2"><a href="general.html#cb706-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">shape=</span>Species)) <span class="sc">+</span> </span>
<span id="cb706-3"><a href="general.html#cb706-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb706-4"><a href="general.html#cb706-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/274-map-a-variable-to-ggplot2-scatterplot_files/figure-html/unnamed-chunk-2-2.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb707"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb707-1"><a href="general.html#cb707-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Size</span></span>
<span id="cb707-2"><a href="general.html#cb707-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">shape=</span>Species)) <span class="sc">+</span> </span>
<span id="cb707-3"><a href="general.html#cb707-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb707-4"><a href="general.html#cb707-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/274-map-a-variable-to-ggplot2-scatterplot_files/figure-html/unnamed-chunk-2-3.png" style="width:75.0%" />
</center>
</div>
<div id="mapping-to-several-features" class="section level3" number="9.1.46">
<h3><span class="header-section-number">9.1.46</span> Mapping to Several Features</h3>
<p>Last but not least, note that you can map one or several variables to one or several features. Here, shape, transparency, size and color all depends on the marker <code>Species</code> value.</p>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb708-1"><a href="general.html#cb708-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load ggplot2</span></span>
<span id="cb708-2"><a href="general.html#cb708-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb708-3"><a href="general.html#cb708-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb708-4"><a href="general.html#cb708-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A basic scatterplot with color depending on Species</span></span>
<span id="cb708-5"><a href="general.html#cb708-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">shape=</span>Species, <span class="at">alpha=</span>Species, <span class="at">size=</span>Species, <span class="at">color=</span>Species)) <span class="sc">+</span> </span>
<span id="cb708-6"><a href="general.html#cb708-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb708-7"><a href="general.html#cb708-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/274-map-a-variable-to-ggplot2-scatterplot_files/figure-html/thecode3-1.png" style="width:75.0%" />
</center>
</div>
<div id="bubble-plot-with-ggplot2" class="section level3" number="9.1.47">
<h3><span class="header-section-number">9.1.47</span> Bubble Plot with <code>ggplot2</code></h3>
<p>This section explains how to build a <a href="https://www.r-graph-gallery.com/bubble-chart.html">bubble chart</a> with R and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. It provides several reproducible examples with explanation and R code.</p>
<div id="most-basic-bubble-chart-with-geom_point" class="section level4" number="9.1.47.1">
<h4><span class="header-section-number">9.1.47.1</span> Most Basic Bubble Chart with <code>geom_point()</code></h4>
<p>A <a href="https://www.r-graph-gallery.com/bubble-chart.html">bubble plot</a> is a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> where a third dimension is added: the value of an additional numeric variable is represented through the size of the dots. (source: <a href="https://www.data-to-viz.com/graph/bubble.html">data-to-viz</a>).</p>
<p>With <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>, bubble chart are built thanks to the <code>geom_point()</code> function. At least three variable must be provided to <code>aes()</code>: x, y and size. The legend will automatically be built by ggplot2.</p>
<p>Here, the relationship between life expectancy (<code>y</code>) and gdp per capita (<code>x</code>) of world countries is represented. The population of each country is represented through circle size.</p>
<div class="sourceCode" id="cb709"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb709-1"><a href="general.html#cb709-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb709-2"><a href="general.html#cb709-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb709-3"><a href="general.html#cb709-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb709-4"><a href="general.html#cb709-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The dataset is provided in the gapminder library</span></span>
<span id="cb709-5"><a href="general.html#cb709-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb709-6"><a href="general.html#cb709-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">&quot;2007&quot;</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>year)</span>
<span id="cb709-7"><a href="general.html#cb709-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb709-8"><a href="general.html#cb709-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb709-9"><a href="general.html#cb709-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/320-the-basis-of-bubble-plot_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
</div>
<div id="control-circle-size-with-scale_size" class="section level3" number="9.1.48">
<h3><span class="header-section-number">9.1.48</span> Control Circle Size with <code>scale_size()</code></h3>
<p>The first thing we need to improve on the previous chart is the bubble size. <code>scale_size()</code> allows to set the size of the smallest and the biggest circles using the <code>range</code> argument. Note that you can customize the legend name with <code>name</code>.</p>
<p><u>Note</u>: Circles often overlap. To avoid having big circles on top of the chart you have to reorder your dataset first, as in the code below.</p>
<p><u>ToDo</u>: Give more details about how to map a numeric variable to circle size. Use of <code>scale_radius</code>, <code>scale_size</code> and <code>scale_size_area</code>. See <a href="https://www.data-to-viz.com/caveat/radius_or_area.html">this post</a>.</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb710-1"><a href="general.html#cb710-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb710-2"><a href="general.html#cb710-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb710-3"><a href="general.html#cb710-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb710-4"><a href="general.html#cb710-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The dataset is provided in the gapminder library</span></span>
<span id="cb710-5"><a href="general.html#cb710-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb710-6"><a href="general.html#cb710-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">&quot;2007&quot;</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>year)</span>
<span id="cb710-7"><a href="general.html#cb710-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb710-8"><a href="general.html#cb710-8" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb710-9"><a href="general.html#cb710-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pop)) <span class="sc">%&gt;%</span></span>
<span id="cb710-10"><a href="general.html#cb710-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">factor</span>(country, country)) <span class="sc">%&gt;%</span></span>
<span id="cb710-11"><a href="general.html#cb710-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb710-12"><a href="general.html#cb710-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb710-13"><a href="general.html#cb710-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(.<span class="dv">1</span>, <span class="dv">24</span>), <span class="at">name=</span><span class="st">&quot;Population (M)&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/320-the-basis-of-bubble-plot_files/figure-html/thecode2-1.png" style="width:75.0%" />
</center>
</div>
<div id="add-a-fourth-dimension-color" class="section level3" number="9.1.49">
<h3><span class="header-section-number">9.1.49</span> Add a Fourth Dimension: Color</h3>
<p>If you have one more variable in your dataset, why not showing it using circle color? Here, the continent of each country is used to control circle color:</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb711-1"><a href="general.html#cb711-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb711-2"><a href="general.html#cb711-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb711-3"><a href="general.html#cb711-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb711-4"><a href="general.html#cb711-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The dataset is provided in the gapminder library</span></span>
<span id="cb711-5"><a href="general.html#cb711-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb711-6"><a href="general.html#cb711-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">&quot;2007&quot;</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>year)</span>
<span id="cb711-7"><a href="general.html#cb711-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb711-8"><a href="general.html#cb711-8" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb711-9"><a href="general.html#cb711-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pop)) <span class="sc">%&gt;%</span></span>
<span id="cb711-10"><a href="general.html#cb711-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">factor</span>(country, country)) <span class="sc">%&gt;%</span></span>
<span id="cb711-11"><a href="general.html#cb711-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">size=</span>pop, <span class="at">color=</span>continent)) <span class="sc">+</span></span>
<span id="cb711-12"><a href="general.html#cb711-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb711-13"><a href="general.html#cb711-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(.<span class="dv">1</span>, <span class="dv">24</span>), <span class="at">name=</span><span class="st">&quot;Population (M)&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/320-the-basis-of-bubble-plot_files/figure-html/thecode3-1.png" style="width:75.0%" />
</center>
</div>
<div id="make-it-pretty" class="section level3" number="9.1.50">
<h3><span class="header-section-number">9.1.50</span> Make it Pretty</h3>
<p>A few classic improvement:</p>
<ul>
<li>Use of the <code>viridis</code> package for nice color palette.</li>
<li>Use of <code>theme_ipsum()</code> of the <code>hrbrthemes</code> package.</li>
<li>Custom axis titles with <code>xlab</code> and <code>ylab</code>.</li>
<li>Add stroke to circle: Change <code>shape</code> to 21 and specify <code>color</code> (stroke) and <code>fill</code>.</li>
</ul>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb712-1"><a href="general.html#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb712-2"><a href="general.html#cb712-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb712-3"><a href="general.html#cb712-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb712-4"><a href="general.html#cb712-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb712-5"><a href="general.html#cb712-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb712-6"><a href="general.html#cb712-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The dataset is provided in the gapminder library</span></span>
<span id="cb712-7"><a href="general.html#cb712-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb712-8"><a href="general.html#cb712-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">&quot;2007&quot;</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>year)</span>
<span id="cb712-9"><a href="general.html#cb712-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb712-10"><a href="general.html#cb712-10" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb712-11"><a href="general.html#cb712-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pop)) <span class="sc">%&gt;%</span></span>
<span id="cb712-12"><a href="general.html#cb712-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">factor</span>(country, country)) <span class="sc">%&gt;%</span></span>
<span id="cb712-13"><a href="general.html#cb712-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>gdpPercap, <span class="at">y=</span>lifeExp, <span class="at">size=</span>pop, <span class="at">fill=</span>continent)) <span class="sc">+</span></span>
<span id="cb712-14"><a href="general.html#cb712-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>, <span class="at">shape=</span><span class="dv">21</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb712-15"><a href="general.html#cb712-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(.<span class="dv">1</span>, <span class="dv">24</span>), <span class="at">name=</span><span class="st">&quot;Population (M)&quot;</span>) <span class="sc">+</span></span>
<span id="cb712-16"><a href="general.html#cb712-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete=</span><span class="cn">TRUE</span>, <span class="at">guide=</span><span class="cn">FALSE</span>, <span class="at">option=</span><span class="st">&quot;A&quot;</span>) <span class="sc">+</span></span>
<span id="cb712-17"><a href="general.html#cb712-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb712-18"><a href="general.html#cb712-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb712-19"><a href="general.html#cb712-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Life Expectancy&quot;</span>) <span class="sc">+</span></span>
<span id="cb712-20"><a href="general.html#cb712-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Gdp per Capita&quot;</span>) <span class="sc">+</span></span>
<span id="cb712-21"><a href="general.html#cb712-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/320-the-basis-of-bubble-plot_files/figure-html/thecode4-1.png" style="width:75.0%" />
</center>
</div>
<div id="connected-scatterplot-with-r-and-ggplot2" class="section level3" number="9.1.51">
<h3><span class="header-section-number">9.1.51</span> Connected Scatterplot with R and <code>ggplot2</code></h3>
<p>This section explains how to build a basic <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">connected scatterplot</a> with R and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. It provides several reproducible examples with explanation and R code.</p>
<div id="most-basic-connected-scatterplot-geom_point-and-geom_line" class="section level4" number="9.1.51.1">
<h4><span class="header-section-number">9.1.51.1</span> Most Basic Connected Scatterplot: <code>geom_point()</code> and <code>geom_line()</code></h4>
<p>A <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">connected scatterplot</a> is basically a hybrid between a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> and a line plot. Thus, you just have to add a <code>geom_point()</code> on top of the <code>geom_line()</code> to build it.</p>
<div class="sourceCode" id="cb713"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb713-1"><a href="general.html#cb713-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb713-2"><a href="general.html#cb713-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb713-3"><a href="general.html#cb713-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb713-4"><a href="general.html#cb713-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb713-5"><a href="general.html#cb713-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb713-6"><a href="general.html#cb713-6" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb713-7"><a href="general.html#cb713-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb713-8"><a href="general.html#cb713-8" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb713-9"><a href="general.html#cb713-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb713-10"><a href="general.html#cb713-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb713-11"><a href="general.html#cb713-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb713-12"><a href="general.html#cb713-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode-1.png" style="width:65.0%" />
</center>
</div>
</div>
<div id="customize-the-connected-scatterplot" class="section level3" number="9.1.52">
<h3><span class="header-section-number">9.1.52</span> Customize the Connected Scatterplot</h3>
<p>Custom the general theme with the <code>theme_ipsum()</code> function of the <code>hrbrthemes</code> package. Add a title with <code>ggtitle()</code>. Custom circle and line with arguments like <code>shape</code>, <code>size</code>, <code>color</code> and more.</p>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb714-1"><a href="general.html#cb714-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb714-2"><a href="general.html#cb714-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb714-3"><a href="general.html#cb714-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb714-4"><a href="general.html#cb714-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb714-5"><a href="general.html#cb714-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb714-6"><a href="general.html#cb714-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb714-7"><a href="general.html#cb714-7" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb714-8"><a href="general.html#cb714-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb714-9"><a href="general.html#cb714-9" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb714-10"><a href="general.html#cb714-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb714-11"><a href="general.html#cb714-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb714-12"><a href="general.html#cb714-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>( <span class="at">color=</span><span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb714-13"><a href="general.html#cb714-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">21</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb714-14"><a href="general.html#cb714-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb714-15"><a href="general.html#cb714-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Evolution of bitcoin price&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode2-1.png" style="width:75.0%" />
</center>
</div>
<div id="connected-scatterplot-to-show-an-evolution" class="section level3" number="9.1.53">
<h3><span class="header-section-number">9.1.53</span> Connected Scatterplot to Show an Evolution</h3>
<p>The <a href="https://www.r-graph-gallery.com/connected-scatter.html">connected scatterplot</a> can also be a powerfull technique to tell a story about the evolution of 2 variables. Lets consider a dataset composed of 3 columns:</p>
<ul>
<li>Year</li>
<li>Number of baby born called Amanda this year</li>
<li>Number of baby born called Ashley</li>
</ul>
<p>The scatterplot beside allows to understand the evolution of these 2 names. Note that the code is pretty different in this case. <code>geom_segment()</code> is used of <code>geom_line()</code>. This is because <code>geom_line()</code> automatically sort data points depending on their X position to link them.</p>
<div class="sourceCode" id="cb715"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb715-1"><a href="general.html#cb715-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb715-2"><a href="general.html#cb715-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb715-3"><a href="general.html#cb715-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb715-4"><a href="general.html#cb715-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb715-5"><a href="general.html#cb715-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb715-6"><a href="general.html#cb715-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb715-7"><a href="general.html#cb715-7" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb715-8"><a href="general.html#cb715-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb715-9"><a href="general.html#cb715-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Amanda&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb715-10"><a href="general.html#cb715-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb715-11"><a href="general.html#cb715-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">&gt;</span><span class="dv">1970</span>) <span class="sc">%&gt;%</span></span>
<span id="cb715-12"><a href="general.html#cb715-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, name, n) <span class="sc">%&gt;%</span></span>
<span id="cb715-13"><a href="general.html#cb715-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> name, <span class="at">value=</span>n, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb715-14"><a href="general.html#cb715-14" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb715-15"><a href="general.html#cb715-15" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb715-16"><a href="general.html#cb715-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Amanda, <span class="at">y=</span>Ashley, <span class="at">label=</span>year)) <span class="sc">+</span></span>
<span id="cb715-17"><a href="general.html#cb715-17" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb715-18"><a href="general.html#cb715-18" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_segment</span>(<span class="fu">aes</span>(</span>
<span id="cb715-19"><a href="general.html#cb715-19" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xend=</span><span class="fu">c</span>(<span class="fu">tail</span>(Amanda, <span class="at">n=</span><span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>), </span>
<span id="cb715-20"><a href="general.html#cb715-20" aria-hidden="true" tabindex="-1"></a>                    <span class="at">yend=</span><span class="fu">c</span>(<span class="fu">tail</span>(Ashley, <span class="at">n=</span><span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>)</span>
<span id="cb715-21"><a href="general.html#cb715-21" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb715-22"><a href="general.html#cb715-22" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode3-1.png" style="width:75.0%" />
</center>
<p>It makes sense to add arrows and labels to guide the reader in the chart:</p>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb716-1"><a href="general.html#cb716-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb716-2"><a href="general.html#cb716-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb716-3"><a href="general.html#cb716-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb716-4"><a href="general.html#cb716-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb716-5"><a href="general.html#cb716-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb716-6"><a href="general.html#cb716-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb716-7"><a href="general.html#cb716-7" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb716-8"><a href="general.html#cb716-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb716-9"><a href="general.html#cb716-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Amanda&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb716-10"><a href="general.html#cb716-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb716-11"><a href="general.html#cb716-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">&gt;</span><span class="dv">1970</span>) <span class="sc">%&gt;%</span></span>
<span id="cb716-12"><a href="general.html#cb716-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, name, n) <span class="sc">%&gt;%</span></span>
<span id="cb716-13"><a href="general.html#cb716-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> name, <span class="at">value=</span>n, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb716-14"><a href="general.html#cb716-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Select a few date to label the chart</span></span>
<span id="cb716-15"><a href="general.html#cb716-15" aria-hidden="true" tabindex="-1"></a>tmp_date <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">sample_frac</span>(<span class="fl">0.3</span>)</span>
<span id="cb716-16"><a href="general.html#cb716-16" aria-hidden="true" tabindex="-1"></a><span class="co"># plot </span></span>
<span id="cb716-17"><a href="general.html#cb716-17" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb716-18"><a href="general.html#cb716-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Amanda, <span class="at">y=</span>Ashley, <span class="at">label=</span>year)) <span class="sc">+</span></span>
<span id="cb716-19"><a href="general.html#cb716-19" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb716-20"><a href="general.html#cb716-20" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_text_repel</span>(<span class="at">data=</span>tmp_date) <span class="sc">+</span></span>
<span id="cb716-21"><a href="general.html#cb716-21" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_segment</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>, </span>
<span id="cb716-22"><a href="general.html#cb716-22" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(</span>
<span id="cb716-23"><a href="general.html#cb716-23" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xend=</span><span class="fu">c</span>(<span class="fu">tail</span>(Amanda, <span class="at">n=</span><span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>), </span>
<span id="cb716-24"><a href="general.html#cb716-24" aria-hidden="true" tabindex="-1"></a>                    <span class="at">yend=</span><span class="fu">c</span>(<span class="fu">tail</span>(Ashley, <span class="at">n=</span><span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>)</span>
<span id="cb716-25"><a href="general.html#cb716-25" aria-hidden="true" tabindex="-1"></a>                  ),</span>
<span id="cb716-26"><a href="general.html#cb716-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">arrow=</span><span class="fu">arrow</span>(<span class="at">length=</span><span class="fu">unit</span>(<span class="fl">0.3</span>,<span class="st">&quot;cm&quot;</span>))</span>
<span id="cb716-27"><a href="general.html#cb716-27" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb716-28"><a href="general.html#cb716-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode4-1.png" style="width:75.0%" />
</center>
</div>
<div id="parallel-coordinates-chart-with-ggally" class="section level3" number="9.1.54">
<h3><span class="header-section-number">9.1.54</span> Parallel Coordinates Chart with <code>ggally</code></h3>
<p><code>ggally</code> is a <code>ggplot2</code> extension. It allows to build <a href="https://www.r-graph-gallery.com/parallel-plot.html">parallel coordinates charts</a> thanks to the <code>ggparcoord()</code> function. Check several reproducible examples in this post.</p>
<div id="most-basic" class="section level4" number="9.1.54.1">
<h4><span class="header-section-number">9.1.54.1</span> Most Basic</h4>
<p>This is the most basic parallel coordinates chart you can build with R, the <code>ggally</code> packages and its <code>ggparcoord()</code> function.</p>
<p>The input dataset must be a data frame with several numeric variables, each being used as a vertical axis on the chart. Columns number of these variables are specified in the <code>columns</code> argument of the function.</p>
<p><u>Note</u>: here, a categoric variable is used to color lines, as specified in the <code>groupColumn</code> variable.</p>
<div class="sourceCode" id="cb717"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb717-1"><a href="general.html#cb717-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb717-2"><a href="general.html#cb717-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb717-3"><a href="general.html#cb717-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data set is provided by R natively</span></span>
<span id="cb717-4"><a href="general.html#cb717-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> iris</span>
<span id="cb717-5"><a href="general.html#cb717-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb717-6"><a href="general.html#cb717-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(data,</span>
<span id="cb717-7"><a href="general.html#cb717-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span></span>
<span id="cb717-8"><a href="general.html#cb717-8" aria-hidden="true" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode-1.png" /></p>
</div>
</div>
<div id="custom-color-theme-general-appearance" class="section level3" number="9.1.55">
<h3><span class="header-section-number">9.1.55</span> Custom Color, Theme, General Appearance</h3>
<p>This is pretty much the same chart as te previous one, except for the following customizations:</p>
<ul>
<li>Color palette is improved thanks to the <code>viridis</code> package.</li>
<li>Title is added with <code>title</code>, and customized in <code>theme</code>.</li>
<li>Dots are added with <code>showPoints</code>.</li>
<li>A bit of transparency is applied to lines with <code>alphaLines</code>.</li>
<li><code>theme_ipsum()</code> is used for the general appearance.</li>
</ul>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb718-1"><a href="general.html#cb718-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb718-2"><a href="general.html#cb718-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb718-3"><a href="general.html#cb718-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb718-4"><a href="general.html#cb718-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb718-5"><a href="general.html#cb718-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Data set is provided by R natively</span></span>
<span id="cb718-6"><a href="general.html#cb718-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> iris</span>
<span id="cb718-7"><a href="general.html#cb718-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb718-8"><a href="general.html#cb718-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(data,</span>
<span id="cb718-9"><a href="general.html#cb718-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>, <span class="at">order =</span> <span class="st">&quot;anyClass&quot;</span>,</span>
<span id="cb718-10"><a href="general.html#cb718-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPoints =</span> <span class="cn">TRUE</span>, </span>
<span id="cb718-11"><a href="general.html#cb718-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Parallel Coordinate Plot for the Iris Data&quot;</span>,</span>
<span id="cb718-12"><a href="general.html#cb718-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">alphaLines =</span> <span class="fl">0.3</span></span>
<span id="cb718-13"><a href="general.html#cb718-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb718-14"><a href="general.html#cb718-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">discrete=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb718-15"><a href="general.html#cb718-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()<span class="sc">+</span></span>
<span id="cb718-16"><a href="general.html#cb718-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb718-17"><a href="general.html#cb718-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>)</span>
<span id="cb718-18"><a href="general.html#cb718-18" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode2-1.png" /></p>
</div>
<div id="scaling" class="section level3" number="9.1.56">
<h3><span class="header-section-number">9.1.56</span> Scaling</h3>
<p>Scaling transforms the raw data to a new scale that is common with other variables. It is a crucial step to compare variables that do not have the same unit, but can also help otherwise as shown in the example below.</p>
<p>The <code>ggally</code> package offers a <code>scale</code> argument. Four possible options are applied on the same dataset below:</p>
<ul>
<li><code>globalminmax</code> - No scaling.</li>
<li><code>uniminmax</code> - Standardize to Min = 0 and Max = 1.</li>
<li><code>std</code> - Normalize univariately (substract mean &amp; divide by sd).</li>
<li><code>center</code> - Standardize and center variables.</li>
</ul>
<div class="sourceCode" id="cb719"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb719-1"><a href="general.html#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(data,</span>
<span id="cb719-2"><a href="general.html#cb719-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>, <span class="at">order =</span> <span class="st">&quot;anyClass&quot;</span>,</span>
<span id="cb719-3"><a href="general.html#cb719-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale=</span><span class="st">&quot;globalminmax&quot;</span>,</span>
<span id="cb719-4"><a href="general.html#cb719-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPoints =</span> <span class="cn">TRUE</span>, </span>
<span id="cb719-5"><a href="general.html#cb719-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;No scaling&quot;</span>,</span>
<span id="cb719-6"><a href="general.html#cb719-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">alphaLines =</span> <span class="fl">0.3</span></span>
<span id="cb719-7"><a href="general.html#cb719-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb719-8"><a href="general.html#cb719-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">discrete=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb719-9"><a href="general.html#cb719-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()<span class="sc">+</span></span>
<span id="cb719-10"><a href="general.html#cb719-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb719-11"><a href="general.html#cb719-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb719-12"><a href="general.html#cb719-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb719-13"><a href="general.html#cb719-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb719-14"><a href="general.html#cb719-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode31-1.png" /></p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb720-1"><a href="general.html#cb720-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(data,</span>
<span id="cb720-2"><a href="general.html#cb720-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>, <span class="at">order =</span> <span class="st">&quot;anyClass&quot;</span>,</span>
<span id="cb720-3"><a href="general.html#cb720-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale=</span><span class="st">&quot;uniminmax&quot;</span>,</span>
<span id="cb720-4"><a href="general.html#cb720-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPoints =</span> <span class="cn">TRUE</span>, </span>
<span id="cb720-5"><a href="general.html#cb720-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Standardize to Min = 0 and Max = 1&quot;</span>,</span>
<span id="cb720-6"><a href="general.html#cb720-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">alphaLines =</span> <span class="fl">0.3</span></span>
<span id="cb720-7"><a href="general.html#cb720-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb720-8"><a href="general.html#cb720-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">discrete=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb720-9"><a href="general.html#cb720-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()<span class="sc">+</span></span>
<span id="cb720-10"><a href="general.html#cb720-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb720-11"><a href="general.html#cb720-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb720-12"><a href="general.html#cb720-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb720-13"><a href="general.html#cb720-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb720-14"><a href="general.html#cb720-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode32-1.png" /></p>
<div class="sourceCode" id="cb721"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb721-1"><a href="general.html#cb721-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(data,</span>
<span id="cb721-2"><a href="general.html#cb721-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>, <span class="at">order =</span> <span class="st">&quot;anyClass&quot;</span>,</span>
<span id="cb721-3"><a href="general.html#cb721-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale=</span><span class="st">&quot;std&quot;</span>,</span>
<span id="cb721-4"><a href="general.html#cb721-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPoints =</span> <span class="cn">TRUE</span>, </span>
<span id="cb721-5"><a href="general.html#cb721-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Normalize univariately (substract mean &amp; divide by sd)&quot;</span>,</span>
<span id="cb721-6"><a href="general.html#cb721-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">alphaLines =</span> <span class="fl">0.3</span></span>
<span id="cb721-7"><a href="general.html#cb721-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb721-8"><a href="general.html#cb721-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">discrete=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb721-9"><a href="general.html#cb721-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()<span class="sc">+</span></span>
<span id="cb721-10"><a href="general.html#cb721-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb721-11"><a href="general.html#cb721-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb721-12"><a href="general.html#cb721-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb721-13"><a href="general.html#cb721-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb721-14"><a href="general.html#cb721-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode33-1.png" /></p>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb722-1"><a href="general.html#cb722-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(data,</span>
<span id="cb722-2"><a href="general.html#cb722-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>, <span class="at">order =</span> <span class="st">&quot;anyClass&quot;</span>,</span>
<span id="cb722-3"><a href="general.html#cb722-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale=</span><span class="st">&quot;center&quot;</span>,</span>
<span id="cb722-4"><a href="general.html#cb722-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPoints =</span> <span class="cn">TRUE</span>, </span>
<span id="cb722-5"><a href="general.html#cb722-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Standardize and center variables&quot;</span>,</span>
<span id="cb722-6"><a href="general.html#cb722-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">alphaLines =</span> <span class="fl">0.3</span></span>
<span id="cb722-7"><a href="general.html#cb722-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb722-8"><a href="general.html#cb722-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">discrete=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb722-9"><a href="general.html#cb722-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()<span class="sc">+</span></span>
<span id="cb722-10"><a href="general.html#cb722-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb722-11"><a href="general.html#cb722-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb722-12"><a href="general.html#cb722-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb722-13"><a href="general.html#cb722-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb722-14"><a href="general.html#cb722-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode34-1.png" /></p>
</div>
<div id="highlight-a-group" class="section level3" number="9.1.57">
<h3><span class="header-section-number">9.1.57</span> Highlight a Group</h3>
<p>Data visualization aims to highlight a story in the data. If you are interested in a specific group, you can highlight it as follow:</p>
<div class="sourceCode" id="cb723"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb723-1"><a href="general.html#cb723-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb723-2"><a href="general.html#cb723-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb723-3"><a href="general.html#cb723-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb723-4"><a href="general.html#cb723-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data set is provided by R natively</span></span>
<span id="cb723-5"><a href="general.html#cb723-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> iris</span>
<span id="cb723-6"><a href="general.html#cb723-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb723-7"><a href="general.html#cb723-7" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb723-8"><a href="general.html#cb723-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Species)) <span class="sc">%&gt;%</span></span>
<span id="cb723-9"><a href="general.html#cb723-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggparcoord</span>(</span>
<span id="cb723-10"><a href="general.html#cb723-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>, <span class="at">order =</span> <span class="st">&quot;anyClass&quot;</span>,</span>
<span id="cb723-11"><a href="general.html#cb723-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPoints =</span> <span class="cn">TRUE</span>, </span>
<span id="cb723-12"><a href="general.html#cb723-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Original&quot;</span>,</span>
<span id="cb723-13"><a href="general.html#cb723-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">alphaLines =</span> <span class="dv">1</span></span>
<span id="cb723-14"><a href="general.html#cb723-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb723-15"><a href="general.html#cb723-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>( <span class="st">&quot;#69b3a2&quot;</span>, <span class="st">&quot;#E8E8E8&quot;</span>, <span class="st">&quot;#E8E8E8&quot;</span>) ) <span class="sc">+</span></span>
<span id="cb723-16"><a href="general.html#cb723-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()<span class="sc">+</span></span>
<span id="cb723-17"><a href="general.html#cb723-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb723-18"><a href="general.html#cb723-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position=</span><span class="st">&quot;Default&quot;</span>,</span>
<span id="cb723-19"><a href="general.html#cb723-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>)</span>
<span id="cb723-20"><a href="general.html#cb723-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb723-21"><a href="general.html#cb723-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/parallel-plot-ggally_files/figure-html/thecode4-1.png" /></p>
</div>
<div id="lollipop-chart-with-conditional-color" class="section level3" number="9.1.58">
<h3><span class="header-section-number">9.1.58</span> Lollipop Chart with Conditional Color</h3>
<p>If your <a href="https://www.r-graph-gallery.com/lollipop-plot.html">lollipop plot</a> goes on both side of an interesting threshold, you probably want to change the color of its components conditionally. Here is how using R and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>.</p>
</div>
<div id="marker" class="section level3" number="9.1.59">
<h3><span class="header-section-number">9.1.59</span> Marker</h3>
<p>Here is the process to use conditional color on your ggplot2 chart:</p>
<ul>
<li>Add a new column to your dataframe specifying if you are over or under the threshold (use an ifelse statement).</li>
<li>Give this column to the color aesthetic.</li>
</ul>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb724-1"><a href="general.html#cb724-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb724-2"><a href="general.html#cb724-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb724-3"><a href="general.html#cb724-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb724-4"><a href="general.html#cb724-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data (this takes more sense with a numerical X axis)</span></span>
<span id="cb724-5"><a href="general.html#cb724-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2</span><span class="sc">*</span>pi, <span class="at">length.out=</span><span class="dv">100</span>)</span>
<span id="cb724-6"><a href="general.html#cb724-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb724-7"><a href="general.html#cb724-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span>x, </span>
<span id="cb724-8"><a href="general.html#cb724-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">y=</span><span class="fu">sin</span>(x) <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">sd=</span><span class="fl">0.2</span>)</span>
<span id="cb724-9"><a href="general.html#cb724-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb724-10"><a href="general.html#cb724-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb724-11"><a href="general.html#cb724-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a column with your condition for the color</span></span>
<span id="cb724-12"><a href="general.html#cb724-12" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb724-13"><a href="general.html#cb724-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mycolor =</span> <span class="fu">ifelse</span>(y<span class="sc">&gt;</span><span class="dv">0</span>, <span class="st">&quot;type1&quot;</span>, <span class="st">&quot;type2&quot;</span>))</span>
<span id="cb724-14"><a href="general.html#cb724-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb724-15"><a href="general.html#cb724-15" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb724-16"><a href="general.html#cb724-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb724-17"><a href="general.html#cb724-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">xend=</span>x, <span class="at">y=</span><span class="dv">0</span>, <span class="at">yend=</span>y, <span class="at">color=</span>mycolor), <span class="at">size=</span><span class="fl">1.3</span>, <span class="at">alpha=</span><span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb724-18"><a href="general.html#cb724-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb724-19"><a href="general.html#cb724-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb724-20"><a href="general.html#cb724-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb724-21"><a href="general.html#cb724-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb724-22"><a href="general.html#cb724-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb724-23"><a href="general.html#cb724-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb724-24"><a href="general.html#cb724-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Value of Y&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/302-lollipop-chart-with-conditional-color_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="lollipop-chart-with-2-groups" class="section level3" number="9.1.60">
<h3><span class="header-section-number">9.1.60</span> Lollipop Chart with 2 Groups</h3>
<p>A <a href="https://www.r-graph-gallery.com/lollipop-plot.html">lollipop chart</a> can be used to compare 2 categories, linking them with a segment to stress out their difference. This post explains how to do it with <code>R</code> and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>.</p>
<p><a href="https://www.r-graph-gallery.com/lollipop-plot.html">Lollipop plots</a> can be very appropriate when it comes to compare 2 values for several entities.</p>
<p>For each entity, one point is drawn for each variable, with a different color. Their difference is then highlighted using a segment. This type of visualisation is also called <a href="https://www.data-to-viz.com/graph/lollipop.html">Cleveland dot plots</a>.</p>
<p>As usual, it is advised to <a href="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2.html">order your individuals</a> by mean, median, or group difference to give even more insight to the figure.</p>
<div class="sourceCode" id="cb725"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb725-1"><a href="general.html#cb725-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb725-2"><a href="general.html#cb725-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb725-3"><a href="general.html#cb725-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb725-4"><a href="general.html#cb725-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb725-5"><a href="general.html#cb725-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb725-6"><a href="general.html#cb725-6" aria-hidden="true" tabindex="-1"></a>value1 <span class="ot">&lt;-</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">26</span>))<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb725-7"><a href="general.html#cb725-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb725-8"><a href="general.html#cb725-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span>LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">26</span>], </span>
<span id="cb725-9"><a href="general.html#cb725-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">value1=</span>value1, </span>
<span id="cb725-10"><a href="general.html#cb725-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">value2=</span>value1<span class="sc">+</span><span class="dv">1</span><span class="sc">+</span><span class="fu">rnorm</span>(<span class="dv">26</span>, <span class="at">sd=</span><span class="dv">1</span>) </span>
<span id="cb725-11"><a href="general.html#cb725-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb725-12"><a href="general.html#cb725-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb725-13"><a href="general.html#cb725-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder data using average? Learn more about reordering in chart #267</span></span>
<span id="cb725-14"><a href="general.html#cb725-14" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb725-15"><a href="general.html#cb725-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb725-16"><a href="general.html#cb725-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">mymean =</span> <span class="fu">mean</span>(<span class="fu">c</span>(value1,value2) )) <span class="sc">%&gt;%</span> </span>
<span id="cb725-17"><a href="general.html#cb725-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mymean) <span class="sc">%&gt;%</span> </span>
<span id="cb725-18"><a href="general.html#cb725-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x=</span><span class="fu">factor</span>(x, x))</span>
<span id="cb725-19"><a href="general.html#cb725-19" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb725-20"><a href="general.html#cb725-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb725-21"><a href="general.html#cb725-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb725-22"><a href="general.html#cb725-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">xend=</span>x, <span class="at">y=</span>value1, <span class="at">yend=</span>value2), <span class="at">color=</span><span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb725-23"><a href="general.html#cb725-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>value1), <span class="at">color=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.7</span>,<span class="fl">0.1</span>,<span class="fl">0.5</span>), <span class="at">size=</span><span class="dv">3</span> ) <span class="sc">+</span></span>
<span id="cb725-24"><a href="general.html#cb725-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>value2), <span class="at">color=</span><span class="fu">rgb</span>(<span class="fl">0.7</span>,<span class="fl">0.2</span>,<span class="fl">0.1</span>,<span class="fl">0.5</span>), <span class="at">size=</span><span class="dv">3</span> ) <span class="sc">+</span></span>
<span id="cb725-25"><a href="general.html#cb725-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb725-26"><a href="general.html#cb725-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb725-27"><a href="general.html#cb725-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb725-28"><a href="general.html#cb725-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb725-29"><a href="general.html#cb725-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb725-30"><a href="general.html#cb725-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb725-31"><a href="general.html#cb725-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Value of Y&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/303-lollipop-plot-with-2-values_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="circular-barplot-with-groups" class="section level3" number="9.1.61">
<h3><span class="header-section-number">9.1.61</span> Circular Barplot with Groups</h3>
<p>This section explains how to build a <a href="https://www.r-graph-gallery.com/circular-barplot.html">circular barchart</a> with groups. A gap is added between groups to highlight them. Bars are labeled, group names are annotated</p>
</div>
<div id="add-a-gap-in-the-circle" class="section level3" number="9.1.62">
<h3><span class="header-section-number">9.1.62</span> Add a Gap in the Circle</h3>
<p>A <a href="https://www.r-graph-gallery.com/circular-barplot.html">circular barplot</a> is a <a href="https://www.r-graph-gallery.com/barplot.html">barplot</a> where bars are displayed along a circle instead of a line. This page aims to teach you how to make a circular barplot with groups.</p>
<p>Since this kind of chart is a bit tricky, I strongly advise to understand <a href="https://www.r-graph-gallery.com/295-basic-circular-barplot.html">graph #295</a> and <a href="https://www.r-graph-gallery.com/296-add-labels-to-circular-barplot.html">#296</a> that will teach you the basics.</p>
<p>The first step is to build a circular barplot with a break in the circle. Actually, I just added a few empty lines at the end of the initial data frame:</p>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="general.html#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb726-2"><a href="general.html#cb726-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb726-3"><a href="general.html#cb726-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb726-4"><a href="general.html#cb726-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dataset</span></span>
<span id="cb726-5"><a href="general.html#cb726-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb726-6"><a href="general.html#cb726-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">individual=</span><span class="fu">paste</span>( <span class="st">&quot;Mister &quot;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">60</span>), <span class="at">sep=</span><span class="st">&quot;&quot;</span>),</span>
<span id="cb726-7"><a href="general.html#cb726-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>), <span class="dv">60</span>, <span class="at">replace=</span>T)</span>
<span id="cb726-8"><a href="general.html#cb726-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb726-9"><a href="general.html#cb726-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb726-10"><a href="general.html#cb726-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a number of &#39;empty bar&#39;</span></span>
<span id="cb726-11"><a href="general.html#cb726-11" aria-hidden="true" tabindex="-1"></a>empty_bar <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb726-12"><a href="general.html#cb726-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb726-13"><a href="general.html#cb726-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add lines to the initial dataset</span></span>
<span id="cb726-14"><a href="general.html#cb726-14" aria-hidden="true" tabindex="-1"></a>to_add <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, empty_bar, <span class="fu">ncol</span>(data))</span>
<span id="cb726-15"><a href="general.html#cb726-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(to_add) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(data)</span>
<span id="cb726-16"><a href="general.html#cb726-16" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data, to_add)</span>
<span id="cb726-17"><a href="general.html#cb726-17" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(data))</span>
<span id="cb726-18"><a href="general.html#cb726-18" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb726-19"><a href="general.html#cb726-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the name and the y position of each label</span></span>
<span id="cb726-20"><a href="general.html#cb726-20" aria-hidden="true" tabindex="-1"></a>label_data <span class="ot">&lt;-</span> data</span>
<span id="cb726-21"><a href="general.html#cb726-21" aria-hidden="true" tabindex="-1"></a>number_of_bar <span class="ot">&lt;-</span> <span class="fu">nrow</span>(label_data)</span>
<span id="cb726-22"><a href="general.html#cb726-22" aria-hidden="true" tabindex="-1"></a>angle <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> <span class="dv">360</span> <span class="sc">*</span> (label_data<span class="sc">$</span>id<span class="fl">-0.5</span>) <span class="sc">/</span>number_of_bar     <span class="co"># I substract 0.5 because the letter must have the angle of the center of the bars. Not extreme right(1) or extreme left (0)</span></span>
<span id="cb726-23"><a href="general.html#cb726-23" aria-hidden="true" tabindex="-1"></a>label_data<span class="sc">$</span>hjust <span class="ot">&lt;-</span> <span class="fu">ifelse</span>( angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb726-24"><a href="general.html#cb726-24" aria-hidden="true" tabindex="-1"></a>label_data<span class="sc">$</span>angle <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, angle<span class="sc">+</span><span class="dv">180</span>, angle)</span>
<span id="cb726-25"><a href="general.html#cb726-25" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb726-26"><a href="general.html#cb726-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plot</span></span>
<span id="cb726-27"><a href="general.html#cb726-27" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(id), <span class="at">y=</span>value)) <span class="sc">+</span>       <span class="co"># Note that id is a factor. If x is numeric, there is some space between the first bar</span></span>
<span id="cb726-28"><a href="general.html#cb726-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="fu">alpha</span>(<span class="st">&quot;green&quot;</span>, <span class="fl">0.3</span>)) <span class="sc">+</span></span>
<span id="cb726-29"><a href="general.html#cb726-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">120</span>) <span class="sc">+</span></span>
<span id="cb726-30"><a href="general.html#cb726-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb726-31"><a href="general.html#cb726-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb726-32"><a href="general.html#cb726-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb726-33"><a href="general.html#cb726-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb726-34"><a href="general.html#cb726-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb726-35"><a href="general.html#cb726-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">4</span>), <span class="st">&quot;cm&quot;</span>) </span>
<span id="cb726-36"><a href="general.html#cb726-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb726-37"><a href="general.html#cb726-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb726-38"><a href="general.html#cb726-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>label_data, <span class="fu">aes</span>(<span class="at">x=</span>id, <span class="at">y=</span>value<span class="sc">+</span><span class="dv">10</span>, <span class="at">label=</span>individual, <span class="at">hjust=</span>hjust), <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>,<span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">angle=</span> label_data<span class="sc">$</span>angle, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) </span>
<span id="cb726-39"><a href="general.html#cb726-39" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb726-40"><a href="general.html#cb726-40" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/297-circular-barplot-with-groups_files/figure-html/thecode-1.png" style="width:85.0%" />
</center>
</div>
<div id="space-between-groups" class="section level3" number="9.1.63">
<h3><span class="header-section-number">9.1.63</span> Space between Groups</h3>
<p>This concept can now be used to add space between each group of the dataset. I add n lines with only <code>NA</code> at the bottom of each group.</p>
<p>This chart is far more insightful since it allows one to quickly compare the different groups, and to compare the value of items within each group.</p>
<div class="sourceCode" id="cb727"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb727-1"><a href="general.html#cb727-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb727-2"><a href="general.html#cb727-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb727-3"><a href="general.html#cb727-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb727-4"><a href="general.html#cb727-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dataset</span></span>
<span id="cb727-5"><a href="general.html#cb727-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb727-6"><a href="general.html#cb727-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">individual=</span><span class="fu">paste</span>( <span class="st">&quot;Mister &quot;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">60</span>), <span class="at">sep=</span><span class="st">&quot;&quot;</span>),</span>
<span id="cb727-7"><a href="general.html#cb727-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">group=</span><span class="fu">c</span>( <span class="fu">rep</span>(<span class="st">&#39;A&#39;</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="st">&#39;B&#39;</span>, <span class="dv">30</span>), <span class="fu">rep</span>(<span class="st">&#39;C&#39;</span>, <span class="dv">14</span>), <span class="fu">rep</span>(<span class="st">&#39;D&#39;</span>, <span class="dv">6</span>)) ,</span>
<span id="cb727-8"><a href="general.html#cb727-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>), <span class="dv">60</span>, <span class="at">replace=</span>T)</span>
<span id="cb727-9"><a href="general.html#cb727-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb727-10"><a href="general.html#cb727-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb727-11"><a href="general.html#cb727-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a number of &#39;empty bar&#39; to add at the end of each group</span></span>
<span id="cb727-12"><a href="general.html#cb727-12" aria-hidden="true" tabindex="-1"></a>empty_bar <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb727-13"><a href="general.html#cb727-13" aria-hidden="true" tabindex="-1"></a>to_add <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="fu">matrix</span>(<span class="cn">NA</span>, empty_bar<span class="sc">*</span><span class="fu">nlevels</span>(data<span class="sc">$</span>group), <span class="fu">ncol</span>(data)) )</span>
<span id="cb727-14"><a href="general.html#cb727-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(to_add) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(data)</span>
<span id="cb727-15"><a href="general.html#cb727-15" aria-hidden="true" tabindex="-1"></a>to_add<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">levels</span>(data<span class="sc">$</span>group), <span class="at">each=</span>empty_bar)</span>
<span id="cb727-16"><a href="general.html#cb727-16" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data, to_add)</span>
<span id="cb727-17"><a href="general.html#cb727-17" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(group)</span>
<span id="cb727-18"><a href="general.html#cb727-18" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(data))</span>
<span id="cb727-19"><a href="general.html#cb727-19" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb727-20"><a href="general.html#cb727-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the name and the y position of each label</span></span>
<span id="cb727-21"><a href="general.html#cb727-21" aria-hidden="true" tabindex="-1"></a>label_data <span class="ot">&lt;-</span> data</span>
<span id="cb727-22"><a href="general.html#cb727-22" aria-hidden="true" tabindex="-1"></a>number_of_bar <span class="ot">&lt;-</span> <span class="fu">nrow</span>(label_data)</span>
<span id="cb727-23"><a href="general.html#cb727-23" aria-hidden="true" tabindex="-1"></a>angle <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> <span class="dv">360</span> <span class="sc">*</span> (label_data<span class="sc">$</span>id<span class="fl">-0.5</span>) <span class="sc">/</span>number_of_bar     <span class="co"># I substract 0.5 because the letter must have the angle of the center of the bars. Not extreme right(1) or extreme left (0)</span></span>
<span id="cb727-24"><a href="general.html#cb727-24" aria-hidden="true" tabindex="-1"></a>label_data<span class="sc">$</span>hjust <span class="ot">&lt;-</span> <span class="fu">ifelse</span>( angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb727-25"><a href="general.html#cb727-25" aria-hidden="true" tabindex="-1"></a>label_data<span class="sc">$</span>angle <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, angle<span class="sc">+</span><span class="dv">180</span>, angle)</span>
<span id="cb727-26"><a href="general.html#cb727-26" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb727-27"><a href="general.html#cb727-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plot</span></span>
<span id="cb727-28"><a href="general.html#cb727-28" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(id), <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span>       <span class="co"># Note that id is a factor. If x is numeric, there is some space between the first bar</span></span>
<span id="cb727-29"><a href="general.html#cb727-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb727-30"><a href="general.html#cb727-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">120</span>) <span class="sc">+</span></span>
<span id="cb727-31"><a href="general.html#cb727-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb727-32"><a href="general.html#cb727-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb727-33"><a href="general.html#cb727-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb727-34"><a href="general.html#cb727-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb727-35"><a href="general.html#cb727-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb727-36"><a href="general.html#cb727-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb727-37"><a href="general.html#cb727-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">4</span>), <span class="st">&quot;cm&quot;</span>) </span>
<span id="cb727-38"><a href="general.html#cb727-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb727-39"><a href="general.html#cb727-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span> </span>
<span id="cb727-40"><a href="general.html#cb727-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>label_data, <span class="fu">aes</span>(<span class="at">x=</span>id, <span class="at">y=</span>value<span class="sc">+</span><span class="dv">10</span>, <span class="at">label=</span>individual, <span class="at">hjust=</span>hjust), <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>,<span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">angle=</span> label_data<span class="sc">$</span>angle, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) </span>
<span id="cb727-41"><a href="general.html#cb727-41" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb727-42"><a href="general.html#cb727-42" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/297-circular-barplot-with-groups_files/figure-html/thecode2-1.png" style="width:85.0%" />
</center>
</div>
<div id="order-bars" class="section level3" number="9.1.64">
<h3><span class="header-section-number">9.1.64</span> Order Bars</h3>
<p>Here observations are sorted by bar height within each group. It can be useful if your goal is to understand what are the highest / lowest observations within and across groups.</p>
<p>The method used to order groups in ggplot2 is extensively described in this <a href="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2.html">dedicated page</a>. Basically, you just have to add the following piece of code right after the data frame creation:</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb728-1"><a href="general.html#cb728-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Order data:</span></span>
<span id="cb728-2"><a href="general.html#cb728-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> data <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(group, value)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/297-circular-barplot-with-groups_files/figure-html/unnamed-chunk-1-1.png" style="width:85.0%" />
</center>
</div>
<div id="circular-barchart-customization" class="section level3" number="9.1.65">
<h3><span class="header-section-number">9.1.65</span> Circular Barchart Customization</h3>
<p>Last but not least, it is highly advisable to add some customisation to your chart. Here we add group names (A, B, C and D), and we add a scale to help compare the sizes of the bars. Voila! The code is a bit long, but the result is quite worth it in my opinion!</p>
<div class="sourceCode" id="cb729"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb729-1"><a href="general.html#cb729-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb729-2"><a href="general.html#cb729-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb729-3"><a href="general.html#cb729-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-4"><a href="general.html#cb729-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dataset</span></span>
<span id="cb729-5"><a href="general.html#cb729-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb729-6"><a href="general.html#cb729-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">individual=</span><span class="fu">paste</span>( <span class="st">&quot;Mister &quot;</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">60</span>), <span class="at">sep=</span><span class="st">&quot;&quot;</span>),</span>
<span id="cb729-7"><a href="general.html#cb729-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">group=</span><span class="fu">c</span>( <span class="fu">rep</span>(<span class="st">&#39;A&#39;</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="st">&#39;B&#39;</span>, <span class="dv">30</span>), <span class="fu">rep</span>(<span class="st">&#39;C&#39;</span>, <span class="dv">14</span>), <span class="fu">rep</span>(<span class="st">&#39;D&#39;</span>, <span class="dv">6</span>)) ,</span>
<span id="cb729-8"><a href="general.html#cb729-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>), <span class="dv">60</span>, <span class="at">replace=</span>T)</span>
<span id="cb729-9"><a href="general.html#cb729-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb729-10"><a href="general.html#cb729-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-11"><a href="general.html#cb729-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a number of &#39;empty bar&#39; to add at the end of each group</span></span>
<span id="cb729-12"><a href="general.html#cb729-12" aria-hidden="true" tabindex="-1"></a>empty_bar <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb729-13"><a href="general.html#cb729-13" aria-hidden="true" tabindex="-1"></a>to_add <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="fu">matrix</span>(<span class="cn">NA</span>, empty_bar<span class="sc">*</span><span class="fu">nlevels</span>(data<span class="sc">$</span>group), <span class="fu">ncol</span>(data)) )</span>
<span id="cb729-14"><a href="general.html#cb729-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(to_add) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(data)</span>
<span id="cb729-15"><a href="general.html#cb729-15" aria-hidden="true" tabindex="-1"></a>to_add<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">levels</span>(data<span class="sc">$</span>group), <span class="at">each=</span>empty_bar)</span>
<span id="cb729-16"><a href="general.html#cb729-16" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data, to_add)</span>
<span id="cb729-17"><a href="general.html#cb729-17" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(group)</span>
<span id="cb729-18"><a href="general.html#cb729-18" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(data))</span>
<span id="cb729-19"><a href="general.html#cb729-19" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-20"><a href="general.html#cb729-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the name and the y position of each label</span></span>
<span id="cb729-21"><a href="general.html#cb729-21" aria-hidden="true" tabindex="-1"></a>label_data <span class="ot">&lt;-</span> data</span>
<span id="cb729-22"><a href="general.html#cb729-22" aria-hidden="true" tabindex="-1"></a>number_of_bar <span class="ot">&lt;-</span> <span class="fu">nrow</span>(label_data)</span>
<span id="cb729-23"><a href="general.html#cb729-23" aria-hidden="true" tabindex="-1"></a>angle <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> <span class="dv">360</span> <span class="sc">*</span> (label_data<span class="sc">$</span>id<span class="fl">-0.5</span>) <span class="sc">/</span>number_of_bar     <span class="co"># I substract 0.5 because the letter must have the angle of the center of the bars. Not extreme right(1) or extreme left (0)</span></span>
<span id="cb729-24"><a href="general.html#cb729-24" aria-hidden="true" tabindex="-1"></a>label_data<span class="sc">$</span>hjust <span class="ot">&lt;-</span> <span class="fu">ifelse</span>( angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb729-25"><a href="general.html#cb729-25" aria-hidden="true" tabindex="-1"></a>label_data<span class="sc">$</span>angle <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, angle<span class="sc">+</span><span class="dv">180</span>, angle)</span>
<span id="cb729-26"><a href="general.html#cb729-26" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-27"><a href="general.html#cb729-27" aria-hidden="true" tabindex="-1"></a><span class="co"># prepare a data frame for base lines</span></span>
<span id="cb729-28"><a href="general.html#cb729-28" aria-hidden="true" tabindex="-1"></a>base_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb729-29"><a href="general.html#cb729-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb729-30"><a href="general.html#cb729-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">start=</span><span class="fu">min</span>(id), <span class="at">end=</span><span class="fu">max</span>(id) <span class="sc">-</span> empty_bar) <span class="sc">%&gt;%</span> </span>
<span id="cb729-31"><a href="general.html#cb729-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb729-32"><a href="general.html#cb729-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title=</span><span class="fu">mean</span>(<span class="fu">c</span>(start, end)))</span>
<span id="cb729-33"><a href="general.html#cb729-33" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-34"><a href="general.html#cb729-34" aria-hidden="true" tabindex="-1"></a><span class="co"># prepare a data frame for grid (scales)</span></span>
<span id="cb729-35"><a href="general.html#cb729-35" aria-hidden="true" tabindex="-1"></a>grid_data <span class="ot">&lt;-</span> base_data</span>
<span id="cb729-36"><a href="general.html#cb729-36" aria-hidden="true" tabindex="-1"></a>grid_data<span class="sc">$</span>end <span class="ot">&lt;-</span> grid_data<span class="sc">$</span>end[ <span class="fu">c</span>( <span class="fu">nrow</span>(grid_data), <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(grid_data)<span class="sc">-</span><span class="dv">1</span>)] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb729-37"><a href="general.html#cb729-37" aria-hidden="true" tabindex="-1"></a>grid_data<span class="sc">$</span>start <span class="ot">&lt;-</span> grid_data<span class="sc">$</span>start <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb729-38"><a href="general.html#cb729-38" aria-hidden="true" tabindex="-1"></a>grid_data <span class="ot">&lt;-</span> grid_data[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb729-39"><a href="general.html#cb729-39" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-40"><a href="general.html#cb729-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plot</span></span>
<span id="cb729-41"><a href="general.html#cb729-41" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(id), <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span>       <span class="co"># Note that id is a factor. If x is numeric, there is some space between the first bar</span></span>
<span id="cb729-42"><a href="general.html#cb729-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb729-43"><a href="general.html#cb729-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(id), <span class="at">y=</span>value, <span class="at">fill=</span>group), <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb729-44"><a href="general.html#cb729-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb729-45"><a href="general.html#cb729-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a val=100/75/50/25 lines. I do it at the beginning to make sur barplots are OVER it.</span></span>
<span id="cb729-46"><a href="general.html#cb729-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data=</span>grid_data, <span class="fu">aes</span>(<span class="at">x =</span> end, <span class="at">y =</span> <span class="dv">80</span>, <span class="at">xend =</span> start, <span class="at">yend =</span> <span class="dv">80</span>), <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">0.3</span> , <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) <span class="sc">+</span></span>
<span id="cb729-47"><a href="general.html#cb729-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data=</span>grid_data, <span class="fu">aes</span>(<span class="at">x =</span> end, <span class="at">y =</span> <span class="dv">60</span>, <span class="at">xend =</span> start, <span class="at">yend =</span> <span class="dv">60</span>), <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">0.3</span> , <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) <span class="sc">+</span></span>
<span id="cb729-48"><a href="general.html#cb729-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data=</span>grid_data, <span class="fu">aes</span>(<span class="at">x =</span> end, <span class="at">y =</span> <span class="dv">40</span>, <span class="at">xend =</span> start, <span class="at">yend =</span> <span class="dv">40</span>), <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">0.3</span> , <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) <span class="sc">+</span></span>
<span id="cb729-49"><a href="general.html#cb729-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data=</span>grid_data, <span class="fu">aes</span>(<span class="at">x =</span> end, <span class="at">y =</span> <span class="dv">20</span>, <span class="at">xend =</span> start, <span class="at">yend =</span> <span class="dv">20</span>), <span class="at">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">0.3</span> , <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) <span class="sc">+</span></span>
<span id="cb729-50"><a href="general.html#cb729-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb729-51"><a href="general.html#cb729-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add text showing the value of each 100/75/50/25 lines</span></span>
<span id="cb729-52"><a href="general.html#cb729-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fu">rep</span>(<span class="fu">max</span>(data<span class="sc">$</span>id),<span class="dv">4</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>), <span class="at">label =</span> <span class="fu">c</span>(<span class="st">&quot;20&quot;</span>, <span class="st">&quot;40&quot;</span>, <span class="st">&quot;60&quot;</span>, <span class="st">&quot;80&quot;</span>) , <span class="at">color=</span><span class="st">&quot;grey&quot;</span>, <span class="at">size=</span><span class="dv">3</span> , <span class="at">angle=</span><span class="dv">0</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>, <span class="at">hjust=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb729-53"><a href="general.html#cb729-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb729-54"><a href="general.html#cb729-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(id), <span class="at">y=</span>value, <span class="at">fill=</span>group), <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb729-55"><a href="general.html#cb729-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">120</span>) <span class="sc">+</span></span>
<span id="cb729-56"><a href="general.html#cb729-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb729-57"><a href="general.html#cb729-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb729-58"><a href="general.html#cb729-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb729-59"><a href="general.html#cb729-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb729-60"><a href="general.html#cb729-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb729-61"><a href="general.html#cb729-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb729-62"><a href="general.html#cb729-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">4</span>), <span class="st">&quot;cm&quot;</span>) </span>
<span id="cb729-63"><a href="general.html#cb729-63" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb729-64"><a href="general.html#cb729-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span> </span>
<span id="cb729-65"><a href="general.html#cb729-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>label_data, <span class="fu">aes</span>(<span class="at">x=</span>id, <span class="at">y=</span>value<span class="sc">+</span><span class="dv">10</span>, <span class="at">label=</span>individual, <span class="at">hjust=</span>hjust), <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>,<span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">angle=</span> label_data<span class="sc">$</span>angle, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> ) <span class="sc">+</span></span>
<span id="cb729-66"><a href="general.html#cb729-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb729-67"><a href="general.html#cb729-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add base line information</span></span>
<span id="cb729-68"><a href="general.html#cb729-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data=</span>base_data, <span class="fu">aes</span>(<span class="at">x =</span> start, <span class="at">y =</span> <span class="sc">-</span><span class="dv">5</span>, <span class="at">xend =</span> end, <span class="at">yend =</span> <span class="sc">-</span><span class="dv">5</span>), <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">size=</span><span class="fl">0.6</span> , <span class="at">inherit.aes =</span> <span class="cn">FALSE</span> )  <span class="sc">+</span></span>
<span id="cb729-69"><a href="general.html#cb729-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>base_data, <span class="fu">aes</span>(<span class="at">x =</span> title, <span class="at">y =</span> <span class="sc">-</span><span class="dv">18</span>, <span class="at">label=</span>group), <span class="at">hjust=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb729-70"><a href="general.html#cb729-70" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb729-71"><a href="general.html#cb729-71" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/297-circular-barplot-with-groups_files/figure-html/thecode4-1.png" />
</center>
</div>
<div id="what-is-stacking" class="section level3" number="9.1.66">
<h3><span class="header-section-number">9.1.66</span> What is Stacking</h3>
<p><code>Stacking</code> is a process where a chart is broken up across more than one categoric variables which make up the whole. Each item of the categoric variable is represented by a shaded area. These areas are stacked on top of one another.</p>
<p>Here is an example with a <a href="https://www.data-to-viz.com/graph/stackedarea.html">stacked area chart</a>. It shows the evolution of baby name occurence in the US between 1880 and 2015. Six first names are represented on top of one another.</p>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb730-1"><a href="general.html#cb730-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb730-2"><a href="general.html#cb730-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb730-3"><a href="general.html#cb730-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb730-4"><a href="general.html#cb730-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb730-5"><a href="general.html#cb730-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb730-6"><a href="general.html#cb730-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb730-7"><a href="general.html#cb730-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb730-8"><a href="general.html#cb730-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb730-9"><a href="general.html#cb730-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb730-10"><a href="general.html#cb730-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Amanda&quot;</span>, <span class="st">&quot;Jessica&quot;</span>,    <span class="st">&quot;Patricia&quot;</span>, <span class="st">&quot;Deborah&quot;</span>,   <span class="st">&quot;Dorothy&quot;</span>,  <span class="st">&quot;Helen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb730-11"><a href="general.html#cb730-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb730-12"><a href="general.html#cb730-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb730-13"><a href="general.html#cb730-13" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb730-14"><a href="general.html#cb730-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">fill=</span>name, <span class="at">text=</span>name)) <span class="sc">+</span></span>
<span id="cb730-15"><a href="general.html#cb730-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>( ) <span class="sc">+</span></span>
<span id="cb730-16"><a href="general.html#cb730-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb730-17"><a href="general.html#cb730-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb730-18"><a href="general.html#cb730-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb730-19"><a href="general.html#cb730-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb730-20"><a href="general.html#cb730-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb730-21"><a href="general.html#cb730-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip=</span><span class="st">&quot;text&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-f0fa4a78cfb0c226965d" style="width:480px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f0fa4a78cfb0c226965d">{"x":{"data":[{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[767,742,976,1025,1182,1351,1526,1710,2276,2324,2823,3024,3613,4137,4792,5217,5822,6072,6982,6816,8970,7517,8789,9323,10128,10904,11702,12761,14389,15780,18174,21052,29350,34217,42763,57076,61300,64687,70088,67694,74367,77430,74236,75503,78312,75951,72241,71993,69163,66289,66276,60847,59588,55605,56554,55387,54159,55258,55196,55815,58269,62042,65304,65119,60367,58060,70656,79275,77489,84057,94022,114996,118461,117968,117989,111757,103698,91237,81704,74906,67070,62214,57960,54683,53197,47931,43143,37987,33902,32268,30792,28561,24602,22989,25274,25422,29303,35352,35920,37373,42974,51408,54162,53414,53337,55675,59599,62538,57774,54044,52605,49100,43561,39788,36510,31967,28048,24589,21636,19580,18850,16836,14638,12955,12045,10609,9223,7998,6846,5758,4974,4389,4113,3770,3733,3443,3378,3182,4136,4374,4465,4784,4837,5343,5800,6630,7713,9287,11039,12579,14698,16724,18294,20771,23802,27402,29322,32548,36831,42022,48317,55227,60598,68594,77989,87013,90872,97229,104324,100126,94730,87244,87167,88375,85782,78792,69300,56439,53631,44894,38077,32750,28614,28783,32693,34342,35084,36335,40647,45471,49580,54473,55718,58908,63271,68047,75764,82499,91904,104340,112210,118416,118396,118879,115404,94402,84390,77795,79585,70930,58340,60605,65403,65599,62265,58487,56000,55388,55434,54351,55599,56743,55804,59801,61056,66472,66498,69410,72227,72551,76261,78653,75865,74577,77822,74746,68073,70485,65132,61721,57488,43138,34563,29660,21332,18452,16051,14649,13046,11962,11215,10422,9570,9090,7834,9347,7142,7353,6426,6189,5648,5210,4524,4068,3395,3215,2737,2680,2048,1896,1690,1519,1312,1264,1005,1008,767],"text":"Amanda","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(68,1,84,1)","hoveron":"points","name":"Amanda","legendgroup":"Amanda","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[755,728,961,1009,1169,1341,1516,1695,2250,2312,2799,3009,3597,4113,4774,5204,5804,6049,6961,6805,8944,7496,8768,9302,10105,10886,11677,12740,14364,15754,18141,21016,29318,34175,42701,56970,61210,64598,69996,67624,74285,77336,74165,75385,78187,75869,72125,71902,69033,66128,66111,60689,59381,55362,56274,55107,53859,54936,54786,55372,57799,61434,64628,64332,59074,56597,68185,73437,66244,64849,64958,72946,68636,65780,63306,59440,55867,51167,48769,45354,41806,38122,35063,33622,33891,30848,26893,23981,21616,21079,20943,19888,18328,18007,20929,22009,26311,32675,33441,35193,41037,49502,52319,51808,51869,54274,58315,61334,56718,52968,51511,48085,42642,38992,35771,31308,27414,23951,21083,19056,18304,16346,14164,12534,11618,10184,8799,7626,6491,5412,4620,4057,3776,3440,3361,3095,3029,2829,3182,3378,3443,3733,3770,4113,4389,4974,5758,6846,7998,9223,10609,12045,12955,14638,16836,18850,19580,21636,24589,28048,31967,36510,39788,43561,49100,52605,54044,57774,62538,59599,55675,53337,53414,54162,51408,42974,37373,35920,35352,29303,25422,25274,22989,24602,28561,30792,32268,33902,37987,43143,47931,53197,54683,57960,62214,67070,74906,81704,91237,103698,111757,117989,117968,118461,114996,94022,84057,77489,79275,70656,58060,60367,65119,65304,62042,58269,55815,55196,55258,54159,55387,56554,55605,59588,60847,66276,66289,69163,71993,72241,75951,78312,75503,74236,77430,74367,67694,70088,64687,61300,57076,42763,34217,29350,21052,18174,15780,14389,12761,11702,10904,10128,9323,8789,7517,8970,6816,6982,6072,5822,5217,4792,4137,3613,3024,2823,2324,2276,1710,1526,1351,1182,1025,976,742,767,755],"text":"Deborah","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,68,135,1)","hoveron":"points","name":"Deborah","legendgroup":"Deborah","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[643,619,846,868,1006,1145,1286,1423,1877,1935,2341,2443,2971,3292,3722,4077,4438,4577,5290,5118,6453,5323,6061,6224,6628,6949,7351,7773,8661,9501,10823,12147,16673,19501,23919,31816,33793,35747,37964,35890,37642,38250,36449,36341,38190,37299,35510,35911,35303,34650,35704,34167,34408,33315,34991,35704,36191,38364,38439,40201,42922,46871,49596,49543,45694,44272,55387,60687,54920,54442,55406,63856,60022,57626,55512,52201,49010,44768,43229,40117,36730,33394,30989,29830,30356,27888,24227,21665,19532,19302,19144,18264,17054,16833,19830,21035,25328,31741,32528,34304,40142,48714,51490,51049,51188,53555,57686,60720,56110,52348,50915,47587,42132,38516,35329,30932,27064,23636,20771,18721,17991,16027,13901,12243,11329,9950,8534,7364,6249,5186,4378,3779,3499,3105,2977,2698,2577,2331,2829,3029,3095,3361,3440,3776,4057,4620,5412,6491,7626,8799,10184,11618,12534,14164,16346,18304,19056,21083,23951,27414,31308,35771,38992,42642,48085,51511,52968,56718,61334,58315,54274,51869,51808,52319,49502,41037,35193,33441,32675,26311,22009,20929,18007,18328,19888,20943,21079,21616,23981,26893,30848,33891,33622,35063,38122,41806,45354,48769,51167,55867,59440,63306,65780,68636,72946,64958,64849,66244,73437,68185,56597,59074,64332,64628,61434,57799,55372,54786,54936,53859,55107,56274,55362,59381,60689,66111,66128,69033,71902,72125,75869,78187,75385,74165,77336,74285,67624,69996,64598,61210,56970,42701,34175,29318,21016,18141,15754,14364,12740,11677,10886,10105,9302,8768,7496,8944,6805,6961,6049,5804,5204,4774,4113,3597,3009,2799,2312,2250,1695,1516,1341,1169,1009,961,728,755,643],"text":"Dorothy","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(42,120,142,1)","hoveron":"points","name":"Dorothy","legendgroup":"Dorothy","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[7,7,8,6,20,11,19,18,30,26,29,26,35,43,46,54,46,58,60,70,110,76,94,95,140,138,175,194,222,251,344,346,540,613,698,950,1131,1496,1816,2184,2545,3429,3942,4851,6999,8129,8625,10592,12369,13666,15790,16507,18034,18672,20891,22923,23957,26910,27605,29783,32723,36982,39581,39744,37000,35971,46536,51708,46616,46736,48347,56907,53553,51508,49568,46607,43734,39751,38465,35741,32661,29538,27402,26490,27261,25084,21779,19509,17650,17445,17429,16824,15811,15701,18690,19978,24385,30748,31603,33426,39232,47817,50614,50205,50330,52746,56920,59904,55336,51491,50053,46814,41305,37648,34480,30096,26164,22824,19939,17880,17101,15143,13026,11460,10468,8990,7585,6433,5364,4360,3675,3049,2727,2366,2175,1933,1762,1573,2331,2577,2698,2977,3105,3499,3779,4378,5186,6249,7364,8534,9950,11329,12243,13901,16027,17991,18721,20771,23636,27064,30932,35329,38516,42132,47587,50915,52348,56110,60720,57686,53555,51188,51049,51490,48714,40142,34304,32528,31741,25328,21035,19830,16833,17054,18264,19144,19302,19532,21665,24227,27888,30356,29830,30989,33394,36730,40117,43229,44768,49010,52201,55512,57626,60022,63856,55406,54442,54920,60687,55387,44272,45694,49543,49596,46871,42922,40201,38439,38364,36191,35704,34991,33315,34408,34167,35704,34650,35303,35911,35510,37299,38190,36341,36449,38250,37642,35890,37964,35747,33793,31816,23919,19501,16673,12147,10823,9501,8661,7773,7351,6949,6628,6224,6061,5323,6453,5118,5290,4577,4438,4077,3722,3292,2971,2443,2341,1935,1877,1423,1286,1145,1006,868,846,619,643,7],"text":"Helen","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(34,168,132,1)","hoveron":"points","name":"Helen","legendgroup":"Helen","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[0,0,0,0,6,5,8,10,12,17,11,12,21,28,36,35,37,49,47,56,87,68,85,79,124,121,157,177,205,233,316,325,504,588,656,895,1078,1441,1760,2144,2502,3381,3902,4799,6958,8095,8590,10553,12333,13624,15752,16468,17990,18629,20845,22876,23914,26838,27555,29706,32662,36901,39454,39623,36876,35839,46296,51278,46134,46330,47945,56441,53101,51013,49144,46221,43328,39275,37936,35219,32102,28870,26537,25369,26090,23555,20112,17748,15810,14953,13406,11464,9601,8475,8036,7050,6017,5905,5500,5650,5309,5285,5168,4923,4475,4400,4246,3913,3798,3606,3578,3417,2951,2660,2363,2161,1970,1781,1704,1532,1392,1223,1113,1012,997,879,775,725,629,564,479,429,395,419,379,348,383,302,1573,1762,1933,2175,2366,2727,3049,3675,4360,5364,6433,7585,8990,10468,11460,13026,15143,17101,17880,19939,22824,26164,30096,34480,37648,41305,46814,50053,51491,55336,59904,56920,52746,50330,50205,50614,47817,39232,33426,31603,30748,24385,19978,18690,15701,15811,16824,17429,17445,17650,19509,21779,25084,27261,26490,27402,29538,32661,35741,38465,39751,43734,46607,49568,51508,53553,56907,48347,46736,46616,51708,46536,35971,37000,39744,39581,36982,32723,29783,27605,26910,23957,22923,20891,18672,18034,16507,15790,13666,12369,10592,8625,8129,6999,4851,3942,3429,2545,2184,1816,1496,1131,950,698,613,540,346,344,251,222,194,175,138,140,95,94,76,110,70,60,58,46,54,46,43,35,26,29,26,30,18,19,11,20,6,8,7,7,0],"text":"Jessica","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(122,209,81,1)","hoveron":"points","name":"Jessica","legendgroup":"Jessica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1884],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,302,383,348,379,419,395,429,479,564,629,725,775,879,997,1012,1113,1223,1392,1532,1704,1781,1970,2161,2363,2660,2951,3417,3578,3606,3798,3913,4246,4400,4475,4923,5168,5285,5309,5650,5500,5905,6017,7050,8036,8475,9601,11464,13406,14953,15810,17748,20112,23555,26090,25369,26537,28870,32102,35219,37936,39275,43328,46221,49144,51013,53101,56441,47945,46330,46134,51278,46296,35839,36876,39623,39454,36901,32662,29706,27555,26838,23914,22876,20845,18629,17990,16468,15752,13624,12333,10553,8590,8095,6958,4799,3902,3381,2502,2144,1760,1441,1078,895,656,588,504,325,316,233,205,177,157,121,124,79,85,68,87,56,47,49,37,35,36,28,21,12,11,17,12,10,8,5,6,0],"text":"Patricia","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(253,231,37,1)","hoveron":"points","name":"Patricia","legendgroup":"Patricia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":79.760896637609,"r":39.8505603985056,"b":70.9007887090079,"l":101.452885014529},"font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":15.2760481527605},"title":{"text":"<b> Popularity of American names in the previous 30 years <\/b>","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":23.9103362391034},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1873.15,2023.85],"tickmode":"array","ticktext":["1880","1920","1960","2000"],"tickvals":[1880,1920,1960,2000],"categoryorder":"array","categoryarray":["1880","1920","1960","2000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.81901203819012,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Arial Narrow","size":15.2760481527605},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"y","title":{"text":"year","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":11.9551681195517}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5943.95,124822.95],"tickmode":"array","ticktext":["0","25000","50000","75000","100000"],"tickvals":[0,25000,50000,75000,100000],"categoryorder":"array","categoryarray":["0","25000","50000","75000","100000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.81901203819012,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Arial Narrow","size":15.2760481527605},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"x","title":{"text":"n","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":11.9551681195517}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":12.2208385222084}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"1ff4349a1628":{"x":{},"y":{},"fill":{},"text":{},"type":"scatter"}},"cur_data":"1ff4349a1628","visdat":{"1ff4349a1628":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="example-optical-illusion" class="section level3" number="9.1.67">
<h3><span class="header-section-number">9.1.67</span> Example: Optical Illusion</h3>
<blockquote>
<p>Important note: this section is inspired from <a href="http://www.leancrew.com/all-this/2011/11/i-hate-stacked-area-charts/">this post</a> by Dr.Drang.
Dr Drang gives this nice example. Consider the graphic below, and try to visualize how the 3 categories evolved on the period:</p>
</blockquote>
<div class="sourceCode" id="cb731"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb731-1"><a href="general.html#cb731-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dummy data</span></span>
<span id="cb731-2"><a href="general.html#cb731-2" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb731-3"><a href="general.html#cb731-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">2000</span>,<span class="dv">2005</span>), <span class="dv">3</span>),</span>
<span id="cb731-4"><a href="general.html#cb731-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(  <span class="dv">75</span>, <span class="dv">73</span>, <span class="dv">68</span>, <span class="dv">57</span>, <span class="dv">36</span>, <span class="dv">0</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">80</span>),</span>
<span id="cb731-5"><a href="general.html#cb731-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">each=</span><span class="dv">6</span>)</span>
<span id="cb731-6"><a href="general.html#cb731-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb731-7"><a href="general.html#cb731-7" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb731-8"><a href="general.html#cb731-8" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span> </span>
<span id="cb731-9"><a href="general.html#cb731-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span></span>
<span id="cb731-10"><a href="general.html#cb731-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>( ) <span class="sc">+</span></span>
<span id="cb731-11"><a href="general.html#cb731-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb731-12"><a href="general.html#cb731-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb731-13"><a href="general.html#cb731-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb731-14"><a href="general.html#cb731-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/optical-example-1.png" width="672" /></p>
<p>It looks obvious that the yellow category increased, the purple decreased, and the green. is harder to read. At a first glance it looks like it is slightly decreasing I would say.</p>
<p>Now lets plot just the green group to find out:</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb732-1"><a href="general.html#cb732-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb732-2"><a href="general.html#cb732-2" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span> </span>
<span id="cb732-3"><a href="general.html#cb732-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">&quot;B&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb732-4"><a href="general.html#cb732-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span></span>
<span id="cb732-5"><a href="general.html#cb732-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>( <span class="at">fill=</span><span class="st">&quot;#22908C&quot;</span>) <span class="sc">+</span></span>
<span id="cb732-6"><a href="general.html#cb732-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb732-7"><a href="general.html#cb732-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb732-8"><a href="general.html#cb732-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/green-group-1.png" width="672" /></p>
</div>
<div id="workaround" class="section level3" number="9.1.68">
<h3><span class="header-section-number">9.1.68</span> Workaround</h3>
<p>If you have just a <code>few categories</code>, I would suggest to build a line chart. Here it is easy to follow a category and understand how it evolved accurately.</p>
<div class="sourceCode" id="cb733"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb733-1"><a href="general.html#cb733-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb733-2"><a href="general.html#cb733-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>name)) <span class="sc">+</span></span>
<span id="cb733-3"><a href="general.html#cb733-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb733-4"><a href="general.html#cb733-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb733-5"><a href="general.html#cb733-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb733-6"><a href="general.html#cb733-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb733-7"><a href="general.html#cb733-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/workaround-few-categories-1.png" width="672" /></p>
<p>However, this solution is not suitable if you have many categories. Indeed, it would result in a spaghetti chart that is very hard to read. You can read more about this here.</p>
<p>Instead I would suggest to use `small multiple: here each category has its own section in the graphic. It makes easy to understand the pattern of each category.</p>
<div class="sourceCode" id="cb734"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb734-1"><a href="general.html#cb734-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb734-2"><a href="general.html#cb734-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb734-3"><a href="general.html#cb734-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>() <span class="sc">+</span></span>
<span id="cb734-4"><a href="general.html#cb734-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb734-5"><a href="general.html#cb734-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb734-6"><a href="general.html#cb734-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb734-7"><a href="general.html#cb734-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb734-8"><a href="general.html#cb734-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb734-9"><a href="general.html#cb734-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb734-10"><a href="general.html#cb734-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb734-11"><a href="general.html#cb734-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb734-12"><a href="general.html#cb734-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb734-13"><a href="general.html#cb734-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>name, <span class="at">scale=</span><span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/many-categories-ggplotly-1.png" width="672" /></p>
</div>
<div id="basic-stacked-area-chart-with-r" class="section level3" number="9.1.69">
<h3><span class="header-section-number">9.1.69</span> Basic Stacked area Chart with R</h3>
<p>This section provides the basics concerning <a href="https://www.r-graph-gallery.com/stacked-area-graph.html">stacked area chart</a> with R and <code>ggplot2</code>. It takes into account several input format types and show how to customize the output.</p>
</div>
<div id="most-basic-stacked-area-with-ggplot2" class="section level3" number="9.1.70">
<h3><span class="header-section-number">9.1.70</span> Most Basic Stacked Area with <code>ggplot2</code></h3>
<p>The data frame used as input to build a stacked area chart requires 3 columns:</p>
<ul>
<li><code>x</code>: numeric variable used for the X axis, often it is a time.</li>
<li><code>y</code>: numeric variable used for the Y axis. What are we looking at?</li>
<li><code>group</code>: one shape will be done per group.</li>
</ul>
<p>The chart is built using the <code>geom_area()</code> function.</p>
<div class="sourceCode" id="cb735"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb735-1"><a href="general.html#cb735-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="cb735-2"><a href="general.html#cb735-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb735-3"><a href="general.html#cb735-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb735-4"><a href="general.html#cb735-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb735-5"><a href="general.html#cb735-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb735-6"><a href="general.html#cb735-6" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">7</span>),<span class="at">each=</span><span class="dv">7</span>))  <span class="co"># x Axis</span></span>
<span id="cb735-7"><a href="general.html#cb735-7" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">49</span>, <span class="dv">10</span>, <span class="dv">100</span>)               <span class="co"># y Axis</span></span>
<span id="cb735-8"><a href="general.html#cb735-8" aria-hidden="true" tabindex="-1"></a>group <span class="ot">&lt;-</span> <span class="fu">rep</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>],<span class="at">times=</span><span class="dv">7</span>)        <span class="co"># group, one shape per group</span></span>
<span id="cb735-9"><a href="general.html#cb735-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(time, value, group)</span>
<span id="cb735-10"><a href="general.html#cb735-10" aria-hidden="true" tabindex="-1"></a><span class="co"># stacked area chart</span></span>
<span id="cb735-11"><a href="general.html#cb735-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb735-12"><a href="general.html#cb735-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/136-stacked-area-chart_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="control-stacking-order-with-ggplot2" class="section level3" number="9.1.71">
<h3><span class="header-section-number">9.1.71</span> Control Stacking Order with <code>ggplot2</code></h3>
<p>The gallery offers a post dedicated to <a href="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2.html">reordering with ggplot2</a>. This step can be tricky but the code below shows how to:</p>
<ul>
<li>Give a specific order with the <code>factor()</code> function.</li>
<li>Order alphabetically using <code>sort()</code>.</li>
<li>Order following values at a specific data.</li>
</ul>
<div class="sourceCode" id="cb736"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb736-1"><a href="general.html#cb736-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Give a specific order:</span></span>
<span id="cb736-2"><a href="general.html#cb736-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>group , <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;C&quot;</span>) )</span>
<span id="cb736-3"><a href="general.html#cb736-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot again</span></span>
<span id="cb736-4"><a href="general.html#cb736-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb736-5"><a href="general.html#cb736-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>()</span>
<span id="cb736-6"><a href="general.html#cb736-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: you can also sort levels alphabetically:</span></span>
<span id="cb736-7"><a href="general.html#cb736-7" aria-hidden="true" tabindex="-1"></a>myLevels <span class="ot">&lt;-</span> <span class="fu">levels</span>(data<span class="sc">$</span>group)</span>
<span id="cb736-8"><a href="general.html#cb736-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>group , <span class="at">levels=</span><span class="fu">sort</span>(myLevels) )</span>
<span id="cb736-9"><a href="general.html#cb736-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: sort followinig values at time = 5</span></span>
<span id="cb736-10"><a href="general.html#cb736-10" aria-hidden="true" tabindex="-1"></a>myLevels <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb736-11"><a href="general.html#cb736-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time<span class="sc">==</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb736-12"><a href="general.html#cb736-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(value)</span>
<span id="cb736-13"><a href="general.html#cb736-13" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>group , <span class="at">levels=</span>myLevels<span class="sc">$</span>group )</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/136-stacked-area-chart_files/figure-html/thecode2-1.png" style="width:75.0%" />
</center>
</div>
<div id="proportional-stacked-area-chart" class="section level3" number="9.1.72">
<h3><span class="header-section-number">9.1.72</span> Proportional Stacked Area Chart</h3>
<p>In a proportional stacked area graph, the sum of each year is always equal to hundred and value of each group is represented through percentages.</p>
<p>To make it, you have to calculate these percentages first. This can be done using <code>dplyr</code> of with <code>base R</code>.</p>
<div class="sourceCode" id="cb737"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb737-1"><a href="general.html#cb737-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentages with dplyr</span></span>
<span id="cb737-2"><a href="general.html#cb737-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb737-3"><a href="general.html#cb737-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data  <span class="sc">%&gt;%</span></span>
<span id="cb737-4"><a href="general.html#cb737-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(time, group) <span class="sc">%&gt;%</span></span>
<span id="cb737-5"><a href="general.html#cb737-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb737-6"><a href="general.html#cb737-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span>
<span id="cb737-7"><a href="general.html#cb737-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb737-8"><a href="general.html#cb737-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>percentage, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb737-9"><a href="general.html#cb737-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">alpha=</span><span class="fl">0.6</span> , <span class="at">size=</span><span class="dv">1</span>, <span class="at">colour=</span><span class="st">&quot;black&quot;</span>)</span>
<span id="cb737-10"><a href="general.html#cb737-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: compute percentages without dplyr:</span></span>
<span id="cb737-11"><a href="general.html#cb737-11" aria-hidden="true" tabindex="-1"></a>my_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(vec){ </span>
<span id="cb737-12"><a href="general.html#cb737-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>(vec[<span class="dv">2</span>]) <span class="sc">/</span> <span class="fu">sum</span>(data<span class="sc">$</span>value[data<span class="sc">$</span>time<span class="sc">==</span>vec[<span class="dv">1</span>]]) <span class="sc">*</span><span class="dv">100</span> </span>
<span id="cb737-13"><a href="general.html#cb737-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb737-14"><a href="general.html#cb737-14" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>percentage <span class="ot">&lt;-</span> <span class="fu">apply</span>(data , <span class="dv">1</span> , my_fun)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/136-stacked-area-chart_files/figure-html/thecode3-1.png" style="width:75.0%" />
</center>
</div>
<div id="color-style" class="section level3" number="9.1.73">
<h3><span class="header-section-number">9.1.73</span> Color &amp; Style</h3>
<p>Lets improve the chart general appearance:</p>
<ul>
<li>Usage of the <code>viridis</code> color scale.</li>
<li><code>theme_ipsum</code> of the <code>hrbrthemes</code> package.</li>
<li>Add title with <code>ggtitle</code>.</li>
</ul>
<div class="sourceCode" id="cb738"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb738-1"><a href="general.html#cb738-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb738-2"><a href="general.html#cb738-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb738-3"><a href="general.html#cb738-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb738-4"><a href="general.html#cb738-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb738-5"><a href="general.html#cb738-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb738-6"><a href="general.html#cb738-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">alpha=</span><span class="fl">0.6</span> , <span class="at">size=</span>.<span class="dv">5</span>, <span class="at">colour=</span><span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb738-7"><a href="general.html#cb738-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> T) <span class="sc">+</span></span>
<span id="cb738-8"><a href="general.html#cb738-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span> </span>
<span id="cb738-9"><a href="general.html#cb738-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;The race between ...&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/136-stacked-area-chart_files/figure-html/thecode4-1.png" style="width:75.0%" />
</center>
</div>
</div>
<div id="data-art" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Data Art</h2>
<p>Sometimes programming can be used to generate figures that are aestetically pleasing, but dont bring any insight. Here are a few pieces of data art built from R and ggplot2. Visit <a href="https://www.data-to-art.com/">data-to-art.com</a> for more.</p>
<div id="using-r-and-ggplot2-for-data-art." class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Using R and ggplot2 for Data Art.</h3>
<p>R and ggplot2 are awesome tool to produce random shapes. Welcome in the field of generative coding or data art.</p>
<div class="sourceCode" id="cb739"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb739-1"><a href="general.html#cb739-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">345</span>)</span>
<span id="cb739-2"><a href="general.html#cb739-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb739-3"><a href="general.html#cb739-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb739-4"><a href="general.html#cb739-4" aria-hidden="true" tabindex="-1"></a>ngroup<span class="ot">=</span><span class="dv">30</span></span>
<span id="cb739-5"><a href="general.html#cb739-5" aria-hidden="true" tabindex="-1"></a>names<span class="ot">=</span><span class="fu">paste</span>(<span class="st">&quot;G_&quot;</span>,<span class="fu">seq</span>(<span class="dv">1</span>,ngroup),<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb739-6"><a href="general.html#cb739-6" aria-hidden="true" tabindex="-1"></a>DAT<span class="ot">=</span><span class="fu">data.frame</span>()</span>
<span id="cb739-7"><a href="general.html#cb739-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>)){</span>
<span id="cb739-8"><a href="general.html#cb739-8" aria-hidden="true" tabindex="-1"></a>    data<span class="ot">=</span><span class="fu">data.frame</span>( <span class="fu">matrix</span>(<span class="dv">0</span>, ngroup , <span class="dv">3</span>))</span>
<span id="cb739-9"><a href="general.html#cb739-9" aria-hidden="true" tabindex="-1"></a>    data[,<span class="dv">1</span>]<span class="ot">=</span>i</span>
<span id="cb739-10"><a href="general.html#cb739-10" aria-hidden="true" tabindex="-1"></a>    data[,<span class="dv">2</span>]<span class="ot">=</span><span class="fu">sample</span>(names, <span class="fu">nrow</span>(data))</span>
<span id="cb739-11"><a href="general.html#cb739-11" aria-hidden="true" tabindex="-1"></a>    data[,<span class="dv">3</span>]<span class="ot">=</span><span class="fu">prop.table</span>(<span class="fu">sample</span>( <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">100</span>),<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>ngroup)) ,<span class="fu">nrow</span>(data)))</span>
<span id="cb739-12"><a href="general.html#cb739-12" aria-hidden="true" tabindex="-1"></a>    DAT<span class="ot">=</span><span class="fu">rbind</span>(DAT,data)</span>
<span id="cb739-13"><a href="general.html#cb739-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb739-14"><a href="general.html#cb739-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(DAT)<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>,<span class="st">&quot;Group&quot;</span>,<span class="st">&quot;Value&quot;</span>)</span>
<span id="cb739-15"><a href="general.html#cb739-15" aria-hidden="true" tabindex="-1"></a>DAT<span class="ot">=</span>DAT[<span class="fu">order</span>( DAT<span class="sc">$</span>Year, DAT<span class="sc">$</span>Group) , ]</span>
<span id="cb739-16"><a href="general.html#cb739-16" aria-hidden="true" tabindex="-1"></a>coul <span class="ot">=</span> <span class="fu">brewer.pal</span>(<span class="dv">12</span>, <span class="st">&quot;Paired&quot;</span>) </span>
<span id="cb739-17"><a href="general.html#cb739-17" aria-hidden="true" tabindex="-1"></a>coul <span class="ot">=</span> <span class="fu">colorRampPalette</span>(coul)(ngroup)</span>
<span id="cb739-18"><a href="general.html#cb739-18" aria-hidden="true" tabindex="-1"></a>coul<span class="ot">=</span>coul[<span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(coul)) , <span class="at">size=</span><span class="fu">length</span>(coul) ) ]</span>
<span id="cb739-19"><a href="general.html#cb739-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DAT, <span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span>Value, <span class="at">fill=</span>Group )) <span class="sc">+</span> </span>
<span id="cb739-20"><a href="general.html#cb739-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">alpha=</span><span class="dv">1</span>  )<span class="sc">+</span></span>
<span id="cb739-21"><a href="general.html#cb739-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb739-22"><a href="general.html#cb739-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#scale_fill_brewer(colour=&quot;red&quot;, breaks=rev(levels(DAT$Group)))+</span></span>
<span id="cb739-23"><a href="general.html#cb739-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> coul)<span class="sc">+</span></span>
<span id="cb739-24"><a href="general.html#cb739-24" aria-hidden="true" tabindex="-1"></a>     <span class="fu">theme</span>(</span>
<span id="cb739-25"><a href="general.html#cb739-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb739-26"><a href="general.html#cb739-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb739-27"><a href="general.html#cb739-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb739-28"><a href="general.html#cb739-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb739-29"><a href="general.html#cb739-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb739-30"><a href="general.html#cb739-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-data-art-1.png" width="672" /></p>
</div>
<div id="r-snail" class="section level3" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> R Snail</h3>
<p>A piece of generative art built by Christophe Cariou with R.</p>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb740-1"><a href="general.html#cb740-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),<span class="at">oma=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb740-2"><a href="general.html#cb740-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">32</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">27</span>),</span>
<span id="cb740-3"><a href="general.html#cb740-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxs=</span><span class="st">&quot;i&quot;</span>, <span class="at">yaxs=</span><span class="st">&quot;i&quot;</span>, <span class="at">axes=</span><span class="cn">FALSE</span>, <span class="at">xlab=</span><span class="cn">NA</span>, <span class="at">ylab=</span><span class="cn">NA</span>,</span>
<span id="cb740-4"><a href="general.html#cb740-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">asp=</span><span class="dv">1</span>)</span>
<span id="cb740-5"><a href="general.html#cb740-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">35</span>) {</span>
<span id="cb740-6"><a href="general.html#cb740-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">35</span>) {</span>
<span id="cb740-7"><a href="general.html#cb740-7" aria-hidden="true" tabindex="-1"></a>    R <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb740-8"><a href="general.html#cb740-8" aria-hidden="true" tabindex="-1"></a>    alpha <span class="ot">&lt;-</span> j<span class="sc">*</span><span class="dv">10</span></span>
<span id="cb740-9"><a href="general.html#cb740-9" aria-hidden="true" tabindex="-1"></a>    X <span class="ot">&lt;-</span> <span class="dv">15</span><span class="sc">+</span>R<span class="sc">*</span><span class="fu">cos</span>(alpha<span class="sc">/</span><span class="dv">180</span><span class="sc">*</span>pi)</span>
<span id="cb740-10"><a href="general.html#cb740-10" aria-hidden="true" tabindex="-1"></a>    Y <span class="ot">&lt;-</span> <span class="dv">15</span><span class="sc">+</span>R<span class="sc">*</span><span class="fu">sin</span>(alpha<span class="sc">/</span><span class="dv">180</span><span class="sc">*</span>pi)</span>
<span id="cb740-11"><a href="general.html#cb740-11" aria-hidden="true" tabindex="-1"></a>    r <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb740-12"><a href="general.html#cb740-12" aria-hidden="true" tabindex="-1"></a>    beta <span class="ot">&lt;-</span> i<span class="sc">*</span><span class="dv">10</span></span>
<span id="cb740-13"><a href="general.html#cb740-13" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">15</span><span class="sc">+</span>r<span class="sc">*</span><span class="fu">cos</span>(beta<span class="sc">/</span><span class="dv">180</span><span class="sc">*</span>pi)</span>
<span id="cb740-14"><a href="general.html#cb740-14" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="dv">15</span><span class="sc">+</span>r<span class="sc">*</span><span class="fu">sin</span>(beta<span class="sc">/</span><span class="dv">180</span><span class="sc">*</span>pi)</span>
<span id="cb740-15"><a href="general.html#cb740-15" aria-hidden="true" tabindex="-1"></a>    d1 <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((X<span class="sc">-</span>x)<span class="sc">^</span><span class="dv">2</span><span class="sc">+</span>(Y<span class="sc">-</span>y)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb740-16"><a href="general.html#cb740-16" aria-hidden="true" tabindex="-1"></a>    xc <span class="ot">&lt;-</span> x</span>
<span id="cb740-17"><a href="general.html#cb740-17" aria-hidden="true" tabindex="-1"></a>    yc <span class="ot">&lt;-</span> y</span>
<span id="cb740-18"><a href="general.html#cb740-18" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">180</span><span class="sc">-</span><span class="fu">atan</span>((Y<span class="sc">-</span>y)<span class="sc">/</span>(X<span class="sc">-</span>x))<span class="sc">/</span>pi<span class="sc">*</span><span class="dv">180</span></span>
<span id="cb740-19"><a href="general.html#cb740-19" aria-hidden="true" tabindex="-1"></a>    alpha2 <span class="ot">&lt;-</span> <span class="sc">-</span>(<span class="dv">0</span><span class="sc">:</span>n)</span>
<span id="cb740-20"><a href="general.html#cb740-20" aria-hidden="true" tabindex="-1"></a>    theta <span class="ot">&lt;-</span> alpha2<span class="sc">/</span><span class="dv">180</span><span class="sc">*</span>pi</span>
<span id="cb740-21"><a href="general.html#cb740-21" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">&lt;-</span> d1<span class="sc">/</span>(n<span class="sc">/</span><span class="dv">180</span><span class="sc">*</span>pi)</span>
<span id="cb740-22"><a href="general.html#cb740-22" aria-hidden="true" tabindex="-1"></a>    r <span class="ot">&lt;-</span> b<span class="sc">*</span>theta</span>
<span id="cb740-23"><a href="general.html#cb740-23" aria-hidden="true" tabindex="-1"></a>    x1 <span class="ot">&lt;-</span> xc<span class="sc">+</span>r<span class="sc">*</span><span class="fu">cos</span>(theta)</span>
<span id="cb740-24"><a href="general.html#cb740-24" aria-hidden="true" tabindex="-1"></a>    y1 <span class="ot">&lt;-</span> yc<span class="sc">+</span>r<span class="sc">*</span><span class="fu">sin</span>(theta)</span>
<span id="cb740-25"><a href="general.html#cb740-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lines</span>(x1,y1, <span class="at">col=</span><span class="st">&quot;black&quot;</span>)</span>
<span id="cb740-26"><a href="general.html#cb740-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb740-27"><a href="general.html#cb740-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="r-graph_files/figure-html/ggplot-data-art-r-snail-1.png" width="672" /></p>
</div>
</div>
<div id="animation" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Animation</h2>
<p>An animated chart displays several chart states one after the other.</p>
<p>It must not be confounded with an <a href="https://www.r-graph-gallery.com/interactive-charts.html">interactive chart</a> that allows interaction like zooming or hovering.
This section describes 2 methods to build animations with <code>R</code>.</p>
<p>The first method builds many png images and concatenate them in a gif using image magick. The second relies on the <code>gganimate</code> package
that automatically builds the animation for you.</p>
<p>Here is a great <a href="https://www.datacamp.com/courses/data-visualization-with-ggplot2-part-3?tap_a=5644-dce66f&amp;tap_s=230804-f65650">interactive course</a> that helps getting started with animations.</p>
<div id="build-animation-directly-with-gganimate" class="section level4" number="9.3.0.1">
<h4><span class="header-section-number">9.3.0.1</span> Build-Animation Directly with <code>gganimate</code></h4>
<p>The <a href="https://github.com/thomasp85/gganimate">gganimate library</a> is a ggplot2 extension that allows to easily create animation from your data. Basically it allows to provide a frame (the step in the animation) as another aesthetic. Note that <a href="https://www.datacamp.com/courses/data-visualization-with-ggplot2-part-3?tap_a=5644-dce66f&amp;tap_s=230804-f65650">this course</a> is dedicated to it.</p>
</div>
<div id="animated-bubble-chart-with-r-and-gganimate" class="section level3" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Animated Bubble Chart with R and <code>gganimate</code></h3>
<p>The <code>gganimate</code> package allows to build <code>animated</code> chart using the <code>ggplot2</code> syntax directly from R. This section shows how to apply it on a <a href="https://www.r-graph-gallery.com/bubble-chart.html">bubble</a> chart, to show an evolution in time.</p>
</div>
<div id="animated-bubble-chart" class="section level3" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Animated Bubble Chart</h3>
<p>Before trying to build an <a href="https://www.r-graph-gallery.com/animation.html">animated</a> plot with <code>gganimate</code>, make sure you understood how to build a <a href="https://www.r-graph-gallery.com/bubble-chart.html">basic bubble chart</a> with R and <code>ggplot2</code>.</p>
<p>The idea is to add an additional aesthetics called <code>transition_..()</code> that provides a frame variable. For each value of the variable, a step on the chart will be drawn. Here, <code>transition_time()</code> is used since the frame variable is numeric.</p>
<p>Note that the <code>gganimate</code> automatically performs a transition between state. Several options are available, set using the <code>ease_aes()</code> function.</p>
<div class="sourceCode" id="cb741"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb741-1"><a href="general.html#cb741-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get data:</span></span>
<span id="cb741-2"><a href="general.html#cb741-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb741-3"><a href="general.html#cb741-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb741-4"><a href="general.html#cb741-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Charge libraries:</span></span>
<span id="cb741-5"><a href="general.html#cb741-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb741-6"><a href="general.html#cb741-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb741-7"><a href="general.html#cb741-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb741-8"><a href="general.html#cb741-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a ggplot, but add frame=year: one image per year</span></span>
<span id="cb741-9"><a href="general.html#cb741-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb741-10"><a href="general.html#cb741-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb741-11"><a href="general.html#cb741-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb741-12"><a href="general.html#cb741-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb741-13"><a href="general.html#cb741-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gganimate specific bits:</span></span>
<span id="cb741-14"><a href="general.html#cb741-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Year: {frame_time}&#39;</span>, <span class="at">x =</span> <span class="st">&#39;GDP per capita&#39;</span>, <span class="at">y =</span> <span class="st">&#39;life expectancy&#39;</span>) <span class="sc">+</span></span>
<span id="cb741-15"><a href="general.html#cb741-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb741-16"><a href="general.html#cb741-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">&#39;linear&#39;</span>)</span>
<span id="cb741-17"><a href="general.html#cb741-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Save at gif:</span></span>
<span id="cb741-18"><a href="general.html#cb741-18" aria-hidden="true" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;271-ggplot2-animated-gif-chart-with-gganimate1.gif&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/271-ggplot2-animated-gif-chart-with-gganimate1.gif" style="width:75.0%" />
</center>
</div>
<div id="use-small-multiple" class="section level3" number="9.3.3">
<h3><span class="header-section-number">9.3.3</span> Use Small Multiple</h3>
<p>Since <code>gganimate</code> is a ggplot2 extension, any ggplot2 option can be used to customize the chart. Here, an example using <code>facet_wrap()</code> to use small multiple on the previous chart, spliting the chart window per continent.</p>
<p><u>Important note</u>: this example comes from the <a href="https://github.com/thomasp85/gganimate">gganimate homepage</a>.</p>
<div class="sourceCode" id="cb742"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb742-1"><a href="general.html#cb742-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get data:</span></span>
<span id="cb742-2"><a href="general.html#cb742-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb742-3"><a href="general.html#cb742-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb742-4"><a href="general.html#cb742-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Charge libraries:</span></span>
<span id="cb742-5"><a href="general.html#cb742-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb742-6"><a href="general.html#cb742-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb742-7"><a href="general.html#cb742-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb742-8"><a href="general.html#cb742-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a ggplot, but add frame=year: one image per year</span></span>
<span id="cb742-9"><a href="general.html#cb742-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> country)) <span class="sc">+</span></span>
<span id="cb742-10"><a href="general.html#cb742-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb742-11"><a href="general.html#cb742-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> country_colors) <span class="sc">+</span></span>
<span id="cb742-12"><a href="general.html#cb742-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb742-13"><a href="general.html#cb742-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb742-14"><a href="general.html#cb742-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>continent) <span class="sc">+</span></span>
<span id="cb742-15"><a href="general.html#cb742-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Here comes the gganimate specific bits</span></span>
<span id="cb742-16"><a href="general.html#cb742-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Year: {frame_time}&#39;</span>, <span class="at">x =</span> <span class="st">&#39;GDP per capita&#39;</span>, <span class="at">y =</span> <span class="st">&#39;life expectancy&#39;</span>) <span class="sc">+</span></span>
<span id="cb742-17"><a href="general.html#cb742-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb742-18"><a href="general.html#cb742-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">&#39;linear&#39;</span>)</span>
<span id="cb742-19"><a href="general.html#cb742-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Save at gif:</span></span>
<span id="cb742-20"><a href="general.html#cb742-20" aria-hidden="true" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;271-ggplot2-animated-gif-chart-with-gganimate2.gif&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/271-ggplot2-animated-gif-chart-with-gganimate2.gif" style="width:75.0%" />
</center>
</div>
<div id="smooth-barplot-transition" class="section level3" number="9.3.4">
<h3><span class="header-section-number">9.3.4</span> Smooth Barplot Transition</h3>
<p>Before trying to build an <a href="https://www.r-graph-gallery.com/animation.html">animated</a> plot with <code>gganimate</code>, make sure you understood how to build a <a href="https://www.r-graph-gallery.com/barplot.html">basic bar chart</a> with R and <code>ggplot2</code>.</p>
<p>The idea is to add an additional aesthetics called <code>transition_..()</code> that provides a frame variable. For each value of the variable, a step on the chart will be drawn. Here, transition_states() is used since the frame variable is categorical.</p>
<p>Note that the <code>gganimate</code> automatically performs a transition between state. Several options are available, set using the <code>ease_aes()</code> function.</p>
<div class="sourceCode" id="cb743"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb743-1"><a href="general.html#cb743-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries:</span></span>
<span id="cb743-2"><a href="general.html#cb743-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb743-3"><a href="general.html#cb743-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb743-4"><a href="general.html#cb743-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb743-5"><a href="general.html#cb743-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Make 2 basic states and concatenate them:</span></span>
<span id="cb743-6"><a href="general.html#cb743-6" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">group=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>), <span class="at">values=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>), <span class="at">frame=</span><span class="fu">rep</span>(<span class="st">&#39;a&#39;</span>,<span class="dv">3</span>))</span>
<span id="cb743-7"><a href="general.html#cb743-7" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">group=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>), <span class="at">values=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">7</span>), <span class="at">frame=</span><span class="fu">rep</span>(<span class="st">&#39;b&#39;</span>,<span class="dv">3</span>))</span>
<span id="cb743-8"><a href="general.html#cb743-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(a,b)  </span>
<span id="cb743-9"><a href="general.html#cb743-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb743-10"><a href="general.html#cb743-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic barplot:</span></span>
<span id="cb743-11"><a href="general.html#cb743-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(a, <span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>values, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb743-12"><a href="general.html#cb743-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;identity&#39;</span>)</span>
<span id="cb743-13"><a href="general.html#cb743-13" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb743-14"><a href="general.html#cb743-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a ggplot, but add frame=year: one image per year</span></span>
<span id="cb743-15"><a href="general.html#cb743-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>values, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb743-16"><a href="general.html#cb743-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;identity&#39;</span>) <span class="sc">+</span></span>
<span id="cb743-17"><a href="general.html#cb743-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb743-18"><a href="general.html#cb743-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gganimate specific bits:</span></span>
<span id="cb743-19"><a href="general.html#cb743-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_states</span>(</span>
<span id="cb743-20"><a href="general.html#cb743-20" aria-hidden="true" tabindex="-1"></a>    frame,</span>
<span id="cb743-21"><a href="general.html#cb743-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">transition_length =</span> <span class="dv">2</span>,</span>
<span id="cb743-22"><a href="general.html#cb743-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_length =</span> <span class="dv">1</span></span>
<span id="cb743-23"><a href="general.html#cb743-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb743-24"><a href="general.html#cb743-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">&#39;sine-in-out&#39;</span>)</span>
<span id="cb743-25"><a href="general.html#cb743-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Save at gif:</span></span>
<span id="cb743-26"><a href="general.html#cb743-26" aria-hidden="true" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;288-animated-barplot-transition.gif&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/288-animated-barplot-transition.gif" style="width:75.0%" />
</center>
</div>
<div id="progressive-line-chart-rendering" class="section level3" number="9.3.5">
<h3><span class="header-section-number">9.3.5</span> Progressive Line Chart Rendering</h3>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb744-1"><a href="general.html#cb744-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries:</span></span>
<span id="cb744-2"><a href="general.html#cb744-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb744-3"><a href="general.html#cb744-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb744-4"><a href="general.html#cb744-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb744-5"><a href="general.html#cb744-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb744-6"><a href="general.html#cb744-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only 3 names</span></span>
<span id="cb744-7"><a href="general.html#cb744-7" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb744-8"><a href="general.html#cb744-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Patricia&quot;</span>, <span class="st">&quot;Helen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb744-9"><a href="general.html#cb744-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb744-10"><a href="general.html#cb744-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb744-11"><a href="general.html#cb744-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb744-12"><a href="general.html#cb744-12" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span></span>
<span id="cb744-13"><a href="general.html#cb744-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>name)) <span class="sc">+</span></span>
<span id="cb744-14"><a href="general.html#cb744-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb744-15"><a href="general.html#cb744-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb744-16"><a href="general.html#cb744-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb744-17"><a href="general.html#cb744-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb744-18"><a href="general.html#cb744-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb744-19"><a href="general.html#cb744-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Number of babies born&quot;</span>) <span class="sc">+</span></span>
<span id="cb744-20"><a href="general.html#cb744-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transition_reveal</span>(year)</span>
<span id="cb744-21"><a href="general.html#cb744-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Save at gif:</span></span>
<span id="cb744-22"><a href="general.html#cb744-22" aria-hidden="true" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;287-smooth-animation-with-tweenr.gif&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/287-smooth-animation-with-tweenr.gif" style="width:75.0%" />
</center>
</div>
<div id="concatenate-.png-images-with-image-magick" class="section level3" number="9.3.6">
<h3><span class="header-section-number">9.3.6</span> Concatenate <code>.png</code> Images with <code>Image Magick</code></h3>
<p><a href="https://www.imagemagick.org/script/index.php">Image Magick</a> is a software that allows to work with images in command lines. You can create and output a set of images doing a loop in <code>R</code>. Then, give all these images to Image magick and it will convert them into a <code>.gif</code> format.</p>
</div>
<div id="most-basic-animation-with-r-and-image-magick" class="section level3" number="9.3.7">
<h3><span class="header-section-number">9.3.7</span> Most Basic Animation with R and Image Magick</h3>
<p>This section describes how to build a basic count down <code>.gif</code> animation. It uses <code>R</code> to make 10 images, and Image Magick to concatenated them in a <code>.gif</code>.</p>
<p>This is probably the most basic animated plot (<code>.gif</code> format) you can do with R and Image Magick.</p>
<ul>
<li>Start by building 10 images with <code>R</code>.</li>
<li>Use Image magick to concatenate them in a <code>gif</code>.</li>
</ul>
<p>Of course, Image Magick must be installed on your computer. See <a href="http://www.imagemagick.org/script/index.php">here</a> to install it.</p>
<p><u>Note</u>: : This example has been found on Mark Heckmanns <a href="https://ryouready.wordpress.com/2010/11/21/animate-gif-images-in-r-imagemagick/">R you ready website</a>.</p>
<div class="sourceCode" id="cb745"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb745-1"><a href="general.html#cb745-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build 10 images -&gt; save them at .png format</span></span>
<span id="cb745-2"><a href="general.html#cb745-2" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file=</span><span class="st">&quot;example%02d.png&quot;</span>, <span class="at">width=</span><span class="dv">480</span>, <span class="at">height=</span><span class="dv">480</span>)</span>
<span id="cb745-3"><a href="general.html#cb745-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg=</span><span class="st">&quot;grey&quot;</span>)</span>
<span id="cb745-4"><a href="general.html#cb745-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>, <span class="st">&quot;G0!&quot;</span>)){</span>
<span id="cb745-5"><a href="general.html#cb745-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot.new</span>()</span>
<span id="cb745-6"><a href="general.html#cb745-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">text</span>(.<span class="dv">5</span>, .<span class="dv">5</span>, i, <span class="at">cex =</span> <span class="dv">6</span> )</span>
<span id="cb745-7"><a href="general.html#cb745-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb745-8"><a href="general.html#cb745-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb745-9"><a href="general.html#cb745-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Use image magick</span></span>
<span id="cb745-10"><a href="general.html#cb745-10" aria-hidden="true" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&quot;convert -delay 80 *.png animated_count_down.gif&quot;</span>)</span>
<span id="cb745-11"><a href="general.html#cb745-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove png files</span></span>
<span id="cb745-12"><a href="general.html#cb745-12" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="fu">list.files</span>(<span class="at">pattern=</span><span class="st">&quot;.png&quot;</span>))</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/166-basic-animated-graph-with-imagemagick.gif" style="width:75.0%" />
</center>
</div>
<div id="animated-3d-chart-with-r" class="section level3" number="9.3.8">
<h3><span class="header-section-number">9.3.8</span> Animated 3d Chart with R</h3>
<p>This section shows how to build a 3d <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> and make it spin thanks to the <code>rgl</code> package. Reproducible code is provided.</p>
<p>The <code>rgl</code> package is the best option to build 3d charts in R. Please see this post for an introduction to 3d scatterplots using it.</p>
<p>It also provides the <code>plot3d()</code> and <code>play3d()</code> functions that allow to animate the 3d chart, and eventually to export the result at a .gif format. Here is an application to the famous iris dataset, with a nice animated 3d scatterplot chart.</p>
<div class="sourceCode" id="cb746"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb746-1"><a href="general.html#cb746-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( rgl )</span>
<span id="cb746-2"><a href="general.html#cb746-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magick)</span>
<span id="cb746-3"><a href="general.html#cb746-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s use the iris dataset</span></span>
<span id="cb746-4"><a href="general.html#cb746-4" aria-hidden="true" tabindex="-1"></a><span class="co"># iris</span></span>
<span id="cb746-5"><a href="general.html#cb746-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This is ugly</span></span>
<span id="cb746-6"><a href="general.html#cb746-6" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;royalblue1&quot;</span>, <span class="st">&quot;darkcyan&quot;</span>, <span class="st">&quot;oldlace&quot;</span>)</span>
<span id="cb746-7"><a href="general.html#cb746-7" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>color <span class="ot">&lt;-</span> colors[ <span class="fu">as.numeric</span>( <span class="fu">as.factor</span>(iris<span class="sc">$</span>Species) ) ]</span>
<span id="cb746-8"><a href="general.html#cb746-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Static chart</span></span>
<span id="cb746-9"><a href="general.html#cb746-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot3d</span>( iris[,<span class="dv">1</span>], iris[,<span class="dv">2</span>], iris[,<span class="dv">3</span>], <span class="at">col =</span> iris<span class="sc">$</span>color, <span class="at">type =</span> <span class="st">&quot;s&quot;</span>, <span class="at">radius =</span> .<span class="dv">2</span> )</span>
<span id="cb746-10"><a href="general.html#cb746-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We can indicate the axis and the rotation velocity</span></span>
<span id="cb746-11"><a href="general.html#cb746-11" aria-hidden="true" tabindex="-1"></a><span class="fu">play3d</span>( <span class="fu">spin3d</span>( <span class="at">axis =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">rpm =</span> <span class="dv">20</span>), <span class="at">duration =</span> <span class="dv">10</span> )</span>
<span id="cb746-12"><a href="general.html#cb746-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Save like gif</span></span>
<span id="cb746-13"><a href="general.html#cb746-13" aria-hidden="true" tabindex="-1"></a><span class="fu">movie3d</span>(</span>
<span id="cb746-14"><a href="general.html#cb746-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">movie=</span><span class="st">&quot;3dAnimatedScatterplot&quot;</span>, </span>
<span id="cb746-15"><a href="general.html#cb746-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spin3d</span>( <span class="at">axis =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">rpm =</span> <span class="dv">7</span>),</span>
<span id="cb746-16"><a href="general.html#cb746-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">duration =</span> <span class="dv">10</span>, </span>
<span id="cb746-17"><a href="general.html#cb746-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">dir =</span> <span class="st">&quot;~/Desktop&quot;</span>,</span>
<span id="cb746-18"><a href="general.html#cb746-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;gif&quot;</span>, </span>
<span id="cb746-19"><a href="general.html#cb746-19" aria-hidden="true" tabindex="-1"></a>  </span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/3-r-animated-cube.gif" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb747"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb747-1"><a href="general.html#cb747-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library for 3D</span></span>
<span id="cb747-2"><a href="general.html#cb747-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice)</span>
<span id="cb747-3"><a href="general.html#cb747-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate data</span></span>
<span id="cb747-4"><a href="general.html#cb747-4" aria-hidden="true" tabindex="-1"></a>b0 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb747-5"><a href="general.html#cb747-5" aria-hidden="true" tabindex="-1"></a>b1 <span class="ot">&lt;-</span> .<span class="dv">5</span></span>
<span id="cb747-6"><a href="general.html#cb747-6" aria-hidden="true" tabindex="-1"></a>b2 <span class="ot">&lt;-</span> .<span class="dv">3</span></span>
<span id="cb747-7"><a href="general.html#cb747-7" aria-hidden="true" tabindex="-1"></a>int12 <span class="ot">&lt;-</span> .<span class="dv">2</span></span>
<span id="cb747-8"><a href="general.html#cb747-8" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb747-9"><a href="general.html#cb747-9" aria-hidden="true" tabindex="-1"></a>g<span class="sc">$</span>z <span class="ot">&lt;-</span> b0 <span class="sc">+</span> b1<span class="sc">*</span>g<span class="sc">$</span>x <span class="sc">+</span> b2<span class="sc">*</span>g<span class="sc">$</span>y <span class="sc">+</span> int12<span class="sc">*</span>g<span class="sc">$</span>x<span class="sc">*</span>g<span class="sc">$</span>y</span>
<span id="cb747-10"><a href="general.html#cb747-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make several .png images</span></span>
<span id="cb747-11"><a href="general.html#cb747-11" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file=</span><span class="st">&quot;example%03d.png&quot;</span>, <span class="at">width=</span><span class="dv">480</span>, <span class="at">heigh=</span><span class="dv">480</span>)</span>
<span id="cb747-12"><a href="general.html#cb747-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">350</span> ,<span class="dv">10</span>)){</span>
<span id="cb747-13"><a href="general.html#cb747-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">wireframe</span>(z <span class="sc">~</span> x <span class="sc">*</span> y, <span class="at">data =</span> g,</span>
<span id="cb747-14"><a href="general.html#cb747-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">screen =</span> <span class="fu">list</span>(<span class="at">z =</span> i, <span class="at">x =</span> <span class="sc">-</span><span class="dv">60</span>),</span>
<span id="cb747-15"><a href="general.html#cb747-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">drape=</span><span class="cn">TRUE</span>))</span>
<span id="cb747-16"><a href="general.html#cb747-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb747-17"><a href="general.html#cb747-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb747-18"><a href="general.html#cb747-18" aria-hidden="true" tabindex="-1"></a><span class="co"># convert pdf to gif using ImageMagick</span></span>
<span id="cb747-19"><a href="general.html#cb747-19" aria-hidden="true" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&quot;convert -delay 40 *.png animated_3D_plot.gif&quot;</span>)</span>
<span id="cb747-20"><a href="general.html#cb747-20" aria-hidden="true" tabindex="-1"></a><span class="co"># cleaning up</span></span>
<span id="cb747-21"><a href="general.html#cb747-21" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="fu">list.files</span>(<span class="at">pattern=</span><span class="st">&quot;.png&quot;</span>))</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/167-animated-3d-plot-imagemagick.gif" style="width:75.0%" />
</center>
</div>
</div>
<div id="d-charts" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> 3D Charts</h2>
<p><code>R</code> allows to build three dimensional charts, mainly thanks to the <code>rgl</code> package. Even if 3D is often a <a href="https://www.data-to-viz.com/caveat/3d.html">bad practice</a>, it can be useful in specific situation. This section provides several examples made in R.</p>
<div id="d-surface-plot-with-r-and-plotly" class="section level3" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> 3d Surface Plot with R and <code>plotly</code></h3>
<p>A surface plot displays the evolution of a numeric variable on a grid. The R plotly package offers some great functions to build that kind of chart.</p>
<div id="most-basic-bubble-chart-with-geom_point-1" class="section level4" number="9.4.1.1">
<h4><span class="header-section-number">9.4.1.1</span> Most Basic Bubble Chart with <code>geom_point()</code></h4>
<p>Plotly allows to build charts thanks to it <code>plot_ly()</code> function. It offers several <code>type</code> option. <code>surface</code>allows to make surface plots and expect a matrix as input.</p>
<p>Rows and columns actually describe a grid, and the cell value will be mapped to the surface height. Once the chart is done, you can hover and zoom on the chart for more details.</p>
<div class="sourceCode" id="cb748"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb748-1"><a href="general.html#cb748-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb748-2"><a href="general.html#cb748-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb748-3"><a href="general.html#cb748-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data: volcano is provided by plotly</span></span>
<span id="cb748-4"><a href="general.html#cb748-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb748-5"><a href="general.html#cb748-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">z =</span> volcano, <span class="at">type =</span> <span class="st">&quot;surface&quot;</span>)</span>
<span id="cb748-6"><a href="general.html#cb748-6" aria-hidden="true" tabindex="-1"></a>p </span>
<span id="cb748-7"><a href="general.html#cb748-7" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb748-8"><a href="general.html#cb748-8" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb748-9"><a href="general.html#cb748-9" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/generalHtml/3dSurface.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="generalHtml/3dSurface.html" height="500px" width="100%"></iframe>
</center>
</div>
</div>
<div id="building-a-3d-knot-with-r-and-rgl" class="section level3" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> Building a 3D Knot with R and <code>rgl</code></h3>
<p>This is an illustration of what is possible to do with R and the <code>rgl</code> library: a 3D knot.</p>
<p>With the <code>rgl</code> package, you can make the image moove and zoom in an out. Find this image in the interactive mode here.</p>
<div class="sourceCode" id="cb749"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb749-1"><a href="general.html#cb749-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library rgl</span></span>
<span id="cb749-2"><a href="general.html#cb749-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgl)</span>
<span id="cb749-3"><a href="general.html#cb749-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Choose the size of the image on the output (800,650 to have 800 x 600)</span></span>
<span id="cb749-4"><a href="general.html#cb749-4" aria-hidden="true" tabindex="-1"></a>r3dDefaults<span class="sc">$</span>windowRect <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>, <span class="dv">800</span>, <span class="dv">650</span>) </span>
<span id="cb749-5"><a href="general.html#cb749-5" aria-hidden="true" tabindex="-1"></a><span class="fu">open3d</span>()</span>
<span id="cb749-6"><a href="general.html#cb749-6" aria-hidden="true" tabindex="-1"></a><span class="co">#If you want to put line on the background</span></span>
<span id="cb749-7"><a href="general.html#cb749-7" aria-hidden="true" tabindex="-1"></a><span class="co">#bg3d(sphere = TRUE, color = c(&quot;grey&quot;, &quot;white&quot;), lit = TRUE, back = &quot;lines&quot; ,lwd=2)</span></span>
<span id="cb749-8"><a href="general.html#cb749-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This is to output a rgl plot in a rmarkdown document. Note that you must add webgl=TRUE, results=&#39;hide&#39; in the chunck header</span></span>
<span id="cb749-9"><a href="general.html#cb749-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb749-10"><a href="general.html#cb749-10" aria-hidden="true" tabindex="-1"></a>knit_hooks<span class="sc">$</span><span class="fu">set</span>(<span class="at">webgl =</span> hook_webgl)</span>
<span id="cb749-11"><a href="general.html#cb749-11" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb749-12"><a href="general.html#cb749-12" aria-hidden="true" tabindex="-1"></a><span class="fu">bg3d</span>( <span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.8</span>,<span class="fl">0.5</span>,<span class="fl">0.8</span>) )</span>
<span id="cb749-13"><a href="general.html#cb749-13" aria-hidden="true" tabindex="-1"></a>theta <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2</span><span class="sc">*</span>pi, <span class="at">len =</span> <span class="dv">50</span>)</span>
<span id="cb749-14"><a href="general.html#cb749-14" aria-hidden="true" tabindex="-1"></a>knot <span class="ot">&lt;-</span> <span class="fu">cylinder3d</span>(</span>
<span id="cb749-15"><a href="general.html#cb749-15" aria-hidden="true" tabindex="-1"></a><span class="at">center =</span> <span class="fu">cbind</span>(<span class="fu">sin</span>(theta) <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>theta), <span class="dv">2</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">3</span><span class="sc">*</span>theta), <span class="fu">cos</span>(theta) <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span><span class="fu">cos</span>(<span class="dv">2</span><span class="sc">*</span>theta)),</span>
<span id="cb749-16"><a href="general.html#cb749-16" aria-hidden="true" tabindex="-1"></a><span class="at">e1 =</span> <span class="fu">cbind</span>(<span class="fu">cos</span>(theta) <span class="sc">+</span> <span class="dv">4</span><span class="sc">*</span><span class="fu">cos</span>(<span class="dv">2</span><span class="sc">*</span>theta),<span class="dv">6</span><span class="sc">*</span><span class="fu">cos</span>(<span class="dv">3</span><span class="sc">*</span>theta),<span class="fu">sin</span>(theta) <span class="sc">+</span> <span class="dv">4</span><span class="sc">*</span><span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>theta)),<span class="at">radius =</span> <span class="fl">0.9</span>,<span class="at">closed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb749-17"><a href="general.html#cb749-17" aria-hidden="true" tabindex="-1"></a><span class="fu">shade3d</span>(<span class="fu">addNormals</span>(<span class="fu">subdivision3d</span>(knot, <span class="at">depth =</span> <span class="dv">2</span>)), <span class="at">col =</span> <span class="fu">rgb</span>(<span class="fl">0.4</span>,<span class="fl">0.2</span>,<span class="fl">0.8</span>,<span class="fl">0.3</span>))</span>
<span id="cb749-18"><a href="general.html#cb749-18" aria-hidden="true" tabindex="-1"></a><span class="co"># save it as png</span></span>
<span id="cb749-19"><a href="general.html#cb749-19" aria-hidden="true" tabindex="-1"></a><span class="co"># rgl.snapshot( &quot;~/Desktop/#20_portfolio_knot_3D.png&quot;, fmt=&quot;png&quot;, top=TRUE  )</span></span>
<span id="cb749-20"><a href="general.html#cb749-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Export as an html file if needed:</span></span>
<span id="cb749-21"><a href="general.html#cb749-21" aria-hidden="true" tabindex="-1"></a><span class="fu">writeWebGL</span>( <span class="at">filename=</span><span class="st">&quot;generalHtml/3dknot.html&quot;</span> ,  <span class="at">width=</span><span class="dv">600</span>, <span class="at">height=</span><span class="dv">600</span>)</span></code></pre></div>
<center>
<iframe title="My embedded document" src="generalHtml/3dknot.html" height="500px" width="100%"></iframe>
</center>
</div>
<div id="nifty-graph-a-3d-imitation-with-r" class="section level3" number="9.4.3">
<h3><span class="header-section-number">9.4.3</span> Nifty Graph: A 3d Imitation with R</h3>
<p>A graph by Matt Asher showing probability function in a data art fashion.</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="general.html#cb750-1" aria-hidden="true" tabindex="-1"></a>moxbuller <span class="ot">=</span> <span class="cf">function</span>(n) {   </span>
<span id="cb750-2"><a href="general.html#cb750-2" aria-hidden="true" tabindex="-1"></a>    u <span class="ot">=</span> <span class="fu">runif</span>(n)   </span>
<span id="cb750-3"><a href="general.html#cb750-3" aria-hidden="true" tabindex="-1"></a>    v <span class="ot">=</span> <span class="fu">runif</span>(n)   </span>
<span id="cb750-4"><a href="general.html#cb750-4" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">=</span> <span class="fu">cos</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>u)<span class="sc">*</span><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">*</span><span class="fu">log</span>(v))  </span>
<span id="cb750-5"><a href="general.html#cb750-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">=</span> <span class="fu">sin</span>(<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">*</span>v)<span class="sc">*</span><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">*</span><span class="fu">log</span>(u))</span>
<span id="cb750-6"><a href="general.html#cb750-6" aria-hidden="true" tabindex="-1"></a>    r <span class="ot">=</span> <span class="fu">list</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)</span>
<span id="cb750-7"><a href="general.html#cb750-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(r) </span>
<span id="cb750-8"><a href="general.html#cb750-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb750-9"><a href="general.html#cb750-9" aria-hidden="true" tabindex="-1"></a>r <span class="ot">=</span> <span class="fu">moxbuller</span>(<span class="dv">50000</span>) </span>
<span id="cb750-10"><a href="general.html#cb750-10" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg=</span><span class="st">&quot;black&quot;</span>) </span>
<span id="cb750-11"><a href="general.html#cb750-11" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)) </span>
<span id="cb750-12"><a href="general.html#cb750-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(r<span class="sc">$</span>x,r<span class="sc">$</span>y, <span class="at">pch=</span><span class="st">&quot;.&quot;</span>, <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">cex=</span><span class="fl">1.2</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/59-nifty-graph_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="animated-3d-chart-with-r-1" class="section level3" number="9.4.4">
<h3><span class="header-section-number">9.4.4</span> Animated 3d Chart with R</h3>
<p>This post shows how to build a 3d <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> and make it spin thanks to the <code>rgl</code> package. Reproducible code is provided.</p>
<p>The <code>rgl</code> package is the best option to build 3d charts in R. Please see this post for an introduction to 3d scatterplots using it.</p>
<p>It also provides the <code>plot3d()</code> and play3d() functions that allow to animate the 3d chart, and eventually to export the result at a <code>.gif</code> format. Here is an application to the famous <code>iris</code> dataset, with a nice animated 3d scatterplot chart.</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb751-1"><a href="general.html#cb751-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( rgl )</span>
<span id="cb751-2"><a href="general.html#cb751-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magick)</span>
<span id="cb751-3"><a href="general.html#cb751-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s use the iris dataset</span></span>
<span id="cb751-4"><a href="general.html#cb751-4" aria-hidden="true" tabindex="-1"></a><span class="co"># iris</span></span>
<span id="cb751-5"><a href="general.html#cb751-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This is ugly</span></span>
<span id="cb751-6"><a href="general.html#cb751-6" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;royalblue1&quot;</span>, <span class="st">&quot;darkcyan&quot;</span>, <span class="st">&quot;oldlace&quot;</span>)</span>
<span id="cb751-7"><a href="general.html#cb751-7" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>color <span class="ot">&lt;-</span> colors[ <span class="fu">as.numeric</span>( <span class="fu">as.factor</span>(iris<span class="sc">$</span>Species) ) ]</span>
<span id="cb751-8"><a href="general.html#cb751-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Static chart</span></span>
<span id="cb751-9"><a href="general.html#cb751-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot3d</span>( iris[,<span class="dv">1</span>], iris[,<span class="dv">2</span>], iris[,<span class="dv">3</span>], <span class="at">col =</span> iris<span class="sc">$</span>color, <span class="at">type =</span> <span class="st">&quot;s&quot;</span>, <span class="at">radius =</span> .<span class="dv">2</span> )</span>
<span id="cb751-10"><a href="general.html#cb751-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We can indicate the axis and the rotation velocity</span></span>
<span id="cb751-11"><a href="general.html#cb751-11" aria-hidden="true" tabindex="-1"></a><span class="fu">play3d</span>( <span class="fu">spin3d</span>( <span class="at">axis =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">rpm =</span> <span class="dv">20</span>), <span class="at">duration =</span> <span class="dv">10</span> )</span>
<span id="cb751-12"><a href="general.html#cb751-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Save like gif</span></span>
<span id="cb751-13"><a href="general.html#cb751-13" aria-hidden="true" tabindex="-1"></a><span class="fu">movie3d</span>(</span>
<span id="cb751-14"><a href="general.html#cb751-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">movie=</span><span class="st">&quot;3dAnimatedScatterplot&quot;</span>, </span>
<span id="cb751-15"><a href="general.html#cb751-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spin3d</span>( <span class="at">axis =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">rpm =</span> <span class="dv">7</span>),</span>
<span id="cb751-16"><a href="general.html#cb751-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">duration =</span> <span class="dv">10</span>, </span>
<span id="cb751-17"><a href="general.html#cb751-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">dir =</span> <span class="st">&quot;~/Desktop&quot;</span>,</span>
<span id="cb751-18"><a href="general.html#cb751-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;gif&quot;</span>, </span>
<span id="cb751-19"><a href="general.html#cb751-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">clean =</span> <span class="cn">TRUE</span></span>
<span id="cb751-20"><a href="general.html#cb751-20" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/img/graph/3-r-animated-cube.gif" style="width:75.0%" />
</center>
</div>
</div>
<div id="interactive-charts" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Interactive Charts</h2>
<p>An interactive charts allows the user to perform actions: zooming, hovering a marker to get a tooltip, choosing a variable to display and more. <code>R</code> offers a set of packages called the <code>html widgets</code>: they allow to build interactive dataviz directly from R.</p>
<div id="scatter-and-bubble-plots-use-plotly" class="section level4" number="9.5.0.1">
<h4><span class="header-section-number">9.5.0.1</span> Scatter and Bubble Plots: Use <code>Plotly</code></h4>
<p>The best way to build an interactive bubble chart from R is through the <code>plotly</code> library. If you know how to make a <code>ggplot2</code> chart, you are 10 seconds away to rendering an interactive version= just call the <code>ggplotly()</code> function, and youre done.</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb752-1"><a href="general.html#cb752-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb752-2"><a href="general.html#cb752-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb752-3"><a href="general.html#cb752-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb752-4"><a href="general.html#cb752-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb752-5"><a href="general.html#cb752-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">1977</span>) <span class="sc">%&gt;%</span></span>
<span id="cb752-6"><a href="general.html#cb752-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">color=</span>continent)) <span class="sc">+</span></span>
<span id="cb752-7"><a href="general.html#cb752-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb752-8"><a href="general.html#cb752-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb752-9"><a href="general.html#cb752-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code></pre></div>
<div id="htmlwidget-866c0cecebbf52ebd932" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-866c0cecebbf52ebd932">{"x":{"data":[{"x":[4910.416756,3008.647355,1029.161251,3214.857818,743.3870368,556.1032651,1783.432873,1109.374338,1133.98495,1172.603047,795.757282,3259.178978,2517.736547,3081.761022,2785.493582,958.5668124,505.7538077,556.8083834,21745.57328,884.7552507,993.2239571,874.6858643,764.7259628,1267.613204,745.3695408,640.3224383,21951.21176,1544.228586,663.2236766,686.3952693,1497.492223,3710.982963,2370.619976,502.3197334,3876.485958,808.8970728,1981.951806,4319.804067,670.0806011,1737.561657,1561.769116,1348.285159,1450.992513,8028.651439,2202.988423,3781.410618,962.4922932,1532.776998,3120.876811,843.7331372,1588.688299,685.5876821],"y":[58.014,39.483,49.19,59.319,46.137,45.91,49.355,46.775,47.383,50.939,47.804,55.625,52.374,46.519,53.319,42.024,44.535,44.51,52.79,41.842,51.756,40.762,37.465,56.155,52.208,43.764,57.442,46.881,43.767,41.714,50.852,64.93,55.73,42.495,56.437,41.291,44.514,67.064,45,58.55,48.879,36.788,41.974,55.527,47.8,52.537,49.919,52.887,59.837,50.35,51.386,57.674],"text":["gdpPercap:  4910.4168<br />lifeExp: 58.01400<br />pop:  17152804<br />continent: Africa","gdpPercap:  3008.6474<br />lifeExp: 39.48300<br />pop:   6162675<br />continent: Africa","gdpPercap:  1029.1613<br />lifeExp: 49.19000<br />pop:   3168267<br />continent: Africa","gdpPercap:  3214.8578<br />lifeExp: 59.31900<br />pop:    781472<br />continent: Africa","gdpPercap:   743.3870<br />lifeExp: 46.13700<br />pop:   5889574<br />continent: Africa","gdpPercap:   556.1033<br />lifeExp: 45.91000<br />pop:   3834415<br />continent: Africa","gdpPercap:  1783.4329<br />lifeExp: 49.35500<br />pop:   7959865<br />continent: Africa","gdpPercap:  1109.3743<br />lifeExp: 46.77500<br />pop:   2167533<br />continent: Africa","gdpPercap:  1133.9850<br />lifeExp: 47.38300<br />pop:   4388260<br />continent: Africa","gdpPercap:  1172.6030<br />lifeExp: 50.93900<br />pop:    304739<br />continent: Africa","gdpPercap:   795.7573<br />lifeExp: 47.80400<br />pop:  26480870<br />continent: Africa","gdpPercap:  3259.1790<br />lifeExp: 55.62500<br />pop:   1536769<br />continent: Africa","gdpPercap:  2517.7365<br />lifeExp: 52.37400<br />pop:   7459574<br />continent: Africa","gdpPercap:  3081.7610<br />lifeExp: 46.51900<br />pop:    228694<br />continent: Africa","gdpPercap:  2785.4936<br />lifeExp: 53.31900<br />pop:  38783863<br />continent: Africa","gdpPercap:   958.5668<br />lifeExp: 42.02400<br />pop:    192675<br />continent: Africa","gdpPercap:   505.7538<br />lifeExp: 44.53500<br />pop:   2512642<br />continent: Africa","gdpPercap:   556.8084<br />lifeExp: 44.51000<br />pop:  34617799<br />continent: Africa","gdpPercap: 21745.5733<br />lifeExp: 52.79000<br />pop:    706367<br />continent: Africa","gdpPercap:   884.7553<br />lifeExp: 41.84200<br />pop:    608274<br />continent: Africa","gdpPercap:   993.2240<br />lifeExp: 51.75600<br />pop:  10538093<br />continent: Africa","gdpPercap:   874.6859<br />lifeExp: 40.76200<br />pop:   4227026<br />continent: Africa","gdpPercap:   764.7260<br />lifeExp: 37.46500<br />pop:    745228<br />continent: Africa","gdpPercap:  1267.6132<br />lifeExp: 56.15500<br />pop:  14500404<br />continent: Africa","gdpPercap:   745.3695<br />lifeExp: 52.20800<br />pop:   1251524<br />continent: Africa","gdpPercap:   640.3224<br />lifeExp: 43.76400<br />pop:   1703617<br />continent: Africa","gdpPercap: 21951.2118<br />lifeExp: 57.44200<br />pop:   2721783<br />continent: Africa","gdpPercap:  1544.2286<br />lifeExp: 46.88100<br />pop:   8007166<br />continent: Africa","gdpPercap:   663.2237<br />lifeExp: 43.76700<br />pop:   5637246<br />continent: Africa","gdpPercap:   686.3953<br />lifeExp: 41.71400<br />pop:   6491649<br />continent: Africa","gdpPercap:  1497.4922<br />lifeExp: 50.85200<br />pop:   1456688<br />continent: Africa","gdpPercap:  3710.9830<br />lifeExp: 64.93000<br />pop:    913025<br />continent: Africa","gdpPercap:  2370.6200<br />lifeExp: 55.73000<br />pop:  18396941<br />continent: Africa","gdpPercap:   502.3197<br />lifeExp: 42.49500<br />pop:  11127868<br />continent: Africa","gdpPercap:  3876.4860<br />lifeExp: 56.43700<br />pop:    977026<br />continent: Africa","gdpPercap:   808.8971<br />lifeExp: 41.29100<br />pop:   5682086<br />continent: Africa","gdpPercap:  1981.9518<br />lifeExp: 44.51400<br />pop:  62209173<br />continent: Africa","gdpPercap:  4319.8041<br />lifeExp: 67.06400<br />pop:    492095<br />continent: Africa","gdpPercap:   670.0806<br />lifeExp: 45.00000<br />pop:   4657072<br />continent: Africa","gdpPercap:  1737.5617<br />lifeExp: 58.55000<br />pop:     86796<br />continent: Africa","gdpPercap:  1561.7691<br />lifeExp: 48.87900<br />pop:   5260855<br />continent: Africa","gdpPercap:  1348.2852<br />lifeExp: 36.78800<br />pop:   3140897<br />continent: Africa","gdpPercap:  1450.9925<br />lifeExp: 41.97400<br />pop:   4353666<br />continent: Africa","gdpPercap:  8028.6514<br />lifeExp: 55.52700<br />pop:  27129932<br />continent: Africa","gdpPercap:  2202.9884<br />lifeExp: 47.80000<br />pop:  17104986<br />continent: Africa","gdpPercap:  3781.4106<br />lifeExp: 52.53700<br />pop:    551425<br />continent: Africa","gdpPercap:   962.4923<br />lifeExp: 49.91900<br />pop:  17129565<br />continent: Africa","gdpPercap:  1532.7770<br />lifeExp: 52.88700<br />pop:   2308582<br />continent: Africa","gdpPercap:  3120.8768<br />lifeExp: 59.83700<br />pop:   6005061<br />continent: Africa","gdpPercap:   843.7331<br />lifeExp: 50.35000<br />pop:  11457758<br />continent: Africa","gdpPercap:  1588.6883<br />lifeExp: 51.38600<br />pop:   5216550<br />continent: Africa","gdpPercap:   685.5877<br />lifeExp: 57.67400<br />pop:   6642107<br />continent: Africa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":[6.32127781530702,5.29612899121632,4.85958274371316,4.29233940761101,5.26165272498491,4.97061767194295,5.5059176412168,4.66704214356912,5.05559917855771,4.06676322554192,6.94049569932146,4.52040583610645,5.45016604603988,4.01129639562885,7.60694585246374,3.97973112975184,4.73782100329548,7.39505365224446,4.26382530133105,4.22383634289638,5.76860640347983,5.03145493864573,4.27878249624843,6.11542223529683,4.44354450304809,4.56187177172394,4.77827606357594,5.51109590728372,5.22907021838905,5.3366454219231,4.49965617393791,4.33879188894232,6.41229679974379,5.82395887424691,4.36004866819238,5.23491359575959,8.62896025232351,4.17122854948148,5.09486783222961,3.77952755905512,5.17905878226218,4.854775454452,5.05045749460444,6.97912565512447,6.31771439639559,4.19891947998289,6.31954665895726,4.69663035294985,5.27632870617264,5.85427629024999,5.17305387000117,5.35482857766587],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10079.02674,3548.097832,6660.118654,22090.88306,4756.763836,3815.80787,5926.876967,6380.494966,2681.9889,6679.62326,5138.922374,4879.992748,1874.298931,3203.208066,6650.195573,7674.929108,5486.371089,5351.912144,3248.373311,6281.290855,9770.524921,7899.554209,24072.63213,6504.339663,13143.95095],"y":[68.481,50.023,61.489,74.21,67.052,63.837,70.75,72.649,61.788,61.31,56.696,56.029,49.923,57.402,70.11,65.032,57.47,68.681,66.353,58.447,73.44,68.3,73.38,69.481,67.456],"text":["gdpPercap: 10079.0267<br />lifeExp: 68.48100<br />pop:  26983828<br />continent: Americas","gdpPercap:  3548.0978<br />lifeExp: 50.02300<br />pop:   5079716<br />continent: Americas","gdpPercap:  6660.1187<br />lifeExp: 61.48900<br />pop: 114313951<br />continent: Americas","gdpPercap: 22090.8831<br />lifeExp: 74.21000<br />pop:  23796400<br />continent: Americas","gdpPercap:  4756.7638<br />lifeExp: 67.05200<br />pop:  10599793<br />continent: Americas","gdpPercap:  3815.8079<br />lifeExp: 63.83700<br />pop:  25094412<br />continent: Americas","gdpPercap:  5926.8770<br />lifeExp: 70.75000<br />pop:   2108457<br />continent: Americas","gdpPercap:  6380.4950<br />lifeExp: 72.64900<br />pop:   9537988<br />continent: Americas","gdpPercap:  2681.9889<br />lifeExp: 61.78800<br />pop:   5302800<br />continent: Americas","gdpPercap:  6679.6233<br />lifeExp: 61.31000<br />pop:   7278866<br />continent: Americas","gdpPercap:  5138.9224<br />lifeExp: 56.69600<br />pop:   4282586<br />continent: Americas","gdpPercap:  4879.9927<br />lifeExp: 56.02900<br />pop:   5703430<br />continent: Americas","gdpPercap:  1874.2989<br />lifeExp: 49.92300<br />pop:   4908554<br />continent: Americas","gdpPercap:  3203.2081<br />lifeExp: 57.40200<br />pop:   3055235<br />continent: Americas","gdpPercap:  6650.1956<br />lifeExp: 70.11000<br />pop:   2156814<br />continent: Americas","gdpPercap:  7674.9291<br />lifeExp: 65.03200<br />pop:  63759976<br />continent: Americas","gdpPercap:  5486.3711<br />lifeExp: 57.47000<br />pop:   2554598<br />continent: Americas","gdpPercap:  5351.9121<br />lifeExp: 68.68100<br />pop:   1839782<br />continent: Americas","gdpPercap:  3248.3733<br />lifeExp: 66.35300<br />pop:   2984494<br />continent: Americas","gdpPercap:  6281.2909<br />lifeExp: 58.44700<br />pop:  15990099<br />continent: Americas","gdpPercap:  9770.5249<br />lifeExp: 73.44000<br />pop:   3080828<br />continent: Americas","gdpPercap:  7899.5542<br />lifeExp: 68.30000<br />pop:   1039009<br />continent: Americas","gdpPercap: 24072.6321<br />lifeExp: 73.38000<br />pop: 220239000<br />continent: Americas","gdpPercap:  6504.3397<br />lifeExp: 69.48100<br />pop:   2873520<br />continent: Americas","gdpPercap: 13143.9510<br />lifeExp: 67.45600<br />pop:  13503563<br />continent: Americas"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":[6.97047083068522,5.15434238640086,10.3553727984455,6.77543956769576,5.77446910007444,6.85635435789675,4.65435232683653,5.6710443310913,5.18472018302092,5.42956521861593,5.0398270921093,5.23768683822733,5.13057191783969,4.83958883002819,4.66475315834704,8.68911697083458,4.74607251669638,4.59414954550014,4.82688148286866,6.23316601826461,4.84414878929001,4.37991825947829,12.9086371873162,4.80663028657321,6.03320025163606],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[786.11336,19340.10196,659.8772322,524.9721832,741.2374699,11186.14125,813.337323,1382.702056,11888.59508,14688.23507,13306.61921,16610.37701,2852.351568,4106.301249,4657.22102,59265.47714,8659.696836,3827.921571,1647.511665,371,694.1124398,11848.34392,1175.921193,2373.204287,34167.7626,11210.08948,1348.775651,3195.484582,5596.519826,1961.224635,713.5371196,3682.831494,1829.765177],"y":[38.438,65.593,46.923,31.22,63.96736,73.6,54.208,52.702,57.702,60.413,73.06,75.38,61.134,67.159,64.766,69.343,66.099,65.256,55.491,56.059,46.748,57.367,54.043,60.06,58.69,70.795,65.949,61.195,70.59,62.494,55.764,60.765,44.175],"text":["gdpPercap:   786.1134<br />lifeExp: 38.43800<br />pop:  14880372<br />continent: Asia","gdpPercap: 19340.1020<br />lifeExp: 65.59300<br />pop:    297410<br />continent: Asia","gdpPercap:   659.8772<br />lifeExp: 46.92300<br />pop:  80428306<br />continent: Asia","gdpPercap:   524.9722<br />lifeExp: 31.22000<br />pop:   6978607<br />continent: Asia","gdpPercap:   741.2375<br />lifeExp: 63.96736<br />pop: 943455000<br />continent: Asia","gdpPercap: 11186.1413<br />lifeExp: 73.60000<br />pop:   4583700<br />continent: Asia","gdpPercap:   813.3373<br />lifeExp: 54.20800<br />pop: 634000000<br />continent: Asia","gdpPercap:  1382.7021<br />lifeExp: 52.70200<br />pop: 136725000<br />continent: Asia","gdpPercap: 11888.5951<br />lifeExp: 57.70200<br />pop:  35480679<br />continent: Asia","gdpPercap: 14688.2351<br />lifeExp: 60.41300<br />pop:  11882916<br />continent: Asia","gdpPercap: 13306.6192<br />lifeExp: 73.06000<br />pop:   3495918<br />continent: Asia","gdpPercap: 16610.3770<br />lifeExp: 75.38000<br />pop: 113872473<br />continent: Asia","gdpPercap:  2852.3516<br />lifeExp: 61.13400<br />pop:   1937652<br />continent: Asia","gdpPercap:  4106.3012<br />lifeExp: 67.15900<br />pop:  16325320<br />continent: Asia","gdpPercap:  4657.2210<br />lifeExp: 64.76600<br />pop:  36436000<br />continent: Asia","gdpPercap: 59265.4771<br />lifeExp: 69.34300<br />pop:   1140357<br />continent: Asia","gdpPercap:  8659.6968<br />lifeExp: 66.09900<br />pop:   3115787<br />continent: Asia","gdpPercap:  3827.9216<br />lifeExp: 65.25600<br />pop:  12845381<br />continent: Asia","gdpPercap:  1647.5117<br />lifeExp: 55.49100<br />pop:   1528000<br />continent: Asia","gdpPercap:   371.0000<br />lifeExp: 56.05900<br />pop:  31528087<br />continent: Asia","gdpPercap:   694.1124<br />lifeExp: 46.74800<br />pop:  13933198<br />continent: Asia","gdpPercap: 11848.3439<br />lifeExp: 57.36700<br />pop:   1004533<br />continent: Asia","gdpPercap:  1175.9212<br />lifeExp: 54.04300<br />pop:  78152686<br />continent: Asia","gdpPercap:  2373.2043<br />lifeExp: 60.06000<br />pop:  46850962<br />continent: Asia","gdpPercap: 34167.7626<br />lifeExp: 58.69000<br />pop:   8128505<br />continent: Asia","gdpPercap: 11210.0895<br />lifeExp: 70.79500<br />pop:   2325300<br />continent: Asia","gdpPercap:  1348.7757<br />lifeExp: 65.94900<br />pop:  14116836<br />continent: Asia","gdpPercap:  3195.4846<br />lifeExp: 61.19500<br />pop:   7932503<br />continent: Asia","gdpPercap:  5596.5198<br />lifeExp: 70.59000<br />pop:  16785196<br />continent: Asia","gdpPercap:  1961.2246<br />lifeExp: 62.49400<br />pop:  44148285<br />continent: Asia","gdpPercap:   713.5371<br />lifeExp: 55.76400<br />pop:  50533506<br />continent: Asia","gdpPercap:  3682.8315<br />lifeExp: 60.76500<br />pop:   1261091<br />continent: Asia","gdpPercap:  1829.7652<br />lifeExp: 44.17500<br />pop:   8403990<br />continent: Asia"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":[6.14601109401926,4.06189233680308,9.29441811927379,5.39475462377927,22.6771653543307,5.08426676230058,19.2706113323364,10.9715821633898,7.43994831281003,5.89270757284543,4.9155533082844,10.342652961876,4.61658106384004,6.25889092142746,7.4890188516279,4.41106157328659,4.85034613145665,5.97722629927717,4.51816213431315,7.2295116202132,6.06899974449858,4.36894912815136,9.21575428359059,7.98702151037774,5.52430918996644,4.70007429187427,6.08413180764231,5.50291508915639,6.29375367739212,7.86362869673143,8.14954658274176,4.44626602186696,5.5539430462659],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3533.00391,19749.4223,19117.97448,3528.481305,7612.240438,11305.38517,14800.16062,20422.9015,15605.42283,18292.63514,20512.92123,14195.52428,11674.83737,19654.96247,11150.98113,14255.98475,9595.929905,21209.0592,23311.34939,9508.141454,10172.48572,9356.39724,12980.66956,10922.66404,15277.03017,13236.92117,18855.72521,26982.29052,4269.122326,17428.74846],"y":[68.93,72.17,72.8,69.86,70.81,70.64,70.71,74.69,72.52,73.83,72.5,73.68,69.95,76.11,72.03,73.48,73.066,75.24,75.37,70.67,70.41,69.46,70.3,70.45,70.97,74.39,75.44,75.39,59.507,72.76],"text":["gdpPercap:  3533.0039<br />lifeExp: 68.93000<br />pop:   2509048<br />continent: Europe","gdpPercap: 19749.4223<br />lifeExp: 72.17000<br />pop:   7568430<br />continent: Europe","gdpPercap: 19117.9745<br />lifeExp: 72.80000<br />pop:   9821800<br />continent: Europe","gdpPercap:  3528.4813<br />lifeExp: 69.86000<br />pop:   4086000<br />continent: Europe","gdpPercap:  7612.2404<br />lifeExp: 70.81000<br />pop:   8797022<br />continent: Europe","gdpPercap: 11305.3852<br />lifeExp: 70.64000<br />pop:   4318673<br />continent: Europe","gdpPercap: 14800.1606<br />lifeExp: 70.71000<br />pop:  10161915<br />continent: Europe","gdpPercap: 20422.9015<br />lifeExp: 74.69000<br />pop:   5088419<br />continent: Europe","gdpPercap: 15605.4228<br />lifeExp: 72.52000<br />pop:   4738902<br />continent: Europe","gdpPercap: 18292.6351<br />lifeExp: 73.83000<br />pop:  53165019<br />continent: Europe","gdpPercap: 20512.9212<br />lifeExp: 72.50000<br />pop:  78160773<br />continent: Europe","gdpPercap: 14195.5243<br />lifeExp: 73.68000<br />pop:   9308479<br />continent: Europe","gdpPercap: 11674.8374<br />lifeExp: 69.95000<br />pop:  10637171<br />continent: Europe","gdpPercap: 19654.9625<br />lifeExp: 76.11000<br />pop:    221823<br />continent: Europe","gdpPercap: 11150.9811<br />lifeExp: 72.03000<br />pop:   3271900<br />continent: Europe","gdpPercap: 14255.9847<br />lifeExp: 73.48000<br />pop:  56059245<br />continent: Europe","gdpPercap:  9595.9299<br />lifeExp: 73.06600<br />pop:    560073<br />continent: Europe","gdpPercap: 21209.0592<br />lifeExp: 75.24000<br />pop:  13852989<br />continent: Europe","gdpPercap: 23311.3494<br />lifeExp: 75.37000<br />pop:   4043205<br />continent: Europe","gdpPercap:  9508.1415<br />lifeExp: 70.67000<br />pop:  34621254<br />continent: Europe","gdpPercap: 10172.4857<br />lifeExp: 70.41000<br />pop:   9662600<br />continent: Europe","gdpPercap:  9356.3972<br />lifeExp: 69.46000<br />pop:  21658597<br />continent: Europe","gdpPercap: 12980.6696<br />lifeExp: 70.30000<br />pop:   8686367<br />continent: Europe","gdpPercap: 10922.6640<br />lifeExp: 70.45000<br />pop:   4827803<br />continent: Europe","gdpPercap: 15277.0302<br />lifeExp: 70.97000<br />pop:   1746919<br />continent: Europe","gdpPercap: 13236.9212<br />lifeExp: 74.39000<br />pop:  36439000<br />continent: Europe","gdpPercap: 18855.7252<br />lifeExp: 75.44000<br />pop:   8251648<br />continent: Europe","gdpPercap: 26982.2905<br />lifeExp: 75.39000<br />pop:   6316424<br />continent: Europe","gdpPercap:  4269.1223<br />lifeExp: 59.50700<br />pop:  42404033<br />continent: Europe","gdpPercap: 17428.7485<br />lifeExp: 72.76000<br />pop:  56179000<br />continent: Europe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":[4.73711086274366,5.46245399673978,5.69923465730081,5.00994841135964,5.59538443706805,5.04523525790558,5.73248147708556,5.15554006271282,5.10659105931128,8.26207702648979,9.21603585103979,5.64793676344929,5.77801236958701,4.00561540333621,4.87759423629259,8.38266622872152,4.20280449359801,6.06235892227666,5.00334741211677,7.39523452347783,5.68347312501541,6.63718460047671,5.58381321630558,5.11921103857739,4.57227899402677,7.48917192574021,5.53761739047554,5.31519777193933,7.78197424302696,8.38758788519898],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18334.19751,16233.7177],"y":[73.49,72.22],"text":["gdpPercap: 18334.1975<br />lifeExp: 73.49000<br />pop:  14074100<br />continent: Oceania","gdpPercap: 16233.7177<br />lifeExp: 72.22000<br />pop:   3164900<br />continent: Oceania"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":[6.08061917751821,4.85899251590851],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2573.723857,62210.200997],"tickmode":"array","ticktext":["0","20000","40000","60000"],"tickvals":[0,20000,40000,60000],"categoryorder":"array","categoryarray":["0","20000","40000","60000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"gdpPercap","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[28.9755,78.3545],"tickmode":"array","ticktext":["30","40","50","60","70"],"tickvals":[30,40,50,60,70],"categoryorder":"array","categoryarray":["30","40","50","60","70"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"lifeExp","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.93503937007874},"annotations":[{"text":"continent<br />pop","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"1ff4382b96":{"x":{},"y":{},"size":{},"colour":{},"type":"scatter"}},"cur_data":"1ff4382b96","visdat":{"1ff4382b96":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="streamgraph-with-dropdown-button" class="section level3" number="9.5.1">
<h3><span class="header-section-number">9.5.1</span> Streamgraph with Dropdown Button</h3>
<p>The <code>streamgraph</code> package allows to add a dropdown button that controls which group to highlight. See how to use this option with explanation and reproducible code.</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb753-1"><a href="general.html#cb753-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb753-2"><a href="general.html#cb753-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb753-3"><a href="general.html#cb753-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb753-4"><a href="general.html#cb753-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb753-5"><a href="general.html#cb753-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb753-6"><a href="general.html#cb753-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1990</span>,<span class="dv">2016</span>) , <span class="at">each=</span><span class="dv">10</span>),</span>
<span id="cb753-7"><a href="general.html#cb753-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] , <span class="dv">27</span>),</span>
<span id="cb753-8"><a href="general.html#cb753-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.0001</span>) , <span class="dv">270</span>)</span>
<span id="cb753-9"><a href="general.html#cb753-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb753-10"><a href="general.html#cb753-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb753-11"><a href="general.html#cb753-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Stream graph with a legend</span></span>
<span id="cb753-12"><a href="general.html#cb753-12" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>, <span class="at">width=</span><span class="st">&quot;1000px&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb753-13"><a href="general.html#cb753-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sg_legend</span>(<span class="at">show=</span><span class="cn">TRUE</span>, <span class="at">label=</span><span class="st">&quot;names: &quot;</span>)</span>
<span id="cb753-14"><a href="general.html#cb753-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb753-15"><a href="general.html#cb753-15" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb753-16"><a href="general.html#cb753-16" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb753-17"><a href="general.html#cb753-17" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(pp, file=paste0( getwd(), &quot;/generalHtml/streamgraphDropdown.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="generalHtml/streamgraphDropdown.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="interactive-chord-diagram-with-r" class="section level3" number="9.5.2">
<h3><span class="header-section-number">9.5.2</span> Interactive Chord Diagram with R</h3>
<p>This section describes how to build an interactive <a href="https://www.r-graph-gallery.com/chord-diagram.html">chord diagram</a> on which you can hover groups to highlight flows.</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb754-1"><a href="general.html#cb754-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb754-2"><a href="general.html#cb754-2" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;mattflor/chorddiag&quot;)</span></span>
<span id="cb754-3"><a href="general.html#cb754-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(chorddiag)</span>
<span id="cb754-4"><a href="general.html#cb754-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy data</span></span>
<span id="cb754-5"><a href="general.html#cb754-5" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">11975</span>,  <span class="dv">5871</span>, <span class="dv">8916</span>, <span class="dv">2868</span>,</span>
<span id="cb754-6"><a href="general.html#cb754-6" aria-hidden="true" tabindex="-1"></a>              <span class="dv">1951</span>, <span class="dv">10048</span>, <span class="dv">2060</span>, <span class="dv">6171</span>,</span>
<span id="cb754-7"><a href="general.html#cb754-7" aria-hidden="true" tabindex="-1"></a>              <span class="dv">8010</span>, <span class="dv">16145</span>, <span class="dv">8090</span>, <span class="dv">8045</span>,</span>
<span id="cb754-8"><a href="general.html#cb754-8" aria-hidden="true" tabindex="-1"></a>              <span class="dv">1013</span>,   <span class="dv">990</span>,  <span class="dv">940</span>, <span class="dv">6907</span>),</span>
<span id="cb754-9"><a href="general.html#cb754-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">byrow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb754-10"><a href="general.html#cb754-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb754-11"><a href="general.html#cb754-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A vector of 4 colors for 4 groups</span></span>
<span id="cb754-12"><a href="general.html#cb754-12" aria-hidden="true" tabindex="-1"></a>haircolors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;blonde&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;red&quot;</span>)</span>
<span id="cb754-13"><a href="general.html#cb754-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(m) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">have =</span> haircolors,</span>
<span id="cb754-14"><a href="general.html#cb754-14" aria-hidden="true" tabindex="-1"></a>                    <span class="at">prefer =</span> haircolors)</span>
<span id="cb754-15"><a href="general.html#cb754-15" aria-hidden="true" tabindex="-1"></a>groupColors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#000000&quot;</span>, <span class="st">&quot;#FFDD89&quot;</span>, <span class="st">&quot;#957244&quot;</span>, <span class="st">&quot;#F26223&quot;</span>)</span>
<span id="cb754-16"><a href="general.html#cb754-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the chord diagram:</span></span>
<span id="cb754-17"><a href="general.html#cb754-17" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">chorddiag</span>(m, <span class="at">groupColors =</span> groupColors, <span class="at">groupnamePadding =</span> <span class="dv">20</span>)</span>
<span id="cb754-18"><a href="general.html#cb754-18" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb754-19"><a href="general.html#cb754-19" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb754-20"><a href="general.html#cb754-20" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb754-21"><a href="general.html#cb754-21" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/generalHtml/chord_interactive.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="generalHtml/chord_interactive.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="interactive-network-chart-with-r" class="section level3" number="9.5.3">
<h3><span class="header-section-number">9.5.3</span> Interactive Network Chart with R</h3>
<p>The <code>networkD3</code> package allows to build interactive <a href="https://www.r-graph-gallery.com/network.html">network diagram</a> directly from R. It allows to zoom, hover nodes, reorganize the layout and more. This post explains how to use the library with reproducible examples.</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="general.html#cb755-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb755-2"><a href="general.html#cb755-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb755-3"><a href="general.html#cb755-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkD3)</span>
<span id="cb755-4"><a href="general.html#cb755-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dataset:</span></span>
<span id="cb755-5"><a href="general.html#cb755-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(</span>
<span id="cb755-6"><a href="general.html#cb755-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">from=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;K&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;M&quot;</span>),</span>
<span id="cb755-7"><a href="general.html#cb755-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">to=</span><span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;Z&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;K&quot;</span>)</span>
<span id="cb755-8"><a href="general.html#cb755-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb755-9"><a href="general.html#cb755-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb755-10"><a href="general.html#cb755-10" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">simpleNetwork</span>(data, <span class="at">height=</span><span class="st">&quot;100px&quot;</span>, <span class="at">width=</span><span class="st">&quot;100px&quot;</span>)</span>
<span id="cb755-11"><a href="general.html#cb755-11" aria-hidden="true" tabindex="-1"></a><span class="co"># p</span></span>
<span id="cb755-12"><a href="general.html#cb755-12" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb755-13"><a href="general.html#cb755-13" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb755-14"><a href="general.html#cb755-14" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/generalHtml/networkInteractive1.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="generalHtml/networkInteractive1.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb756"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb756-1"><a href="general.html#cb756-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb756-2"><a href="general.html#cb756-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb756-3"><a href="general.html#cb756-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkD3)</span>
<span id="cb756-4"><a href="general.html#cb756-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dataset:</span></span>
<span id="cb756-5"><a href="general.html#cb756-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(</span>
<span id="cb756-6"><a href="general.html#cb756-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">from=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;K&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;M&quot;</span>),</span>
<span id="cb756-7"><a href="general.html#cb756-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">to=</span><span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;Z&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;K&quot;</span>)</span>
<span id="cb756-8"><a href="general.html#cb756-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb756-9"><a href="general.html#cb756-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb756-10"><a href="general.html#cb756-10" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">simpleNetwork</span>(data, <span class="at">height=</span><span class="st">&quot;100px&quot;</span>, <span class="at">width=</span><span class="st">&quot;100px&quot;</span>,        </span>
<span id="cb756-11"><a href="general.html#cb756-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">Source =</span> <span class="dv">1</span>,                 <span class="co"># column number of source</span></span>
<span id="cb756-12"><a href="general.html#cb756-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">Target =</span> <span class="dv">2</span>,                 <span class="co"># column number of target</span></span>
<span id="cb756-13"><a href="general.html#cb756-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">linkDistance =</span> <span class="dv">10</span>,          <span class="co"># distance between node. Increase this value to have more space between nodes</span></span>
<span id="cb756-14"><a href="general.html#cb756-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">charge =</span> <span class="sc">-</span><span class="dv">900</span>,                <span class="co"># numeric value indicating either the strength of the node repulsion (negative value) or attraction (positive value)</span></span>
<span id="cb756-15"><a href="general.html#cb756-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">fontSize =</span> <span class="dv">14</span>,               <span class="co"># size of the node names</span></span>
<span id="cb756-16"><a href="general.html#cb756-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">fontFamily =</span> <span class="st">&quot;serif&quot;</span>,       <span class="co"># font og node names</span></span>
<span id="cb756-17"><a href="general.html#cb756-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">linkColour =</span> <span class="st">&quot;#666&quot;</span>,        <span class="co"># colour of edges, MUST be a common colour for the whole graph</span></span>
<span id="cb756-18"><a href="general.html#cb756-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">nodeColour =</span> <span class="st">&quot;#69b3a2&quot;</span>,     <span class="co"># colour of nodes, MUST be a common colour for the whole graph</span></span>
<span id="cb756-19"><a href="general.html#cb756-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">opacity =</span> <span class="fl">0.9</span>,              <span class="co"># opacity of nodes. 0=transparent. 1=no transparency</span></span>
<span id="cb756-20"><a href="general.html#cb756-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">zoom =</span> T                    <span class="co"># Can you zoom on the figure?</span></span>
<span id="cb756-21"><a href="general.html#cb756-21" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb756-22"><a href="general.html#cb756-22" aria-hidden="true" tabindex="-1"></a><span class="co">#p</span></span>
<span id="cb756-23"><a href="general.html#cb756-23" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb756-24"><a href="general.html#cb756-24" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb756-25"><a href="general.html#cb756-25" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/generalHtml/networkInteractive2.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="generalHtml/networkInteractive2.html" height="400px" width="100%"></iframe>
</center>
</div>
</div>
<div id="caveats" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> Caveats</h2>
<hr />
</style>
<style>
  .col3 {
    display: grid;
    columns: 3 100px;
    align-content: space-evenly;
    grid-template-columns: auto auto auto;
    grid-gap: 10px;
    padding: 10px;
    text-align: center;
    padding: 20px 0;
    font-size: 10px;
    -webkit-columns: 3 100px;
    -moz-columns: 3 100px;
    }
</style>
<div class="col3">
<div>
<p><a href="https://www.data-to-viz.com/caveat/cut_y_axis.html"><img src="https://www.data-to-viz.com/img/mistake/annotate.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/cut_y_axis.html">Cut or Not to Cut (the Y Axis)</a></p>
Cutting the Y-axis is one fo the most controversial practice in data viz.See why.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/order_data.html"><img src="https://www.data-to-viz.com/img/mistake/order_data.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/order_data.html">Order your Data</a></p>
When displaying the value of several entities, ordering them makes the graph much more insightful.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/spaghetti.html"><img src="https://www.data-to-viz.com/img/mistake/spaghetti.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/spaghetti.html">The Spaghetti Chart</a></p>
A line graph with too many lines becomes unreadable: it is called a spaghetti graph.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/spaghetti.html"><img src="https://www.data-to-viz.com/img/mistake/pie.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/pie.html">Piecharts</a></p>
The human eye is bad at reading angles. See how to replace the most criticized chart ever.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/bin_size.html"><img src="https://www.data-to-viz.com/img/mistake/bin_size.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/bin_size.html">Play with your Histogram Bin Size</a></p>
Always try different bin sizes when you build a histogram, it can lead to different insights.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/boxplot.html"><img src="https://www.data-to-viz.com/img/mistake/boxplot.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/boxplot.html">Do boxplots hide information?</a></p>
Boxplots are a great way to summarize a distribution but hide the sample size and their distribution.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/error_bar.html"><img src="https://www.data-to-viz.com/img/mistake/error_bar.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/error_bar.html">The Problem with Error Bars</a></p>
Barplots with error bars must be used with great care. See why and how to replace them.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/multi_distribution.html"><img src="https://www.data-to-viz.com/img/mistake/multi_distribution.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/multi_distribution.html">Too Many Distributions</a></p>
If you need to compare the distributions of many variables, dont clutter your graphic.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/overplotting.html"><img src="https://www.data-to-viz.com/img/mistake/overplotting.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/overplotting.html">How to Avoid Overplotting</a></p>
Too many points on your scatter plot makes it unreadable? Techniques exist to avoid overplotting.
</div>
<div>
<p><a href="https://blog.datawrapper.de/colors/"><img src="https://www.data-to-viz.com/img/mistake/rainbow.png" /></a></p>
<p><a href="https://blog.datawrapper.de/colors/">Rainbow Color Palette</a></p>
Avoid the rainbow color palette when you map a numeric variable So many better palettes exist.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/small_multiple.html"><img src="https://www.data-to-viz.com/img/mistake/small_multiple.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/small_multiple.html">Faceting Horizontal or Vertical?</a></p>
Placing the individual plot horizontally or vertically is an important choice to make.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/counter_intuitive.html"><img src="https://www.data-to-viz.com/img/mistake/counter_intuitive.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/counter_intuitive.html">Dont be Counter Intuitive</a></p>
Your audience is used to a few dataviz standards. Not respecting standards can be misleading.
</div>
<div>
<p><a href="https://blog.datawrapper.de/dualaxis/"><img src="https://www.data-to-viz.com/img/mistake/dual_axis.png" /></a></p>
<p><a href="https://blog.datawrapper.de/dualaxis/">The Problem with Dual Axis</a></p>
Using dual axes is a good way to manipulate the history behind your data. Avoid it. (blog by datawrapper).
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/calculation_error.html"><img src="https://www.data-to-viz.com/img/mistake/calculation_error.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/calculation_error.html">Calculation Errors</a></p>
Always double-check the values written on the chart. Does your sum make sense?
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/circular_barplot_accordeon.html"><img src="https://www.data-to-viz.com/img/mistake/circular_barplot_accordeon.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/circular_barplot_accordeon.html">Barplots with Radical Coordinates</a></p>
This kind of barplot distorts reality: outer bars tend to look bigger than the inner ones.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/connect_your_dot.html"><img src="https://www.data-to-viz.com/img/mistake/connect_your_dot.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/connect_your_dot.html">Connect the Dots when X-Axis is Ordered</a></p>
If your X-axis is ordered, connecting the dots will make the message much clearer.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/color_com_nothing.html"><img src="https://www.data-to-viz.com/img/mistake/color_com_nothing.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/color_com_nothing.html">Color that Communicates Nothing</a></p>
A bad use of colors can be misleading. If your color does not represent anything, dont use it.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/radius_or_area.html"><img src="https://www.data-to-viz.com/img/mistake/radius_or_area.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/radius_or_area.html">Bubble Size: Radius or Area</a></p>
When using bubbles on a chart, their must be proportional to the underlying variable. Not their radius.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/hard_label.html"><img src="https://www.data-to-viz.com/img/mistake/hard_label.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/hard_label.html">When axis labels break your neck</a></p>
Having long and vertical axis labels can be annoyig. If you can, flip your chart.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/circular_bar_yaxis.html"><img src="https://www.data-to-viz.com/img/mistake/circular_bar_yaxis.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/circular_bar_yaxis.html">Circular Plots and Distortion</a></p>
Set a sufficient inner circle size to avoid bar shape distortion.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/stacking.html"><img src="https://www.data-to-viz.com/img/mistake/stacking.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/stacking.html">The issue with Stacking</a></p>
Stacking makes it difficult to analyze each represented group. See when to use it.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/mental_calculation.html"><img src="https://www.data-to-viz.com/img/mistake/mental_workout.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/mental_calculation.html">Mental Arithmetic</a></p>
Dont ask the reader to do mental arithmetic, it is hard to compare shapes.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/area_hard.html"><img src="https://www.data-to-viz.com/img/mistake/bubble_hard.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/area_hard.html">Area is a Poor Metaphor</a></p>
Human brains struggle to translate areas to precise values. Prefer other shapes.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/grouped_bar.html"><img src="https://www.data-to-viz.com/img/mistake/ungrouped_grouped_barplot.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/grouped_bar.html">Grouped Barplot must be Grouped</a></p>
In a grouped barplot, bars in the same group must be close to each other. It makes grouping obvious.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/declutter.html"><img src="https://www.data-to-viz.com/img/mistake/declutter_your_graphic.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/declutter.html">De-clutter your Chart</a></p>
Keep on whats necessary on your graphic: 3d, color effect, redundant info, etc. hide the story.
</div>
<div>
<p><a href="https://www.r-graph-gallery.com/239-custom-layout-legend-ggplot2.html"><img src="https://www.data-to-viz.com/img/mistake/mind_your_legend.png" /></a></p>
<p><a href="https://www.r-graph-gallery.com/239-custom-layout-legend-ggplot2.html">Mind your Legend</a></p>
A few tips for a useful legend. Hint: you should worry if you have 14 groups.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/consistency.html"><img src="https://www.data-to-viz.com/img/mistake/consistency_sev_graph.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/consistency.html">Consistency between Charts</a></p>
If you present several graphics, be consistent. Does each color always represent the same group.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/spider.html"><img src="https://www.data-to-viz.com/img/mistake/spider.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/spider.html">Spider Chart and its Caveats</a></p>
Spider or radar charts are often criticized in dataviz, here is an overview of the topic.
</div>
<div>
<p><a href="https://www.data-to-viz.com/graph/heatmap.html"><img src="https://www.data-to-viz.com/img/mistake/heatmap.png" /></a></p>
<p><a href="https://www.data-to-viz.com/graph/heatmap.html">What you should Consider when doing Heatmaps</a></p>
Heatmaps are a powerful way of visualizing information. A few features must be considered.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/simpson.html"><img src="https://www.data-to-viz.com/img/mistake/simpson.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/simpson.html">The Simpson Paradox</a></p>
When a trend appears in several different groups of data but reverses when these groups are combined.
</div>
<div>
<p><a href="https://www.data-to-viz.com/caveat/annotation.html"><img src="https://www.data-to-viz.com/img/mistake/annotate.png" /></a></p>
<p><a href="https://www.data-to-viz.com/caveat/annotation.html">Annotate your Chart</a></p>
Help the reader understand your point: highlight the important part.
</div>
<div>
<p><a href="https://gravyanecdote.com/uncategorized/wrappedbarsthoughts/"><img src="https://www.data-to-viz.com/img/mistake/moire.png" /></a></p>
<p><a href="https://gravyanecdote.com/uncategorized/wrappedbarsthoughts/">The Moire Effect</a></p>
If you have a barplot with many bars of similar length, consider a lollipop chart instead.
</div>
<div>
<p><a href="https://xkcd.com/1138/"><img src="https://www.data-to-viz.com/img/mistake/choropleth_normalization.png" /></a></p>
<p><a href="https://xkcd.com/1138/">Choropleth and Normalization</a></p>
If you dont scale your data, your choropleth will basically look like a population heatmap.
</div>
<div>
<p><a href="https://blog.datawrapper.de/weeklychart-logscale3/"><img src="https://www.data-to-viz.com/img/mistake/map_scale.png" /></a></p>
<p><a href="https://blog.datawrapper.de/weeklychart-logscale3/">How to Read a Log Scale</a></p>
Comparing percentage change on a linear scale can be misleading, use a log scale instead. By datawrapper.
</div>
<div>
<p><a href="https://twitter.com/hashtag/chloropleth"><img src="https://www.data-to-viz.com/img/mistake/choropleth_vocab.png" /></a></p>
<p><a href="https://twitter.com/hashtag/chloropleth">There is no L in choropleth</a></p>
And people wont miss an opportunity to make you notice.
</div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="flow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
