<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Evolution | R-Gallery-Book</title>
  <meta name="description" content="This is the complete guide to the R Gallery." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Evolution | R-Gallery-Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the complete guide to the R Gallery." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Evolution | R-Gallery-Book" />
  
  <meta name="twitter:description" content="This is the complete guide to the R Gallery." />
  

<meta name="author" content="Kyle W. Brown" />


<meta name="date" content="2021-01-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="part.html"/>
<link rel="next" href="map.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/d3-4.13.0/d3.min.js"></script>
<script src="libs/d3-tip-0.8.1/index.js"></script>
<link href="libs/chorddiag-0.1.2.9000/chorddiag.css" rel="stylesheet" />
<script src="libs/chorddiag-0.1.2.9000/chorddiag.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Gallery Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>2</b> Distributions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="distributions.html"><a href="distributions.html#boxplot"><i class="fa fa-check"></i><b>2.1</b> Boxplot</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="distributions.html"><a href="distributions.html#ggplot2"><i class="fa fa-check"></i><b>2.1.1</b> Ggplot2</a></li>
<li class="chapter" data-level="2.1.2" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-parameters"><i class="fa fa-check"></i><b>2.1.2</b> Ggplot2 Boxplot Parameters</a></li>
<li class="chapter" data-level="2.1.3" data-path="distributions.html"><a href="distributions.html#control-ggplot2-boxplot-colors"><i class="fa fa-check"></i><b>2.1.3</b> Control ggplot2 Boxplot Colors</a></li>
<li class="chapter" data-level="2.1.4" data-path="distributions.html"><a href="distributions.html#highlighting-a-group"><i class="fa fa-check"></i><b>2.1.4</b> Highlighting a Group</a></li>
<li class="chapter" data-level="2.1.5" data-path="distributions.html"><a href="distributions.html#grouped-boxplot"><i class="fa fa-check"></i><b>2.1.5</b> Grouped Boxplot</a></li>
<li class="chapter" data-level="2.1.6" data-path="distributions.html"><a href="distributions.html#using-small-multiple"><i class="fa fa-check"></i><b>2.1.6</b> Using Small Multiple</a></li>
<li class="chapter" data-level="2.1.7" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-with-variable-width"><i class="fa fa-check"></i><b>2.1.7</b> Ggplot2 Boxplot with Variable Width</a></li>
<li class="chapter" data-level="2.1.8" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-from-continuous-variable"><i class="fa fa-check"></i><b>2.1.8</b> Ggplot2 Boxplot from Continuous Variable</a></li>
<li class="chapter" data-level="2.1.9" data-path="distributions.html"><a href="distributions.html#ggplot2-boxplot-with-mean-value"><i class="fa fa-check"></i><b>2.1.9</b> Ggplot2 Boxplot with Mean Value</a></li>
<li class="chapter" data-level="2.1.10" data-path="distributions.html"><a href="distributions.html#basic-r"><i class="fa fa-check"></i><b>2.1.10</b> Basic R</a></li>
<li class="chapter" data-level="2.1.11" data-path="distributions.html"><a href="distributions.html#basic-r-x-axis-labels-on-several-lines"><i class="fa fa-check"></i><b>2.1.11</b> Basic R: X Axis Labels on Several Lines</a></li>
<li class="chapter" data-level="2.1.12" data-path="distributions.html"><a href="distributions.html#boxplot-with-jitter-in-base-r"><i class="fa fa-check"></i><b>2.1.12</b> Boxplot with Jitter in Base R</a></li>
<li class="chapter" data-level="2.1.13" data-path="distributions.html"><a href="distributions.html#ordering-boxplots-in-base-r"><i class="fa fa-check"></i><b>2.1.13</b> Ordering Boxplots in Base R</a></li>
<li class="chapter" data-level="2.1.14" data-path="distributions.html"><a href="distributions.html#give-a-specific-order"><i class="fa fa-check"></i><b>2.1.14</b> Give a Specific Order</a></li>
<li class="chapter" data-level="2.1.15" data-path="distributions.html"><a href="distributions.html#grouped-and-ordered-boxplot"><i class="fa fa-check"></i><b>2.1.15</b> Grouped and Ordered Boxplot</a></li>
<li class="chapter" data-level="2.1.16" data-path="distributions.html"><a href="distributions.html#add-text-over-boxplot-in-base-r"><i class="fa fa-check"></i><b>2.1.16</b> Add Text over Boxplot in Base R</a></li>
<li class="chapter" data-level="2.1.17" data-path="distributions.html"><a href="distributions.html#tukey-test-and-boxplot-in-r"><i class="fa fa-check"></i><b>2.1.17</b> Tukey Test and Boxplot in R</a></li>
<li class="chapter" data-level="2.1.18" data-path="distributions.html"><a href="distributions.html#tukey-test-result-on-top-of-boxplot"><i class="fa fa-check"></i><b>2.1.18</b> Tukey test result on top of boxplot</a></li>
<li class="chapter" data-level="2.1.19" data-path="distributions.html"><a href="distributions.html#control-box-type-with-the-bty-option"><i class="fa fa-check"></i><b>2.1.19</b> Control Box Type with the bty Option</a></li>
<li class="chapter" data-level="2.1.20" data-path="distributions.html"><a href="distributions.html#split-base-r-plot-window-with-layout"><i class="fa fa-check"></i><b>2.1.20</b> Split Base R Plot Window with <code>layout()</code></a></li>
<li class="chapter" data-level="2.1.21" data-path="distributions.html"><a href="distributions.html#subdivide-second-row"><i class="fa fa-check"></i><b>2.1.21</b> Subdivide Second Row</a></li>
<li class="chapter" data-level="2.1.22" data-path="distributions.html"><a href="distributions.html#custom-proportions"><i class="fa fa-check"></i><b>2.1.22</b> Custom Proportions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="distributions.html"><a href="distributions.html#density"><i class="fa fa-check"></i><b>2.2</b> Density</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="distributions.html"><a href="distributions.html#basic-density-chart-with-ggplot2"><i class="fa fa-check"></i><b>2.2.1</b> Basic density chart with ggplot2</a></li>
<li class="chapter" data-level="2.2.2" data-path="distributions.html"><a href="distributions.html#custom-with-theme_ipsum"><i class="fa fa-check"></i><b>2.2.2</b> Custom with <code>theme_ipsum</code></a></li>
<li class="chapter" data-level="2.2.3" data-path="distributions.html"><a href="distributions.html#mirror-density-chart-with-ggplot2"><i class="fa fa-check"></i><b>2.2.3</b> Mirror Density Chart with ggplot2</a></li>
<li class="chapter" data-level="2.2.4" data-path="distributions.html"><a href="distributions.html#density-with-geom_density"><i class="fa fa-check"></i><b>2.2.4</b> Density with <code>geom_density</code></a></li>
<li class="chapter" data-level="2.2.5" data-path="distributions.html"><a href="distributions.html#histogram-with-geom_histogram"><i class="fa fa-check"></i><b>2.2.5</b> Histogram with <code>geom_histogram</code></a></li>
<li class="chapter" data-level="2.2.6" data-path="distributions.html"><a href="distributions.html#density-chart-with-several-groups"><i class="fa fa-check"></i><b>2.2.6</b> Density Chart with Several Groups</a></li>
<li class="chapter" data-level="2.2.7" data-path="distributions.html"><a href="distributions.html#multi-density-chart"><i class="fa fa-check"></i><b>2.2.7</b> Multi density chart</a></li>
<li class="chapter" data-level="2.2.8" data-path="distributions.html"><a href="distributions.html#small-multiple-with-facet_wrap"><i class="fa fa-check"></i><b>2.2.8</b> Small Multiple with <code>facet_wrap()</code></a></li>
<li class="chapter" data-level="2.2.9" data-path="distributions.html"><a href="distributions.html#stacked-density-chart"><i class="fa fa-check"></i><b>2.2.9</b> Stacked Density Chart</a></li>
<li class="chapter" data-level="2.2.10" data-path="distributions.html"><a href="distributions.html#marginal-distribution-with-ggplot2-and-ggextra"><i class="fa fa-check"></i><b>2.2.10</b> Marginal distribution with ggplot2 and ggExtra</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="distributions.html"><a href="distributions.html#histogram"><i class="fa fa-check"></i><b>2.3</b> Histogram</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="distributions.html"><a href="distributions.html#ggplot2-1"><i class="fa fa-check"></i><b>2.3.1</b> GGPLOT2</a></li>
<li class="chapter" data-level="2.3.2" data-path="distributions.html"><a href="distributions.html#basic-histogram-with-ggplot2"><i class="fa fa-check"></i><b>2.3.2</b> Basic histogram with ggplot2</a></li>
<li class="chapter" data-level="2.3.3" data-path="distributions.html"><a href="distributions.html#basic-histogram-with-geom_histogram"><i class="fa fa-check"></i><b>2.3.3</b> Basic Histogram with <code>geom_histogram</code></a></li>
<li class="chapter" data-level="2.3.4" data-path="distributions.html"><a href="distributions.html#control-bin-size-with-binwidth"><i class="fa fa-check"></i><b>2.3.4</b> Control Bin Size with <code>binwidth</code></a></li>
<li class="chapter" data-level="2.3.5" data-path="distributions.html"><a href="distributions.html#histogram-with-several-groups---ggplot2"><i class="fa fa-check"></i><b>2.3.5</b> Histogram with Several Groups - ggplot2</a></li>
<li class="chapter" data-level="2.3.6" data-path="distributions.html"><a href="distributions.html#using-small-multiple-1"><i class="fa fa-check"></i><b>2.3.6</b> Using Small Multiple</a></li>
<li class="chapter" data-level="2.3.7" data-path="distributions.html"><a href="distributions.html#base-r"><i class="fa fa-check"></i><b>2.3.7</b> Base R</a></li>
<li class="chapter" data-level="2.3.8" data-path="distributions.html"><a href="distributions.html#two-histograms-with-melt-colors"><i class="fa fa-check"></i><b>2.3.8</b> Two Histograms with Melt Colors</a></li>
<li class="chapter" data-level="2.3.9" data-path="distributions.html"><a href="distributions.html#boxplot-on-top-of-histogram"><i class="fa fa-check"></i><b>2.3.9</b> Boxplot on top of Histogram</a></li>
<li class="chapter" data-level="2.3.10" data-path="distributions.html"><a href="distributions.html#histogram-with-colored-tail"><i class="fa fa-check"></i><b>2.3.10</b> Histogram with Colored Tail</a></li>
<li class="chapter" data-level="2.3.11" data-path="distributions.html"><a href="distributions.html#mirrored-histogram-in-base-r"><i class="fa fa-check"></i><b>2.3.11</b> Mirrored Histogram in Base R</a></li>
<li class="chapter" data-level="2.3.12" data-path="distributions.html"><a href="distributions.html#histogram-without-border"><i class="fa fa-check"></i><b>2.3.12</b> Histogram without Border</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="distributions.html"><a href="distributions.html#ridgeline-chart"><i class="fa fa-check"></i><b>2.4</b> Ridgeline Chart</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="distributions.html"><a href="distributions.html#basic-ridgeline-plot"><i class="fa fa-check"></i><b>2.4.1</b> Basic Ridgeline Plot</a></li>
<li class="chapter" data-level="2.4.2" data-path="distributions.html"><a href="distributions.html#shape-variation"><i class="fa fa-check"></i><b>2.4.2</b> Shape Variation</a></li>
<li class="chapter" data-level="2.4.3" data-path="distributions.html"><a href="distributions.html#color-relative-to-numeric-value"><i class="fa fa-check"></i><b>2.4.3</b> Color Relative to Numeric Value</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="distributions.html"><a href="distributions.html#violin"><i class="fa fa-check"></i><b>2.5</b> Violin</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="distributions.html"><a href="distributions.html#base-r-violin-plot"><i class="fa fa-check"></i><b>2.5.1</b> Base R Violin Plot</a></li>
<li class="chapter" data-level="2.5.2" data-path="distributions.html"><a href="distributions.html#basic-ggplot-violin-plot"><i class="fa fa-check"></i><b>2.5.2</b> Basic ggplot Violin Plot</a></li>
<li class="chapter" data-level="2.5.3" data-path="distributions.html"><a href="distributions.html#note-on-input-format"><i class="fa fa-check"></i><b>2.5.3</b> Note on Input Format</a></li>
<li class="chapter" data-level="2.5.4" data-path="distributions.html"><a href="distributions.html#from-wide-format"><i class="fa fa-check"></i><b>2.5.4</b> From Wide Format</a></li>
<li class="chapter" data-level="2.5.5" data-path="distributions.html"><a href="distributions.html#reorder-a-variable-with-ggplot2"><i class="fa fa-check"></i><b>2.5.5</b> Reorder a variable with <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.5.6" data-path="distributions.html"><a href="distributions.html#method-1-the-forcats-library"><i class="fa fa-check"></i><b>2.5.6</b> Method 1: the <code>forcats</code> library</a></li>
<li class="chapter" data-level="2.5.7" data-path="distributions.html"><a href="distributions.html#method-2-using-dplyr-only"><i class="fa fa-check"></i><b>2.5.7</b> Method 2: Using Dplyr Only</a></li>
<li class="chapter" data-level="2.5.8" data-path="distributions.html"><a href="distributions.html#method-3-the-reorder-function-of-base-r"><i class="fa fa-check"></i><b>2.5.8</b> Method 3: the <code>reorder()</code> Function of Base R</a></li>
<li class="chapter" data-level="2.5.9" data-path="distributions.html"><a href="distributions.html#horizontal-violin-plot-with-ggplot2"><i class="fa fa-check"></i><b>2.5.9</b> Horizontal Violin Plot with <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.5.10" data-path="distributions.html"><a href="distributions.html#violin-plot-with-included-boxplot-and-sample-size-in-ggplot2"><i class="fa fa-check"></i><b>2.5.10</b> Violin Plot with included Boxplot and Sample Size in ggplot2</a></li>
<li class="chapter" data-level="2.5.11" data-path="distributions.html"><a href="distributions.html#grouped-violin-chart-with-ggplot2"><i class="fa fa-check"></i><b>2.5.11</b> Grouped Violin Chart with ggplot2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>3</b> Correlation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="correlation.html"><a href="correlation.html#bubble-plot"><i class="fa fa-check"></i><b>3.1</b> Bubble Plot</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="correlation.html"><a href="correlation.html#most-basic-bubble-chart-with-geom_point"><i class="fa fa-check"></i><b>3.1.1</b> Most Basic bubble Chart with <code>geom_point()</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="correlation.html"><a href="correlation.html#control-circle-size-with-scale_size"><i class="fa fa-check"></i><b>3.1.2</b> Control Circle Size with <code>scale_size()</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="correlation.html"><a href="correlation.html#add-a-fourth-dimension-color"><i class="fa fa-check"></i><b>3.1.3</b> Add a Fourth Dimension: Color</a></li>
<li class="chapter" data-level="3.1.4" data-path="correlation.html"><a href="correlation.html#make-it-pretty"><i class="fa fa-check"></i><b>3.1.4</b> Make it Pretty</a></li>
<li class="chapter" data-level="3.1.5" data-path="correlation.html"><a href="correlation.html#interactive-version"><i class="fa fa-check"></i><b>3.1.5</b> Interactive Version</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="correlation.html"><a href="correlation.html#connected-scatterplot"><i class="fa fa-check"></i><b>3.2</b> Connected Scatterplot</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-with-r-and-ggplot2"><i class="fa fa-check"></i><b>3.2.1</b> Connected Scatterplot with R and Ggplot2</a></li>
<li class="chapter" data-level="3.2.2" data-path="correlation.html"><a href="correlation.html#customize-the-connected-scatterplot"><i class="fa fa-check"></i><b>3.2.2</b> Customize the Connected Scatterplot</a></li>
<li class="chapter" data-level="3.2.3" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-to-show-an-evolution"><i class="fa fa-check"></i><b>3.2.3</b> Connected Scatterplot to show an Evolution</a></li>
<li class="chapter" data-level="3.2.4" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-for-time-series"><i class="fa fa-check"></i><b>3.2.4</b> Connected Scatterplot for <code>Time Series</code></a></li>
<li class="chapter" data-level="3.2.5" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-using-base-r"><i class="fa fa-check"></i><b>3.2.5</b> Connected Scatterplot using Base R</a></li>
<li class="chapter" data-level="3.2.6" data-path="correlation.html"><a href="correlation.html#manage-dates-data-with-base-r"><i class="fa fa-check"></i><b>3.2.6</b> Manage Dates Data with Base R</a></li>
<li class="chapter" data-level="3.2.7" data-path="correlation.html"><a href="correlation.html#switch-to-date-format"><i class="fa fa-check"></i><b>3.2.7</b> Switch to Date Format</a></li>
<li class="chapter" data-level="3.2.8" data-path="correlation.html"><a href="correlation.html#base-r-graph-parameters-cheatsheet"><i class="fa fa-check"></i><b>3.2.8</b> Base R Graph Parameters: Cheatsheet</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="correlation.html"><a href="correlation.html#density-2d"><i class="fa fa-check"></i><b>3.3</b> Density 2D</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="correlation.html"><a href="correlation.html#the-issue-with-geom_point"><i class="fa fa-check"></i><b>3.3.1</b> The Issue with <code>geom_point()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="correlation.html"><a href="correlation.html#d-histogram-with-geom_bin2d-1"><i class="fa fa-check"></i><b>3.3.2</b> 2d Histogram with <code>geom_bin2d()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="correlation.html"><a href="correlation.html#hexbin-chart-with-geom_hex"><i class="fa fa-check"></i><b>3.3.3</b> Hexbin Chart with <code>geom_hex()</code></a></li>
<li class="chapter" data-level="3.3.4" data-path="correlation.html"><a href="correlation.html#d-distribution-with-geom_density_2d-or-stat_density_2d"><i class="fa fa-check"></i><b>3.3.4</b> 2d Distribution with <code>geom_density_2d</code> or <code>stat_density_2d</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="correlation.html"><a href="correlation.html#customize-the-color-palette"><i class="fa fa-check"></i><b>3.3.5</b> Customize the Color Palette</a></li>
<li class="chapter" data-level="3.3.6" data-path="correlation.html"><a href="correlation.html#hexbin-chart-with-the-hexbin-package"><i class="fa fa-check"></i><b>3.3.6</b> Hexbin Chart with the Hexbin Package</a></li>
<li class="chapter" data-level="3.3.7" data-path="correlation.html"><a href="correlation.html#hexbin-chart-and-scatterplot-with-ggplot2"><i class="fa fa-check"></i><b>3.3.7</b> Hexbin Chart and Scatterplot with Ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="correlation.html"><a href="correlation.html#scatterplot"><i class="fa fa-check"></i><b>3.4</b> Scatterplot</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="correlation.html"><a href="correlation.html#custom-ggplot2-scatterplot"><i class="fa fa-check"></i><b>3.4.1</b> Custom <code>ggplot2</code> Scatterplot</a></li>
<li class="chapter" data-level="3.4.2" data-path="correlation.html"><a href="correlation.html#using-theme_ipsum"><i class="fa fa-check"></i><b>3.4.2</b> Using <code>theme_ipsum</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="correlation.html"><a href="correlation.html#map-a-variable-to-marker-feature-in-ggplot2-scatterplot"><i class="fa fa-check"></i><b>3.4.3</b> Map a Variable to Marker Feature in <code>ggplot2</code> Scatterplot</a></li>
<li class="chapter" data-level="3.4.4" data-path="correlation.html"><a href="correlation.html#works-with-any-aesthetics"><i class="fa fa-check"></i><b>3.4.4</b> Works with any Aesthetics</a></li>
<li class="chapter" data-level="3.4.5" data-path="correlation.html"><a href="correlation.html#mapping-to-several-features"><i class="fa fa-check"></i><b>3.4.5</b> Mapping to Several Features</a></li>
<li class="chapter" data-level="3.4.6" data-path="correlation.html"><a href="correlation.html#add-text-labels-with-ggplot2"><i class="fa fa-check"></i><b>3.4.6</b> Add Text Labels with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.4.7" data-path="correlation.html"><a href="correlation.html#add-labels-with-geom_label"><i class="fa fa-check"></i><b>3.4.7</b> Add Labels with <code>geom_label()</code></a></li>
<li class="chapter" data-level="3.4.8" data-path="correlation.html"><a href="correlation.html#add-one-text-label-only"><i class="fa fa-check"></i><b>3.4.8</b> Add One Text Label Only</a></li>
<li class="chapter" data-level="3.4.9" data-path="correlation.html"><a href="correlation.html#add-labels-for-a-selection-of-marker"><i class="fa fa-check"></i><b>3.4.9</b> Add Labels for a Selection of Marker</a></li>
<li class="chapter" data-level="3.4.10" data-path="correlation.html"><a href="correlation.html#ggplot2-scatterplot-with-rug"><i class="fa fa-check"></i><b>3.4.10</b> Ggplot2 Scatterplot with Rug</a></li>
<li class="chapter" data-level="3.4.11" data-path="distributions.html"><a href="distributions.html#marginal-distribution-with-ggplot2-and-ggextra"><i class="fa fa-check"></i><b>3.4.11</b> Marginal Distribution with <code>ggplot2</code> and <code>ggExtra</code></a></li>
<li class="chapter" data-level="3.4.12" data-path="distributions.html"><a href="distributions.html#more-customization"><i class="fa fa-check"></i><b>3.4.12</b> More Customization</a></li>
<li class="chapter" data-level="3.4.13" data-path="correlation.html"><a href="correlation.html#linear-model-and-confidence-interval-in-ggplot2"><i class="fa fa-check"></i><b>3.4.13</b> Linear Model and Confidence Interval in <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.4.14" data-path="correlation.html"><a href="correlation.html#using-base-r"><i class="fa fa-check"></i><b>3.4.14</b> Using Base R</a></li>
<li class="chapter" data-level="3.4.15" data-path="correlation.html"><a href="correlation.html#map-the-marker-color-to-a-categorical-variable"><i class="fa fa-check"></i><b>3.4.15</b> Map the Marker Color to a Categorical Variable</a></li>
<li class="chapter" data-level="3.4.16" data-path="correlation.html"><a href="correlation.html#map-the-marker-color-to-a-numeric-variable"><i class="fa fa-check"></i><b>3.4.16</b> Map the Marker Color to a Numeric Variable</a></li>
<li class="chapter" data-level="3.4.17" data-path="correlation.html"><a href="correlation.html#scatterplot-with-polynomial-curve-fitting"><i class="fa fa-check"></i><b>3.4.17</b> Scatterplot with Polynomial Curve Fitting</a></li>
<li class="chapter" data-level="3.4.18" data-path="correlation.html"><a href="correlation.html#polynomial-curve-fitting-and-confidence-interval"><i class="fa fa-check"></i><b>3.4.18</b> Polynomial Curve Fitting and Confidence Interval</a></li>
<li class="chapter" data-level="3.4.19" data-path="correlation.html"><a href="correlation.html#lattice-xy-plot-function"><i class="fa fa-check"></i><b>3.4.19</b> Lattice XY Plot Function</a></li>
<li class="chapter" data-level="3.4.20" data-path="correlation.html"><a href="correlation.html#correlation-between-discrete-variable"><i class="fa fa-check"></i><b>3.4.20</b> Correlation between Discrete Variable</a></li>
<li class="chapter" data-level="3.4.21" data-path="correlation.html"><a href="correlation.html#use-mtext-to-write-text-in-margin"><i class="fa fa-check"></i><b>3.4.21</b> Use <code>mtext()</code> to Write Text in Margin</a></li>
<li class="chapter" data-level="3.4.22" data-path="correlation.html"><a href="correlation.html#customizations-1"><i class="fa fa-check"></i><b>3.4.22</b> Customizations</a></li>
<li class="chapter" data-level="3.4.23" data-path="correlation.html"><a href="correlation.html#the-split_screen-function-of-r"><i class="fa fa-check"></i><b>3.4.23</b> The <code>split_screen()</code> Function of R</a></li>
<li class="chapter" data-level="3.4.24" data-path="correlation.html"><a href="correlation.html#use-par-mfrow-to-split-screen"><i class="fa fa-check"></i><b>3.4.24</b> Use par mfrow to Split Screen</a></li>
<li class="chapter" data-level="3.4.25" data-path="correlation.html"><a href="correlation.html#base-r-graph-parameters-a-cheatsheet."><i class="fa fa-check"></i><b>3.4.25</b> Base R Graph Parameters: A Cheatsheet.</a></li>
<li class="chapter" data-level="3.4.26" data-path="correlation.html"><a href="correlation.html#special-use-case-manhattan-plots"><i class="fa fa-check"></i><b>3.4.26</b> Special Use Case: Manhattan Plots</a></li>
<li class="chapter" data-level="3.4.27" data-path="correlation.html"><a href="correlation.html#highly-customizable-with-ggplot2"><i class="fa fa-check"></i><b>3.4.27</b> Highly Customizable with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.4.28" data-path="correlation.html"><a href="correlation.html#switch-to-an-interactive-version-with-plotly"><i class="fa fa-check"></i><b>3.4.28</b> Switch to an Interactive Version with <code>plotly</code></a></li>
<li class="chapter" data-level="3.4.29" data-path="correlation.html"><a href="correlation.html#circular-version-with-cmplot"><i class="fa fa-check"></i><b>3.4.29</b> Circular Version with CMplot</a></li>
<li class="chapter" data-level="3.4.30" data-path="correlation.html"><a href="correlation.html#snp-density-plot"><i class="fa fa-check"></i><b>3.4.30</b> SNP-Density Plot</a></li>
<li class="chapter" data-level="3.4.31" data-path="correlation.html"><a href="correlation.html#circular-manhattan-plot"><i class="fa fa-check"></i><b>3.4.31</b> Circular-Manhattan Plot</a></li>
<li class="chapter" data-level="3.4.32" data-path="correlation.html"><a href="correlation.html#single_track-rectangular-manhattan-plot"><i class="fa fa-check"></i><b>3.4.32</b> Single_track Rectangular-Manhattan Plot</a></li>
<li class="chapter" data-level="3.4.33" data-path="correlation.html"><a href="correlation.html#multi_tracks-rectangular-manhattan-plot"><i class="fa fa-check"></i><b>3.4.33</b> Multi_tracks Rectangular-Manhattan Plot</a></li>
<li class="chapter" data-level="3.4.34" data-path="correlation.html"><a href="correlation.html#single_track-q-q-plot"><i class="fa fa-check"></i><b>3.4.34</b> Single_track Q-Q Plot</a></li>
<li class="chapter" data-level="3.4.35" data-path="correlation.html"><a href="correlation.html#multi_tracks-q-q-plot"><i class="fa fa-check"></i><b>3.4.35</b> Multi_tracks Q-Q plot</a></li>
<li class="chapter" data-level="3.4.36" data-path="correlation.html"><a href="correlation.html#visualize-correlation-with-ggcorr"><i class="fa fa-check"></i><b>3.4.36</b> Visualize Correlation with <code>ggcorr()</code></a></li>
<li class="chapter" data-level="3.4.37" data-path="correlation.html"><a href="correlation.html#change-plot-types"><i class="fa fa-check"></i><b>3.4.37</b> Change Plot Types</a></li>
<li class="chapter" data-level="3.4.38" data-path="correlation.html"><a href="correlation.html#split-by-group"><i class="fa fa-check"></i><b>3.4.38</b> Split by Group</a></li>
<li class="chapter" data-level="3.4.39" data-path="correlation.html"><a href="correlation.html#using-the-corrgram-package"><i class="fa fa-check"></i><b>3.4.39</b> Using the <code>corrgram</code> Package</a></li>
<li class="chapter" data-level="3.4.40" data-path="correlation.html"><a href="correlation.html#visualize-correlation-with-ggcorr-1"><i class="fa fa-check"></i><b>3.4.40</b> Visualize Correlation with <code>ggcorr()</code></a></li>
<li class="chapter" data-level="3.4.41" data-path="correlation.html"><a href="correlation.html#split-by-group-1"><i class="fa fa-check"></i><b>3.4.41</b> Split by Group</a></li>
<li class="chapter" data-level="3.4.42" data-path="correlation.html"><a href="correlation.html#change-plot-types-1"><i class="fa fa-check"></i><b>3.4.42</b> Change plot types</a></li>
<li class="chapter" data-level="3.4.43" data-path="correlation.html"><a href="correlation.html#other-methods"><i class="fa fa-check"></i><b>3.4.43</b> Other Methods</a></li>
<li class="chapter" data-level="3.4.44" data-path="correlation.html"><a href="correlation.html#basic-scatterplot-matrix"><i class="fa fa-check"></i><b>3.4.44</b> Basic Scatterplot Matrix</a></li>
<li class="chapter" data-level="3.4.45" data-path="correlation.html"><a href="correlation.html#correlogram-with-the-car-package"><i class="fa fa-check"></i><b>3.4.45</b> Correlogram with the <code>car</code> Package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ranking.html"><a href="ranking.html"><i class="fa fa-check"></i><b>4</b> Ranking</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ranking.html"><a href="ranking.html#barplot"><i class="fa fa-check"></i><b>4.1</b> Barplot</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ranking.html"><a href="ranking.html#basic-barplot-with-ggplot2"><i class="fa fa-check"></i><b>4.1.1</b> Basic Barplot with Ggplot2</a></li>
<li class="chapter" data-level="4.1.2" data-path="ranking.html"><a href="ranking.html#control-bar-color"><i class="fa fa-check"></i><b>4.1.2</b> Control Bar Color</a></li>
<li class="chapter" data-level="4.1.3" data-path="ranking.html"><a href="ranking.html#horizontal-barplot-with-coord_flip"><i class="fa fa-check"></i><b>4.1.3</b> Horizontal Barplot with <code>coord_flip()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="ranking.html"><a href="ranking.html#control-bar-width-with-width"><i class="fa fa-check"></i><b>4.1.4</b> Control Bar Width with <code>width</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="distributions.html"><a href="distributions.html#reorder-a-variable-with-ggplot2"><i class="fa fa-check"></i><b>4.1.5</b> Reorder a Variable with Ggplot2</a></li>
<li class="chapter" data-level="4.1.6" data-path="ranking.html"><a href="ranking.html#method-1-the-forecats-library"><i class="fa fa-check"></i><b>4.1.6</b> Method 1: the <code>Forecats</code> Library</a></li>
<li class="chapter" data-level="4.1.7" data-path="distributions.html"><a href="distributions.html#method-2-using-dplyr-only"><i class="fa fa-check"></i><b>4.1.7</b> Method 2: Using <code>dplyr</code> Only</a></li>
<li class="chapter" data-level="4.1.8" data-path="distributions.html"><a href="distributions.html#method-3-the-reorder-function-of-base-r"><i class="fa fa-check"></i><b>4.1.8</b> Method 3: the <code>reorder()</code> Function of Base R</a></li>
<li class="chapter" data-level="4.1.9" data-path="ranking.html"><a href="ranking.html#barplot-with-variable-width---ggplot2"><i class="fa fa-check"></i><b>4.1.9</b> Barplot with Variable Width - Ggplot2</a></li>
<li class="chapter" data-level="4.1.10" data-path="ranking.html"><a href="ranking.html#barplot-with-error-bars"><i class="fa fa-check"></i><b>4.1.10</b> Barplot with Error Bars</a></li>
<li class="chapter" data-level="4.1.11" data-path="ranking.html"><a href="ranking.html#customization"><i class="fa fa-check"></i><b>4.1.11</b> Customization</a></li>
<li class="chapter" data-level="4.1.12" data-path="ranking.html"><a href="ranking.html#basic-r-and-the-barplot-function"><i class="fa fa-check"></i><b>4.1.12</b> Basic R and the <code>barplot()</code> Function</a></li>
<li class="chapter" data-level="4.1.13" data-path="ranking.html"><a href="ranking.html#custom-color"><i class="fa fa-check"></i><b>4.1.13</b> Custom Color</a></li>
<li class="chapter" data-level="4.1.14" data-path="ranking.html"><a href="ranking.html#title-axis-label-custom-limits"><i class="fa fa-check"></i><b>4.1.14</b> Title, Axis label, Custom Limits</a></li>
<li class="chapter" data-level="4.1.15" data-path="ranking.html"><a href="ranking.html#horizontal-barplot"><i class="fa fa-check"></i><b>4.1.15</b> Horizontal Barplot</a></li>
<li class="chapter" data-level="4.1.16" data-path="ranking.html"><a href="ranking.html#bar-width-space-between-bars"><i class="fa fa-check"></i><b>4.1.16</b> Bar Width &amp; Space between Bars</a></li>
<li class="chapter" data-level="4.1.17" data-path="ranking.html"><a href="ranking.html#barplot-texture"><i class="fa fa-check"></i><b>4.1.17</b> Barplot Texture</a></li>
<li class="chapter" data-level="4.1.18" data-path="ranking.html"><a href="ranking.html#advanced-r-barplot-customization"><i class="fa fa-check"></i><b>4.1.18</b> Advanced R Barplot Customization</a></li>
<li class="chapter" data-level="4.1.19" data-path="ranking.html"><a href="ranking.html#axis-labels-orientation-with-las"><i class="fa fa-check"></i><b>4.1.19</b> Axis Labels Orientation with <code>las()</code></a></li>
<li class="chapter" data-level="4.1.20" data-path="ranking.html"><a href="ranking.html#change-group-labels-with-names.arg"><i class="fa fa-check"></i><b>4.1.20</b> Change Group Labels with <strong>names.arg</strong></a></li>
<li class="chapter" data-level="4.1.21" data-path="ranking.html"><a href="ranking.html#axis-labels-axis-title-style"><i class="fa fa-check"></i><b>4.1.21</b> Axis Labels &amp; Axis Title Style</a></li>
<li class="chapter" data-level="4.1.22" data-path="ranking.html"><a href="ranking.html#increase-margin-size"><i class="fa fa-check"></i><b>4.1.22</b> Increase Margin Size</a></li>
<li class="chapter" data-level="4.1.23" data-path="ranking.html"><a href="ranking.html#barplot-with-error-bars-1"><i class="fa fa-check"></i><b>4.1.23</b> Barplot with Error Bars</a></li>
<li class="chapter" data-level="4.1.24" data-path="ranking.html"><a href="ranking.html#customization-1"><i class="fa fa-check"></i><b>4.1.24</b> Customization</a></li>
<li class="chapter" data-level="4.1.25" data-path="ranking.html"><a href="ranking.html#standard-deviation-standard-error-or-confidence-interval"><i class="fa fa-check"></i><b>4.1.25</b> Standard Deviation, Standard Error or Confidence Interval?</a></li>
<li class="chapter" data-level="4.1.26" data-path="ranking.html"><a href="ranking.html#basic-r-use-the-arrows-function"><i class="fa fa-check"></i><b>4.1.26</b> Basic R: Use the <code>arrows()</code> Function</a></li>
<li class="chapter" data-level="4.1.27" data-path="ranking.html"><a href="ranking.html#barplot-with-number-of-observation"><i class="fa fa-check"></i><b>4.1.27</b> Barplot with Number of Observation</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ranking.html"><a href="ranking.html#circular-barplot"><i class="fa fa-check"></i><b>4.2</b> Circular Barplot</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="ranking.html"><a href="ranking.html#most-basic-circular-barplot"><i class="fa fa-check"></i><b>4.2.1</b> Most Basic Circular Barplot</a></li>
<li class="chapter" data-level="4.2.2" data-path="ranking.html"><a href="ranking.html#add-labels-to-circular-barplot"><i class="fa fa-check"></i><b>4.2.2</b> Add Labels to Circular Barplot</a></li>
<li class="chapter" data-level="4.2.3" data-path="ranking.html"><a href="ranking.html#circular-barplot-with-groups"><i class="fa fa-check"></i><b>4.2.3</b> Circular Barplot with Groups</a></li>
<li class="chapter" data-level="4.2.4" data-path="ranking.html"><a href="ranking.html#space-between-groups"><i class="fa fa-check"></i><b>4.2.4</b> Space between Groups</a></li>
<li class="chapter" data-level="4.2.5" data-path="ranking.html"><a href="ranking.html#order-bars"><i class="fa fa-check"></i><b>4.2.5</b> Order Bars</a></li>
<li class="chapter" data-level="4.2.6" data-path="ranking.html"><a href="ranking.html#circular-barchart-customization"><i class="fa fa-check"></i><b>4.2.6</b> Circular Barchart Customization</a></li>
<li class="chapter" data-level="4.2.7" data-path="ranking.html"><a href="ranking.html#circular-stacked-barplot"><i class="fa fa-check"></i><b>4.2.7</b> Circular Stacked Barplot</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ranking.html"><a href="ranking.html#lollipop-plot"><i class="fa fa-check"></i><b>4.3</b> Lollipop Plot</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="ranking.html"><a href="ranking.html#most-basic-lollipop-plot"><i class="fa fa-check"></i><b>4.3.1</b> Most Basic Lollipop Plot</a></li>
<li class="chapter" data-level="4.3.2" data-path="ranking.html"><a href="ranking.html#from-1-numeric-and-1-categorical-variable"><i class="fa fa-check"></i><b>4.3.2</b> From 1 Numeric and 1 Categorical Variable</a></li>
<li class="chapter" data-level="4.3.3" data-path="ranking.html"><a href="ranking.html#custom-lollipop-chart"><i class="fa fa-check"></i><b>4.3.3</b> Custom Lollipop Chart</a></li>
<li class="chapter" data-level="4.3.4" data-path="ranking.html"><a href="ranking.html#stem"><i class="fa fa-check"></i><b>4.3.4</b> Stem</a></li>
<li class="chapter" data-level="4.3.5" data-path="ranking.html"><a href="ranking.html#general-appearance-with-theme"><i class="fa fa-check"></i><b>4.3.5</b> General Appearance with <code>theme()</code></a></li>
<li class="chapter" data-level="4.3.6" data-path="ranking.html"><a href="ranking.html#horizontal-version"><i class="fa fa-check"></i><b>4.3.6</b> Horizontal Version</a></li>
<li class="chapter" data-level="4.3.7" data-path="ranking.html"><a href="ranking.html#baseline"><i class="fa fa-check"></i><b>4.3.7</b> Baseline</a></li>
<li class="chapter" data-level="4.3.8" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-2-groups"><i class="fa fa-check"></i><b>4.3.8</b> Lollipop Chart with 2 Groups</a></li>
<li class="chapter" data-level="4.3.9" data-path="ranking.html"><a href="ranking.html#highlight-a-group-in-a-lollipop-chart"><i class="fa fa-check"></i><b>4.3.9</b> Highlight a Group in a Lollipop Chart</a></li>
<li class="chapter" data-level="4.3.10" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-conditional-color"><i class="fa fa-check"></i><b>4.3.10</b> Lollipop Chart with Conditional Color</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ranking.html"><a href="ranking.html#parallel-coordinates-chart"><i class="fa fa-check"></i><b>4.4</b> Parallel Coordinates Chart</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ranking.html"><a href="ranking.html#parallel-coordinates-chart-with-ggally"><i class="fa fa-check"></i><b>4.4.1</b> Parallel Coordinates Chart with ggally</a></li>
<li class="chapter" data-level="4.4.2" data-path="ranking.html"><a href="ranking.html#custom-color-theme-general-appearance"><i class="fa fa-check"></i><b>4.4.2</b> Custom Color, Theme, General Appearance</a></li>
<li class="chapter" data-level="4.4.3" data-path="ranking.html"><a href="ranking.html#scaling"><i class="fa fa-check"></i><b>4.4.3</b> Scaling</a></li>
<li class="chapter" data-level="4.4.4" data-path="ranking.html"><a href="ranking.html#highlight-a-group"><i class="fa fa-check"></i><b>4.4.4</b> Highlight a Group</a></li>
<li class="chapter" data-level="4.4.5" data-path="ranking.html"><a href="ranking.html#parallel-chart-with-the-mass-library"><i class="fa fa-check"></i><b>4.4.5</b> Parallel Chart with the <code>MASS</code> Library</a></li>
<li class="chapter" data-level="4.4.6" data-path="ranking.html"><a href="ranking.html#reorder-variables"><i class="fa fa-check"></i><b>4.4.6</b> Reorder Variables</a></li>
<li class="chapter" data-level="4.4.7" data-path="ranking.html"><a href="ranking.html#highlight-a-group-1"><i class="fa fa-check"></i><b>4.4.7</b> Highlight a Group</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ranking.html"><a href="ranking.html#radar-chart"><i class="fa fa-check"></i><b>4.5</b> Radar Chart</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ranking.html"><a href="ranking.html#one-group-only---fmsb-library"><i class="fa fa-check"></i><b>4.5.1</b> One Group Only - <code>FMSB</code> Library</a></li>
<li class="chapter" data-level="4.5.2" data-path="ranking.html"><a href="ranking.html#customization-2"><i class="fa fa-check"></i><b>4.5.2</b> Customization</a></li>
<li class="chapter" data-level="4.5.3" data-path="ranking.html"><a href="ranking.html#several-groups"><i class="fa fa-check"></i><b>4.5.3</b> Several Groups</a></li>
<li class="chapter" data-level="4.5.4" data-path="ranking.html"><a href="ranking.html#customization-3"><i class="fa fa-check"></i><b>4.5.4</b> Customization</a></li>
<li class="chapter" data-level="4.5.5" data-path="ranking.html"><a href="ranking.html#about-axis-limits"><i class="fa fa-check"></i><b>4.5.5</b> About Axis Limits</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ranking.html"><a href="ranking.html#wordcloud"><i class="fa fa-check"></i><b>4.6</b> Wordcloud</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="ranking.html"><a href="ranking.html#wordcloud2"><i class="fa fa-check"></i><b>4.6.1</b> <code>wordcloud2</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="ranking.html"><a href="ranking.html#the-wordcloud2-library"><i class="fa fa-check"></i><b>4.6.2</b> The <strong>Wordcloud2</strong> Library</a></li>
<li class="chapter" data-level="4.6.3" data-path="ranking.html"><a href="ranking.html#color-background-color"><i class="fa fa-check"></i><b>4.6.3</b> Color &amp; Background Color</a></li>
<li class="chapter" data-level="4.6.4" data-path="ranking.html"><a href="ranking.html#shape"><i class="fa fa-check"></i><b>4.6.4</b> Shape</a></li>
<li class="chapter" data-level="4.6.5" data-path="ranking.html"><a href="ranking.html#word-orientation"><i class="fa fa-check"></i><b>4.6.5</b> Word Orientation</a></li>
<li class="chapter" data-level="4.6.6" data-path="ranking.html"><a href="ranking.html#chinese-version"><i class="fa fa-check"></i><b>4.6.6</b> Chinese Version</a></li>
<li class="chapter" data-level="4.6.7" data-path="ranking.html"><a href="ranking.html#use-letter-or-text-as-shape"><i class="fa fa-check"></i><b>4.6.7</b> Use Letter or Text as Shape</a></li>
<li class="chapter" data-level="4.6.8" data-path="ranking.html"><a href="ranking.html#export-the-wordcloud"><i class="fa fa-check"></i><b>4.6.8</b> Export the Wordcloud</a></li>
<li class="chapter" data-level="4.6.9" data-path="ranking.html"><a href="ranking.html#basic-wordcloud-in-r"><i class="fa fa-check"></i><b>4.6.9</b> Basic <code>wordcloud</code> in R</a></li>
<li class="chapter" data-level="4.6.10" data-path="ranking.html"><a href="ranking.html#text-mining-and-wordcloud-with-r"><i class="fa fa-check"></i><b>4.6.10</b> Text mining and <code>wordcloud</code> with R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="part.html"><a href="part.html"><i class="fa fa-check"></i><b>5</b> Part of a Whole</a>
<ul>
<li class="chapter" data-level="5.1" data-path="part.html"><a href="part.html#circular-packing"><i class="fa fa-check"></i><b>5.1</b> Circular Packing</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="part.html"><a href="part.html#basic-circle-packing-with-one-level"><i class="fa fa-check"></i><b>5.1.1</b> Basic Circle Packing with One Level</a></li>
<li class="chapter" data-level="5.1.2" data-path="part.html"><a href="part.html#circle-packing-customization-with-r"><i class="fa fa-check"></i><b>5.1.2</b> Circle Packing Customization with R</a></li>
<li class="chapter" data-level="5.1.3" data-path="part.html"><a href="part.html#map-color-to-bubble-value"><i class="fa fa-check"></i><b>5.1.3</b> Map Color to Bubble Value</a></li>
<li class="chapter" data-level="5.1.4" data-path="part.html"><a href="part.html#background-customization"><i class="fa fa-check"></i><b>5.1.4</b> Background Customization</a></li>
<li class="chapter" data-level="5.1.5" data-path="part.html"><a href="part.html#space-between-bubbles"><i class="fa fa-check"></i><b>5.1.5</b> Space between Bubbles</a></li>
<li class="chapter" data-level="5.1.6" data-path="part.html"><a href="part.html#interactive-circle-packing-with-r"><i class="fa fa-check"></i><b>5.1.6</b> Interactive Circle Packing with R</a></li>
<li class="chapter" data-level="5.1.7" data-path="part.html"><a href="part.html#basic-circle-packing-with-several-hierarchy-level"><i class="fa fa-check"></i><b>5.1.7</b> Basic Circle Packing with Several Hierarchy Level</a></li>
<li class="chapter" data-level="5.1.8" data-path="part.html"><a href="part.html#input-concept"><i class="fa fa-check"></i><b>5.1.8</b> Input &amp; Concept</a></li>
<li class="chapter" data-level="5.1.9" data-path="part.html"><a href="part.html#switching-to-another-chart-type"><i class="fa fa-check"></i><b>5.1.9</b> Switching to another Chart Type</a></li>
<li class="chapter" data-level="5.1.10" data-path="part.html"><a href="part.html#customized-circle-packing-with-r-and-ggraph"><i class="fa fa-check"></i><b>5.1.10</b> Customized Circle Packing with R and ggraph</a></li>
<li class="chapter" data-level="5.1.11" data-path="part.html"><a href="part.html#map-color-to-hierarchy-depth"><i class="fa fa-check"></i><b>5.1.11</b> Map Color to Hierarchy Depth</a></li>
<li class="chapter" data-level="5.1.12" data-path="part.html"><a href="part.html#map-color-to-hierarchy-depth-1"><i class="fa fa-check"></i><b>5.1.12</b> Map Color to Hierarchy Depth</a></li>
<li class="chapter" data-level="5.1.13" data-path="part.html"><a href="part.html#circular-packing-with-hidden-first-level-of-hierarchy"><i class="fa fa-check"></i><b>5.1.13</b> Circular Packing with Hidden First Level of Hierarchy</a></li>
<li class="chapter" data-level="5.1.14" data-path="part.html"><a href="part.html#hiding-the-first-level-for-better-styling"><i class="fa fa-check"></i><b>5.1.14</b> Hiding the First Level for Better Styling</a></li>
<li class="chapter" data-level="5.1.15" data-path="part.html"><a href="part.html#add-labels-to-a-specific-level-of-the-hierarchy"><i class="fa fa-check"></i><b>5.1.15</b> Add Labels to a Specific Level of the Hierarchy</a></li>
<li class="chapter" data-level="5.1.16" data-path="part.html"><a href="part.html#zoomable-circle-packing-with-r-and-circlepacker"><i class="fa fa-check"></i><b>5.1.16</b> Zoomable Circle Packing with R and circlePacker</a></li>
<li class="chapter" data-level="5.1.17" data-path="part.html"><a href="part.html#circular-packing-fom-edge-list"><i class="fa fa-check"></i><b>5.1.17</b> Circular Packing fom Edge List</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="part.html"><a href="part.html#circular-stacked-barchart"><i class="fa fa-check"></i><b>5.2</b> Circular Stacked Barchart</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="ranking.html"><a href="ranking.html#circular-stacked-barplot"><i class="fa fa-check"></i><b>5.2.1</b> Circular Stacked Barplot</a></li>
<li class="chapter" data-level="5.2.2" data-path="part.html"><a href="part.html#stacked-barplot-for-evolution"><i class="fa fa-check"></i><b>5.2.2</b> Stacked Barplot for Evolution</a></li>
<li class="chapter" data-level="5.2.3" data-path="distributions.html"><a href="distributions.html#base-r"><i class="fa fa-check"></i><b>5.2.3</b> Base R</a></li>
<li class="chapter" data-level="5.2.4" data-path="part.html"><a href="part.html#stacking-barplot"><i class="fa fa-check"></i><b>5.2.4</b> Stacking Barplot</a></li>
<li class="chapter" data-level="5.2.5" data-path="part.html"><a href="part.html#three-periods-stacked-barplot"><i class="fa fa-check"></i><b>5.2.5</b> Three Periods Stacked Barplot</a></li>
<li class="chapter" data-level="5.2.6" data-path="part.html"><a href="part.html#base-r-1"><i class="fa fa-check"></i><b>5.2.6</b> Base R</a></li>
<li class="chapter" data-level="5.2.7" data-path="part.html"><a href="part.html#grouped-stacked-and-percent-stacked-barplot-in-base-r"><i class="fa fa-check"></i><b>5.2.7</b> Grouped, Stacked and Percent Stacked Barplot in Base R</a></li>
<li class="chapter" data-level="5.2.8" data-path="part.html"><a href="part.html#grouped-stacked-barchart"><i class="fa fa-check"></i><b>5.2.8</b> Grouped Stacked Barchart</a></li>
<li class="chapter" data-level="5.2.9" data-path="part.html"><a href="part.html#percent-stacked-barplot"><i class="fa fa-check"></i><b>5.2.9</b> Percent Stacked Barplot</a></li>
<li class="chapter" data-level="5.2.10" data-path="part.html"><a href="part.html#barplot-for-likert-type-items"><i class="fa fa-check"></i><b>5.2.10</b> Barplot for <code>likert</code> Type Items</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="part.html"><a href="part.html#dendrogram"><i class="fa fa-check"></i><b>5.3</b> Dendrogram</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="part.html"><a href="part.html#dendrogram-fromn-hierarchical-data"><i class="fa fa-check"></i><b>5.3.1</b> Dendrogram fromn Hierarchical Data</a></li>
<li class="chapter" data-level="5.3.2" data-path="part.html"><a href="part.html#dendrogram-from-edge-list"><i class="fa fa-check"></i><b>5.3.2</b> Dendrogram from Edge List</a></li>
<li class="chapter" data-level="5.3.3" data-path="part.html"><a href="part.html#dendrogram-from-a-nested-dataframe"><i class="fa fa-check"></i><b>5.3.3</b> Dendrogram from a Nested Dataframe</a></li>
<li class="chapter" data-level="5.3.4" data-path="part.html"><a href="part.html#dendrogram-customization-with-r-and-ggraph"><i class="fa fa-check"></i><b>5.3.4</b> Dendrogram Customization with R and <code>ggraph</code></a></li>
<li class="chapter" data-level="5.3.5" data-path="part.html"><a href="part.html#circular-or-linear-layout"><i class="fa fa-check"></i><b>5.3.5</b> Circular or Linear <code>layout</code></a></li>
<li class="chapter" data-level="5.3.6" data-path="part.html"><a href="part.html#edge-style"><i class="fa fa-check"></i><b>5.3.6</b> Edge Style</a></li>
<li class="chapter" data-level="5.3.7" data-path="part.html"><a href="part.html#labels-and-nodes"><i class="fa fa-check"></i><b>5.3.7</b> Labels and Nodes</a></li>
<li class="chapter" data-level="5.3.8" data-path="part.html"><a href="part.html#customize-aesthetics"><i class="fa fa-check"></i><b>5.3.8</b> Customize Aesthetics</a></li>
<li class="chapter" data-level="5.3.9" data-path="part.html"><a href="part.html#circular-dendrogram-with-r-and-ggraph"><i class="fa fa-check"></i><b>5.3.9</b> Circular Dendrogram with R and ggraph</a></li>
<li class="chapter" data-level="5.3.10" data-path="part.html"><a href="part.html#interactive-dendrogram-with-r"><i class="fa fa-check"></i><b>5.3.10</b> Interactive Dendrogram with R</a></li>
<li class="chapter" data-level="5.3.11" data-path="part.html"><a href="part.html#dendrogram-from-clustering-result"><i class="fa fa-check"></i><b>5.3.11</b> Dendrogram from <code>Clustering</code> Result</a></li>
<li class="chapter" data-level="5.3.12" data-path="part.html"><a href="part.html#zoom-on-a-group"><i class="fa fa-check"></i><b>5.3.12</b> Zoom on a Group</a></li>
<li class="chapter" data-level="5.3.13" data-path="part.html"><a href="part.html#dendrogram-with-color-and-legend-in-r"><i class="fa fa-check"></i><b>5.3.13</b> Dendrogram with Color and Legend in R</a></li>
<li class="chapter" data-level="5.3.14" data-path="part.html"><a href="part.html#more-customization-with-dendextend"><i class="fa fa-check"></i><b>5.3.14</b> More Customization with <code>Dendextend</code></a></li>
<li class="chapter" data-level="5.3.15" data-path="part.html"><a href="part.html#customized-dendrogram-with-r-and-the-dendextend-package"><i class="fa fa-check"></i><b>5.3.15</b> Customized Dendrogram with R and the Dendextend Package</a></li>
<li class="chapter" data-level="5.3.16" data-path="part.html"><a href="part.html#the-set-function"><i class="fa fa-check"></i><b>5.3.16</b> The <code>set()</code> Function</a></li>
<li class="chapter" data-level="5.3.17" data-path="part.html"><a href="part.html#highlight-clusters"><i class="fa fa-check"></i><b>5.3.17</b> Highlight Clusters</a></li>
<li class="chapter" data-level="5.3.18" data-path="part.html"><a href="part.html#comparing-with-an-expected-clustering"><i class="fa fa-check"></i><b>5.3.18</b> Comparing with an Expected Clustering</a></li>
<li class="chapter" data-level="5.3.19" data-path="part.html"><a href="part.html#comparing-2-dendrograms-with-tanglegram"><i class="fa fa-check"></i><b>5.3.19</b> Comparing 2 Dendrograms with <code>tanglegram()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="part.html"><a href="part.html#donut-chart"><i class="fa fa-check"></i><b>5.4</b> Donut Chart</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="part.html"><a href="part.html#most-basic-doughnut-chart-with-ggplot2"><i class="fa fa-check"></i><b>5.4.1</b> Most Basic Doughnut Chart with <code>ggplot2</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="ranking.html"><a href="ranking.html#customization"><i class="fa fa-check"></i><b>5.4.2</b> Customization</a></li>
<li class="chapter" data-level="5.4.3" data-path="part.html"><a href="part.html#donut-thickness"><i class="fa fa-check"></i><b>5.4.3</b> Donut Thickness</a></li>
<li class="chapter" data-level="5.4.4" data-path="part.html"><a href="part.html#donut-chart-with-base-r"><i class="fa fa-check"></i><b>5.4.4</b> Donut Chart with Base R</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="part.html"><a href="part.html#grouped-and-stacked-barplot"><i class="fa fa-check"></i><b>5.5</b> Grouped and Stacked Barplot</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="part.html"><a href="part.html#grouped-stacked-and-percent-stacked-barplot-in-ggplot2"><i class="fa fa-check"></i><b>5.5.1</b> Grouped, Stacked and Percent Stacked Barplot in <code>ggplot2</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="part.html"><a href="part.html#stacked-barchart"><i class="fa fa-check"></i><b>5.5.2</b> Stacked Barchart</a></li>
<li class="chapter" data-level="5.5.3" data-path="part.html"><a href="part.html#percent-stacked-barchart"><i class="fa fa-check"></i><b>5.5.3</b> Percent Stacked Barchart</a></li>
<li class="chapter" data-level="5.5.4" data-path="part.html"><a href="part.html#grouped-barchart-customization"><i class="fa fa-check"></i><b>5.5.4</b> Grouped Barchart Customization</a></li>
<li class="chapter" data-level="5.5.5" data-path="part.html"><a href="part.html#small-multiple"><i class="fa fa-check"></i><b>5.5.5</b> Small Multiple</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="part.html"><a href="part.html#piechart"><i class="fa fa-check"></i><b>5.6</b> Piechart</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="part.html"><a href="part.html#most-basic-piechart-with-pie"><i class="fa fa-check"></i><b>5.6.1</b> Most Basic Piechart with <code>pie()</code></a></li>
<li class="chapter" data-level="5.6.2" data-path="part.html"><a href="part.html#change-labels-with-labels"><i class="fa fa-check"></i><b>5.6.2</b> Change Labels with <code>labels</code></a></li>
<li class="chapter" data-level="5.6.3" data-path="part.html"><a href="part.html#non-circular-piechart-with-edges"><i class="fa fa-check"></i><b>5.6.3</b> Non-Circular Piechart with <code>edges</code></a></li>
<li class="chapter" data-level="5.6.4" data-path="part.html"><a href="part.html#add-stripes-with-density"><i class="fa fa-check"></i><b>5.6.4</b> Add Stripes with <code>density</code></a></li>
<li class="chapter" data-level="5.6.5" data-path="part.html"><a href="part.html#color-with-col-and-border"><i class="fa fa-check"></i><b>5.6.5</b> Color with <code>col</code> and <code>border</code></a></li>
<li class="chapter" data-level="5.6.6" data-path="part.html"><a href="part.html#ggplot2-piechart"><i class="fa fa-check"></i><b>5.6.6</b> Ggplot2 Piechart</a></li>
<li class="chapter" data-level="5.6.7" data-path="part.html"><a href="part.html#improve-appearance"><i class="fa fa-check"></i><b>5.6.7</b> Improve Appearance</a></li>
<li class="chapter" data-level="5.6.8" data-path="part.html"><a href="part.html#adding-labels-with-geom_text"><i class="fa fa-check"></i><b>5.6.8</b> Adding Labels with <code>geom_text()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="part.html"><a href="part.html#treemap"><i class="fa fa-check"></i><b>5.7</b> Treemap</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="part.html"><a href="part.html#most-basic-treemap-with-r"><i class="fa fa-check"></i><b>5.7.1</b> Most Basic Treemap with R</a></li>
<li class="chapter" data-level="5.7.2" data-path="part.html"><a href="part.html#treemap-with-subgroups"><i class="fa fa-check"></i><b>5.7.2</b> Treemap with Subgroups</a></li>
<li class="chapter" data-level="5.7.3" data-path="part.html"><a href="part.html#customize-your-r-treemap"><i class="fa fa-check"></i><b>5.7.3</b> Customize your R Treemap</a></li>
<li class="chapter" data-level="5.7.4" data-path="part.html"><a href="part.html#borders"><i class="fa fa-check"></i><b>5.7.4</b> Borders</a></li>
<li class="chapter" data-level="5.7.5" data-path="part.html"><a href="part.html#general-features"><i class="fa fa-check"></i><b>5.7.5</b> General Features</a></li>
<li class="chapter" data-level="5.7.6" data-path="part.html"><a href="part.html#interactive-treemap-in-r"><i class="fa fa-check"></i><b>5.7.6</b> Interactive Treemap in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="evolution.html"><a href="evolution.html"><i class="fa fa-check"></i><b>6</b> Evolution</a>
<ul>
<li class="chapter" data-level="6.1" data-path="evolution.html"><a href="evolution.html#area-chart"><i class="fa fa-check"></i><b>6.1</b> Area Chart</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="evolution.html"><a href="evolution.html#area-chart-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.1.1</b> Area Chart with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="evolution.html"><a href="evolution.html#customize-the-line-chart"><i class="fa fa-check"></i><b>6.1.2</b> Customize the Line Chart</a></li>
<li class="chapter" data-level="6.1.3" data-path="evolution.html"><a href="evolution.html#basic-stacked-area-chart-with-r"><i class="fa fa-check"></i><b>6.1.3</b> Basic Stacked Area Chart with R</a></li>
<li class="chapter" data-level="6.1.4" data-path="evolution.html"><a href="evolution.html#control-stacking-order-with-ggplot2"><i class="fa fa-check"></i><b>6.1.4</b> Control Stacking Order with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.1.5" data-path="evolution.html"><a href="evolution.html#proportional-stacked-area-chart"><i class="fa fa-check"></i><b>6.1.5</b> Proportional Stacked Area Chart</a></li>
<li class="chapter" data-level="6.1.6" data-path="evolution.html"><a href="evolution.html#color-style"><i class="fa fa-check"></i><b>6.1.6</b> Color &amp; Style</a></li>
<li class="chapter" data-level="6.1.7" data-path="evolution.html"><a href="evolution.html#stacking-area-charts"><i class="fa fa-check"></i><b>6.1.7</b> Stacking Area Charts</a></li>
<li class="chapter" data-level="6.1.8" data-path="evolution.html"><a href="evolution.html#example-mental-arithmetic"><i class="fa fa-check"></i><b>6.1.8</b> Example: Mental Arithmetic</a></li>
<li class="chapter" data-level="6.1.9" data-path="evolution.html"><a href="evolution.html#interactive-area-chart-with-r-and-plotly"><i class="fa fa-check"></i><b>6.1.9</b> Interactive Area Chart with R and plotly</a></li>
<li class="chapter" data-level="6.1.10" data-path="evolution.html"><a href="evolution.html#basic-line-chart-with-ggplot2-and-geom_line-1"><i class="fa fa-check"></i><b>6.1.10</b> Basic Line Chart with ggplot2 and <code>geom_line()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="evolution.html"><a href="evolution.html#line-chart"><i class="fa fa-check"></i><b>6.2</b> Line Chart</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="evolution.html"><a href="evolution.html#line-chart-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.2.1</b> Line Chart with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="evolution.html"><a href="evolution.html#customize-the-line-chart-1"><i class="fa fa-check"></i><b>6.2.2</b> Customize the Line Chart</a></li>
<li class="chapter" data-level="6.2.3" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.2.3</b> Connected scatterplot with R and ggplot2</a></li>
<li class="chapter" data-level="6.2.4" data-path="correlation.html"><a href="correlation.html#most-basic-connected-scatterplot-geom_point-and-geom_line"><i class="fa fa-check"></i><b>6.2.4</b> Most Basic Connected Scatterplot: <code>geom_point()</code> and <code>geom_line()</code></a></li>
<li class="chapter" data-level="6.2.5" data-path="correlation.html"><a href="correlation.html#customize-the-connected-scatterplot"><i class="fa fa-check"></i><b>6.2.5</b> Customize the Connected Scatterplot</a></li>
<li class="chapter" data-level="6.2.6" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-to-show-an-evolution"><i class="fa fa-check"></i><b>6.2.6</b> Connected Scatterplot to Show an Evolution</a></li>
<li class="chapter" data-level="6.2.7" data-path="evolution.html"><a href="evolution.html#line-plot-with-log-scale"><i class="fa fa-check"></i><b>6.2.7</b> Line Plot with Log Scale</a></li>
<li class="chapter" data-level="6.2.8" data-path="evolution.html"><a href="evolution.html#without-log-transform"><i class="fa fa-check"></i><b>6.2.8</b> Without Log Transform</a></li>
<li class="chapter" data-level="6.2.9" data-path="evolution.html"><a href="evolution.html#multi-groups-line-chart-with-ggplot2"><i class="fa fa-check"></i><b>6.2.9</b> Multi Groups Line Chart with ggplot2</a></li>
<li class="chapter" data-level="6.2.10" data-path="evolution.html"><a href="evolution.html#customize-the-grouped-line-chart"><i class="fa fa-check"></i><b>6.2.10</b> Customize the Grouped Line Chart</a></li>
<li class="chapter" data-level="6.2.11" data-path="correlation.html"><a href="correlation.html#linear-model-and-confidence-interval-in-ggplot2"><i class="fa fa-check"></i><b>6.2.11</b> Linear Model and Confidence Interval in ggplot2</a></li>
<li class="chapter" data-level="6.2.12" data-path="evolution.html"><a href="evolution.html#line-chart-annotation-with-ggplot2"><i class="fa fa-check"></i><b>6.2.12</b> Line Chart Annotation with ggplot2</a></li>
<li class="chapter" data-level="6.2.13" data-path="evolution.html"><a href="evolution.html#dual-y-axis-with-r-and-ggplot2"><i class="fa fa-check"></i><b>6.2.13</b> Dual Y Axis with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.2.14" data-path="evolution.html"><a href="evolution.html#adding-a-second-y-axis-with-sec.axis-the-idea"><i class="fa fa-check"></i><b>6.2.14</b> Adding a Second Y Axis with <code>sec.axis()</code>: The Idea</a></li>
<li class="chapter" data-level="6.2.15" data-path="evolution.html"><a href="evolution.html#show-2-series-on-the-same-line-chart-with-sec.axis"><i class="fa fa-check"></i><b>6.2.15</b> Show 2 Series on the Same Line Chart with <code>sec.axis()</code></a></li>
<li class="chapter" data-level="6.2.16" data-path="evolution.html"><a href="evolution.html#dual-y-axis-customization-with-ggplot2"><i class="fa fa-check"></i><b>6.2.16</b> Dual Y Axis Customization with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.2.17" data-path="evolution.html"><a href="evolution.html#barplot-with-overlapping-line-chart"><i class="fa fa-check"></i><b>6.2.17</b> Barplot with Overlapping Line Chart</a></li>
<li class="chapter" data-level="6.2.18" data-path="evolution.html"><a href="evolution.html#line-chart-with-error-envelop-ggplot2-and-geom_ribbon"><i class="fa fa-check"></i><b>6.2.18</b> Line Chart with Error Envelop: ggplot2 and geom_ribbon()</a></li>
<li class="chapter" data-level="6.2.19" data-path="evolution.html"><a href="evolution.html#spaghetti-plot"><i class="fa fa-check"></i><b>6.2.19</b> Spaghetti Plot</a></li>
<li class="chapter" data-level="6.2.20" data-path="evolution.html"><a href="evolution.html#change-line-chart-color-according-to-y-value"><i class="fa fa-check"></i><b>6.2.20</b> Change Line Chart Color according to Y Value</a></li>
<li class="chapter" data-level="6.2.21" data-path="correlation.html"><a href="correlation.html#add-a-legend-to-a-base-r-chart"><i class="fa fa-check"></i><b>6.2.21</b> Add a Legend to a Base R Chart</a></li>
<li class="chapter" data-level="6.2.22" data-path="evolution.html"><a href="evolution.html#reversed-y-axis-in-base-r"><i class="fa fa-check"></i><b>6.2.22</b> Reversed Y Axis in Base R</a></li>
<li class="chapter" data-level="6.2.23" data-path="correlation.html"><a href="correlation.html#scatterplot-with-polynomial-curve-fitting"><i class="fa fa-check"></i><b>6.2.23</b> Scatterplot with Polynomial Curve Fitting</a></li>
<li class="chapter" data-level="6.2.24" data-path="evolution.html"><a href="evolution.html#base-r-graph-parameters-a-cheatsheet"><i class="fa fa-check"></i><b>6.2.24</b> Base R Graph Parameters: A Cheatsheet</a></li>
<li class="chapter" data-level="6.2.25" data-path="evolution.html"><a href="evolution.html#dual-y-axis-in-r"><i class="fa fa-check"></i><b>6.2.25</b> Dual Y Axis in R</a></li>
<li class="chapter" data-level="6.2.26" data-path="evolution.html"><a href="evolution.html#adding-a-second-y-axis-with-sec.axis-the-idea-1"><i class="fa fa-check"></i><b>6.2.26</b> Adding a Second Y axis with <code>sec.axis()</code>: The Idea</a></li>
<li class="chapter" data-level="6.2.27" data-path="evolution.html"><a href="evolution.html#show-2-series-on-the-same-line-chart-with-sec.axis-1"><i class="fa fa-check"></i><b>6.2.27</b> Show 2 Series on the Same Line Chart with <code>sec.axis()</code></a></li>
<li class="chapter" data-level="6.2.28" data-path="evolution.html"><a href="evolution.html#dual-y-axis-customization-with-ggplot2-1"><i class="fa fa-check"></i><b>6.2.28</b> Dual Y Axis Customization with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.2.29" data-path="evolution.html"><a href="evolution.html#barplot-with-overlapping-line-chart-1"><i class="fa fa-check"></i><b>6.2.29</b> Barplot with Overlapping Line Chart</a></li>
<li class="chapter" data-level="6.2.30" data-path="evolution.html"><a href="evolution.html#dual-y-axis-in-r-1"><i class="fa fa-check"></i><b>6.2.30</b> Dual Y axis in R</a></li>
<li class="chapter" data-level="6.2.31" data-path="evolution.html"><a href="evolution.html#dual-y-axis-line-chart"><i class="fa fa-check"></i><b>6.2.31</b> Dual Y Axis Line Chart</a></li>
<li class="chapter" data-level="6.2.32" data-path="evolution.html"><a href="evolution.html#add-legend"><i class="fa fa-check"></i><b>6.2.32</b> Add Legend</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="evolution.html"><a href="evolution.html#streamgraph"><i class="fa fa-check"></i><b>6.3</b> Streamgraph</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="evolution.html"><a href="evolution.html#most-basic-streamgraph"><i class="fa fa-check"></i><b>6.3.1</b> Most Basic Streamgraph</a></li>
<li class="chapter" data-level="6.3.2" data-path="evolution.html"><a href="evolution.html#control-streamgraph-offset"><i class="fa fa-check"></i><b>6.3.2</b> Control Streamgraph Offset</a></li>
<li class="chapter" data-level="6.3.3" data-path="evolution.html"><a href="evolution.html#change-streamgraph-shape"><i class="fa fa-check"></i><b>6.3.3</b> Change Streamgraph Shape</a></li>
<li class="chapter" data-level="6.3.4" data-path="evolution.html"><a href="evolution.html#change-streamgraph-color"><i class="fa fa-check"></i><b>6.3.4</b> Change Streamgraph Color</a></li>
<li class="chapter" data-level="6.3.5" data-path="evolution.html"><a href="evolution.html#streamgraph-with-dropdown-button"><i class="fa fa-check"></i><b>6.3.5</b> Streamgraph with Dropdown Button</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="evolution.html"><a href="evolution.html#time-series"><i class="fa fa-check"></i><b>6.4</b> Time Series</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="evolution.html"><a href="evolution.html#time-series-with-ggplot2"><i class="fa fa-check"></i><b>6.4.1</b> Time Series with <code>Ggplot2</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="evolution.html"><a href="evolution.html#format-used-on-the-x-axis"><i class="fa fa-check"></i><b>6.4.2</b> Format used on the X Axis</a></li>
<li class="chapter" data-level="6.4.3" data-path="evolution.html"><a href="evolution.html#breaks-and-minor-breaks"><i class="fa fa-check"></i><b>6.4.3</b> Breaks and Minor Breaks</a></li>
<li class="chapter" data-level="6.4.4" data-path="evolution.html"><a href="evolution.html#add-angle-to-x-axis-labels"><i class="fa fa-check"></i><b>6.4.4</b> Add Angle to X Axis Labels</a></li>
<li class="chapter" data-level="6.4.5" data-path="evolution.html"><a href="evolution.html#select-time-frame"><i class="fa fa-check"></i><b>6.4.5</b> Select Time Frame</a></li>
<li class="chapter" data-level="6.4.6" data-path="evolution.html"><a href="evolution.html#line-chart-annotation-with-ggplot2-1"><i class="fa fa-check"></i><b>6.4.6</b> Line Chart Annotation with <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.4.7" data-path="evolution.html"><a href="evolution.html#dual-y-axis-with-r-and-ggplot2-1"><i class="fa fa-check"></i><b>6.4.7</b> Dual Y Axis with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="6.4.8" data-path="evolution.html"><a href="evolution.html#using-the-ggplotly-function"><i class="fa fa-check"></i><b>6.4.8</b> Using the <code>ggplotly()</code> Function</a></li>
<li class="chapter" data-level="6.4.9" data-path="evolution.html"><a href="evolution.html#using-plot_ly"><i class="fa fa-check"></i><b>6.4.9</b> Using <code>plot_ly()</code></a></li>
<li class="chapter" data-level="6.4.10" data-path="evolution.html"><a href="evolution.html#an-introduction-to-interactive-time-series-with-r-and-dygraphs"><i class="fa fa-check"></i><b>6.4.10</b> An Introduction to Interactive Time Series with R and Dygraphs</a></li>
<li class="chapter" data-level="6.4.11" data-path="evolution.html"><a href="evolution.html#if-time-is-a-numeric-variable"><i class="fa fa-check"></i><b>6.4.11</b> If Time is a <code>numeric</code> Variable</a></li>
<li class="chapter" data-level="6.4.12" data-path="evolution.html"><a href="evolution.html#if-time-is-a-date-variable"><i class="fa fa-check"></i><b>6.4.12</b> If Time is a <code>date</code> Variable</a></li>
<li class="chapter" data-level="6.4.13" data-path="evolution.html"><a href="evolution.html#several-series"><i class="fa fa-check"></i><b>6.4.13</b> Several Series</a></li>
<li class="chapter" data-level="6.4.14" data-path="evolution.html"><a href="evolution.html#getting-the-date-format"><i class="fa fa-check"></i><b>6.4.14</b> Getting the Date Format</a></li>
<li class="chapter" data-level="6.4.15" data-path="evolution.html"><a href="evolution.html#time-series-with-dygraph"><i class="fa fa-check"></i><b>6.4.15</b> Time Series With Dygraph</a></li>
<li class="chapter" data-level="6.4.16" data-path="evolution.html"><a href="evolution.html#area-chart-1"><i class="fa fa-check"></i><b>6.4.16</b> Area Chart</a></li>
<li class="chapter" data-level="6.4.17" data-path="evolution.html"><a href="evolution.html#step-chart"><i class="fa fa-check"></i><b>6.4.17</b> Step Chart</a></li>
<li class="chapter" data-level="6.4.18" data-path="ranking.html"><a href="ranking.html#lollipop-plot"><i class="fa fa-check"></i><b>6.4.18</b> Lollipop Plot</a></li>
<li class="chapter" data-level="6.4.19" data-path="evolution.html"><a href="evolution.html#candlestick-chart"><i class="fa fa-check"></i><b>6.4.19</b> Candlestick Chart</a></li>
<li class="chapter" data-level="6.4.20" data-path="evolution.html"><a href="evolution.html#line-chart-with-interval"><i class="fa fa-check"></i><b>6.4.20</b> Line Chart with Interval</a></li>
<li class="chapter" data-level="6.4.21" data-path="evolution.html"><a href="evolution.html#custom-dygraphs-time-series-example"><i class="fa fa-check"></i><b>6.4.21</b> Custom Dygraphs Time Series Example</a></li>
<li class="chapter" data-level="6.4.22" data-path="evolution.html"><a href="evolution.html#heatmap-for-time-series"><i class="fa fa-check"></i><b>6.4.22</b> Heatmap for Time Series</a></li>
<li class="chapter" data-level="6.4.23" data-path="evolution.html"><a href="evolution.html#dual-y-axis-in-r-2"><i class="fa fa-check"></i><b>6.4.23</b> Dual Y Axis in R</a></li>
<li class="chapter" data-level="6.4.24" data-path="evolution.html"><a href="evolution.html#dual-y-axis-line-chart-1"><i class="fa fa-check"></i><b>6.4.24</b> Dual Y Axis Line Chart</a></li>
<li class="chapter" data-level="6.4.25" data-path="evolution.html"><a href="evolution.html#add-legend-1"><i class="fa fa-check"></i><b>6.4.25</b> Add Legend</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>7</b> Map</a>
<ul>
<li class="chapter" data-level="7.1" data-path="map.html"><a href="map.html#basic-map"><i class="fa fa-check"></i><b>7.1</b> Basic Map</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="map.html"><a href="map.html#background-map-in-r"><i class="fa fa-check"></i><b>7.1.1</b> Background map in R</a></li>
<li class="chapter" data-level="7.1.2" data-path="map.html"><a href="map.html#most-basic-background-map-with-r-and-leaflet"><i class="fa fa-check"></i><b>7.1.2</b> Most Basic Background Map with R and Leaflet</a></li>
<li class="chapter" data-level="7.1.3" data-path="map.html"><a href="map.html#change-background-tile-with-leaflet-and-r"><i class="fa fa-check"></i><b>7.1.3</b> Change Background Tile with <code>leaflet</code> and R</a></li>
<li class="chapter" data-level="7.1.4" data-path="map.html"><a href="map.html#the-ggmap-package-for-static-maps-with-background-titles"><i class="fa fa-check"></i><b>7.1.4</b> The <code>ggmap</code> Package for Static Maps with Background Titles</a></li>
<li class="chapter" data-level="7.1.5" data-path="map.html"><a href="map.html#calling-stamen-background"><i class="fa fa-check"></i><b>7.1.5</b> Calling Stamen Background</a></li>
<li class="chapter" data-level="7.1.6" data-path="map.html"><a href="map.html#the-maps-mapdata-and-oz-packages-to-get-most-common-boundaries"><i class="fa fa-check"></i><b>7.1.6</b> The <code>Maps</code>, <code>Mapdata</code> and <code>Oz</code> Packages to get Most Common Boundaries</a></li>
<li class="chapter" data-level="7.1.7" data-path="map.html"><a href="map.html#mapdata-package"><i class="fa fa-check"></i><b>7.1.7</b> <code>mapdata</code> Package</a></li>
<li class="chapter" data-level="7.1.8" data-path="map.html"><a href="map.html#oz-package"><i class="fa fa-check"></i><b>7.1.8</b> <code>oz</code> Package</a></li>
<li class="chapter" data-level="7.1.9" data-path="map.html"><a href="map.html#rgdal-and-geojsonio-to-read-shapefiles-and-.geojson-files"><i class="fa fa-check"></i><b>7.1.9</b> <code>Rgdal</code> and <code>Geojsonio</code> to Read Shapefiles and .geojson Files</a></li>
<li class="chapter" data-level="7.1.10" data-path="map.html"><a href="map.html#find-and-download-a-shapefile"><i class="fa fa-check"></i><b>7.1.10</b> Find and Download a Shapefile</a></li>
<li class="chapter" data-level="7.1.11" data-path="map.html"><a href="map.html#read-it-with-rgdal"><i class="fa fa-check"></i><b>7.1.11</b> Read it with <code>rgdal</code></a></li>
<li class="chapter" data-level="7.1.12" data-path="map.html"><a href="map.html#plot-it-with-base-r"><i class="fa fa-check"></i><b>7.1.12</b> Plot it with <code>base R</code></a></li>
<li class="chapter" data-level="7.1.13" data-path="map.html"><a href="map.html#plot-it-with-ggplot2"><i class="fa fa-check"></i><b>7.1.13</b> Plot it with <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.1.14" data-path="map.html"><a href="map.html#open-and-plot-geojson-files-in-r"><i class="fa fa-check"></i><b>7.1.14</b> Open and Plot Geojson files in R</a></li>
<li class="chapter" data-level="7.1.15" data-path="map.html"><a href="map.html#find-and-download-a-.geojson-file"><i class="fa fa-check"></i><b>7.1.15</b> Find and download a <code>.geoJSON</code> file</a></li>
<li class="chapter" data-level="7.1.16" data-path="map.html"><a href="map.html#plot-it-with-base-r-1"><i class="fa fa-check"></i><b>7.1.16</b> Plot it with <code>base R</code></a></li>
<li class="chapter" data-level="7.1.17" data-path="map.html"><a href="map.html#plot-it-with-ggplot2-1"><i class="fa fa-check"></i><b>7.1.17</b> Plot it with <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.1.18" data-path="map.html"><a href="map.html#geospatial-data-manipulation"><i class="fa fa-check"></i><b>7.1.18</b> Geospatial Data Manipulation</a></li>
<li class="chapter" data-level="7.1.19" data-path="map.html"><a href="map.html#simplify-geospatial-object"><i class="fa fa-check"></i><b>7.1.19</b> Simplify Geospatial Object</a></li>
<li class="chapter" data-level="7.1.20" data-path="map.html"><a href="map.html#compute-region-centroid"><i class="fa fa-check"></i><b>7.1.20</b> Compute Region Centroid</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="map.html"><a href="map.html#cartogram"><i class="fa fa-check"></i><b>7.2</b> Cartogram</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="map.html"><a href="map.html#basic-cartogram-with-r"><i class="fa fa-check"></i><b>7.2.1</b> Basic Cartogram with R</a></li>
<li class="chapter" data-level="7.2.2" data-path="map.html"><a href="map.html#distort-country-size-with-cartogram"><i class="fa fa-check"></i><b>7.2.2</b> Distort Country Size with <code>cartogram</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="map.html"><a href="map.html#cartogram-and-choropleth"><i class="fa fa-check"></i><b>7.2.3</b> Cartogram and Choropleth</a></li>
<li class="chapter" data-level="7.2.4" data-path="correlation.html"><a href="correlation.html#make-it-pretty"><i class="fa fa-check"></i><b>7.2.4</b> Make it Pretty</a></li>
<li class="chapter" data-level="7.2.5" data-path="map.html"><a href="map.html#application-on-hexbin-map"><i class="fa fa-check"></i><b>7.2.5</b> Application on Hexbin Map</a></li>
<li class="chapter" data-level="7.2.6" data-path="map.html"><a href="map.html#basic-cartogram-with-r-1"><i class="fa fa-check"></i><b>7.2.6</b> Basic Cartogram with R</a></li>
<li class="chapter" data-level="7.2.7" data-path="map.html"><a href="map.html#distort-hexagone-size-with-cartogram"><i class="fa fa-check"></i><b>7.2.7</b> Distort Hexagone Size with <code>cartogram</code></a></li>
<li class="chapter" data-level="7.2.8" data-path="map.html"><a href="map.html#cartogram-and-choropleth-1"><i class="fa fa-check"></i><b>7.2.8</b> Cartogram and Choropleth</a></li>
<li class="chapter" data-level="7.2.9" data-path="map.html"><a href="map.html#a-smooth-transition-between-choropleth-and-cartogram"><i class="fa fa-check"></i><b>7.2.9</b> A Smooth Transition between Choropleth and Cartogram</a></li>
<li class="chapter" data-level="7.2.10" data-path="map.html"><a href="map.html#a-basic-map-of-africa"><i class="fa fa-check"></i><b>7.2.10</b> A Basic Map of Africa</a></li>
<li class="chapter" data-level="7.2.11" data-path="map.html"><a href="map.html#compute-cartogram-boundaries"><i class="fa fa-check"></i><b>7.2.11</b> Compute Cartogram Boundaries</a></li>
<li class="chapter" data-level="7.2.12" data-path="map.html"><a href="map.html#a-nicer-representation-using-ggplot2"><i class="fa fa-check"></i><b>7.2.12</b> A Nicer Representation using <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.2.13" data-path="map.html"><a href="map.html#compute-several-intermediate-maps"><i class="fa fa-check"></i><b>7.2.13</b> Compute Several Intermediate Maps</a></li>
<li class="chapter" data-level="7.2.14" data-path="map.html"><a href="map.html#make-the-animation-with-gganimate"><i class="fa fa-check"></i><b>7.2.14</b> Make the Animation with <code>gganimate</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="map.html"><a href="map.html#choropleth-map"><i class="fa fa-check"></i><b>7.3</b> Choropleth Map</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="map.html"><a href="map.html#choropleth-map-with-r-and-ggplot2"><i class="fa fa-check"></i><b>7.3.1</b> Choropleth map with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="map.html"><a href="map.html#basic-background-map"><i class="fa fa-check"></i><b>7.3.2</b> Basic Background Map</a></li>
<li class="chapter" data-level="7.3.3" data-path="map.html"><a href="map.html#read-the-numeric-variable"><i class="fa fa-check"></i><b>7.3.3</b> Read the Numeric Variable</a></li>
<li class="chapter" data-level="7.3.4" data-path="map.html"><a href="map.html#merge-geospatial-and-numeric-data"><i class="fa fa-check"></i><b>7.3.4</b> Merge Geospatial and Numeric Data</a></li>
<li class="chapter" data-level="7.3.5" data-path="map.html"><a href="map.html#read-the-numeric-variable-1"><i class="fa fa-check"></i><b>7.3.5</b> Read the Numeric Variable</a></li>
<li class="chapter" data-level="7.3.6" data-path="map.html"><a href="map.html#customized-choropleth-map-with-r-and-ggplot2"><i class="fa fa-check"></i><b>7.3.6</b> Customized Choropleth Map with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="map.html"><a href="map.html#choropleth-map-with-r"><i class="fa fa-check"></i><b>7.3.7</b> Choropleth Map with R</a></li>
<li class="chapter" data-level="7.3.8" data-path="map.html"><a href="map.html#find-and-download-a-shape-file"><i class="fa fa-check"></i><b>7.3.8</b> Find and Download a Shape File</a></li>
<li class="chapter" data-level="7.3.9" data-path="map.html"><a href="map.html#plot-the-map"><i class="fa fa-check"></i><b>7.3.9</b> Plot the Map</a></li>
<li class="chapter" data-level="7.3.10" data-path="map.html"><a href="map.html#visualize-the-numeric-variable"><i class="fa fa-check"></i><b>7.3.10</b> Visualize the Numeric Variable</a></li>
<li class="chapter" data-level="7.3.11" data-path="map.html"><a href="map.html#build-the-choropleth"><i class="fa fa-check"></i><b>7.3.11</b> Build the Choropleth</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="map.html"><a href="map.html#connection-map"><i class="fa fa-check"></i><b>7.4</b> Connection Map</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="map.html"><a href="map.html#how-to-draw-connecting-routes-on-map-with-r"><i class="fa fa-check"></i><b>7.4.1</b> How to Draw Connecting Routes on Map with R</a></li>
<li class="chapter" data-level="7.4.2" data-path="map.html"><a href="map.html#add-3-cities"><i class="fa fa-check"></i><b>7.4.2</b> Add 3 Cities</a></li>
<li class="chapter" data-level="7.4.3" data-path="map.html"><a href="map.html#show-connection-between-cities"><i class="fa fa-check"></i><b>7.4.3</b> Show Connection between Cities</a></li>
<li class="chapter" data-level="7.4.4" data-path="map.html"><a href="map.html#correcting-gcintermediate"><i class="fa fa-check"></i><b>7.4.4</b> Correcting <code>gcIntermediate</code></a></li>
<li class="chapter" data-level="7.4.5" data-path="map.html"><a href="map.html#apply-it-to-several-pairs-of-cities"><i class="fa fa-check"></i><b>7.4.5</b> Apply it to Several Pairs of Cities</a></li>
<li class="chapter" data-level="7.4.6" data-path="map.html"><a href="map.html#an-alternative-using-the-greatcircle-function"><i class="fa fa-check"></i><b>7.4.6</b> An Alternative using the <code>greatCircle</code> Function</a></li>
<li class="chapter" data-level="7.4.7" data-path="map.html"><a href="map.html#visualizing-geographic-connections"><i class="fa fa-check"></i><b>7.4.7</b> Visualizing Geographic Connections</a></li>
<li class="chapter" data-level="7.4.8" data-path="map.html"><a href="map.html#showing-few-connections-on-a-map"><i class="fa fa-check"></i><b>7.4.8</b> Showing Few Connections on a Map</a></li>
<li class="chapter" data-level="7.4.9" data-path="map.html"><a href="map.html#showing-many-connections-on-a-map"><i class="fa fa-check"></i><b>7.4.9</b> Showing Many Connections on a Map</a></li>
<li class="chapter" data-level="7.4.10" data-path="map.html"><a href="map.html#bubble-map"><i class="fa fa-check"></i><b>7.4.10</b> Bubble Map</a></li>
<li class="chapter" data-level="7.4.11" data-path="map.html"><a href="map.html#use-leaflet-control-widget"><i class="fa fa-check"></i><b>7.4.11</b> Use leaflet control widget</a></li>
<li class="chapter" data-level="7.4.12" data-path="map.html"><a href="map.html#interactive-earthquake-bubble-map-with-r-and-leaflet"><i class="fa fa-check"></i><b>7.4.12</b> Interactive Earthquake Bubble Map with R and leaflet</a></li>
<li class="chapter" data-level="7.4.13" data-path="map.html"><a href="map.html#bubble-map-with-ggplot2"><i class="fa fa-check"></i><b>7.4.13</b> Bubble map with <code>ggplot2</code></a></li>
<li class="chapter" data-level="7.4.14" data-path="map.html"><a href="map.html#basic-scatterplot-map"><i class="fa fa-check"></i><b>7.4.14</b> Basic Scatterplot Map</a></li>
<li class="chapter" data-level="7.4.15" data-path="map.html"><a href="map.html#basic-bubble-map"><i class="fa fa-check"></i><b>7.4.15</b> Basic Bubble Map</a></li>
<li class="chapter" data-level="7.4.16" data-path="map.html"><a href="map.html#customized-bubble-map"><i class="fa fa-check"></i><b>7.4.16</b> Customized Bubble Map</a></li>
<li class="chapter" data-level="7.4.17" data-path="map.html"><a href="map.html#interactive-bubble-map-with-plotly"><i class="fa fa-check"></i><b>7.4.17</b> Interactive Bubble Map with Plotly</a></li>
<li class="chapter" data-level="7.4.18" data-path="map.html"><a href="map.html#proportional-symbol-map-with-the-cartography-package"><i class="fa fa-check"></i><b>7.4.18</b> Proportional Symbol Map with the Cartography Package</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="map.html"><a href="map.html#interactive-choropleth-map"><i class="fa fa-check"></i><b>7.5</b> Interactive Choropleth Map</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="map.html"><a href="map.html#find-download-and-load-geospatial-data"><i class="fa fa-check"></i><b>7.5.1</b> Find, Download and Load Geospatial Data</a></li>
<li class="chapter" data-level="7.5.2" data-path="map.html"><a href="map.html#default-choropleth"><i class="fa fa-check"></i><b>7.5.2</b> Default Choropleth</a></li>
<li class="chapter" data-level="7.5.3" data-path="map.html"><a href="map.html#visualize-the-numeric-variable-1"><i class="fa fa-check"></i><b>7.5.3</b> Visualize the Numeric Variable</a></li>
<li class="chapter" data-level="7.5.4" data-path="map.html"><a href="map.html#change-color-scale"><i class="fa fa-check"></i><b>7.5.4</b> Change Color Scale</a></li>
<li class="chapter" data-level="7.5.5" data-path="map.html"><a href="map.html#customizied-leaflet-choropleth-map"><i class="fa fa-check"></i><b>7.5.5</b> Customizied <code>leaflet</code> Choropleth Map</a></li>
<li class="chapter" data-level="7.5.6" data-path="map.html"><a href="map.html#basic-choropleth-map-with-the-cartography-package"><i class="fa fa-check"></i><b>7.5.6</b> Basic Choropleth Map with the Cartography Package</a></li>
<li class="chapter" data-level="7.5.7" data-path="map.html"><a href="map.html#data-provided-in-a-shape-file"><i class="fa fa-check"></i><b>7.5.7</b> Data Provided in a Shape File</a></li>
<li class="chapter" data-level="7.5.8" data-path="map.html"><a href="map.html#customized-choropleth-map-with-the-cartography-package"><i class="fa fa-check"></i><b>7.5.8</b> Customized Choropleth Map with the Cartography Package</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="map.html"><a href="map.html#hexbin-map"><i class="fa fa-check"></i><b>7.6</b> Hexbin Map</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="map.html"><a href="map.html#hexbin-map-in-r-example-with-us-states"><i class="fa fa-check"></i><b>7.6.1</b> Hexbin Map in R: Example with US states</a></li>
<li class="chapter" data-level="7.6.2" data-path="map.html"><a href="map.html#ggplot2-and-state-name"><i class="fa fa-check"></i><b>7.6.2</b> <code>ggplot2</code> and State Name</a></li>
<li class="chapter" data-level="7.6.3" data-path="map.html"><a href="map.html#basic-choropleth"><i class="fa fa-check"></i><b>7.6.3</b> Basic Choropleth</a></li>
<li class="chapter" data-level="7.6.4" data-path="map.html"><a href="map.html#customized-hexbin-choropleth-map"><i class="fa fa-check"></i><b>7.6.4</b> Customized Hexbin Choropleth Map</a></li>
<li class="chapter" data-level="7.6.5" data-path="map.html"><a href="map.html#hexbin-map-from-list-of-coordinates"><i class="fa fa-check"></i><b>7.6.5</b> Hexbin Map from List of Coordinates</a></li>
<li class="chapter" data-level="7.6.6" data-path="map.html"><a href="map.html#hexbin-map-for-2d-density-visualization"><i class="fa fa-check"></i><b>7.6.6</b> Hexbin Map for 2D Density Visualization</a></li>
<li class="chapter" data-level="7.6.7" data-path="map.html"><a href="map.html#hexbin-maps"><i class="fa fa-check"></i><b>7.6.7</b> Hexbin Maps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="flow.html"><a href="flow.html"><i class="fa fa-check"></i><b>8</b> Flow</a>
<ul>
<li class="chapter" data-level="8.1" data-path="flow.html"><a href="flow.html#arc-diagram"><i class="fa fa-check"></i><b>8.1</b> Arc Diagram</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="flow.html"><a href="flow.html#arc-diagrams"><i class="fa fa-check"></i><b>8.1.1</b> Arc Diagrams</a></li>
<li class="chapter" data-level="8.1.2" data-path="flow.html"><a href="flow.html#common-mistakes"><i class="fa fa-check"></i><b>8.1.2</b> Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="flow.html"><a href="flow.html#chord-diagram"><i class="fa fa-check"></i><b>8.2</b> Chord Diagram</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="flow.html"><a href="flow.html#introduction-to-the-circlize-package"><i class="fa fa-check"></i><b>8.2.1</b> Introduction to the <code>circlize</code> Package</a></li>
<li class="chapter" data-level="8.2.2" data-path="flow.html"><a href="flow.html#circular-chart-customization-for-the-circlize-r-package"><i class="fa fa-check"></i><b>8.2.2</b> Circular Chart Customization for the <code>Circlize</code> R package</a></li>
<li class="chapter" data-level="8.2.3" data-path="flow.html"><a href="flow.html#most-basic-circular-chart"><i class="fa fa-check"></i><b>8.2.3</b> Most Basic Circular Chart</a></li>
<li class="chapter" data-level="8.2.4" data-path="ranking.html"><a href="ranking.html#customization"><i class="fa fa-check"></i><b>8.2.4</b> Customization</a></li>
<li class="chapter" data-level="8.2.5" data-path="flow.html"><a href="flow.html#available-circular-chart-types-with-circlize"><i class="fa fa-check"></i><b>8.2.5</b> Available Circular Chart Types with Circlize</a></li>
<li class="chapter" data-level="8.2.6" data-path="flow.html"><a href="flow.html#circular-line-chart"><i class="fa fa-check"></i><b>8.2.6</b> Circular Line Chart</a></li>
<li class="chapter" data-level="8.2.7" data-path="flow.html"><a href="flow.html#vertical-ablines"><i class="fa fa-check"></i><b>8.2.7</b> Vertical Ablines</a></li>
<li class="chapter" data-level="8.2.8" data-path="flow.html"><a href="flow.html#circular-histogram"><i class="fa fa-check"></i><b>8.2.8</b> Circular Histogram</a></li>
<li class="chapter" data-level="8.2.9" data-path="flow.html"><a href="flow.html#circular-chart-with-several-tracks"><i class="fa fa-check"></i><b>8.2.9</b> Circular Chart with Several Tracks</a></li>
<li class="chapter" data-level="8.2.10" data-path="flow.html"><a href="flow.html#display-several-chord-diagrams-on-same-figure"><i class="fa fa-check"></i><b>8.2.10</b> Display Several Chord Diagrams on same Figure</a></li>
<li class="chapter" data-level="8.2.11" data-path="flow.html"><a href="flow.html#draw-part-of-the-circular-chart-only"><i class="fa fa-check"></i><b>8.2.11</b> Draw Part of the Circular Chart Only</a></li>
<li class="chapter" data-level="8.2.12" data-path="flow.html"><a href="flow.html#advanced-chord-diagram-with-r-and-circlize"><i class="fa fa-check"></i><b>8.2.12</b> Advanced Chord Diagram with R and Circlize</a></li>
<li class="chapter" data-level="8.2.13" data-path="flow.html"><a href="flow.html#chord-diagram-from-edge-list"><i class="fa fa-check"></i><b>8.2.13</b> Chord Diagram from Edge List</a></li>
<li class="chapter" data-level="8.2.14" data-path="flow.html"><a href="flow.html#chord-diagram-1"><i class="fa fa-check"></i><b>8.2.14</b> Chord Diagram</a></li>
<li class="chapter" data-level="8.2.15" data-path="flow.html"><a href="flow.html#variations"><i class="fa fa-check"></i><b>8.2.15</b> Variations</a></li>
<li class="chapter" data-level="8.2.16" data-path="flow.html"><a href="flow.html#static-chord-diagram"><i class="fa fa-check"></i><b>8.2.16</b> Static Chord Diagram</a></li>
<li class="chapter" data-level="8.2.17" data-path="flow.html"><a href="flow.html#introduction-to-chord-diagram"><i class="fa fa-check"></i><b>8.2.17</b> Introduction to Chord Diagram</a></li>
<li class="chapter" data-level="8.2.18" data-path="flow.html"><a href="flow.html#chord-diagram-from-adjacency-matrix-1"><i class="fa fa-check"></i><b>8.2.18</b> Chord Diagram from Adjacency Matrix</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="flow.html"><a href="flow.html#edge-bundling"><i class="fa fa-check"></i><b>8.3</b> Edge Bundling</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="flow.html"><a href="flow.html#hierarchical-edge-bundling"><i class="fa fa-check"></i><b>8.3.1</b> Hierarchical Edge Bundling</a></li>
<li class="chapter" data-level="8.3.2" data-path="flow.html"><a href="flow.html#introduction-to-hierarchical-edge-bundling-with-r"><i class="fa fa-check"></i><b>8.3.2</b> Introduction to Hierarchical Edge Bundling with R</a></li>
<li class="chapter" data-level="8.3.3" data-path="flow.html"><a href="flow.html#add-a-few-connections"><i class="fa fa-check"></i><b>8.3.3</b> Add a Few Connections</a></li>
<li class="chapter" data-level="8.3.4" data-path="flow.html"><a href="flow.html#hierarchical-edge-bundling-1"><i class="fa fa-check"></i><b>8.3.4</b> Hierarchical Edge Bundling</a></li>
<li class="chapter" data-level="8.3.5" data-path="flow.html"><a href="flow.html#customize-hierarchical-edge-bundling"><i class="fa fa-check"></i><b>8.3.5</b> Customize Hierarchical Edge Bundling</a></li>
<li class="chapter" data-level="8.3.6" data-path="flow.html"><a href="flow.html#playing-with-tension"><i class="fa fa-check"></i><b>8.3.6</b> Playing with <code>tension</code></a></li>
<li class="chapter" data-level="8.3.7" data-path="flow.html"><a href="flow.html#connection-features"><i class="fa fa-check"></i><b>8.3.7</b> Connection Features</a></li>
<li class="chapter" data-level="8.3.8" data-path="flow.html"><a href="flow.html#node-features"><i class="fa fa-check"></i><b>8.3.8</b> Node Features</a></li>
<li class="chapter" data-level="8.3.9" data-path="flow.html"><a href="flow.html#without-labels"><i class="fa fa-check"></i><b>8.3.9</b> Without Labels</a></li>
<li class="chapter" data-level="8.3.10" data-path="flow.html"><a href="flow.html#create-the-labels"><i class="fa fa-check"></i><b>8.3.10</b> Create the Labels</a></li>
<li class="chapter" data-level="8.3.11" data-path="flow.html"><a href="flow.html#plot-the-labels"><i class="fa fa-check"></i><b>8.3.11</b> Plot the Labels</a></li>
<li class="chapter" data-level="8.3.12" data-path="flow.html"><a href="flow.html#with-customization"><i class="fa fa-check"></i><b>8.3.12</b> With Customization</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="flow.html"><a href="flow.html#network-graph"><i class="fa fa-check"></i><b>8.4</b> Network Graph</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="flow.html"><a href="flow.html#network-chart-with-r-and-igraph-from-any-type-of-input"><i class="fa fa-check"></i><b>8.4.1</b> Network Chart with R and igraph from any Type of Input</a></li>
<li class="chapter" data-level="8.4.2" data-path="flow.html"><a href="flow.html#incidence-matrix"><i class="fa fa-check"></i><b>8.4.2</b> Incidence Matrix</a></li>
<li class="chapter" data-level="8.4.3" data-path="flow.html"><a href="flow.html#edge-list"><i class="fa fa-check"></i><b>8.4.3</b> Edge List</a></li>
<li class="chapter" data-level="8.4.4" data-path="flow.html"><a href="flow.html#literal-list-of-connections"><i class="fa fa-check"></i><b>8.4.4</b> Literal List of Connections</a></li>
<li class="chapter" data-level="8.4.5" data-path="flow.html"><a href="flow.html#default-network-chart-with-igraph"><i class="fa fa-check"></i><b>8.4.5</b> Default Network Chart with <code>igraph</code></a></li>
<li class="chapter" data-level="8.4.6" data-path="flow.html"><a href="flow.html#customize-node-features"><i class="fa fa-check"></i><b>8.4.6</b> Customize Node Features</a></li>
<li class="chapter" data-level="8.4.7" data-path="flow.html"><a href="flow.html#customize-label-features"><i class="fa fa-check"></i><b>8.4.7</b> Customize Label Features</a></li>
<li class="chapter" data-level="8.4.8" data-path="flow.html"><a href="flow.html#customize-link-features"><i class="fa fa-check"></i><b>8.4.8</b> Customize Link Features</a></li>
<li class="chapter" data-level="8.4.9" data-path="flow.html"><a href="flow.html#all-customization"><i class="fa fa-check"></i><b>8.4.9</b> All Customization</a></li>
<li class="chapter" data-level="8.4.10" data-path="flow.html"><a href="flow.html#network-layouts"><i class="fa fa-check"></i><b>8.4.10</b> Network Layouts</a></li>
<li class="chapter" data-level="8.4.11" data-path="flow.html"><a href="flow.html#map-variable-to-node-and-links-feature-in-r-igraph-network"><i class="fa fa-check"></i><b>8.4.11</b> Map Variable to Node and Links Feature in R <code>igraph</code> Network</a></li>
<li class="chapter" data-level="8.4.12" data-path="flow.html"><a href="flow.html#map-variable-to-link-features"><i class="fa fa-check"></i><b>8.4.12</b> Map Variable to Link Features</a></li>
<li class="chapter" data-level="8.4.13" data-path="flow.html"><a href="flow.html#clustering-result-visualization-with-network-diagram"><i class="fa fa-check"></i><b>8.4.13</b> Clustering Result Visualization with Network Diagram</a></li>
<li class="chapter" data-level="8.4.14" data-path="flow.html"><a href="flow.html#basic-network-diagram"><i class="fa fa-check"></i><b>8.4.14</b> Basic Network Diagram</a></li>
<li class="chapter" data-level="8.4.15" data-path="ranking.html"><a href="ranking.html#customization-1"><i class="fa fa-check"></i><b>8.4.15</b> Customization</a></li>
<li class="chapter" data-level="8.4.16" data-path="flow.html"><a href="flow.html#customize-link-features-1"><i class="fa fa-check"></i><b>8.4.16</b> Customize Link Features</a></li>
<li class="chapter" data-level="8.4.17" data-path="flow.html"><a href="flow.html#all-customization-1"><i class="fa fa-check"></i><b>8.4.17</b> All Customization</a></li>
<li class="chapter" data-level="8.4.18" data-path="flow.html"><a href="flow.html#network-with-node-size-based-on-edge-number"><i class="fa fa-check"></i><b>8.4.18</b> Network with Node Size Based on Edge Number</a></li>
<li class="chapter" data-level="8.4.19" data-path="flow.html"><a href="flow.html#most-basic-network-diagram"><i class="fa fa-check"></i><b>8.4.19</b> Most Basic Network Diagram</a></li>
<li class="chapter" data-level="8.4.20" data-path="flow.html"><a href="flow.html#interactive-network-customization"><i class="fa fa-check"></i><b>8.4.20</b> Interactive Network Customization</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="flow.html"><a href="flow.html#sankey-diagram"><i class="fa fa-check"></i><b>8.5</b> Sankey Diagram</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="flow.html"><a href="flow.html#most-basic-sankey-diagram"><i class="fa fa-check"></i><b>8.5.1</b> Most Basic Sankey Diagram</a></li>
<li class="chapter" data-level="8.5.2" data-path="flow.html"><a href="flow.html#from-incidence-matrix"><i class="fa fa-check"></i><b>8.5.2</b> From Incidence Matrix</a></li>
<li class="chapter" data-level="8.5.3" data-path="flow.html"><a href="flow.html#customize-colors-in-sankey-diagram"><i class="fa fa-check"></i><b>8.5.3</b> Customize Colors in Sankey Diagram</a></li>
<li class="chapter" data-level="8.5.4" data-path="flow.html"><a href="flow.html#set-color-for-groups-of-nodes"><i class="fa fa-check"></i><b>8.5.4</b> Set Color for Groups of Nodes</a></li>
<li class="chapter" data-level="8.5.5" data-path="flow.html"><a href="flow.html#set-color-of-connections"><i class="fa fa-check"></i><b>8.5.5</b> Set Color of Connections</a></li>
<li class="chapter" data-level="8.5.6" data-path="flow.html"><a href="flow.html#sankey-diagram-interactive"><i class="fa fa-check"></i><b>8.5.6</b> Sankey Diagram Interactive</a></li>
<li class="chapter" data-level="8.5.7" data-path="flow.html"><a href="flow.html#what-for"><i class="fa fa-check"></i><b>8.5.7</b> What For</a></li>
<li class="chapter" data-level="8.5.8" data-path="flow.html"><a href="flow.html#variation"><i class="fa fa-check"></i><b>8.5.8</b> Variation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="general.html"><a href="general.html"><i class="fa fa-check"></i><b>9</b> General Knowledge</a>
<ul>
<li class="chapter" data-level="9.1" data-path="distributions.html"><a href="distributions.html#ggplot2"><i class="fa fa-check"></i><b>9.1</b> <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="correlation.html"><a href="correlation.html#add-text-labels-with-ggplot2"><i class="fa fa-check"></i><b>9.1.1</b> Add Text Labels with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.2" data-path="correlation.html"><a href="correlation.html#add-labels-with-geom_label"><i class="fa fa-check"></i><b>9.1.2</b> Add Labels with <code>geom_label()</code></a></li>
<li class="chapter" data-level="9.1.3" data-path="correlation.html"><a href="correlation.html#add-one-text-label-only"><i class="fa fa-check"></i><b>9.1.3</b> Add One Text Label Only</a></li>
<li class="chapter" data-level="9.1.4" data-path="correlation.html"><a href="correlation.html#add-labels-for-a-selection-of-marker"><i class="fa fa-check"></i><b>9.1.4</b> Add Labels for a Selection of Marker</a></li>
<li class="chapter" data-level="9.1.5" data-path="general.html"><a href="general.html#how-to-annotate-a-plot-in-ggplot2"><i class="fa fa-check"></i><b>9.1.5</b> How to Annotate a Plot in <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.6" data-path="general.html"><a href="general.html#adding-text-with-geom_text-or-geom_label"><i class="fa fa-check"></i><b>9.1.6</b> Adding text with <code>geom_text()</code> or <code>geom_label()</code></a></li>
<li class="chapter" data-level="9.1.7" data-path="general.html"><a href="general.html#add-shapes-with-annotate"><i class="fa fa-check"></i><b>9.1.7</b> Add Shapes with <code>annotate()</code></a></li>
<li class="chapter" data-level="9.1.8" data-path="general.html"><a href="general.html#add-ablines-with-geom_hline-and-geom_vline"><i class="fa fa-check"></i><b>9.1.8</b> Add Ablines with <code>geom_hline()</code> and <code>geom_vline()</code></a></li>
<li class="chapter" data-level="9.1.9" data-path="general.html"><a href="general.html#add-a-point-and-a-range-with-pointrange"><i class="fa fa-check"></i><b>9.1.9</b> Add a Point and a Range with <code>pointrange()</code></a></li>
<li class="chapter" data-level="9.1.10" data-path="general.html"><a href="general.html#marginal-plot"><i class="fa fa-check"></i><b>9.1.10</b> Marginal Plot</a></li>
<li class="chapter" data-level="9.1.11" data-path="distributions.html"><a href="distributions.html#marginal-distribution-with-ggplot2-and-ggextra"><i class="fa fa-check"></i><b>9.1.11</b> Marginal Distribution with <code>ggplot2</code> and <code>ggExtra</code></a></li>
<li class="chapter" data-level="9.1.12" data-path="distributions.html"><a href="distributions.html#more-customization"><i class="fa fa-check"></i><b>9.1.12</b> More Customization</a></li>
<li class="chapter" data-level="9.1.13" data-path="general.html"><a href="general.html#ggplot2-chart-appearance"><i class="fa fa-check"></i><b>9.1.13</b> <code>ggplot2</code> Chart Appearance</a></li>
<li class="chapter" data-level="9.1.14" data-path="general.html"><a href="general.html#set-axis-title-and-limits-with-xlab-and-xlim"><i class="fa fa-check"></i><b>9.1.14</b> Set Axis Title and Limits with <code>xlab()</code> and <code>xlim()</code></a></li>
<li class="chapter" data-level="9.1.15" data-path="general.html"><a href="general.html#customize-axis-title-appearance-axis.title"><i class="fa fa-check"></i><b>9.1.15</b> Customize Axis Title Appearance: <code>axis.title</code></a></li>
<li class="chapter" data-level="9.1.16" data-path="general.html"><a href="general.html#customize-axis-labels-axis.text"><i class="fa fa-check"></i><b>9.1.16</b> Customize Axis Labels: <code>axis.text</code></a></li>
<li class="chapter" data-level="9.1.17" data-path="general.html"><a href="general.html#customize-axis-ticks-and-axis-line-with-axis.ticks-and-axis.line"><i class="fa fa-check"></i><b>9.1.17</b> Customize Axis Ticks and Axis Line with <code>axis.ticks()</code> and <code>axis.line()</code></a></li>
<li class="chapter" data-level="9.1.18" data-path="general.html"><a href="general.html#background-manipulation-with-r-and-ggplot2"><i class="fa fa-check"></i><b>9.1.18</b> Background Manipulation with R and ggplot2</a></li>
<li class="chapter" data-level="9.1.19" data-path="general.html"><a href="general.html#background-color-plot.background-and-panel.background"><i class="fa fa-check"></i><b>9.1.19</b> Background Color: <code>plot.background</code> and <code>panel.background</code></a></li>
<li class="chapter" data-level="9.1.20" data-path="general.html"><a href="general.html#customize-the-grid-panel.grid.major-and-panel.grid.minor"><i class="fa fa-check"></i><b>9.1.20</b> Customize the Grid: <code>panel.grid.major</code> and <code>panel.grid.minor</code></a></li>
<li class="chapter" data-level="9.1.21" data-path="general.html"><a href="general.html#building-a-nice-legend-with-r-and-ggplot2"><i class="fa fa-check"></i><b>9.1.21</b> Building a Nice Legend with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.22" data-path="general.html"><a href="general.html#change-legend-title-with-labs"><i class="fa fa-check"></i><b>9.1.22</b> Change Legend Title with <code>labs()</code></a></li>
<li class="chapter" data-level="9.1.23" data-path="general.html"><a href="general.html#get-rid-of-the-legend-guides-and-theme"><i class="fa fa-check"></i><b>9.1.23</b> Get Rid of the Legend: <code>guides()</code> and <code>theme()</code></a></li>
<li class="chapter" data-level="9.1.24" data-path="general.html"><a href="general.html#control-legend-position-with-legend.position"><i class="fa fa-check"></i><b>9.1.24</b> Control Legend Position with <code>legend.position</code></a></li>
<li class="chapter" data-level="9.1.25" data-path="general.html"><a href="general.html#legend-appearance"><i class="fa fa-check"></i><b>9.1.25</b> Legend Appearance</a></li>
<li class="chapter" data-level="9.1.26" data-path="distributions.html"><a href="distributions.html#reorder-a-variable-with-ggplot2"><i class="fa fa-check"></i><b>9.1.26</b> Reorder a Variable with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.27" data-path="ranking.html"><a href="ranking.html#method-1-the-forecats-library"><i class="fa fa-check"></i><b>9.1.27</b> Method 1: the <code>Forecats</code> library</a></li>
<li class="chapter" data-level="9.1.28" data-path="distributions.html"><a href="distributions.html#method-2-using-dplyr-only"><i class="fa fa-check"></i><b>9.1.28</b> Method 2: Using <code>dplyr</code> Only</a></li>
<li class="chapter" data-level="9.1.29" data-path="distributions.html"><a href="distributions.html#method-3-the-reorder-function-of-base-r"><i class="fa fa-check"></i><b>9.1.29</b> Method 3: the <code>reorder()</code> function of Base R</a></li>
<li class="chapter" data-level="9.1.30" data-path="general.html"><a href="general.html#ggplot2-title"><i class="fa fa-check"></i><b>9.1.30</b> <code>ggplot2</code> Title</a></li>
<li class="chapter" data-level="9.1.31" data-path="general.html"><a href="general.html#title-on-several-lines"><i class="fa fa-check"></i><b>9.1.31</b> Title on Several Lines</a></li>
<li class="chapter" data-level="9.1.32" data-path="general.html"><a href="general.html#title-appearance-and-position"><i class="fa fa-check"></i><b>9.1.32</b> Title Appearance and Position</a></li>
<li class="chapter" data-level="9.1.33" data-path="general.html"><a href="general.html#customize-a-specific-word-only"><i class="fa fa-check"></i><b>9.1.33</b> Customize a Specific Word Only</a></li>
<li class="chapter" data-level="9.1.34" data-path="general.html"><a href="general.html#small-multiples-facet_wrap-and-facet_grid"><i class="fa fa-check"></i><b>9.1.34</b> Small Multiples: <code>facet_wrap()</code> and <code>facet_grid()</code></a></li>
<li class="chapter" data-level="9.1.35" data-path="general.html"><a href="general.html#faceting-with-ggplot2"><i class="fa fa-check"></i><b>9.1.35</b> Faceting with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.36" data-path="general.html"><a href="general.html#faceting-with-facet_wrap"><i class="fa fa-check"></i><b>9.1.36</b> Faceting with <code>facet_wrap()</code></a></li>
<li class="chapter" data-level="9.1.37" data-path="general.html"><a href="general.html#facet_grid"><i class="fa fa-check"></i><b>9.1.37</b> <code>facet_grid()</code></a></li>
<li class="chapter" data-level="9.1.38" data-path="general.html"><a href="general.html#customize-small-multiple-appearance-with-ggplot2"><i class="fa fa-check"></i><b>9.1.38</b> Customize Small Multiple Appearance with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.39" data-path="general.html"><a href="general.html#multiple-ggplot2-charts-on-a-single-page"><i class="fa fa-check"></i><b>9.1.39</b> Multiple ggplot2 Charts on a Single Page</a></li>
<li class="chapter" data-level="9.1.40" data-path="general.html"><a href="general.html#plotly-turn-your-ggplot-interactive"><i class="fa fa-check"></i><b>9.1.40</b> <code>Plotly</code>: Turn your <code>ggplot</code> Interactive</a></li>
<li class="chapter" data-level="9.1.41" data-path="general.html"><a href="general.html#an-overview-of-ggplot2-possibilities"><i class="fa fa-check"></i><b>9.1.41</b> An Overview of <code>ggplot2</code> Possibilities</a></li>
<li class="chapter" data-level="9.1.42" data-path="distributions.html"><a href="distributions.html#boxplot-with-individual-data-points"><i class="fa fa-check"></i><b>9.1.42</b> Boxplot with Individual Data Points</a></li>
<li class="chapter" data-level="9.1.43" data-path="correlation.html"><a href="correlation.html#map-a-variable-to-marker-feature-in-ggplot2-scatterplot"><i class="fa fa-check"></i><b>9.1.43</b> Map a Variable to Marker Feature in <code>ggplot2</code> Scatterplot</a></li>
<li class="chapter" data-level="9.1.44" data-path="correlation.html"><a href="correlation.html#basic-example"><i class="fa fa-check"></i><b>9.1.44</b> Basic Example</a></li>
<li class="chapter" data-level="9.1.45" data-path="correlation.html"><a href="correlation.html#works-with-any-aesthetics"><i class="fa fa-check"></i><b>9.1.45</b> Works with any Aesthetics</a></li>
<li class="chapter" data-level="9.1.46" data-path="correlation.html"><a href="correlation.html#mapping-to-several-features"><i class="fa fa-check"></i><b>9.1.46</b> Mapping to Several Features</a></li>
<li class="chapter" data-level="9.1.47" data-path="general.html"><a href="general.html#bubble-plot-with-ggplot2"><i class="fa fa-check"></i><b>9.1.47</b> Bubble Plot with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.48" data-path="correlation.html"><a href="correlation.html#control-circle-size-with-scale_size"><i class="fa fa-check"></i><b>9.1.48</b> Control Circle Size with <code>scale_size()</code></a></li>
<li class="chapter" data-level="9.1.49" data-path="correlation.html"><a href="correlation.html#add-a-fourth-dimension-color"><i class="fa fa-check"></i><b>9.1.49</b> Add a Fourth Dimension: Color</a></li>
<li class="chapter" data-level="9.1.50" data-path="correlation.html"><a href="correlation.html#make-it-pretty"><i class="fa fa-check"></i><b>9.1.50</b> Make it Pretty</a></li>
<li class="chapter" data-level="9.1.51" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-with-r-and-ggplot2"><i class="fa fa-check"></i><b>9.1.51</b> Connected Scatterplot with R and <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.52" data-path="correlation.html"><a href="correlation.html#customize-the-connected-scatterplot"><i class="fa fa-check"></i><b>9.1.52</b> Customize the Connected Scatterplot</a></li>
<li class="chapter" data-level="9.1.53" data-path="correlation.html"><a href="correlation.html#connected-scatterplot-to-show-an-evolution"><i class="fa fa-check"></i><b>9.1.53</b> Connected Scatterplot to Show an Evolution</a></li>
<li class="chapter" data-level="9.1.54" data-path="ranking.html"><a href="ranking.html#parallel-coordinates-chart-with-ggally"><i class="fa fa-check"></i><b>9.1.54</b> Parallel Coordinates Chart with <code>ggally</code></a></li>
<li class="chapter" data-level="9.1.55" data-path="ranking.html"><a href="ranking.html#custom-color-theme-general-appearance"><i class="fa fa-check"></i><b>9.1.55</b> Custom Color, Theme, General Appearance</a></li>
<li class="chapter" data-level="9.1.56" data-path="ranking.html"><a href="ranking.html#scaling"><i class="fa fa-check"></i><b>9.1.56</b> Scaling</a></li>
<li class="chapter" data-level="9.1.57" data-path="ranking.html"><a href="ranking.html#highlight-a-group"><i class="fa fa-check"></i><b>9.1.57</b> Highlight a Group</a></li>
<li class="chapter" data-level="9.1.58" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-conditional-color"><i class="fa fa-check"></i><b>9.1.58</b> Lollipop Chart with Conditional Color</a></li>
<li class="chapter" data-level="9.1.59" data-path="ranking.html"><a href="ranking.html#marker"><i class="fa fa-check"></i><b>9.1.59</b> Marker</a></li>
<li class="chapter" data-level="9.1.60" data-path="ranking.html"><a href="ranking.html#lollipop-chart-with-2-groups"><i class="fa fa-check"></i><b>9.1.60</b> Lollipop Chart with 2 Groups</a></li>
<li class="chapter" data-level="9.1.61" data-path="ranking.html"><a href="ranking.html#circular-barplot-with-groups"><i class="fa fa-check"></i><b>9.1.61</b> Circular Barplot with Groups</a></li>
<li class="chapter" data-level="9.1.62" data-path="ranking.html"><a href="ranking.html#add-a-gap-in-the-circle"><i class="fa fa-check"></i><b>9.1.62</b> Add a Gap in the Circle</a></li>
<li class="chapter" data-level="9.1.63" data-path="ranking.html"><a href="ranking.html#space-between-groups"><i class="fa fa-check"></i><b>9.1.63</b> Space between Groups</a></li>
<li class="chapter" data-level="9.1.64" data-path="ranking.html"><a href="ranking.html#order-bars"><i class="fa fa-check"></i><b>9.1.64</b> Order Bars</a></li>
<li class="chapter" data-level="9.1.65" data-path="ranking.html"><a href="ranking.html#circular-barchart-customization"><i class="fa fa-check"></i><b>9.1.65</b> Circular Barchart Customization</a></li>
<li class="chapter" data-level="9.1.66" data-path="evolution.html"><a href="evolution.html#what-is-stacking"><i class="fa fa-check"></i><b>9.1.66</b> What is Stacking</a></li>
<li class="chapter" data-level="9.1.67" data-path="general.html"><a href="general.html#example-optical-illusion"><i class="fa fa-check"></i><b>9.1.67</b> Example: Optical Illusion</a></li>
<li class="chapter" data-level="9.1.68" data-path="evolution.html"><a href="evolution.html#workaround"><i class="fa fa-check"></i><b>9.1.68</b> Workaround</a></li>
<li class="chapter" data-level="9.1.69" data-path="evolution.html"><a href="evolution.html#basic-stacked-area-chart-with-r"><i class="fa fa-check"></i><b>9.1.69</b> Basic Stacked area Chart with R</a></li>
<li class="chapter" data-level="9.1.70" data-path="evolution.html"><a href="evolution.html#most-basic-stacked-area-with-ggplot2"><i class="fa fa-check"></i><b>9.1.70</b> Most Basic Stacked Area with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.71" data-path="evolution.html"><a href="evolution.html#control-stacking-order-with-ggplot2"><i class="fa fa-check"></i><b>9.1.71</b> Control Stacking Order with <code>ggplot2</code></a></li>
<li class="chapter" data-level="9.1.72" data-path="evolution.html"><a href="evolution.html#proportional-stacked-area-chart"><i class="fa fa-check"></i><b>9.1.72</b> Proportional Stacked Area Chart</a></li>
<li class="chapter" data-level="9.1.73" data-path="evolution.html"><a href="evolution.html#color-style"><i class="fa fa-check"></i><b>9.1.73</b> Color &amp; Style</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="general.html"><a href="general.html#data-art"><i class="fa fa-check"></i><b>9.2</b> Data Art</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="general.html"><a href="general.html#using-r-and-ggplot2-for-data-art."><i class="fa fa-check"></i><b>9.2.1</b> Using R and ggplot2 for Data Art.</a></li>
<li class="chapter" data-level="9.2.2" data-path="general.html"><a href="general.html#random-shapes"><i class="fa fa-check"></i><b>9.2.2</b> Random Shapes</a></li>
<li class="chapter" data-level="9.2.3" data-path="general.html"><a href="general.html#r-snail"><i class="fa fa-check"></i><b>9.2.3</b> R Snail</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="general.html"><a href="general.html#animation"><i class="fa fa-check"></i><b>9.3</b> Animation</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="general.html"><a href="general.html#animated-bubble-chart-with-r-and-gganimate"><i class="fa fa-check"></i><b>9.3.1</b> Animated Bubble Chart with R and <code>gganimate</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="general.html"><a href="general.html#animated-bubble-chart"><i class="fa fa-check"></i><b>9.3.2</b> Animated Bubble Chart</a></li>
<li class="chapter" data-level="9.3.3" data-path="general.html"><a href="general.html#use-small-multiple"><i class="fa fa-check"></i><b>9.3.3</b> Use Small Multiple</a></li>
<li class="chapter" data-level="9.3.4" data-path="general.html"><a href="general.html#smooth-barplot-transition"><i class="fa fa-check"></i><b>9.3.4</b> Smooth Barplot Transition</a></li>
<li class="chapter" data-level="9.3.5" data-path="general.html"><a href="general.html#progressive-line-chart-rendering"><i class="fa fa-check"></i><b>9.3.5</b> Progressive Line Chart Rendering</a></li>
<li class="chapter" data-level="9.3.6" data-path="general.html"><a href="general.html#concatenate-.png-images-with-image-magick"><i class="fa fa-check"></i><b>9.3.6</b> Concatenate <code>.png</code> Images with <code>Image Magick</code></a></li>
<li class="chapter" data-level="9.3.7" data-path="general.html"><a href="general.html#most-basic-animation-with-r-and-image-magick"><i class="fa fa-check"></i><b>9.3.7</b> Most Basic Animation with R and Image Magick</a></li>
<li class="chapter" data-level="9.3.8" data-path="general.html"><a href="general.html#animated-3d-chart-with-r"><i class="fa fa-check"></i><b>9.3.8</b> Animated 3d Chart with R</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="general.html"><a href="general.html#d-charts"><i class="fa fa-check"></i><b>9.4</b> 3D Charts</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="general.html"><a href="general.html#d-surface-plot-with-r-and-plotly"><i class="fa fa-check"></i><b>9.4.1</b> 3d Surface Plot with R and <code>plotly</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="general.html"><a href="general.html#building-a-3d-knot-with-r-and-rgl"><i class="fa fa-check"></i><b>9.4.2</b> Building a 3D Knot with R and <code>rgl</code></a></li>
<li class="chapter" data-level="9.4.3" data-path="general.html"><a href="general.html#nifty-graph-a-3d-imitation-with-r"><i class="fa fa-check"></i><b>9.4.3</b> Nifty Graph: A 3d Imitation with R</a></li>
<li class="chapter" data-level="9.4.4" data-path="general.html"><a href="general.html#animated-3d-chart-with-r-1"><i class="fa fa-check"></i><b>9.4.4</b> Animated 3d Chart with R</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="general.html"><a href="general.html#interactive-charts"><i class="fa fa-check"></i><b>9.5</b> Interactive Charts</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="evolution.html"><a href="evolution.html#streamgraph-with-dropdown-button"><i class="fa fa-check"></i><b>9.5.1</b> Streamgraph with Dropdown Button</a></li>
<li class="chapter" data-level="9.5.2" data-path="general.html"><a href="general.html#interactive-chord-diagram-with-r"><i class="fa fa-check"></i><b>9.5.2</b> Interactive Chord Diagram with R</a></li>
<li class="chapter" data-level="9.5.3" data-path="general.html"><a href="general.html#interactive-network-chart-with-r"><i class="fa fa-check"></i><b>9.5.3</b> Interactive Network Chart with R</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="general.html"><a href="general.html#caveats"><i class="fa fa-check"></i><b>9.6</b> Caveats</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/kyle-w-brown" target="blank">Kyle W. Brown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-Gallery-Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="evolution" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Evolution</h1>
<hr />
<div class="figure" style="text-align: center"><span id="fig:percent-stacked-evolution-intro-image"></span>
<img src="https://www.r-graph-gallery.com/136-stacked-area-chart_files/figure-html/thecode3-1.png" alt="Multi Group Line Chart with Ggplot2" width="50%" />
<p class="caption">
Figure 6.1: Multi Group Line Chart with Ggplot2
</p>
</div>
<div id="area-chart" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Area Chart</h2>
<hr />
<p>An <a href="https://www.data-to-viz.com/graph/area.html">area chart</a> represents the evolution of a numeric variable. It is very close to a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a>. This section displays many examples build with R and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. Have a look to data-to-viz.com if want to learn more about <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> theory.</p>
<div id="note-on-area-chart" class="section level4" number="6.1.0.1">
<h4><span class="header-section-number">6.1.0.1</span> Note on Area Chart</h4>
<p>This section is tightly linked with other sections. A <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> is the same but doesnt fill the surface between the line and the X axis. A <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">connected scatterplot</a> is almost the same thing, but each observation is represented as a dot. More generally, the <a href="https://www.r-graph-gallery.com/time-series.html">time series</a> section can interest you.</p>
</div>
<div id="step-by-step-with-ggplot2" class="section level4" number="6.1.0.2">
<h4><span class="header-section-number">6.1.0.2</span> Step by Step with <code>ggplot2</code></h4>
<p><code>ggplot2</code> allows to draw line charts thanks to the <code>geom_line()</code> function. It expects as input a data frame with 2 numeric variables, one displayed on each axis. Start your journey with the <a href="https://www.r-graph-gallery.com/line-chart-ggplot2.html">most basic line chart</a>.</p>
</div>
<div id="area-chart-with-r-and-ggplot2" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Area Chart with R and <code>ggplot2</code></h3>
<p>This section is a step by step introduction to <a href="https://www.r-graph-gallery.com/area-chart.html">area chart</a> with <code>R</code> and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. It provides several reproducible examples with explanation and R code.</p>
<div id="basic-line-chart-with-ggplot2-and-geom_line" class="section level4" number="6.1.1.1">
<h4><span class="header-section-number">6.1.1.1</span> Basic Line Chart with <code>ggplot2</code> and <code>geom_line()</code></h4>
<p>An <a href="https://www.r-graph-gallery.com/area-chart.html">area chart</a> displays the evolution of one or several numeric variables. Data points are usually connected by straight line segments, and the area between the X axis and the line is filled. See <a href="https://www.data-to-viz.com/graph/line.html">data-to-viz</a> for a more in-depth definition.</p>
<p>As for a line chart, the input data frame requires at least 2 columns:</p>
<ul>
<li>An <em>ordered</em> numeric variable for the X axis</li>
<li>Another numeric variable for the Y axis</li>
</ul>
<p>Once the data is read by ggplot2 and those 2 variables are specified in the x and y arguments of the <code>aes()</code>, just call the <code>geom_area()</code> function.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="evolution.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb375-2"><a href="evolution.html#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb375-3"><a href="evolution.html#cb375-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb375-4"><a href="evolution.html#cb375-4" aria-hidden="true" tabindex="-1"></a>xValue <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span></span>
<span id="cb375-5"><a href="evolution.html#cb375-5" aria-hidden="true" tabindex="-1"></a>yValue <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>))</span>
<span id="cb375-6"><a href="evolution.html#cb375-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(xValue,yValue)</span>
<span id="cb375-7"><a href="evolution.html#cb375-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb375-8"><a href="evolution.html#cb375-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>xValue, <span class="at">y=</span>yValue)) <span class="sc">+</span></span>
<span id="cb375-9"><a href="evolution.html#cb375-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/area-chart-evolution-1.png" width="672" /></p>
</div>
</div>
<div id="customize-the-line-chart" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Customize the Line Chart</h3>
<p>Several options are available to customize the area chart appearance:</p>
<ul>
<li>Add a title with <code>ggtitle()</code>.</li>
<li>Change line style with arguments like <code>shape</code>, <code>size</code>, <code>color</code> and more.</li>
<li>Add transparency to the filled region with opacity</li>
<li>Custom the general theme with the <code>theme_ipsum()</code> function of the <code>hrbrthemes</code> package.</li>
<li>Highlight the top line with <code>geom_line()</code></li>
<li>If not too many observation, show individual data points with <code>geom_point()</code></li>
</ul>
<p>More generally, visit the <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2 section</a> for more ggplot2 related stuff.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="evolution.html#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb376-2"><a href="evolution.html#cb376-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb376-3"><a href="evolution.html#cb376-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb376-4"><a href="evolution.html#cb376-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb376-5"><a href="evolution.html#cb376-5" aria-hidden="true" tabindex="-1"></a>xValue <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb376-6"><a href="evolution.html#cb376-6" aria-hidden="true" tabindex="-1"></a>yValue <span class="ot">&lt;-</span> <span class="fu">abs</span>(<span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>)))</span>
<span id="cb376-7"><a href="evolution.html#cb376-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(xValue,yValue)</span>
<span id="cb376-8"><a href="evolution.html#cb376-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb376-9"><a href="evolution.html#cb376-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>xValue, <span class="at">y=</span>yValue)) <span class="sc">+</span></span>
<span id="cb376-10"><a href="evolution.html#cb376-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>( <span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">alpha=</span><span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb376-11"><a href="evolution.html#cb376-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb376-12"><a href="evolution.html#cb376-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb376-13"><a href="evolution.html#cb376-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb376-14"><a href="evolution.html#cb376-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Evolution of something&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/area-chart-evolution-customize-1.png" width="672" /></p>
</div>
<div id="basic-stacked-area-chart-with-r" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Basic Stacked Area Chart with R</h3>
<p>This post provides the basics concerning <a href="https://www.r-graph-gallery.com/stacked-area-graph.html">stacked area chart</a> with R and <code>ggplot2</code>. It takes into account several input format types and show how to customize the output.</p>
<div id="most-basic-stacked-area-with-ggplot2" class="section level4" number="6.1.3.1">
<h4><span class="header-section-number">6.1.3.1</span> Most Basic Stacked Area with <code>ggplot2</code></h4>
<p>The data frame used as input to build a <a href="https://www.r-graph-gallery.com/stacked-area-graph.html">stacked area chart</a> requires 3 columns:</p>
<ul>
<li><code>x</code>: Numeric variable used for the X axis, often it is a time.</li>
<li><code>y</code>: Numeric variable used for the Y axis. What are we looking at?</li>
<li><code>group</code>: One shape will be done per group.</li>
</ul>
<p>The chart is built using the <code>geom_area()</code> function.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="evolution.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="cb377-2"><a href="evolution.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb377-3"><a href="evolution.html#cb377-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb377-4"><a href="evolution.html#cb377-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb377-5"><a href="evolution.html#cb377-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb377-6"><a href="evolution.html#cb377-6" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">7</span>),<span class="at">each=</span><span class="dv">7</span>))  <span class="co"># x Axis</span></span>
<span id="cb377-7"><a href="evolution.html#cb377-7" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">49</span>, <span class="dv">10</span>, <span class="dv">100</span>)               <span class="co"># y Axis</span></span>
<span id="cb377-8"><a href="evolution.html#cb377-8" aria-hidden="true" tabindex="-1"></a>group <span class="ot">&lt;-</span> <span class="fu">rep</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>],<span class="at">times=</span><span class="dv">7</span>)        <span class="co"># group, one shape per group</span></span>
<span id="cb377-9"><a href="evolution.html#cb377-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(time, value, group)</span>
<span id="cb377-10"><a href="evolution.html#cb377-10" aria-hidden="true" tabindex="-1"></a><span class="co"># stacked area chart</span></span>
<span id="cb377-11"><a href="evolution.html#cb377-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb377-12"><a href="evolution.html#cb377-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-basic-1.png" width="672" /></p>
</div>
</div>
<div id="control-stacking-order-with-ggplot2" class="section level3" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> Control Stacking Order with <code>ggplot2</code></h3>
<p>The gallery offers a section dedicated to <a href="https://www.r-graph-gallery.com/267-reorder-a-variable-in-ggplot2.html">reordering with ggplot2</a>. This step can be tricky but the code below shows how to:</p>
<ul>
<li>Give a specific order with the <code>factor()</code> function.</li>
<li>Order alphabetically using <code>sort()</code>.</li>
<li>Order following values at a specific data.</li>
</ul>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="evolution.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Give a specific order:</span></span>
<span id="cb378-2"><a href="evolution.html#cb378-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>group , <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;C&quot;</span>) )</span>
<span id="cb378-3"><a href="evolution.html#cb378-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot again</span></span>
<span id="cb378-4"><a href="evolution.html#cb378-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb378-5"><a href="evolution.html#cb378-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-stacking-order-1.png" width="672" /></p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="evolution.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: you can also sort levels alphabetically:</span></span>
<span id="cb379-2"><a href="evolution.html#cb379-2" aria-hidden="true" tabindex="-1"></a>myLevels <span class="ot">&lt;-</span> <span class="fu">levels</span>(data<span class="sc">$</span>group)</span>
<span id="cb379-3"><a href="evolution.html#cb379-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>group , <span class="at">levels=</span><span class="fu">sort</span>(myLevels) )</span>
<span id="cb379-4"><a href="evolution.html#cb379-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: sort followinig values at time = 5</span></span>
<span id="cb379-5"><a href="evolution.html#cb379-5" aria-hidden="true" tabindex="-1"></a>myLevels <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb379-6"><a href="evolution.html#cb379-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time<span class="sc">==</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb379-7"><a href="evolution.html#cb379-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(value)</span>
<span id="cb379-8"><a href="evolution.html#cb379-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>group , <span class="at">levels=</span>myLevels<span class="sc">$</span>group )</span></code></pre></div>
</div>
<div id="proportional-stacked-area-chart" class="section level3" number="6.1.5">
<h3><span class="header-section-number">6.1.5</span> Proportional Stacked Area Chart</h3>
<p>In a proportional stacked area graph, the sum of each year is always equal to hundred and value of each group is represented through percentages.</p>
<p>To make it, you have to calculate these percentages first. This can be done using <code>dplyr</code> of with <code>base R</code>.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="evolution.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentages with dplyr</span></span>
<span id="cb380-2"><a href="evolution.html#cb380-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb380-3"><a href="evolution.html#cb380-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data  <span class="sc">%&gt;%</span></span>
<span id="cb380-4"><a href="evolution.html#cb380-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(time, group) <span class="sc">%&gt;%</span></span>
<span id="cb380-5"><a href="evolution.html#cb380-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb380-6"><a href="evolution.html#cb380-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span>
<span id="cb380-7"><a href="evolution.html#cb380-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb380-8"><a href="evolution.html#cb380-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>percentage, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb380-9"><a href="evolution.html#cb380-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">alpha=</span><span class="fl">0.6</span> , <span class="at">size=</span><span class="dv">1</span>, <span class="at">colour=</span><span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-proportional-1.png" width="672" /></p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="evolution.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: compute percentages without dplyr:</span></span>
<span id="cb381-2"><a href="evolution.html#cb381-2" aria-hidden="true" tabindex="-1"></a>my_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(vec){ </span>
<span id="cb381-3"><a href="evolution.html#cb381-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>(vec[<span class="dv">2</span>]) <span class="sc">/</span> <span class="fu">sum</span>(data<span class="sc">$</span>value[data<span class="sc">$</span>time<span class="sc">==</span>vec[<span class="dv">1</span>]]) <span class="sc">*</span><span class="dv">100</span> </span>
<span id="cb381-4"><a href="evolution.html#cb381-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb381-5"><a href="evolution.html#cb381-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>percentage <span class="ot">&lt;-</span> <span class="fu">apply</span>(data , <span class="dv">1</span> , my_fun)</span></code></pre></div>
</div>
<div id="color-style" class="section level3" number="6.1.6">
<h3><span class="header-section-number">6.1.6</span> Color &amp; Style</h3>
<p>Lets improve the chart general appearance:</p>
<ul>
<li>Usage of the <code>viridis</code> color scale.</li>
<li><code>theme_ipsum</code> of the hrbrthemes package.</li>
<li>Add title with <code>ggtitle</code>.</li>
</ul>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="evolution.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb382-2"><a href="evolution.html#cb382-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb382-3"><a href="evolution.html#cb382-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb382-4"><a href="evolution.html#cb382-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb382-5"><a href="evolution.html#cb382-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb382-6"><a href="evolution.html#cb382-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">alpha=</span><span class="fl">0.6</span> , <span class="at">size=</span>.<span class="dv">5</span>, <span class="at">colour=</span><span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb382-7"><a href="evolution.html#cb382-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> T) <span class="sc">+</span></span>
<span id="cb382-8"><a href="evolution.html#cb382-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span> </span>
<span id="cb382-9"><a href="evolution.html#cb382-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;The race between ...&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-color-and-style-1.png" width="672" /></p>
</div>
<div id="stacking-area-charts" class="section level3" number="6.1.7">
<h3><span class="header-section-number">6.1.7</span> Stacking Area Charts</h3>
<div id="what-is-stacking" class="section level4" number="6.1.7.1">
<h4><span class="header-section-number">6.1.7.1</span> What is Stacking</h4>
<p><code>Stacking</code> is a process where a chart is broken up across more than one categoric variables which make up the whole. Each item of the categoric variable is represented by a shaded area. These areas are stacked on top of one another.</p>
<p>Here is an example with a <a href="https://www.data-to-viz.com/graph/stackedarea.html">stacked area chart</a>. It shows the evolution of baby name occurence in the US between 1880 and 2015. Six first names are represented on top of one another.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="evolution.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb383-2"><a href="evolution.html#cb383-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb383-3"><a href="evolution.html#cb383-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb383-4"><a href="evolution.html#cb383-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb383-5"><a href="evolution.html#cb383-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb383-6"><a href="evolution.html#cb383-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb383-7"><a href="evolution.html#cb383-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb383-8"><a href="evolution.html#cb383-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb383-9"><a href="evolution.html#cb383-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb383-10"><a href="evolution.html#cb383-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Amanda&quot;</span>, <span class="st">&quot;Jessica&quot;</span>,    <span class="st">&quot;Patricia&quot;</span>, <span class="st">&quot;Deborah&quot;</span>,   <span class="st">&quot;Dorothy&quot;</span>,  <span class="st">&quot;Helen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb383-11"><a href="evolution.html#cb383-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb383-12"><a href="evolution.html#cb383-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb383-13"><a href="evolution.html#cb383-13" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb383-14"><a href="evolution.html#cb383-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">fill=</span>name, <span class="at">text=</span>name)) <span class="sc">+</span></span>
<span id="cb383-15"><a href="evolution.html#cb383-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>( ) <span class="sc">+</span></span>
<span id="cb383-16"><a href="evolution.html#cb383-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb383-17"><a href="evolution.html#cb383-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb383-18"><a href="evolution.html#cb383-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb383-19"><a href="evolution.html#cb383-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb383-20"><a href="evolution.html#cb383-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb383-21"><a href="evolution.html#cb383-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip=</span><span class="st">&quot;text&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-ba9faf321fd602410db7" style="width:480px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba9faf321fd602410db7">{"x":{"data":[{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[767,742,976,1025,1182,1351,1526,1710,2276,2324,2823,3024,3613,4137,4792,5217,5822,6072,6982,6816,8970,7517,8789,9323,10128,10904,11702,12761,14389,15780,18174,21052,29350,34217,42763,57076,61300,64687,70088,67694,74367,77430,74236,75503,78312,75951,72241,71993,69163,66289,66276,60847,59588,55605,56554,55387,54159,55258,55196,55815,58269,62042,65304,65119,60367,58060,70656,79275,77489,84057,94022,114996,118461,117968,117989,111757,103698,91237,81704,74906,67070,62214,57960,54683,53197,47931,43143,37987,33902,32268,30792,28561,24602,22989,25274,25422,29303,35352,35920,37373,42974,51408,54162,53414,53337,55675,59599,62538,57774,54044,52605,49100,43561,39788,36510,31967,28048,24589,21636,19580,18850,16836,14638,12955,12045,10609,9223,7998,6846,5758,4974,4389,4113,3770,3733,3443,3378,3182,4136,4374,4465,4784,4837,5343,5800,6630,7713,9287,11039,12579,14698,16724,18294,20771,23802,27402,29322,32548,36831,42022,48317,55227,60598,68594,77989,87013,90872,97229,104324,100126,94730,87244,87167,88375,85782,78792,69300,56439,53631,44894,38077,32750,28614,28783,32693,34342,35084,36335,40647,45471,49580,54473,55718,58908,63271,68047,75764,82499,91904,104340,112210,118416,118396,118879,115404,94402,84390,77795,79585,70930,58340,60605,65403,65599,62265,58487,56000,55388,55434,54351,55599,56743,55804,59801,61056,66472,66498,69410,72227,72551,76261,78653,75865,74577,77822,74746,68073,70485,65132,61721,57488,43138,34563,29660,21332,18452,16051,14649,13046,11962,11215,10422,9570,9090,7834,9347,7142,7353,6426,6189,5648,5210,4524,4068,3395,3215,2737,2680,2048,1896,1690,1519,1312,1264,1005,1008,767],"text":"Amanda","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(68,1,84,1)","hoveron":"points","name":"Amanda","legendgroup":"Amanda","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[755,728,961,1009,1169,1341,1516,1695,2250,2312,2799,3009,3597,4113,4774,5204,5804,6049,6961,6805,8944,7496,8768,9302,10105,10886,11677,12740,14364,15754,18141,21016,29318,34175,42701,56970,61210,64598,69996,67624,74285,77336,74165,75385,78187,75869,72125,71902,69033,66128,66111,60689,59381,55362,56274,55107,53859,54936,54786,55372,57799,61434,64628,64332,59074,56597,68185,73437,66244,64849,64958,72946,68636,65780,63306,59440,55867,51167,48769,45354,41806,38122,35063,33622,33891,30848,26893,23981,21616,21079,20943,19888,18328,18007,20929,22009,26311,32675,33441,35193,41037,49502,52319,51808,51869,54274,58315,61334,56718,52968,51511,48085,42642,38992,35771,31308,27414,23951,21083,19056,18304,16346,14164,12534,11618,10184,8799,7626,6491,5412,4620,4057,3776,3440,3361,3095,3029,2829,3182,3378,3443,3733,3770,4113,4389,4974,5758,6846,7998,9223,10609,12045,12955,14638,16836,18850,19580,21636,24589,28048,31967,36510,39788,43561,49100,52605,54044,57774,62538,59599,55675,53337,53414,54162,51408,42974,37373,35920,35352,29303,25422,25274,22989,24602,28561,30792,32268,33902,37987,43143,47931,53197,54683,57960,62214,67070,74906,81704,91237,103698,111757,117989,117968,118461,114996,94022,84057,77489,79275,70656,58060,60367,65119,65304,62042,58269,55815,55196,55258,54159,55387,56554,55605,59588,60847,66276,66289,69163,71993,72241,75951,78312,75503,74236,77430,74367,67694,70088,64687,61300,57076,42763,34217,29350,21052,18174,15780,14389,12761,11702,10904,10128,9323,8789,7517,8970,6816,6982,6072,5822,5217,4792,4137,3613,3024,2823,2324,2276,1710,1526,1351,1182,1025,976,742,767,755],"text":"Deborah","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(65,68,135,1)","hoveron":"points","name":"Deborah","legendgroup":"Deborah","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[643,619,846,868,1006,1145,1286,1423,1877,1935,2341,2443,2971,3292,3722,4077,4438,4577,5290,5118,6453,5323,6061,6224,6628,6949,7351,7773,8661,9501,10823,12147,16673,19501,23919,31816,33793,35747,37964,35890,37642,38250,36449,36341,38190,37299,35510,35911,35303,34650,35704,34167,34408,33315,34991,35704,36191,38364,38439,40201,42922,46871,49596,49543,45694,44272,55387,60687,54920,54442,55406,63856,60022,57626,55512,52201,49010,44768,43229,40117,36730,33394,30989,29830,30356,27888,24227,21665,19532,19302,19144,18264,17054,16833,19830,21035,25328,31741,32528,34304,40142,48714,51490,51049,51188,53555,57686,60720,56110,52348,50915,47587,42132,38516,35329,30932,27064,23636,20771,18721,17991,16027,13901,12243,11329,9950,8534,7364,6249,5186,4378,3779,3499,3105,2977,2698,2577,2331,2829,3029,3095,3361,3440,3776,4057,4620,5412,6491,7626,8799,10184,11618,12534,14164,16346,18304,19056,21083,23951,27414,31308,35771,38992,42642,48085,51511,52968,56718,61334,58315,54274,51869,51808,52319,49502,41037,35193,33441,32675,26311,22009,20929,18007,18328,19888,20943,21079,21616,23981,26893,30848,33891,33622,35063,38122,41806,45354,48769,51167,55867,59440,63306,65780,68636,72946,64958,64849,66244,73437,68185,56597,59074,64332,64628,61434,57799,55372,54786,54936,53859,55107,56274,55362,59381,60689,66111,66128,69033,71902,72125,75869,78187,75385,74165,77336,74285,67624,69996,64598,61210,56970,42701,34175,29318,21016,18141,15754,14364,12740,11677,10886,10105,9302,8768,7496,8944,6805,6961,6049,5804,5204,4774,4113,3597,3009,2799,2312,2250,1695,1516,1341,1169,1009,961,728,755,643],"text":"Dorothy","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(42,120,142,1)","hoveron":"points","name":"Dorothy","legendgroup":"Dorothy","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[7,7,8,6,20,11,19,18,30,26,29,26,35,43,46,54,46,58,60,70,110,76,94,95,140,138,175,194,222,251,344,346,540,613,698,950,1131,1496,1816,2184,2545,3429,3942,4851,6999,8129,8625,10592,12369,13666,15790,16507,18034,18672,20891,22923,23957,26910,27605,29783,32723,36982,39581,39744,37000,35971,46536,51708,46616,46736,48347,56907,53553,51508,49568,46607,43734,39751,38465,35741,32661,29538,27402,26490,27261,25084,21779,19509,17650,17445,17429,16824,15811,15701,18690,19978,24385,30748,31603,33426,39232,47817,50614,50205,50330,52746,56920,59904,55336,51491,50053,46814,41305,37648,34480,30096,26164,22824,19939,17880,17101,15143,13026,11460,10468,8990,7585,6433,5364,4360,3675,3049,2727,2366,2175,1933,1762,1573,2331,2577,2698,2977,3105,3499,3779,4378,5186,6249,7364,8534,9950,11329,12243,13901,16027,17991,18721,20771,23636,27064,30932,35329,38516,42132,47587,50915,52348,56110,60720,57686,53555,51188,51049,51490,48714,40142,34304,32528,31741,25328,21035,19830,16833,17054,18264,19144,19302,19532,21665,24227,27888,30356,29830,30989,33394,36730,40117,43229,44768,49010,52201,55512,57626,60022,63856,55406,54442,54920,60687,55387,44272,45694,49543,49596,46871,42922,40201,38439,38364,36191,35704,34991,33315,34408,34167,35704,34650,35303,35911,35510,37299,38190,36341,36449,38250,37642,35890,37964,35747,33793,31816,23919,19501,16673,12147,10823,9501,8661,7773,7351,6949,6628,6224,6061,5323,6453,5118,5290,4577,4438,4077,3722,3292,2971,2443,2341,1935,1877,1423,1286,1145,1006,868,846,619,643,7],"text":"Helen","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(34,168,132,1)","hoveron":"points","name":"Helen","legendgroup":"Helen","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1883,1882,1881,1880,1880],"y":[0,0,0,0,6,5,8,10,12,17,11,12,21,28,36,35,37,49,47,56,87,68,85,79,124,121,157,177,205,233,316,325,504,588,656,895,1078,1441,1760,2144,2502,3381,3902,4799,6958,8095,8590,10553,12333,13624,15752,16468,17990,18629,20845,22876,23914,26838,27555,29706,32662,36901,39454,39623,36876,35839,46296,51278,46134,46330,47945,56441,53101,51013,49144,46221,43328,39275,37936,35219,32102,28870,26537,25369,26090,23555,20112,17748,15810,14953,13406,11464,9601,8475,8036,7050,6017,5905,5500,5650,5309,5285,5168,4923,4475,4400,4246,3913,3798,3606,3578,3417,2951,2660,2363,2161,1970,1781,1704,1532,1392,1223,1113,1012,997,879,775,725,629,564,479,429,395,419,379,348,383,302,1573,1762,1933,2175,2366,2727,3049,3675,4360,5364,6433,7585,8990,10468,11460,13026,15143,17101,17880,19939,22824,26164,30096,34480,37648,41305,46814,50053,51491,55336,59904,56920,52746,50330,50205,50614,47817,39232,33426,31603,30748,24385,19978,18690,15701,15811,16824,17429,17445,17650,19509,21779,25084,27261,26490,27402,29538,32661,35741,38465,39751,43734,46607,49568,51508,53553,56907,48347,46736,46616,51708,46536,35971,37000,39744,39581,36982,32723,29783,27605,26910,23957,22923,20891,18672,18034,16507,15790,13666,12369,10592,8625,8129,6999,4851,3942,3429,2545,2184,1816,1496,1131,950,698,613,540,346,344,251,222,194,175,138,140,95,94,76,110,70,60,58,46,54,46,43,35,26,29,26,30,18,19,11,20,6,8,7,7,0],"text":"Jessica","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(122,209,81,1)","hoveron":"points","name":"Jessica","legendgroup":"Jessica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2017,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920,1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909,1908,1907,1906,1905,1904,1903,1902,1901,1900,1899,1898,1897,1896,1895,1894,1893,1892,1891,1890,1889,1888,1887,1886,1885,1884,1884],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,302,383,348,379,419,395,429,479,564,629,725,775,879,997,1012,1113,1223,1392,1532,1704,1781,1970,2161,2363,2660,2951,3417,3578,3606,3798,3913,4246,4400,4475,4923,5168,5285,5309,5650,5500,5905,6017,7050,8036,8475,9601,11464,13406,14953,15810,17748,20112,23555,26090,25369,26537,28870,32102,35219,37936,39275,43328,46221,49144,51013,53101,56441,47945,46330,46134,51278,46296,35839,36876,39623,39454,36901,32662,29706,27555,26838,23914,22876,20845,18629,17990,16468,15752,13624,12333,10553,8590,8095,6958,4799,3902,3381,2502,2144,1760,1441,1078,895,656,588,504,325,316,233,205,177,157,121,124,79,85,68,87,56,47,49,37,35,36,28,21,12,11,17,12,10,8,5,6,0],"text":"Patricia","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(253,231,37,1)","hoveron":"points","name":"Patricia","legendgroup":"Patricia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":79.760896637609,"r":39.8505603985056,"b":70.9007887090079,"l":101.452885014529},"font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":15.2760481527605},"title":{"text":"<b> Popularity of American names in the previous 30 years <\/b>","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":23.9103362391034},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1873.15,2023.85],"tickmode":"array","ticktext":["1880","1920","1960","2000"],"tickvals":[1880,1920,1960,2000],"categoryorder":"array","categoryarray":["1880","1920","1960","2000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.81901203819012,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Arial Narrow","size":15.2760481527605},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"y","title":{"text":"year","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":11.9551681195517}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5943.95,124822.95],"tickmode":"array","ticktext":["0","25000","50000","75000","100000"],"tickvals":[0,25000,50000,75000,100000],"categoryorder":"array","categoryarray":["0","25000","50000","75000","100000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.81901203819012,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Arial Narrow","size":15.2760481527605},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"x","title":{"text":"n","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":11.9551681195517}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":12.2208385222084}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"1e94126e5f98":{"x":{},"y":{},"fill":{},"text":{},"type":"scatter"}},"cur_data":"1e94126e5f98","visdat":{"1e94126e5f98":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="heaven-or-hell" class="section level4" number="6.1.7.2">
<h4><span class="header-section-number">6.1.7.2</span> Heaven or Hell?</h4>
<p>The efficiency of stacked area graph is discussed and it must be used with care. To put it in a nutshell:</p>
<ul>
<li><p>Stacked graphs are <code>appropriate</code> to study the <code>evolution of the whole</code> and the <code>relative proportions</code> of each group. Indeed, the top of the areas allows to visualize how the whole behaves, like for a classic area chart. In the previous graphic, it is easy to see that in 1920, Helen and Dorothy were common names but the 4 other names barely existed.</p></li>
<li><p>However, they are <code>not appropriate</code> to study the <code>evolution of each</code> individual group. This is due to 2 main reasons. First, all except the since they do not have a flat <code>baseline</code>, it is very hard to read their values at each tile stamp.</p></li>
</ul>
</div>
</div>
<div id="example-mental-arithmetic" class="section level3" number="6.1.8">
<h3><span class="header-section-number">6.1.8</span> Example: Mental Arithmetic</h3>
<p>In the previous graphic, try to find out how many times the name Dorothy was given in 1920.</p>
<p>It is not trivial to find it out using the previous chart. You have to mentally do 75000 - 37000 which is hard. If you want to convey a message efficiently, you dont want the audience to perform mental arithmetic.</p>
<div id="example-optical-illusion." class="section level4" number="6.1.8.1">
<h4><span class="header-section-number">6.1.8.1</span> Example: Optical Illusion.</h4>
<blockquote>
<p>Important note: this section is inspired from this post by Dr.Drang.
Dr Drang gives this nice example. Consider the graphic below, and try to visualize how the 3 categories evolved on the period:</p>
</blockquote>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="evolution.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dummy data</span></span>
<span id="cb384-2"><a href="evolution.html#cb384-2" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb384-3"><a href="evolution.html#cb384-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">2000</span>,<span class="dv">2005</span>), <span class="dv">3</span>),</span>
<span id="cb384-4"><a href="evolution.html#cb384-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(  <span class="dv">75</span>, <span class="dv">73</span>, <span class="dv">68</span>, <span class="dv">57</span>, <span class="dv">36</span>, <span class="dv">0</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">80</span>),</span>
<span id="cb384-5"><a href="evolution.html#cb384-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">each=</span><span class="dv">6</span>)</span>
<span id="cb384-6"><a href="evolution.html#cb384-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb384-7"><a href="evolution.html#cb384-7" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb384-8"><a href="evolution.html#cb384-8" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span> </span>
<span id="cb384-9"><a href="evolution.html#cb384-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span></span>
<span id="cb384-10"><a href="evolution.html#cb384-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>( ) <span class="sc">+</span></span>
<span id="cb384-11"><a href="evolution.html#cb384-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb384-12"><a href="evolution.html#cb384-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb384-13"><a href="evolution.html#cb384-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb384-14"><a href="evolution.html#cb384-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-stacking-2-1.png" width="672" /></p>
<p>It looks obvious that the yellow category increased, the purple decreased, and the green. is harder to read. At a first glance it looks like it is slightly decreasing I would say.</p>
<p>Now lets plot just the green group to find out:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="evolution.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb385-2"><a href="evolution.html#cb385-2" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span> </span>
<span id="cb385-3"><a href="evolution.html#cb385-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">&quot;B&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb385-4"><a href="evolution.html#cb385-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>value, <span class="at">fill=</span>group)) <span class="sc">+</span></span>
<span id="cb385-5"><a href="evolution.html#cb385-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>( <span class="at">fill=</span><span class="st">&quot;#22908C&quot;</span>) <span class="sc">+</span></span>
<span id="cb385-6"><a href="evolution.html#cb385-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb385-7"><a href="evolution.html#cb385-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb385-8"><a href="evolution.html#cb385-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-stacking-3-1.png" width="672" /></p>
</div>
<div id="workaround" class="section level4" number="6.1.8.2">
<h4><span class="header-section-number">6.1.8.2</span> Workaround</h4>
<p>If you have just a <code>few categories</code>, I would suggest to build a line chart. Here it is easy to follow a category and understand how it evolved accurately.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="evolution.html#cb386-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb386-2"><a href="evolution.html#cb386-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>name)) <span class="sc">+</span></span>
<span id="cb386-3"><a href="evolution.html#cb386-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb386-4"><a href="evolution.html#cb386-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb386-5"><a href="evolution.html#cb386-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb386-6"><a href="evolution.html#cb386-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb386-7"><a href="evolution.html#cb386-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-stacking-4-1.png" width="672" /></p>
<p>However, this solution is not suitable if you have <code>many categories</code>. Indeed, it would result in a spaghetti chart that is very hard to read. You can read more about this here.</p>
<p>Instead I would suggest to use `small multiple: here each category has its own section in the graphic. It makes easy to understand the pattern of each category.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="evolution.html#cb387-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb387-2"><a href="evolution.html#cb387-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb387-3"><a href="evolution.html#cb387-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>() <span class="sc">+</span></span>
<span id="cb387-4"><a href="evolution.html#cb387-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb387-5"><a href="evolution.html#cb387-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb387-6"><a href="evolution.html#cb387-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb387-7"><a href="evolution.html#cb387-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb387-8"><a href="evolution.html#cb387-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb387-9"><a href="evolution.html#cb387-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb387-10"><a href="evolution.html#cb387-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb387-11"><a href="evolution.html#cb387-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb387-12"><a href="evolution.html#cb387-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb387-13"><a href="evolution.html#cb387-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>name, <span class="at">scale=</span><span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/stacked-area-evolution-stacking-5-1.png" width="672" /></p>
</div>
<div id="going-further" class="section level4" number="6.1.8.3">
<h4><span class="header-section-number">6.1.8.3</span> Going Further</h4>
<ul>
<li>Stacked Area Graphs Are Not Your Friend by <a href="http://www.everydayanalytics.ca/2014/08/stacked-area-graphs-are-not-your-friend.html">Everyday analytics</a>.</li>
<li>Quantitative Displays for Combining Time-Series and Part-to-Whole Relationships by <a href="http://www.perceptualedge.com/articles/visual_business_intelligence/displays_for_combining_time-series_and_part-to-whole.pdf">Stephen Few</a>.</li>
<li>I hate stacked area charts by <a href="http://www.leancrew.com/all-this/2011/11/i-hate-stacked-area-charts/">Dr Drang</a>.</li>
</ul>
</div>
</div>
<div id="interactive-area-chart-with-r-and-plotly" class="section level3" number="6.1.9">
<h3><span class="header-section-number">6.1.9</span> Interactive Area Chart with R and plotly</h3>
<p>The <code>plotly</code> package allows to build interactive charts directly from R. Here is a application to <a href="https://www.r-graph-gallery.com/area-chart.html">area chart</a>, using both the <code>plot_ly()</code> and <code>ggplotly()</code> functions.</p>
<p>The <code>ggplotly()</code> function of the <code>plotly</code> library makes it a breeze to build an interactive version. Try to hover circles to get a tooltip, or select an area of interest for zooming. Double click to reinitialize.</p>
</div>
<div id="basic-line-chart-with-ggplot2-and-geom_line-1" class="section level3" number="6.1.10">
<h3><span class="header-section-number">6.1.10</span> Basic Line Chart with ggplot2 and <code>geom_line()</code></h3>
<p>Base R also allows to build area charts thanks to the <code>polygon()</code> function. This functions requires 2 inputs: x and y.</p>
<p>Note that extreme values of both are added at the beginning and at the end of each vectors to make sure the polygon is closed.</p>
<p>This section describes how to build an area chart using base R and the <code>polygon()</code> function. See the area chart section for a ggplot2 implementation.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="evolution.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb388-2"><a href="evolution.html#cb388-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb388-3"><a href="evolution.html#cb388-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>), </span>
<span id="cb388-4"><a href="evolution.html#cb388-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y=</span><span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">15</span>),<span class="dv">10</span>)</span>
<span id="cb388-5"><a href="evolution.html#cb388-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb388-6"><a href="evolution.html#cb388-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Add line on top</span></span>
<span id="cb388-7"><a href="evolution.html#cb388-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( data<span class="sc">$</span>x , data<span class="sc">$</span>y , <span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.1</span>,<span class="fl">0.5</span>,<span class="fl">0.9</span>) , <span class="at">type=</span><span class="st">&quot;o&quot;</span> , <span class="at">lwd=</span><span class="dv">3</span> , <span class="at">xlab=</span><span class="st">&quot;&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;size&quot;</span> , <span class="at">pch=</span><span class="dv">20</span>)</span>
<span id="cb388-8"><a href="evolution.html#cb388-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill the area</span></span>
<span id="cb388-9"><a href="evolution.html#cb388-9" aria-hidden="true" tabindex="-1"></a><span class="fu">polygon</span>( </span>
<span id="cb388-10"><a href="evolution.html#cb388-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fu">min</span>(data<span class="sc">$</span>x), data<span class="sc">$</span>x , <span class="fu">max</span>(data<span class="sc">$</span>x)) , </span>
<span id="cb388-11"><a href="evolution.html#cb388-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>( <span class="fu">min</span>(data<span class="sc">$</span>y) , data<span class="sc">$</span>y , <span class="fu">min</span>(data<span class="sc">$</span>y)) , </span>
<span id="cb388-12"><a href="evolution.html#cb388-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.1</span>,<span class="fl">0.5</span>,<span class="fl">0.2</span>) , <span class="at">border=</span>F</span>
<span id="cb388-13"><a href="evolution.html#cb388-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/line-chart-ggplot-evolution-basic-1.png" width="672" /></p>
</div>
</div>
<div id="line-chart" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Line Chart</h2>
<hr />
<p>This is the <a href="https://www.data-to-viz.com/graph/line.html">line chart</a> section of the gallery. If you want to know more about this kind of chart, visit <a href="https://www.data-to-viz.com/graph/line.html">data-to-viz.com</a>. If youre looking for a simple way to implement it in R, pick an example below.</p>
<div id="note-on-line-chart" class="section level4" number="6.2.0.1">
<h4><span class="header-section-number">6.2.0.1</span> Note on Line Chart</h4>
<p>This section is tightly linked with other sections. A <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">connected scatterplot</a> is almost the same thing, but each observation is represented as a dot. An <a href="https://www.r-graph-gallery.com/area-chart.html">area chart</a> fills the surface between the line and the X axis. More generally, the <a href="https://www.r-graph-gallery.com/time-series.html">time series</a> section can interest you.</p>
</div>
<div id="step-by-step-with-ggplot2-1" class="section level4" number="6.2.0.2">
<h4><span class="header-section-number">6.2.0.2</span> Step by Step with <code>ggplot2</code></h4>
<p><code>ggplot2</code> allows to draw line charts thanks to the <code>geom_line()</code> function. It expects as input a data frame with 2 numeric variables, one displayed on each axis. Start your journey with the <a href="https://www.r-graph-gallery.com/line-chart-ggplot2.html">most basic line chart</a>.</p>
</div>
<div id="line-chart-with-r-and-ggplot2" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Line Chart with R and <code>ggplot2</code></h3>
<p>This section is a step by step introduction to <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> with R and ggplot2. It provides several reproducible examples with explanation and <code>R</code> code.</p>
<div id="basic-line-chart-with-ggplot2-and-geom_line-2" class="section level4" number="6.2.1.1">
<h4><span class="header-section-number">6.2.1.1</span> Basic Line Chart with <code>ggplot2</code> and <code>geom_line()</code></h4>
<p>A <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> or <a href="https://www.r-graph-gallery.com/line-plot.html">line graph</a> displays the evolution of one or several numeric variables. Data points are usually connected by straight line segments. You read an extensive definition <a href="https://www.data-to-viz.com/graph/line.html">here</a>.</p>
<p>The input data frame requires at least 2 columns:</p>
<ul>
<li>An <em>ordered</em> numeric variable for the X axis.</li>
<li>Another numeric variable for the Y axis.</li>
</ul>
<p>Once the data is read by ggplot2 and those 2 variables are specified in the <code>x</code> and <code>y</code> arguments of the <code>aes()</code>, just call the <code>geom_line()</code> function.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="evolution.html#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb389-2"><a href="evolution.html#cb389-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb389-3"><a href="evolution.html#cb389-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb389-4"><a href="evolution.html#cb389-4" aria-hidden="true" tabindex="-1"></a>xValue <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb389-5"><a href="evolution.html#cb389-5" aria-hidden="true" tabindex="-1"></a>yValue <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>))</span>
<span id="cb389-6"><a href="evolution.html#cb389-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(xValue,yValue)</span>
<span id="cb389-7"><a href="evolution.html#cb389-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb389-8"><a href="evolution.html#cb389-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>xValue, <span class="at">y=</span>yValue)) <span class="sc">+</span></span>
<span id="cb389-9"><a href="evolution.html#cb389-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-ggplot2_files/figure-html/thecode-1.png" /></p>
</div>
</div>
<div id="customize-the-line-chart-1" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Customize the Line Chart</h3>
<p>Several options are available to customize the line chart appearance:</p>
<ul>
<li>Add a title with <code>ggtitle()</code>.</li>
<li>Change line style with arguments like <code>shape</code>, <code>size</code>, <code>color</code> and more.</li>
<li>Custom the general theme with the <code>theme_ipsum()</code> function of the <code>hrbrthemes</code> package.</li>
</ul>
<p>More generally, visit the <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a> section for more ggplot2 related stuff.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="evolution.html#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb390-2"><a href="evolution.html#cb390-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb390-3"><a href="evolution.html#cb390-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb390-4"><a href="evolution.html#cb390-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb390-5"><a href="evolution.html#cb390-5" aria-hidden="true" tabindex="-1"></a>xValue <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb390-6"><a href="evolution.html#cb390-6" aria-hidden="true" tabindex="-1"></a>yValue <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>))</span>
<span id="cb390-7"><a href="evolution.html#cb390-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(xValue,yValue)</span>
<span id="cb390-8"><a href="evolution.html#cb390-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb390-9"><a href="evolution.html#cb390-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>xValue, <span class="at">y=</span>yValue)) <span class="sc">+</span></span>
<span id="cb390-10"><a href="evolution.html#cb390-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.9</span>, <span class="at">linetype=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb390-11"><a href="evolution.html#cb390-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb390-12"><a href="evolution.html#cb390-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Evolution of something&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-ggplot2_files/figure-html/thecode2-1.png" /></p>
</div>
<div id="connected-scatterplot-with-r-and-ggplot2" class="section level3" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Connected scatterplot with R and ggplot2</h3>
<p>This section explains how to build a basic <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">connected scatterplot</a> with R and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. It provides several reproducible examples with explanation and R code.</p>
</div>
<div id="most-basic-connected-scatterplot-geom_point-and-geom_line" class="section level3" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Most Basic Connected Scatterplot: <code>geom_point()</code> and <code>geom_line()</code></h3>
<p>A <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">connected scatterplot</a> is basically a hybrid between a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> and a <a href="https://www.r-graph-gallery.com/line-plot.html">line plot</a>. Thus, you just have to add a <code>geom_point()</code> on top of the <code>geom_line()</code> to build it.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="evolution.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb391-2"><a href="evolution.html#cb391-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb391-3"><a href="evolution.html#cb391-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb391-4"><a href="evolution.html#cb391-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb391-5"><a href="evolution.html#cb391-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb391-6"><a href="evolution.html#cb391-6" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb391-7"><a href="evolution.html#cb391-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb391-8"><a href="evolution.html#cb391-8" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb391-9"><a href="evolution.html#cb391-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb391-10"><a href="evolution.html#cb391-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb391-11"><a href="evolution.html#cb391-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb391-12"><a href="evolution.html#cb391-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/basic-conntected-scatterplot-geompoint-1.png" width="672" /></p>
</div>
<div id="customize-the-connected-scatterplot" class="section level3" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> Customize the Connected Scatterplot</h3>
<p>Custom the general theme with the <code>theme_ipsum()</code> function of the <code>hrbrthemes</code> package. Add a title with <code>ggtitle()</code>. Custom circle and line with arguments like <code>shape</code>, <code>size</code>, <code>color</code> and more.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="evolution.html#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb392-2"><a href="evolution.html#cb392-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb392-3"><a href="evolution.html#cb392-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb392-4"><a href="evolution.html#cb392-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb392-5"><a href="evolution.html#cb392-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb392-6"><a href="evolution.html#cb392-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb392-7"><a href="evolution.html#cb392-7" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb392-8"><a href="evolution.html#cb392-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb392-9"><a href="evolution.html#cb392-9" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb392-10"><a href="evolution.html#cb392-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb392-11"><a href="evolution.html#cb392-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb392-12"><a href="evolution.html#cb392-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>( <span class="at">color=</span><span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb392-13"><a href="evolution.html#cb392-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">21</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb392-14"><a href="evolution.html#cb392-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb392-15"><a href="evolution.html#cb392-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Evolution of bitcoin price&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode2-1.png" /></p>
</div>
<div id="connected-scatterplot-to-show-an-evolution" class="section level3" number="6.2.6">
<h3><span class="header-section-number">6.2.6</span> Connected Scatterplot to Show an Evolution</h3>
<p>The <a href="https://www.r-graph-gallery.com/connected-scatter.html">connected scatterplot</a> can also be a powerfull technique to tell a story about the evolution of 2 variables. Let???s consider a dataset composed of 3 columns:</p>
<ul>
<li>Year</li>
<li>Number of baby born called Amanda this year</li>
<li>Number of baby born called Ashley</li>
</ul>
<p>The scatterplot beside allows to understand the evolution of these 2 names. Note that the code is pretty different in this case. <code>geom_segment()</code> is used of <code>geom_line()</code>. This is because <code>geom_line()</code> automatically sort data points depending on their X position to link them.</p>
<p>It makes sense to add arrows and labels to guide the reader in the chart:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="evolution.html#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb393-2"><a href="evolution.html#cb393-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb393-3"><a href="evolution.html#cb393-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb393-4"><a href="evolution.html#cb393-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb393-5"><a href="evolution.html#cb393-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb393-6"><a href="evolution.html#cb393-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb393-7"><a href="evolution.html#cb393-7" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb393-8"><a href="evolution.html#cb393-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb393-9"><a href="evolution.html#cb393-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Amanda&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb393-10"><a href="evolution.html#cb393-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb393-11"><a href="evolution.html#cb393-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">&gt;</span><span class="dv">1970</span>) <span class="sc">%&gt;%</span></span>
<span id="cb393-12"><a href="evolution.html#cb393-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, name, n) <span class="sc">%&gt;%</span></span>
<span id="cb393-13"><a href="evolution.html#cb393-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> name, <span class="at">value=</span>n, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb393-14"><a href="evolution.html#cb393-14" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb393-15"><a href="evolution.html#cb393-15" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb393-16"><a href="evolution.html#cb393-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Amanda, <span class="at">y=</span>Ashley, <span class="at">label=</span>year)) <span class="sc">+</span></span>
<span id="cb393-17"><a href="evolution.html#cb393-17" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb393-18"><a href="evolution.html#cb393-18" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_segment</span>(<span class="fu">aes</span>(</span>
<span id="cb393-19"><a href="evolution.html#cb393-19" aria-hidden="true" tabindex="-1"></a>                    <span class="at">xend=</span><span class="fu">c</span>(<span class="fu">tail</span>(Amanda, <span class="at">n=</span><span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>), </span>
<span id="cb393-20"><a href="evolution.html#cb393-20" aria-hidden="true" tabindex="-1"></a>                    <span class="at">yend=</span><span class="fu">c</span>(<span class="fu">tail</span>(Ashley, <span class="at">n=</span><span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>)</span>
<span id="cb393-21"><a href="evolution.html#cb393-21" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb393-22"><a href="evolution.html#cb393-22" aria-hidden="true" tabindex="-1"></a>      ) </span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode3-1.png" style="width:75.0%" />
</center>
</div>
<div id="line-plot-with-log-scale" class="section level3" number="6.2.7">
<h3><span class="header-section-number">6.2.7</span> Line Plot with Log Scale</h3>
<p>This section explaines how to build a line chart with a log scale for its Y axis, using the <code>scale_y_log10()</code> function. It is sometimes useful to use a log scale for a numeric variable. Indeed, it allows to magnify the lower part of the curve.</p>
<p>This is possible thanks to the <code>scale_y_log10()</code> function. Control the horizontal grid lines with <code>breaks</code>, and the axis limits with <code>limits</code>. (Note that 0 is not allowed, since <code>log(0)</code> is not defined.)</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="evolution.html#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb394-2"><a href="evolution.html#cb394-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb394-3"><a href="evolution.html#cb394-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy data</span></span>
<span id="cb394-4"><a href="evolution.html#cb394-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb394-5"><a href="evolution.html#cb394-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span><span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>),</span>
<span id="cb394-6"><a href="evolution.html#cb394-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">y=</span><span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>)<span class="sc">/</span><span class="dv">2</span><span class="sc">+</span><span class="fu">rnorm</span>(<span class="dv">90</span>)</span>
<span id="cb394-7"><a href="evolution.html#cb394-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb394-8"><a href="evolution.html#cb394-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plot</span></span>
<span id="cb394-9"><a href="evolution.html#cb394-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb394-10"><a href="evolution.html#cb394-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb394-11"><a href="evolution.html#cb394-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>( <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">50</span>,<span class="dv">100</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">100</span>) )</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/connected_scatterplot_ggplot2_files/figure-html/thecode4-1.png" style="width:75.0%" />
</center>
</div>
<div id="without-log-transform" class="section level3" number="6.2.8">
<h3><span class="header-section-number">6.2.8</span> Without Log Transform</h3>
<p>This is the same chart without the log transform:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="evolution.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb395-2"><a href="evolution.html#cb395-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb395-3"><a href="evolution.html#cb395-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy data</span></span>
<span id="cb395-4"><a href="evolution.html#cb395-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb395-5"><a href="evolution.html#cb395-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span><span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>),</span>
<span id="cb395-6"><a href="evolution.html#cb395-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">y=</span><span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">100</span>)<span class="sc">/</span><span class="dv">2</span><span class="sc">+</span><span class="fu">rnorm</span>(<span class="dv">90</span>)</span>
<span id="cb395-7"><a href="evolution.html#cb395-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb395-8"><a href="evolution.html#cb395-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plot</span></span>
<span id="cb395-9"><a href="evolution.html#cb395-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb395-10"><a href="evolution.html#cb395-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() </span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-plot-log-scale_files/figure-html/thecode2-1.png" /></p>
</div>
<div id="multi-groups-line-chart-with-ggplot2" class="section level3" number="6.2.9">
<h3><span class="header-section-number">6.2.9</span> Multi Groups Line Chart with ggplot2</h3>
<p>This section explains how to build a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> that represents several groups with <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. It provides several examples with explanation and reproducible code.</p>
<div id="basic-version" class="section level4" number="6.2.9.1">
<h4><span class="header-section-number">6.2.9.1</span> Basic Version</h4>
<p>If youre not familiar with the <code>geom_line()</code> function, you should probably have a look to the <a href="https://www.r-graph-gallery.com/line-chart-ggplot2.html">most basic line chart</a> first.</p>
<p>Here, the input data frame is composed by 3 columns:</p>
<ul>
<li>An <em>ordered</em> numeric variable for the X axis</li>
<li>Another numeric variable for the Y axis</li>
<li>A categorical variable that specify the group of the observation</li>
</ul>
<p>The idea is to draw one line per group. This is doable by specifying a different color to each group with the <code>color</code> argument of <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="evolution.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb396-2"><a href="evolution.html#cb396-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb396-3"><a href="evolution.html#cb396-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames) <span class="co"># provide the dataset: a dataframe called babynames</span></span>
<span id="cb396-4"><a href="evolution.html#cb396-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb396-5"><a href="evolution.html#cb396-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only 3 names</span></span>
<span id="cb396-6"><a href="evolution.html#cb396-6" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb396-7"><a href="evolution.html#cb396-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Patricia&quot;</span>, <span class="st">&quot;Helen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb396-8"><a href="evolution.html#cb396-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb396-9"><a href="evolution.html#cb396-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb396-10"><a href="evolution.html#cb396-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb396-11"><a href="evolution.html#cb396-11" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span></span>
<span id="cb396-12"><a href="evolution.html#cb396-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>name)) <span class="sc">+</span></span>
<span id="cb396-13"><a href="evolution.html#cb396-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/line-chart-several-groups-ggplot2_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
</div>
<div id="customize-the-grouped-line-chart" class="section level3" number="6.2.10">
<h3><span class="header-section-number">6.2.10</span> Customize the Grouped Line Chart</h3>
<p>Several options are available to customize the line chart appearance:</p>
<ul>
<li>Add a title with <code>ggtitle()</code>.</li>
<li>Change line style with arguments like <code>shape</code>, <code>size</code>, <code>color</code> and more.</li>
<li>Use the <code>viridis</code> package to get a nice color palette.</li>
<li>Custom the general theme with the <code>theme_ipsum()</code> function of the <code>hrbrthemes</code> package.</li>
</ul>
<p>More generally, visit the <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2 section</a> for more ggplot2 related stuff.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="evolution.html#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb397-2"><a href="evolution.html#cb397-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb397-3"><a href="evolution.html#cb397-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames) <span class="co"># provide the dataset: a dataframe called babynames</span></span>
<span id="cb397-4"><a href="evolution.html#cb397-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb397-5"><a href="evolution.html#cb397-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb397-6"><a href="evolution.html#cb397-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb397-7"><a href="evolution.html#cb397-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only 3 names</span></span>
<span id="cb397-8"><a href="evolution.html#cb397-8" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb397-9"><a href="evolution.html#cb397-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Patricia&quot;</span>, <span class="st">&quot;Helen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb397-10"><a href="evolution.html#cb397-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb397-11"><a href="evolution.html#cb397-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb397-12"><a href="evolution.html#cb397-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb397-13"><a href="evolution.html#cb397-13" aria-hidden="true" tabindex="-1"></a>don <span class="sc">%&gt;%</span></span>
<span id="cb397-14"><a href="evolution.html#cb397-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>name)) <span class="sc">+</span></span>
<span id="cb397-15"><a href="evolution.html#cb397-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb397-16"><a href="evolution.html#cb397-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb397-17"><a href="evolution.html#cb397-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb397-18"><a href="evolution.html#cb397-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb397-19"><a href="evolution.html#cb397-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Number of babies born&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/line-chart-several-groups-ggplot2_files/figure-html/thecode2-1.png" style="width:75.0%" />
</center>
<div id="notes" class="section level4" number="6.2.10.1">
<h4><span class="header-section-number">6.2.10.1</span> Notes</h4>
<ul>
<li>Read more about line charts theory <a href="https://www.data-to-viz.com/graph/line.html">here</a>.</li>
<li>Be careful: a line chart with too many groups results in a <a href="https://www.data-to-viz.com/caveat/spaghetti.html">spaghetti chart</a>, which is a <a href="https://www.data-to-viz.com/caveats.html">bad practice</a>.</li>
<li>Visit <a href="https://www.data-to-viz.com/">data-to-viz</a> for line chart alternatives.</li>
</ul>
</div>
</div>
<div id="linear-model-and-confidence-interval-in-ggplot2" class="section level3" number="6.2.11">
<h3><span class="header-section-number">6.2.11</span> Linear Model and Confidence Interval in ggplot2</h3>
<p>Display the result of a linear model and its confidence interval on top of a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a>. A <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a> implementation with reproducible code.</p>
<div id="linear-trend" class="section level4" number="6.2.11.1">
<h4><span class="header-section-number">6.2.11.1</span> Linear Trend</h4>
<p>Adding a linear trend to a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> helps the reader in seeing patterns. <code>ggplot2</code> provides the <code>geom_smooth()</code> function that allows to add the linear trend and the confidence interval around it if needed (option <code>se=TRUE</code>).</p>
<p><u>Note</u>: the <code>method</code> argument allows to apply different smoothing method like <code>glm</code>, <code>loess</code> and more. See the <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">doc</a> for more.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="evolution.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb398-2"><a href="evolution.html#cb398-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb398-3"><a href="evolution.html#cb398-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb398-4"><a href="evolution.html#cb398-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy data</span></span>
<span id="cb398-5"><a href="evolution.html#cb398-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb398-6"><a href="evolution.html#cb398-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">cond =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;condition_1&quot;</span>, <span class="st">&quot;condition_2&quot;</span>), <span class="at">each=</span><span class="dv">10</span>), </span>
<span id="cb398-7"><a href="evolution.html#cb398-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">my_x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>,<span class="at">sd=</span><span class="dv">9</span>), </span>
<span id="cb398-8"><a href="evolution.html#cb398-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">my_y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>,<span class="at">sd=</span><span class="dv">16</span>) </span>
<span id="cb398-9"><a href="evolution.html#cb398-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb398-10"><a href="evolution.html#cb398-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic scatter plot.</span></span>
<span id="cb398-11"><a href="evolution.html#cb398-11" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>my_x, <span class="at">y=</span>my_y)) <span class="sc">+</span> </span>
<span id="cb398-12"><a href="evolution.html#cb398-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb398-13"><a href="evolution.html#cb398-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span>
<span id="cb398-14"><a href="evolution.html#cb398-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb398-15"><a href="evolution.html#cb398-15" aria-hidden="true" tabindex="-1"></a><span class="co"># with linear trend</span></span>
<span id="cb398-16"><a href="evolution.html#cb398-16" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>my_x, <span class="at">y=</span>my_y)) <span class="sc">+</span></span>
<span id="cb398-17"><a href="evolution.html#cb398-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb398-18"><a href="evolution.html#cb398-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm , <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb398-19"><a href="evolution.html#cb398-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span>
<span id="cb398-20"><a href="evolution.html#cb398-20" aria-hidden="true" tabindex="-1"></a><span class="co"># linear trend + confidence interval</span></span>
<span id="cb398-21"><a href="evolution.html#cb398-21" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>my_x, <span class="at">y=</span>my_y)) <span class="sc">+</span></span>
<span id="cb398-22"><a href="evolution.html#cb398-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb398-23"><a href="evolution.html#cb398-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm , <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">se=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb398-24"><a href="evolution.html#cb398-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="evolution.html#cb399-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/50-51-52-scatter-plot-with-ggplot2_files/figure-html/unnamed-chunk-1-1.png" /></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="evolution.html#cb400-1" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/50-51-52-scatter-plot-with-ggplot2_files/figure-html/unnamed-chunk-2-1.png" /></p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="evolution.html#cb401-1" aria-hidden="true" tabindex="-1"></a>p3</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/50-51-52-scatter-plot-with-ggplot2_files/figure-html/unnamed-chunk-3-1.png" /></p>
</div>
</div>
<div id="line-chart-annotation-with-ggplot2" class="section level3" number="6.2.12">
<h3><span class="header-section-number">6.2.12</span> Line Chart Annotation with ggplot2</h3>
<p>Annotation is a crucial part of a <a href="https://www.r-graph-gallery.com/time-series.html">time series</a> visual. This section shows how to highlight main parts of a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> with text, circles, lines and more.</p>
<p>The <code>ggplot2</code> package recognizes the <code>date</code> format and automatically uses a specific type of X axis. If the time variable isnt at the <code>date</code> format, this wont work. Always check with <code>str(data)</code> how variables are understood by R. If not read as a date, use <a href="https://www.r-graph-gallery.com/time-series.html">lubridate</a> to convert it. Read more about this <a href="https://www.r-graph-gallery.com/time-series.html">here</a>.</p>
<p>On the chart beside, dates are displayed using a neat format: month + year.</p>
<p><u>Note</u>: the gallery offers a section dedicated to <a href="https://www.r-graph-gallery.com/line-plot.html">line charts</a>.</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="evolution.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb402-2"><a href="evolution.html#cb402-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb402-3"><a href="evolution.html#cb402-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb402-4"><a href="evolution.html#cb402-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb402-5"><a href="evolution.html#cb402-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb402-6"><a href="evolution.html#cb402-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb402-7"><a href="evolution.html#cb402-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb402-8"><a href="evolution.html#cb402-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb402-9"><a href="evolution.html#cb402-9" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb402-10"><a href="evolution.html#cb402-10" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb402-11"><a href="evolution.html#cb402-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb402-12"><a href="evolution.html#cb402-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb402-13"><a href="evolution.html#cb402-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">22000</span>) <span class="sc">+</span></span>
<span id="cb402-14"><a href="evolution.html#cb402-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">x=</span><span class="fu">as.Date</span>(<span class="st">&quot;2017-01-01&quot;</span>), <span class="at">y=</span><span class="dv">20089</span>, </span>
<span id="cb402-15"><a href="evolution.html#cb402-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">label=</span><span class="st">&quot;Bitcoin price reached 20k $</span><span class="sc">\n</span><span class="st">at the end of 2017&quot;</span>) <span class="sc">+</span></span>
<span id="cb402-16"><a href="evolution.html#cb402-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">x=</span><span class="fu">as.Date</span>(<span class="st">&quot;2017-12-17&quot;</span>), <span class="at">y=</span><span class="dv">20089</span>, <span class="at">size=</span><span class="dv">10</span>, <span class="at">shape=</span><span class="dv">21</span>, <span class="at">fill=</span><span class="st">&quot;transparent&quot;</span>) <span class="sc">+</span></span>
<span id="cb402-17"><a href="evolution.html#cb402-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">5000</span>, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, <span class="at">size=</span>.<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb402-18"><a href="evolution.html#cb402-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/line_chart_annotation_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="dual-y-axis-with-r-and-ggplot2" class="section level3" number="6.2.13">
<h3><span class="header-section-number">6.2.13</span> Dual Y Axis with R and <code>ggplot2</code></h3>
<p>This section describes how to build a dual Y axis chart using <code>R</code> and <code>ggplot2</code>. It uses the <code>sec.axis</code> attribute to add the second Y axis. Note that this kind of chart has major <a href="https://www.data-to-viz.com/caveats.html">drawbacks</a>. Use it with care.</p>
<div id="visualizing-2-series-with-r-and-ggplot2" class="section level4" number="6.2.13.1">
<h4><span class="header-section-number">6.2.13.1</span> Visualizing 2 Series with <code>R</code> and <code>ggplot2</code></h4>
<p>Lets consider a dataset with 3 columns:</p>
<ul>
<li><code>date</code></li>
<li>first series to display: fake <code>temperature</code>. Range from 0 to 10.</li>
<li>second series: fake <code>price</code>. Range from 0 to 100.</li>
</ul>
<p>One could easily build 2 line charts to study the evolution of those 2 series using the code below.</p>
<p>But even if strongly <a href="https://www.data-to-viz.com/caveats.html">unadvised</a>, one sometimes wants to display both series on the same chart, thus needing a second Y axis.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="evolution.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb403-2"><a href="evolution.html#cb403-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb403-3"><a href="evolution.html#cb403-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb403-4"><a href="evolution.html#cb403-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork) <span class="co"># To display 2 charts together</span></span>
<span id="cb403-5"><a href="evolution.html#cb403-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb403-6"><a href="evolution.html#cb403-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Build dummy data</span></span>
<span id="cb403-7"><a href="evolution.html#cb403-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb403-8"><a href="evolution.html#cb403-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">day =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-01-01&quot;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">99</span>,</span>
<span id="cb403-9"><a href="evolution.html#cb403-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">temperature =</span> <span class="fu">runif</span>(<span class="dv">100</span>) <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">100</span>)<span class="sc">^</span><span class="fl">2.5</span> <span class="sc">/</span> <span class="dv">10000</span>,</span>
<span id="cb403-10"><a href="evolution.html#cb403-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">runif</span>(<span class="dv">100</span>) <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">100</span>,<span class="dv">1</span>)<span class="sc">^</span><span class="fl">1.5</span> <span class="sc">/</span> <span class="dv">10</span></span>
<span id="cb403-11"><a href="evolution.html#cb403-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb403-12"><a href="evolution.html#cb403-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic line chart</span></span>
<span id="cb403-13"><a href="evolution.html#cb403-13" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>temperature)) <span class="sc">+</span></span>
<span id="cb403-14"><a href="evolution.html#cb403-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb403-15"><a href="evolution.html#cb403-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Temperature: range 1-10&quot;</span>) <span class="sc">+</span></span>
<span id="cb403-16"><a href="evolution.html#cb403-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span>
<span id="cb403-17"><a href="evolution.html#cb403-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb403-18"><a href="evolution.html#cb403-18" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>price)) <span class="sc">+</span></span>
<span id="cb403-19"><a href="evolution.html#cb403-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;grey&quot;</span>,<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb403-20"><a href="evolution.html#cb403-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Price: range 1-100&quot;</span>) <span class="sc">+</span></span>
<span id="cb403-21"><a href="evolution.html#cb403-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span>
<span id="cb403-22"><a href="evolution.html#cb403-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Display both charts side by side thanks to the patchwork package</span></span>
<span id="cb403-23"><a href="evolution.html#cb403-23" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-dual-Y-axis-ggplot2_files/figure-html/thecode-1.png" /></p>
</div>
</div>
<div id="adding-a-second-y-axis-with-sec.axis-the-idea" class="section level3" number="6.2.14">
<h3><span class="header-section-number">6.2.14</span> Adding a Second Y Axis with <code>sec.axis()</code>: The Idea</h3>
<p><code>sec.axis()</code> does not allow to build an entirely new Y axis. It just builds a second Y axis based on the first one, applying a mathematical transformation.</p>
<p>In the example below, the second Y axis simply represents the first one multiplied by 10, thanks to the <code>trans</code> argument that provides the <code>~.*10</code> mathematical statement.</p>
<p>Note that because of that you cant easily control the second axis lower and upper boundaries. Well see a trick below in the tweaking section.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="evolution.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with a usual ggplot2 call:</span></span>
<span id="cb404-2"><a href="evolution.html#cb404-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>temperature)) <span class="sc">+</span></span>
<span id="cb404-3"><a href="evolution.html#cb404-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb404-4"><a href="evolution.html#cb404-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Custom the Y scales:</span></span>
<span id="cb404-5"><a href="evolution.html#cb404-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb404-6"><a href="evolution.html#cb404-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb404-7"><a href="evolution.html#cb404-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb404-8"><a href="evolution.html#cb404-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;First Axis&quot;</span>,</span>
<span id="cb404-9"><a href="evolution.html#cb404-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb404-10"><a href="evolution.html#cb404-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb404-11"><a href="evolution.html#cb404-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>( <span class="at">trans=</span><span class="sc">~</span>.<span class="sc">*</span><span class="dv">10</span>, <span class="at">name=</span><span class="st">&quot;Second Axis&quot;</span>)</span>
<span id="cb404-12"><a href="evolution.html#cb404-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb404-13"><a href="evolution.html#cb404-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb404-14"><a href="evolution.html#cb404-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-dual-Y-axis-ggplot2_files/figure-html/thecode1-1.png" /></p>
</div>
<div id="show-2-series-on-the-same-line-chart-with-sec.axis" class="section level3" number="6.2.15">
<h3><span class="header-section-number">6.2.15</span> Show 2 Series on the Same Line Chart with <code>sec.axis()</code></h3>
<p>We can use this sec.axis mathematical transformation to display 2 series that have a different range.</p>
<p>Since the price has a maximum value that is 10 times biggeer than the maximum temperature:</p>
<ul>
<li>The second Y axis is like the first multiplied by 10 (<code>trans=~.*10</code>).</li>
<li>The value be display in the second variable <code>geom_line()</code> call must be divided by 10 to mimic the range of the first variable.</li>
</ul>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="evolution.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value used to transform the data</span></span>
<span id="cb405-2"><a href="evolution.html#cb405-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb405-3"><a href="evolution.html#cb405-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day)) <span class="sc">+</span></span>
<span id="cb405-4"><a href="evolution.html#cb405-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb405-5"><a href="evolution.html#cb405-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>temperature)) <span class="sc">+</span> </span>
<span id="cb405-6"><a href="evolution.html#cb405-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>price <span class="sc">/</span> coeff)) <span class="sc">+</span> <span class="co"># Divide by 10 to get the same range than the temperature</span></span>
<span id="cb405-7"><a href="evolution.html#cb405-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb405-8"><a href="evolution.html#cb405-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb405-9"><a href="evolution.html#cb405-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb405-10"><a href="evolution.html#cb405-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb405-11"><a href="evolution.html#cb405-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;First Axis&quot;</span>,</span>
<span id="cb405-12"><a href="evolution.html#cb405-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb405-13"><a href="evolution.html#cb405-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb405-14"><a href="evolution.html#cb405-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span>coeff, <span class="at">name=</span><span class="st">&quot;Second Axis&quot;</span>)</span>
<span id="cb405-15"><a href="evolution.html#cb405-15" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-dual-Y-axis-ggplot2_files/figure-html/thecode2-1.png" /></p>
</div>
<div id="dual-y-axis-customization-with-ggplot2" class="section level3" number="6.2.16">
<h3><span class="header-section-number">6.2.16</span> Dual Y Axis Customization with <code>ggplot2</code></h3>
<p>A few usual tricks to make the chart looks better:</p>
<ul>
<li><code>ipsum</code> theme to remove the black background and improve the general style.</li>
<li>Add a title.</li>
<li>Customize the Y axes to pair them with their related line.</li>
</ul>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="evolution.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value used to transform the data</span></span>
<span id="cb406-2"><a href="evolution.html#cb406-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb406-3"><a href="evolution.html#cb406-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A few constants</span></span>
<span id="cb406-4"><a href="evolution.html#cb406-4" aria-hidden="true" tabindex="-1"></a>temperatureColor <span class="ot">&lt;-</span> <span class="st">&quot;#69b3a2&quot;</span></span>
<span id="cb406-5"><a href="evolution.html#cb406-5" aria-hidden="true" tabindex="-1"></a>priceColor <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.9</span>, <span class="dv">1</span>)</span>
<span id="cb406-6"><a href="evolution.html#cb406-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day)) <span class="sc">+</span></span>
<span id="cb406-7"><a href="evolution.html#cb406-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb406-8"><a href="evolution.html#cb406-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>temperature), <span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span>temperatureColor) <span class="sc">+</span> </span>
<span id="cb406-9"><a href="evolution.html#cb406-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>price <span class="sc">/</span> coeff), <span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span>priceColor) <span class="sc">+</span></span>
<span id="cb406-10"><a href="evolution.html#cb406-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb406-11"><a href="evolution.html#cb406-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb406-12"><a href="evolution.html#cb406-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb406-13"><a href="evolution.html#cb406-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb406-14"><a href="evolution.html#cb406-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Temperature (Celsius )&quot;</span>,</span>
<span id="cb406-15"><a href="evolution.html#cb406-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb406-16"><a href="evolution.html#cb406-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb406-17"><a href="evolution.html#cb406-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span>coeff, <span class="at">name=</span><span class="st">&quot;Price ($)&quot;</span>)</span>
<span id="cb406-18"><a href="evolution.html#cb406-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb406-19"><a href="evolution.html#cb406-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb406-20"><a href="evolution.html#cb406-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb406-21"><a href="evolution.html#cb406-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb406-22"><a href="evolution.html#cb406-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> temperatureColor, <span class="at">size=</span><span class="dv">13</span>),</span>
<span id="cb406-23"><a href="evolution.html#cb406-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> priceColor, <span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb406-24"><a href="evolution.html#cb406-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb406-25"><a href="evolution.html#cb406-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Temperature down, price up&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-dual-Y-axis-ggplot2_files/figure-html/thecode3-1.png" /></p>
</div>
<div id="barplot-with-overlapping-line-chart" class="section level3" number="6.2.17">
<h3><span class="header-section-number">6.2.17</span> Barplot with Overlapping Line Chart</h3>
<p>It is totally possible to usee the same tricks with other <code>geoms</code>.</p>
<p>Here is an example displaying a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> on top of a <a href="https://www.r-graph-gallery.com/barplot.html">barplot</a>.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="evolution.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value used to transform the data</span></span>
<span id="cb407-2"><a href="evolution.html#cb407-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb407-3"><a href="evolution.html#cb407-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A few constants</span></span>
<span id="cb407-4"><a href="evolution.html#cb407-4" aria-hidden="true" tabindex="-1"></a>temperatureColor <span class="ot">&lt;-</span> <span class="st">&quot;#69b3a2&quot;</span></span>
<span id="cb407-5"><a href="evolution.html#cb407-5" aria-hidden="true" tabindex="-1"></a>priceColor <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.9</span>, <span class="dv">1</span>)</span>
<span id="cb407-6"><a href="evolution.html#cb407-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">head</span>(data, <span class="dv">80</span>), <span class="fu">aes</span>(<span class="at">x=</span>day)) <span class="sc">+</span></span>
<span id="cb407-7"><a href="evolution.html#cb407-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb407-8"><a href="evolution.html#cb407-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>( <span class="fu">aes</span>(<span class="at">y=</span>temperature), <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">size=</span>.<span class="dv">1</span>, <span class="at">fill=</span>temperatureColor, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb407-9"><a href="evolution.html#cb407-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>price <span class="sc">/</span> coeff), <span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span>priceColor) <span class="sc">+</span></span>
<span id="cb407-10"><a href="evolution.html#cb407-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb407-11"><a href="evolution.html#cb407-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb407-12"><a href="evolution.html#cb407-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb407-13"><a href="evolution.html#cb407-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb407-14"><a href="evolution.html#cb407-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Temperature (Celsius )&quot;</span>,</span>
<span id="cb407-15"><a href="evolution.html#cb407-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb407-16"><a href="evolution.html#cb407-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb407-17"><a href="evolution.html#cb407-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span>coeff, <span class="at">name=</span><span class="st">&quot;Price ($)&quot;</span>)</span>
<span id="cb407-18"><a href="evolution.html#cb407-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb407-19"><a href="evolution.html#cb407-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb407-20"><a href="evolution.html#cb407-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb407-21"><a href="evolution.html#cb407-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb407-22"><a href="evolution.html#cb407-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> temperatureColor, <span class="at">size=</span><span class="dv">13</span>),</span>
<span id="cb407-23"><a href="evolution.html#cb407-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> priceColor, <span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb407-24"><a href="evolution.html#cb407-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb407-25"><a href="evolution.html#cb407-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Temperature down, price up&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/line-chart-dual-Y-axis-ggplot2_files/figure-html/thecode4-1.png" /></p>
</div>
<div id="line-chart-with-error-envelop-ggplot2-and-geom_ribbon" class="section level3" number="6.2.18">
<h3><span class="header-section-number">6.2.18</span> Line Chart with Error Envelop: ggplot2 and geom_ribbon()</h3>
<p>This section explains how to add an error envelop around a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> using ggplot2 and the <code>geom_ribbon()</code> function.</p>
<div id="basic-line-chart-with-ggplot2-and-geom_line-3" class="section level4" number="6.2.18.1">
<h4><span class="header-section-number">6.2.18.1</span> Basic Line Chart with <code>ggplot2</code> and <code>geom_line()</code></h4>
<p>This graph has been made by <a href="http://www.alastairsanderson.com/">Alastair Sanderson</a>. You can have a look to his gallery <a href="http://www.sr.bham.ac.uk/~ajrs/R/r-gallery.html">here</a>.</p>
<p>It shows mean temperature profiles and their error envelopes, using the <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a> package and its <code>geom_ribbon()</code> function.</p>
<p>Note that <code>geom_ribbon()</code> is used since upper and lower values of the envelop are available in the input data. As an alternative, the <a href="https://www.r-graph-gallery.com/50-51-52-scatter-plot-with-ggplot2.html">geom_smooth</a> function automatically draw an error envelop using different statistical models.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="evolution.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb408-2"><a href="evolution.html#cb408-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb408-3"><a href="evolution.html#cb408-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the data from the web !</span></span>
<span id="cb408-4"><a href="evolution.html#cb408-4" aria-hidden="true" tabindex="-1"></a>CC <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;http://www.sr.bham.ac.uk/~ajrs/papers/sanderson06/mean_Tprofile-CC.txt&quot;</span> ,  <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb408-5"><a href="evolution.html#cb408-5" aria-hidden="true" tabindex="-1"></a>nCC <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;http://www.sr.bham.ac.uk/~ajrs/papers/sanderson06/mean_Tprofile-nCC.txt&quot;</span> , <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb408-6"><a href="evolution.html#cb408-6" aria-hidden="true" tabindex="-1"></a>CC<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="st">&quot;Cool core&quot;</span></span>
<span id="cb408-7"><a href="evolution.html#cb408-7" aria-hidden="true" tabindex="-1"></a>nCC<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="st">&quot;Non-cool core&quot;</span></span>
<span id="cb408-8"><a href="evolution.html#cb408-8" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">rbind</span>(CC, nCC)</span>
<span id="cb408-9"><a href="evolution.html#cb408-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb408-10"><a href="evolution.html#cb408-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb408-11"><a href="evolution.html#cb408-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plot</span></span>
<span id="cb408-12"><a href="evolution.html#cb408-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>A, <span class="fu">aes</span>(<span class="at">x=</span>r.r500, <span class="at">y=</span>sckT, <span class="at">ymin=</span>sckT.lo, <span class="at">ymax=</span>sckT.up, <span class="at">fill=</span>type, <span class="at">linetype=</span>type)) <span class="sc">+</span> </span>
<span id="cb408-13"><a href="evolution.html#cb408-13" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb408-14"><a href="evolution.html#cb408-14" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_ribbon</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb408-15"><a href="evolution.html#cb408-15" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb408-16"><a href="evolution.html#cb408-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_log10</span>() <span class="sc">+</span> </span>
<span id="cb408-17"><a href="evolution.html#cb408-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">xlab</span>(<span class="fu">as.expression</span>(<span class="fu">expression</span>( <span class="fu">paste</span>(<span class="st">&quot;Radius (&quot;</span>, R[<span class="dv">500</span>], <span class="st">&quot;)&quot;</span>) ))) <span class="sc">+</span> </span>
<span id="cb408-18"><a href="evolution.html#cb408-18" aria-hidden="true" tabindex="-1"></a> <span class="fu">ylab</span>(<span class="st">&quot;Scaled Temperature&quot;</span>)</span></code></pre></div>
<p><img src="https://www.r-graph-gallery.com/104-plot-lines-with-error-envelopes-ggplot2_files/figure-html/thecode-1.png" /></p>
</div>
</div>
<div id="spaghetti-plot" class="section level3" number="6.2.19">
<h3><span class="header-section-number">6.2.19</span> Spaghetti Plot</h3>
<p>A Spaghetti plot is a <a href="https://www.data-to-viz.com/graph/line.html">line plot</a> with many lines displayed together. With more than a few (~5?) groups this kind of graphic gets really hard to read, and thus provides little insight about the data. Lets make an example with the <a href="http://www.data-to-viz.com/story/OneCatSevOrderedNum.html">evolution of baby names</a> in the US from 1880 to 2015.</p>
<div id="mind-the-spaghetti-ggplot2" class="section level4" number="6.2.19.1">
<h4><span class="header-section-number">6.2.19.1</span> Mind the Spaghetti (<code>ggplot2</code>)</h4>
<p>When too many groups are displayed on the same line chart it gets very hard to get insight from the figure. This is commonly called a <a href="https://www.data-to-viz.com/caveat/spaghetti.html">spaghetti chart</a>. Here are a few alternatives using <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>: annotation and small multiple.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="evolution.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb409-2"><a href="evolution.html#cb409-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb409-3"><a href="evolution.html#cb409-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb409-4"><a href="evolution.html#cb409-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb409-5"><a href="evolution.html#cb409-5" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">knitr.table.format =</span> <span class="st">&quot;html&quot;</span>)</span>
<span id="cb409-6"><a href="evolution.html#cb409-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb409-7"><a href="evolution.html#cb409-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb409-8"><a href="evolution.html#cb409-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb409-9"><a href="evolution.html#cb409-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb409-10"><a href="evolution.html#cb409-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb409-11"><a href="evolution.html#cb409-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb409-12"><a href="evolution.html#cb409-12" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb409-13"><a href="evolution.html#cb409-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Emma&quot;</span>, <span class="st">&quot;Ida&quot;</span>, <span class="st">&quot;Ashley&quot;</span>, <span class="st">&quot;Amanda&quot;</span>, <span class="st">&quot;Jessica&quot;</span>,    <span class="st">&quot;Patricia&quot;</span>, <span class="st">&quot;Linda&quot;</span>, <span class="st">&quot;Deborah&quot;</span>,   <span class="st">&quot;Dorothy&quot;</span>, <span class="st">&quot;Betty&quot;</span>, <span class="st">&quot;Helen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb409-14"><a href="evolution.html#cb409-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">&quot;F&quot;</span>)</span>
<span id="cb409-15"><a href="evolution.html#cb409-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb409-16"><a href="evolution.html#cb409-16" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb409-17"><a href="evolution.html#cb409-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>name)) <span class="sc">+</span></span>
<span id="cb409-18"><a href="evolution.html#cb409-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb409-19"><a href="evolution.html#cb409-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb409-20"><a href="evolution.html#cb409-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb409-21"><a href="evolution.html#cb409-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb409-22"><a href="evolution.html#cb409-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>)</span>
<span id="cb409-23"><a href="evolution.html#cb409-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb409-24"><a href="evolution.html#cb409-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;A spaghetti chart of baby names popularity&quot;</span>) <span class="sc">+</span></span>
<span id="cb409-25"><a href="evolution.html#cb409-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/spaghetti-plot-evolution-1.png" width="672" /></p>
<p>It is very hard to follow a line to understand the evolution of a specific names popularity. Plus, even if you manage to follow a line, you then need to link it with the legend which is even harder. Lets try to find a few workarounds to improve this graphic.</p>
</div>
<div id="target-a-specific-group" class="section level4" number="6.2.19.2">
<h4><span class="header-section-number">6.2.19.2</span> Target a Specific Group</h4>
<p>Lets say you plot many groups, but the actual reason for that is to explain the feature of one particular group compared to the others. Then a good workaround is to highlight this group: make it appear different, and give it a proper annotation. Here, the evolution of Amandas popularity is obvious. Leaving the other lines is important since it allows you to compare Amanda to all other names.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="evolution.html#cb410-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb410-2"><a href="evolution.html#cb410-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">highlight=</span><span class="fu">ifelse</span>(name<span class="sc">==</span><span class="st">&quot;Amanda&quot;</span>, <span class="st">&quot;Amanda&quot;</span>, <span class="st">&quot;Other&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb410-3"><a href="evolution.html#cb410-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">color=</span>highlight, <span class="at">size=</span>highlight)) <span class="sc">+</span></span>
<span id="cb410-4"><a href="evolution.html#cb410-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb410-5"><a href="evolution.html#cb410-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#69b3a2&quot;</span>, <span class="st">&quot;lightgrey&quot;</span>)) <span class="sc">+</span></span>
<span id="cb410-6"><a href="evolution.html#cb410-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="fl">1.5</span>,<span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb410-7"><a href="evolution.html#cb410-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb410-8"><a href="evolution.html#cb410-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb410-9"><a href="evolution.html#cb410-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb410-10"><a href="evolution.html#cb410-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_label</span>( <span class="at">x=</span><span class="dv">1990</span>, <span class="at">y=</span><span class="dv">55000</span>, <span class="at">label=</span><span class="st">&quot;Amanda reached 3550</span><span class="sc">\n</span><span class="st">babies in 1970&quot;</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb410-11"><a href="evolution.html#cb410-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb410-12"><a href="evolution.html#cb410-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb410-13"><a href="evolution.html#cb410-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>)</span>
<span id="cb410-14"><a href="evolution.html#cb410-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/spaghetti-plot-evolution-2-1.png" width="672" /></p>
</div>
<div id="use-small-multiples" class="section level4" number="6.2.19.3">
<h4><span class="header-section-number">6.2.19.3</span> Use Small Multiples</h4>
<p><a href="https://www.data-to-viz.com/graph/area.html">Area charts</a> can be used to give a more general overview of the dataset, especially when used in combination with small multiples. In the following chart, it is easy to get a glimpse of the evolution of any name:</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="evolution.html#cb411-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb411-2"><a href="evolution.html#cb411-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n, <span class="at">group=</span>name, <span class="at">fill=</span>name)) <span class="sc">+</span></span>
<span id="cb411-3"><a href="evolution.html#cb411-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>() <span class="sc">+</span></span>
<span id="cb411-4"><a href="evolution.html#cb411-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb411-5"><a href="evolution.html#cb411-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb411-6"><a href="evolution.html#cb411-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Popularity of American names in the previous 30 years&quot;</span>) <span class="sc">+</span></span>
<span id="cb411-7"><a href="evolution.html#cb411-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb411-8"><a href="evolution.html#cb411-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb411-9"><a href="evolution.html#cb411-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb411-10"><a href="evolution.html#cb411-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb411-11"><a href="evolution.html#cb411-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb411-12"><a href="evolution.html#cb411-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>)</span>
<span id="cb411-13"><a href="evolution.html#cb411-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb411-14"><a href="evolution.html#cb411-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>name)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/spaghetti-plot-evolution-small-multiples-area-chart-1.png" width="672" /></p>
<p>For instance, <code>Linda</code> was a really popular name for a really short period of time. On another hand, Ida has never been very popular, but was used a little during several decades.</p>
</div>
<div id="combine-approaches" class="section level4" number="6.2.19.4">
<h4><span class="header-section-number">6.2.19.4</span> Combine Approaches</h4>
<p>Note that if you want to compare the evolution of each line compared to the others, you can combine both approaches:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="evolution.html#cb412-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb412-2"><a href="evolution.html#cb412-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name2=</span>name)</span>
<span id="cb412-3"><a href="evolution.html#cb412-3" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span></span>
<span id="cb412-4"><a href="evolution.html#cb412-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>n)) <span class="sc">+</span></span>
<span id="cb412-5"><a href="evolution.html#cb412-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>( <span class="at">data=</span>tmp <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>name), <span class="fu">aes</span>(<span class="at">group=</span>name2), <span class="at">color=</span><span class="st">&quot;grey&quot;</span>, <span class="at">size=</span><span class="fl">0.5</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb412-6"><a href="evolution.html#cb412-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">color=</span>name), <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="fl">1.2</span> )<span class="sc">+</span></span>
<span id="cb412-7"><a href="evolution.html#cb412-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis</span>(<span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb412-8"><a href="evolution.html#cb412-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb412-9"><a href="evolution.html#cb412-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb412-10"><a href="evolution.html#cb412-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>,</span>
<span id="cb412-11"><a href="evolution.html#cb412-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb412-12"><a href="evolution.html#cb412-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb412-13"><a href="evolution.html#cb412-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb412-14"><a href="evolution.html#cb412-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;A spaghetti chart of baby names popularity&quot;</span>) <span class="sc">+</span></span>
<span id="cb412-15"><a href="evolution.html#cb412-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>name)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/spaghetti-plot-evolution-small-multiples-area-chart-2-1.png" width="672" /></p>
</div>
<div id="going-further-1" class="section level4" number="6.2.19.5">
<h4><span class="header-section-number">6.2.19.5</span> Going Further</h4>
<ul>
<li>Strategies for avoiding the spaghetti graph, by storytelling with <a href="http://www.storytellingwithdata.com/blog/2013/03/avoiding-spaghetti-graph">data</a>.</li>
<li>Doing line plots in <a href="https://www.r-graph-gallery.com/line-plot/">R</a> and <a href="https://python-graph-gallery.com/line-chart/">Python</a>.</li>
</ul>
</div>
</div>
<div id="change-line-chart-color-according-to-y-value" class="section level3" number="6.2.20">
<h3><span class="header-section-number">6.2.20</span> Change Line Chart Color according to Y Value</h3>
<p>This section explains how to build a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> in base R, where the line color is set according to the Y axis value. Reproducible code is provided.</p>
<p>The <code>plotrix</code> library allows to change the line color according to the value of the Y axis thanks to the <code>clplot</code> function.</p>
<p>Here, the <code>RColorBrewer</code> package is used to set a palette of 8 colors.</p>
<p><u>Note</u>: Thanks to Carl Witthoft for sending this chart.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="evolution.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb413-2"><a href="evolution.html#cb413-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotrix)</span>
<span id="cb413-3"><a href="evolution.html#cb413-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb413-4"><a href="evolution.html#cb413-4" aria-hidden="true" tabindex="-1"></a><span class="co">#create color palette</span></span>
<span id="cb413-5"><a href="evolution.html#cb413-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb413-6"><a href="evolution.html#cb413-6" aria-hidden="true" tabindex="-1"></a>my_colors <span class="ot">=</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Set2&quot;</span>) </span>
<span id="cb413-7"><a href="evolution.html#cb413-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb413-8"><a href="evolution.html#cb413-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb413-9"><a href="evolution.html#cb413-9" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">100</span>)</span>
<span id="cb413-10"><a href="evolution.html#cb413-10" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">sin</span>(x<span class="sc">/</span><span class="dv">5</span>)<span class="sc">+</span>x<span class="sc">/</span><span class="dv">20</span></span>
<span id="cb413-11"><a href="evolution.html#cb413-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb413-12"><a href="evolution.html#cb413-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot x and y</span></span>
<span id="cb413-13"><a href="evolution.html#cb413-13" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb413-14"><a href="evolution.html#cb413-14" aria-hidden="true" tabindex="-1"></a><span class="fu">clplot</span>(x, y, <span class="at">main=</span><span class="st">&quot;&quot;</span>, <span class="at">lwd=</span><span class="dv">5</span>, <span class="at">levels=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>), <span class="at">col=</span>my_colors, <span class="at">showcuts=</span>T , <span class="at">bty=</span><span class="st">&quot;n&quot;</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/200-change-color-in-lineplot-following-y-value_files/figure-html/thecode-1.png" style="width:75.0%" />
</center>
</div>
<div id="add-a-legend-to-a-base-r-chart" class="section level3" number="6.2.21">
<h3><span class="header-section-number">6.2.21</span> Add a Legend to a Base R Chart</h3>
<p>This section explains how to add a legend to a chart made with base R, using the <code>legend()</code> function. It provides several reproducible examples with explanation and R code.</p>
<p>This page aims to explain how to add a legend to a plot made in base R. It is done using the <code>legend()</code> function. The main arguments are:</p>
<ul>
<li><code>legend</code> : names to display</li>
<li><code>bty</code>: type of box around the legend. See <a href="https://www.r-graph-gallery.com/73-box-style-with-the-bty-function.html">graph #73</a></li>
<li><code>horiz</code> : legend in column or in row</li>
<li><code>col</code> : symbol color</li>
<li><code>pch</code> symbol type. See <a href="https://www.r-graph-gallery.com/6-graph-parameters-reminder.html">graph #6</a></li>
<li><code>pt.cex</code>: symbol size</li>
<li><code>cex</code>: text size</li>
<li><code>text.col</code>: text color</li>
<li><code>topright</code>: legend position: bottomright, bottom, bottomleft, left, topleft, top, topright, right, center.</li>
<li>`<code>inset</code>: % (from 0 to 1) to draw the legend away from x and y axis</li>
<li>You can also give the X and Y coordinate of the legend: <code>legend(3, 5, ...)</code>
Note that an equivalent page exist concerning <a href="https://www.r-graph-gallery.com/239-custom-layout-legend-ggplot2.html">legends with ggplot2</a>.</li>
</ul>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="evolution.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb414-2"><a href="evolution.html#cb414-2" aria-hidden="true" tabindex="-1"></a>a<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb414-3"><a href="evolution.html#cb414-3" aria-hidden="true" tabindex="-1"></a>b<span class="ot">=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb414-4"><a href="evolution.html#cb414-4" aria-hidden="true" tabindex="-1"></a>c<span class="ot">=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">1</span>)</span>
<span id="cb414-5"><a href="evolution.html#cb414-5" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb414-6"><a href="evolution.html#cb414-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a basic graph</span></span>
<span id="cb414-7"><a href="evolution.html#cb414-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>( b<span class="sc">~</span>a , <span class="at">type=</span><span class="st">&quot;b&quot;</span> , <span class="at">bty=</span><span class="st">&quot;l&quot;</span> , <span class="at">xlab=</span><span class="st">&quot;value of a&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;value of b&quot;</span> , <span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.1</span>,<span class="fl">0.7</span>) , <span class="at">lwd=</span><span class="dv">3</span> , <span class="at">pch=</span><span class="dv">17</span> , <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>) )</span>
<span id="cb414-8"><a href="evolution.html#cb414-8" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(c <span class="sc">~</span>a , <span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.8</span>,<span class="fl">0.4</span>,<span class="fl">0.1</span>,<span class="fl">0.7</span>) , <span class="at">lwd=</span><span class="dv">3</span> , <span class="at">pch=</span><span class="dv">19</span> , <span class="at">type=</span><span class="st">&quot;b&quot;</span> )</span>
<span id="cb414-9"><a href="evolution.html#cb414-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb414-10"><a href="evolution.html#cb414-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a legend</span></span>
<span id="cb414-11"><a href="evolution.html#cb414-11" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;bottomleft&quot;</span>, </span>
<span id="cb414-12"><a href="evolution.html#cb414-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;Group 1&quot;</span>, <span class="st">&quot;Group 2&quot;</span>), </span>
<span id="cb414-13"><a href="evolution.html#cb414-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.1</span>,<span class="fl">0.7</span>), </span>
<span id="cb414-14"><a href="evolution.html#cb414-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rgb</span>(<span class="fl">0.8</span>,<span class="fl">0.4</span>,<span class="fl">0.1</span>,<span class="fl">0.7</span>)), </span>
<span id="cb414-15"><a href="evolution.html#cb414-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>), </span>
<span id="cb414-16"><a href="evolution.html#cb414-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">bty =</span> <span class="st">&quot;n&quot;</span>, </span>
<span id="cb414-17"><a href="evolution.html#cb414-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">pt.cex =</span> <span class="dv">2</span>, </span>
<span id="cb414-18"><a href="evolution.html#cb414-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex =</span> <span class="fl">1.2</span>, </span>
<span id="cb414-19"><a href="evolution.html#cb414-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">text.col =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb414-20"><a href="evolution.html#cb414-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">horiz =</span> F , </span>
<span id="cb414-21"><a href="evolution.html#cb414-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">inset =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>))</span></code></pre></div>
<p><img src="r-graph_files/figure-html/step-by-step-evolution-add-chart-legend-1.png" width="672" /></p>
</div>
<div id="reversed-y-axis-in-base-r" class="section level3" number="6.2.22">
<h3><span class="header-section-number">6.2.22</span> Reversed Y Axis in Base R</h3>
<p>This section explains how to reverse the Y axis on a chart with <code>R</code>. It uses a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> as example and provides the reproducible code. It is a common need in dataviz to flip the Y axis upside down. In base R this is pretty easy to do: you just have to reverse the values of the ylim argument. This can be done using this statement: <code>rev(range(y))</code></p>
<p>It is a common need in dataviz to flip the Y axis upside down. In base R this is pretty easy to do: you just have to reverse the values of the <code>ylim</code> argument.</p>
<p>This can be done using this statement: <code>rev(range(y))</code></p>
<p><u>Note</u>: be careful, do not build a <a href="https://www.data-to-viz.com/caveat/counter_intuitive.html">counter-intuitive</a> chart</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="evolution.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb415-2"><a href="evolution.html#cb415-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">29</span>)<span class="sc">^</span><span class="dv">2</span><span class="sc">+</span><span class="fu">runif</span>(<span class="dv">29</span>,<span class="fl">0.98</span>)</span>
<span id="cb415-3"><a href="evolution.html#cb415-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">abs</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">29</span>)<span class="sc">+</span><span class="dv">4</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">29</span>,<span class="fl">0.4</span>))</span>
<span id="cb415-4"><a href="evolution.html#cb415-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plotwith ylim in reverse</span></span>
<span id="cb415-5"><a href="evolution.html#cb415-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(y<span class="sc">~</span>x , <span class="at">ylim =</span> <span class="fu">rev</span>(<span class="fu">range</span>(y)) ,</span>
<span id="cb415-6"><a href="evolution.html#cb415-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd=</span><span class="dv">4</span> , <span class="at">type=</span><span class="st">&quot;l&quot;</span> , <span class="at">bty=</span><span class="st">&quot;n&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;value of y (decreasing)&quot;</span> , <span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>) )</span>
<span id="cb415-7"><a href="evolution.html#cb415-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Add the grey lines</span></span>
<span id="cb415-8"><a href="evolution.html#cb415-8" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">900</span>,<span class="dv">100</span>) , <span class="at">col=</span><span class="st">&quot;grey&quot;</span> , <span class="at">lwd=</span><span class="fl">0.6</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/step-by-step-evolution-reversing-y-axis-1.png" width="672" /></p>
</div>
<div id="scatterplot-with-polynomial-curve-fitting" class="section level3" number="6.2.23">
<h3><span class="header-section-number">6.2.23</span> Scatterplot with Polynomial Curve Fitting</h3>
<p>This example describes how to build a <a href="https://www.r-graph-gallery.com/scatterplot.html">scatterplot</a> with a polynomial curve drawn on top of it. First of all, a scatterplot is built using the native R <code>plot()</code> function. Then, a polynomial model is fit thanks to the <code>lm()</code> function. It is possible to have the estimated Y value for each step of the X axis using the <code>predict()</code> function, and plot it with <code>line()</code>.</p>
<p>It is a good practice to add the equation of the model with <code>text()</code>.</p>
<p><u>Note</u>: You can also add a confidence interval around the model as described in <a href="https://www.r-graph-gallery.com/45-confidence-interval-around-polynomial-curve-fitting">chart #45</a>.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="evolution.html#cb416-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">300</span>,  <span class="at">min=</span><span class="sc">-</span><span class="dv">10</span>, <span class="at">max=</span><span class="dv">10</span>) </span>
<span id="cb416-2"><a href="evolution.html#cb416-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fl">0.1</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> x<span class="sc">^</span><span class="dv">2</span> <span class="sc">-</span> x <span class="sc">+</span> <span class="dv">10</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">length</span>(x),<span class="dv">0</span>,<span class="dv">8</span>) </span>
<span id="cb416-3"><a href="evolution.html#cb416-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb416-4"><a href="evolution.html#cb416-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot of x and y :</span></span>
<span id="cb416-5"><a href="evolution.html#cb416-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x,y,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="fl">0.8</span>,<span class="fl">0.6</span>),<span class="at">pch=</span><span class="dv">16</span> , <span class="at">cex=</span><span class="fl">1.3</span>) </span>
<span id="cb416-6"><a href="evolution.html#cb416-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb416-7"><a href="evolution.html#cb416-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Can we find a polynome that fit this function ?</span></span>
<span id="cb416-8"><a href="evolution.html#cb416-8" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x <span class="sc">+</span> <span class="fu">I</span>(x<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">I</span>(x<span class="sc">^</span><span class="dv">3</span>))</span>
<span id="cb416-9"><a href="evolution.html#cb416-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb416-10"><a href="evolution.html#cb416-10" aria-hidden="true" tabindex="-1"></a><span class="co"># I can get the features of this model :</span></span>
<span id="cb416-11"><a href="evolution.html#cb416-11" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(model)</span></span>
<span id="cb416-12"><a href="evolution.html#cb416-12" aria-hidden="true" tabindex="-1"></a><span class="co">#model$coefficients</span></span>
<span id="cb416-13"><a href="evolution.html#cb416-13" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(model)$adj.r.squared</span></span>
<span id="cb416-14"><a href="evolution.html#cb416-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb416-15"><a href="evolution.html#cb416-15" aria-hidden="true" tabindex="-1"></a><span class="co"># For each value of x, I can get the value of y estimated by the model, and add it to the current plot !</span></span>
<span id="cb416-16"><a href="evolution.html#cb416-16" aria-hidden="true" tabindex="-1"></a>myPredict <span class="ot">&lt;-</span> <span class="fu">predict</span>( model ) </span>
<span id="cb416-17"><a href="evolution.html#cb416-17" aria-hidden="true" tabindex="-1"></a>ix <span class="ot">&lt;-</span> <span class="fu">sort</span>(x,<span class="at">index.return=</span>T)<span class="sc">$</span>ix</span>
<span id="cb416-18"><a href="evolution.html#cb416-18" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(x[ix], myPredict[ix], <span class="at">col=</span><span class="dv">2</span>, <span class="at">lwd=</span><span class="dv">2</span> )  </span>
<span id="cb416-19"><a href="evolution.html#cb416-19" aria-hidden="true" tabindex="-1"></a><span class="co"># I add the features of the model to the plot</span></span>
<span id="cb416-20"><a href="evolution.html#cb416-20" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="fu">round</span>(model<span class="sc">$</span>coefficients , <span class="dv">2</span>)</span>
<span id="cb416-21"><a href="evolution.html#cb416-21" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">70</span> , <span class="fu">paste</span>(<span class="st">&quot;Model : &quot;</span>,coeff[<span class="dv">1</span>] , <span class="st">&quot; + &quot;</span> , coeff[<span class="dv">2</span>] , <span class="st">&quot;*x&quot;</span>  , <span class="st">&quot;+&quot;</span> , coeff[<span class="dv">3</span>] , <span class="st">&quot;*x^2&quot;</span> , <span class="st">&quot;+&quot;</span> , coeff[<span class="dv">4</span>] , <span class="st">&quot;*x^3&quot;</span> , <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span> , <span class="st">&quot;P-value adjusted = &quot;</span>,<span class="fu">round</span>(<span class="fu">summary</span>(model)<span class="sc">$</span>adj.r.squared,<span class="dv">2</span>)))</span></code></pre></div>
<p><img src="r-graph_files/figure-html/scatterplot-polynomial-curve-fitting-1.png" width="672" /></p>
</div>
<div id="base-r-graph-parameters-a-cheatsheet" class="section level3" number="6.2.24">
<h3><span class="header-section-number">6.2.24</span> Base R Graph Parameters: A Cheatsheet</h3>
<p>This section aims to remind the options offered to customize a graph in base R. Understand in a sec how to use <code>lwd</code>, <code>pch</code>, <code>type</code>, <code>lty</code>, <code>cex</code>, and more.</p>
<p>Base R offers many option to customize the chart appearance. Basically everthing is doable with those few options:</p>
<ul>
<li><code>cex</code>: shape size</li>
<li><code>lwd</code>: line width</li>
<li><code>col</code>: control colors</li>
<li><code>lty</code>: line type</li>
<li><code>pch</code>: marker shape</li>
<li><code>type</code>: link between dots</li>
</ul>
<p><u>Note</u>: visit the <a href="https://www.r-graph-gallery.com/cheatsheet.html">cheatsheet section</a> for more.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="evolution.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialization</span></span>
<span id="cb417-2"><a href="evolution.html#cb417-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>))</span>
<span id="cb417-3"><a href="evolution.html#cb417-3" aria-hidden="true" tabindex="-1"></a>num <span class="ot">&lt;-</span> <span class="dv">0</span> ; </span>
<span id="cb417-4"><a href="evolution.html#cb417-4" aria-hidden="true" tabindex="-1"></a>num1 <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb417-5"><a href="evolution.html#cb417-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">0</span>,<span class="dv">0</span> , <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">21</span>) , <span class="at">ylim=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">6.5</span>), <span class="at">col=</span><span class="st">&quot;white&quot;</span> , <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span> , <span class="at">ylab=</span><span class="st">&quot;&quot;</span> , <span class="at">xlab=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb417-6"><a href="evolution.html#cb417-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb417-7"><a href="evolution.html#cb417-7" aria-hidden="true" tabindex="-1"></a><span class="co">#fill the graph</span></span>
<span id="cb417-8"><a href="evolution.html#cb417-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">20</span>)){</span>
<span id="cb417-9"><a href="evolution.html#cb417-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">points</span>(i,<span class="dv">1</span> , <span class="at">pch=</span>i , <span class="at">cex=</span><span class="dv">3</span>)</span>
<span id="cb417-10"><a href="evolution.html#cb417-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">points</span>(i,<span class="dv">2</span> , <span class="at">col=</span>i , <span class="at">pch=</span><span class="dv">16</span> , <span class="at">cex=</span><span class="dv">3</span>)</span>
<span id="cb417-11"><a href="evolution.html#cb417-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">points</span>(i,<span class="dv">3</span> , <span class="at">col=</span><span class="st">&quot;black&quot;</span> , <span class="at">pch=</span><span class="dv">16</span> , <span class="at">cex=</span>i<span class="sc">*</span><span class="fl">0.25</span>)</span>
<span id="cb417-12"><a href="evolution.html#cb417-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb417-13"><a href="evolution.html#cb417-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#lty</span></span>
<span id="cb417-14"><a href="evolution.html#cb417-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">%in%</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">18</span>,<span class="dv">3</span>))){</span>
<span id="cb417-15"><a href="evolution.html#cb417-15" aria-hidden="true" tabindex="-1"></a>        num<span class="ot">=</span>num<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb417-16"><a href="evolution.html#cb417-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">points</span>(<span class="fu">c</span>(i,i<span class="sc">+</span><span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">4</span>) , <span class="at">col=</span><span class="st">&quot;black&quot;</span> , <span class="at">lty=</span>num , <span class="at">type=</span><span class="st">&quot;l&quot;</span> , <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb417-17"><a href="evolution.html#cb417-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">text</span>(i<span class="fl">+1.1</span> , <span class="fl">4.15</span> , num)</span>
<span id="cb417-18"><a href="evolution.html#cb417-18" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb417-19"><a href="evolution.html#cb417-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb417-20"><a href="evolution.html#cb417-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#type and lwd </span></span>
<span id="cb417-21"><a href="evolution.html#cb417-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">%in%</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">5</span>))){</span>
<span id="cb417-22"><a href="evolution.html#cb417-22" aria-hidden="true" tabindex="-1"></a>    num1<span class="ot">=</span>num1<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb417-23"><a href="evolution.html#cb417-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">points</span>(<span class="fu">c</span>(i,i<span class="sc">+</span><span class="dv">1</span>,i<span class="sc">+</span><span class="dv">2</span>,i<span class="sc">+</span><span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>) , <span class="at">col=</span><span class="st">&quot;black&quot;</span>  , <span class="at">type=</span><span class="fu">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;o&quot;</span>)[num1] , <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb417-24"><a href="evolution.html#cb417-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">text</span>(i<span class="fl">+1.1</span> , <span class="fl">5.2</span> , <span class="fu">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;l&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;o&quot;</span>)[num1] )</span>
<span id="cb417-25"><a href="evolution.html#cb417-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">points</span>(<span class="fu">c</span>(i,i<span class="sc">+</span><span class="dv">1</span>,i<span class="sc">+</span><span class="dv">2</span>,i<span class="sc">+</span><span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>) , <span class="at">col=</span><span class="st">&quot;black&quot;</span>  , <span class="at">type=</span><span class="st">&quot;l&quot;</span>,  <span class="at">lwd=</span>num1)</span>
<span id="cb417-26"><a href="evolution.html#cb417-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">text</span>(i<span class="fl">+1.1</span> , <span class="fl">6.2</span> , num1 )</span>
<span id="cb417-27"><a href="evolution.html#cb417-27" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb417-28"><a href="evolution.html#cb417-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb417-29"><a href="evolution.html#cb417-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb417-30"><a href="evolution.html#cb417-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb417-31"><a href="evolution.html#cb417-31" aria-hidden="true" tabindex="-1"></a><span class="co">#add axis</span></span>
<span id="cb417-32"><a href="evolution.html#cb417-32" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;pch&quot;</span> , <span class="st">&quot;col&quot;</span> , <span class="st">&quot;cex&quot;</span> , <span class="st">&quot;lty&quot;</span>, <span class="st">&quot;type&quot;</span> , <span class="st">&quot;lwd&quot;</span> ), </span>
<span id="cb417-33"><a href="evolution.html#cb417-33" aria-hidden="true" tabindex="-1"></a>     <span class="at">tick =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">las =</span> <span class="dv">1</span>, <span class="at">cex.axis =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/base-r-graph-parameters-cheatsheet-1.png" width="672" /></p>
</div>
<div id="dual-y-axis-in-r" class="section level3" number="6.2.25">
<h3><span class="header-section-number">6.2.25</span> Dual Y Axis in R</h3>
<p>This section explains how to build a line chart with dual Y axis with R. It show the evolution of 2 series, each line having its own Y axis. Reproducible code provided.</p>
<div id="dual-y-axis-with-ggplot2" class="section level4" number="6.2.25.1">
<h4><span class="header-section-number">6.2.25.1</span> Dual Y Axis with <code>ggplot2</code></h4>
<p>Warning: a dual Y axis line chart represents the evolution of 2 series, each plotted according to its own Y scale. This kind of chart <u>must</u> be avoided, since playing with Y axis limits can lead to completely different conclusions. Visit <a href="https://www.data-to-viz.com/caveats.html">data-to-viz</a> for more info.</p>
</div>
<div id="visualizing-2-series-with-r-and-ggplot2-1" class="section level4" number="6.2.25.2">
<h4><span class="header-section-number">6.2.25.2</span> Visualizing 2 Series with <code>R</code> and <code>ggplot2</code></h4>
<p>Lets consider a dataset with 3 columns:</p>
<ul>
<li><code>date</code></li>
<li>first serie to display: fake <code>temperature</code>. Range from 0 to 10.</li>
<li>second series: fake <code>price</code>. Range from 0 to 100.</li>
</ul>
<p>One could easily build 2 line charts to study the evolution of those 2 series using the code below.</p>
<p>But even if strongly <a href="https://www.data-to-viz.com/caveats.html">unadvised</a>, one sometimes wants to display both series on the same chart, thus needing a second Y axis.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="evolution.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb418-2"><a href="evolution.html#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb418-3"><a href="evolution.html#cb418-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb418-4"><a href="evolution.html#cb418-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork) <span class="co"># To display 2 charts together</span></span>
<span id="cb418-5"><a href="evolution.html#cb418-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb418-6"><a href="evolution.html#cb418-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Build dummy data</span></span>
<span id="cb418-7"><a href="evolution.html#cb418-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb418-8"><a href="evolution.html#cb418-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">day =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-01-01&quot;</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">99</span>,</span>
<span id="cb418-9"><a href="evolution.html#cb418-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">temperature =</span> <span class="fu">runif</span>(<span class="dv">100</span>) <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">100</span>)<span class="sc">^</span><span class="fl">2.5</span> <span class="sc">/</span> <span class="dv">10000</span>,</span>
<span id="cb418-10"><a href="evolution.html#cb418-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">price =</span> <span class="fu">runif</span>(<span class="dv">100</span>) <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">100</span>,<span class="dv">1</span>)<span class="sc">^</span><span class="fl">1.5</span> <span class="sc">/</span> <span class="dv">10</span></span>
<span id="cb418-11"><a href="evolution.html#cb418-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb418-12"><a href="evolution.html#cb418-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic line chart</span></span>
<span id="cb418-13"><a href="evolution.html#cb418-13" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>temperature)) <span class="sc">+</span></span>
<span id="cb418-14"><a href="evolution.html#cb418-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb418-15"><a href="evolution.html#cb418-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Temperature: range 1-10&quot;</span>) <span class="sc">+</span></span>
<span id="cb418-16"><a href="evolution.html#cb418-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span>
<span id="cb418-17"><a href="evolution.html#cb418-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb418-18"><a href="evolution.html#cb418-18" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>price)) <span class="sc">+</span></span>
<span id="cb418-19"><a href="evolution.html#cb418-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;grey&quot;</span>,<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb418-20"><a href="evolution.html#cb418-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Price: range 1-100&quot;</span>) <span class="sc">+</span></span>
<span id="cb418-21"><a href="evolution.html#cb418-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span>
<span id="cb418-22"><a href="evolution.html#cb418-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Display both charts side by side thanks to the patchwork package</span></span>
<span id="cb418-23"><a href="evolution.html#cb418-23" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-dual-y-axis-1.png" width="672" /></p>
</div>
</div>
<div id="adding-a-second-y-axis-with-sec.axis-the-idea-1" class="section level3" number="6.2.26">
<h3><span class="header-section-number">6.2.26</span> Adding a Second Y axis with <code>sec.axis()</code>: The Idea</h3>
<p><code>sec.axis()</code> does not allow to build an entirely new Y axis. It just builds a second Y axis based on the first one, applying a mathematical transformation.</p>
<p>In the example below, the second Y axis simply represents the first one multiplied by 10, thanks to the <code>trans</code> argument that provides the <code>~.*10</code> mathematical statement.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="evolution.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with a usual ggplot2 call:</span></span>
<span id="cb419-2"><a href="evolution.html#cb419-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>temperature)) <span class="sc">+</span></span>
<span id="cb419-3"><a href="evolution.html#cb419-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb419-4"><a href="evolution.html#cb419-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Custom the Y scales:</span></span>
<span id="cb419-5"><a href="evolution.html#cb419-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb419-6"><a href="evolution.html#cb419-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb419-7"><a href="evolution.html#cb419-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb419-8"><a href="evolution.html#cb419-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;First Axis&quot;</span>,</span>
<span id="cb419-9"><a href="evolution.html#cb419-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb419-10"><a href="evolution.html#cb419-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb419-11"><a href="evolution.html#cb419-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>( <span class="at">trans=</span><span class="sc">~</span>.<span class="sc">*</span><span class="dv">10</span>, <span class="at">name=</span><span class="st">&quot;Second Axis&quot;</span>)</span>
<span id="cb419-12"><a href="evolution.html#cb419-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb419-13"><a href="evolution.html#cb419-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb419-14"><a href="evolution.html#cb419-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-adding-second-y-axis-1.png" width="672" /></p>
</div>
<div id="show-2-series-on-the-same-line-chart-with-sec.axis-1" class="section level3" number="6.2.27">
<h3><span class="header-section-number">6.2.27</span> Show 2 Series on the Same Line Chart with <code>sec.axis()</code></h3>
<p>We can use this <code>sec.axis</code> mathematical transformation to display 2 series that have a different range.</p>
<p>Since the price has a maximum value that is 10 times biggeer than the maximum temperature:</p>
<ul>
<li>The second Y axis is like the first multiplied by 10 (<code>trans=~.*10</code>).</li>
<li>The value be display in the second variable <code>geom_line()</code> call must be divided by 10 to mimic the range of the first variable.</li>
</ul>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="evolution.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value used to transform the data</span></span>
<span id="cb420-2"><a href="evolution.html#cb420-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb420-3"><a href="evolution.html#cb420-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day)) <span class="sc">+</span></span>
<span id="cb420-4"><a href="evolution.html#cb420-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb420-5"><a href="evolution.html#cb420-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>temperature)) <span class="sc">+</span> </span>
<span id="cb420-6"><a href="evolution.html#cb420-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>price <span class="sc">/</span> coeff)) <span class="sc">+</span> <span class="co"># Divide by 10 to get the same range than the temperature</span></span>
<span id="cb420-7"><a href="evolution.html#cb420-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb420-8"><a href="evolution.html#cb420-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb420-9"><a href="evolution.html#cb420-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb420-10"><a href="evolution.html#cb420-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb420-11"><a href="evolution.html#cb420-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;First Axis&quot;</span>,</span>
<span id="cb420-12"><a href="evolution.html#cb420-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb420-13"><a href="evolution.html#cb420-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb420-14"><a href="evolution.html#cb420-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span>coeff, <span class="at">name=</span><span class="st">&quot;Second Axis&quot;</span>)</span>
<span id="cb420-15"><a href="evolution.html#cb420-15" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-two-series-one-chart-1.png" width="672" /></p>
</div>
<div id="dual-y-axis-customization-with-ggplot2-1" class="section level3" number="6.2.28">
<h3><span class="header-section-number">6.2.28</span> Dual Y Axis Customization with <code>ggplot2</code></h3>
<p>A few usual tricks to make the chart looks better:</p>
<ul>
<li><code>ipsum</code> theme to remove the black background and improve the general style</li>
<li>add a title</li>
<li>customize the Y axes to pair them with their related line.</li>
</ul>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="evolution.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value used to transform the data</span></span>
<span id="cb421-2"><a href="evolution.html#cb421-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb421-3"><a href="evolution.html#cb421-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A few constants</span></span>
<span id="cb421-4"><a href="evolution.html#cb421-4" aria-hidden="true" tabindex="-1"></a>temperatureColor <span class="ot">&lt;-</span> <span class="st">&quot;#69b3a2&quot;</span></span>
<span id="cb421-5"><a href="evolution.html#cb421-5" aria-hidden="true" tabindex="-1"></a>priceColor <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.9</span>, <span class="dv">1</span>)</span>
<span id="cb421-6"><a href="evolution.html#cb421-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day)) <span class="sc">+</span></span>
<span id="cb421-7"><a href="evolution.html#cb421-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb421-8"><a href="evolution.html#cb421-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>temperature), <span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span>temperatureColor) <span class="sc">+</span> </span>
<span id="cb421-9"><a href="evolution.html#cb421-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>price <span class="sc">/</span> coeff), <span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span>priceColor) <span class="sc">+</span></span>
<span id="cb421-10"><a href="evolution.html#cb421-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb421-11"><a href="evolution.html#cb421-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb421-12"><a href="evolution.html#cb421-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb421-13"><a href="evolution.html#cb421-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb421-14"><a href="evolution.html#cb421-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Temperature (Celsius )&quot;</span>,</span>
<span id="cb421-15"><a href="evolution.html#cb421-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb421-16"><a href="evolution.html#cb421-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb421-17"><a href="evolution.html#cb421-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span>coeff, <span class="at">name=</span><span class="st">&quot;Price ($)&quot;</span>)</span>
<span id="cb421-18"><a href="evolution.html#cb421-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb421-19"><a href="evolution.html#cb421-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb421-20"><a href="evolution.html#cb421-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb421-21"><a href="evolution.html#cb421-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb421-22"><a href="evolution.html#cb421-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> temperatureColor, <span class="at">size=</span><span class="dv">13</span>),</span>
<span id="cb421-23"><a href="evolution.html#cb421-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> priceColor, <span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb421-24"><a href="evolution.html#cb421-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb421-25"><a href="evolution.html#cb421-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Temperature down, price up&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-dual-y-axis-customization-1.png" width="672" /></p>
</div>
<div id="barplot-with-overlapping-line-chart-1" class="section level3" number="6.2.29">
<h3><span class="header-section-number">6.2.29</span> Barplot with Overlapping Line Chart</h3>
<p>It is totally possible to use the same tricks with other <code>geoms</code>.</p>
<p>Here is an example displaying a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> on top of a <a href="https://www.r-graph-gallery.com/barplot.html">barplot</a>.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="evolution.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value used to transform the data</span></span>
<span id="cb422-2"><a href="evolution.html#cb422-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb422-3"><a href="evolution.html#cb422-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A few constants</span></span>
<span id="cb422-4"><a href="evolution.html#cb422-4" aria-hidden="true" tabindex="-1"></a>temperatureColor <span class="ot">&lt;-</span> <span class="st">&quot;#69b3a2&quot;</span></span>
<span id="cb422-5"><a href="evolution.html#cb422-5" aria-hidden="true" tabindex="-1"></a>priceColor <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="fl">0.2</span>, <span class="fl">0.6</span>, <span class="fl">0.9</span>, <span class="dv">1</span>)</span>
<span id="cb422-6"><a href="evolution.html#cb422-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">head</span>(data, <span class="dv">80</span>), <span class="fu">aes</span>(<span class="at">x=</span>day)) <span class="sc">+</span></span>
<span id="cb422-7"><a href="evolution.html#cb422-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb422-8"><a href="evolution.html#cb422-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>( <span class="fu">aes</span>(<span class="at">y=</span>temperature), <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">size=</span>.<span class="dv">1</span>, <span class="at">fill=</span>temperatureColor, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb422-9"><a href="evolution.html#cb422-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>(<span class="at">y=</span>price <span class="sc">/</span> coeff), <span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span>priceColor) <span class="sc">+</span></span>
<span id="cb422-10"><a href="evolution.html#cb422-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb422-11"><a href="evolution.html#cb422-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb422-12"><a href="evolution.html#cb422-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb422-13"><a href="evolution.html#cb422-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Features of the first axis</span></span>
<span id="cb422-14"><a href="evolution.html#cb422-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Temperature (Celsius)&quot;</span>,</span>
<span id="cb422-15"><a href="evolution.html#cb422-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb422-16"><a href="evolution.html#cb422-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a second axis and specify its features</span></span>
<span id="cb422-17"><a href="evolution.html#cb422-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span>coeff, <span class="at">name=</span><span class="st">&quot;Price ($)&quot;</span>)</span>
<span id="cb422-18"><a href="evolution.html#cb422-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb422-19"><a href="evolution.html#cb422-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb422-20"><a href="evolution.html#cb422-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb422-21"><a href="evolution.html#cb422-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb422-22"><a href="evolution.html#cb422-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> temperatureColor, <span class="at">size=</span><span class="dv">13</span>),</span>
<span id="cb422-23"><a href="evolution.html#cb422-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y.right =</span> <span class="fu">element_text</span>(<span class="at">color =</span> priceColor, <span class="at">size=</span><span class="dv">13</span>)</span>
<span id="cb422-24"><a href="evolution.html#cb422-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb422-25"><a href="evolution.html#cb422-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Temperature down, price up&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-barplot-overlapping-line-1.png" width="672" /></p>
</div>
<div id="dual-y-axis-in-r-1" class="section level3" number="6.2.30">
<h3><span class="header-section-number">6.2.30</span> Dual Y axis in R</h3>
<p>This section explains how to build a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> with dual Y axis with R. It show the evolution of 2 series, each line having its own Y axis. Reproducible code provided</p>
<div id="usual-line-chart" class="section level4" number="6.2.30.1">
<h4><span class="header-section-number">6.2.30.1</span> Usual Line Chart</h4>
<p>Lets start with an usual line chart displaying the evolution of 2 numeric variables.</p>
<p>This kind of chart can be built using the <code>line()</code> function. But here the <code>xyplot</code> from the <code>latticeExtra</code> package is used (well need it later on.)</p>
<p>One would argue that the exact evolution of the blue variable is hard to read. Another axis could be displayed to zoom on it. This is why the dual axis was born.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="evolution.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library</span></span>
<span id="cb423-2"><a href="evolution.html#cb423-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(latticeExtra)</span>
<span id="cb423-3"><a href="evolution.html#cb423-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb423-4"><a href="evolution.html#cb423-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb423-5"><a href="evolution.html#cb423-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb423-6"><a href="evolution.html#cb423-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb423-7"><a href="evolution.html#cb423-7" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb423-8"><a href="evolution.html#cb423-8" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> var1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb423-9"><a href="evolution.html#cb423-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,var1,var2)</span>
<span id="cb423-10"><a href="evolution.html#cb423-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb423-11"><a href="evolution.html#cb423-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb423-12"><a href="evolution.html#cb423-12" aria-hidden="true" tabindex="-1"></a><span class="co"># usual line chart</span></span>
<span id="cb423-13"><a href="evolution.html#cb423-13" aria-hidden="true" tabindex="-1"></a><span class="fu">xyplot</span>(var1 <span class="sc">+</span> var2 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;steelblue&quot;</span>, <span class="st">&quot;#69b3a2&quot;</span>) , <span class="at">lwd=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/line-chart-evolution-dual-axis-1.png" width="672" /></p>
</div>
</div>
<div id="dual-y-axis-line-chart" class="section level3" number="6.2.31">
<h3><span class="header-section-number">6.2.31</span> Dual Y Axis Line Chart</h3>
<p>The <code>doubleYScale()</code> function of the latticeExtra package can take 2 outputs of the <code>xyplot()</code> function to build a dual Y axis line chart.</p>
<p>This chart is truly misleading: it is easy to conclude that both variables follow the same pattern what is totally wrong. Always double check what axis trully are on dual axis chart.</p>
<p>Conclusion: dont do it!</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="evolution.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library</span></span>
<span id="cb424-2"><a href="evolution.html#cb424-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(latticeExtra)</span>
<span id="cb424-3"><a href="evolution.html#cb424-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb424-4"><a href="evolution.html#cb424-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb424-5"><a href="evolution.html#cb424-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb424-6"><a href="evolution.html#cb424-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb424-7"><a href="evolution.html#cb424-7" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb424-8"><a href="evolution.html#cb424-8" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> var1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb424-9"><a href="evolution.html#cb424-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,var1,var2)</span>
<span id="cb424-10"><a href="evolution.html#cb424-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb424-11"><a href="evolution.html#cb424-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb424-12"><a href="evolution.html#cb424-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; construct separate plots for each series</span></span>
<span id="cb424-13"><a href="evolution.html#cb424-13" aria-hidden="true" tabindex="-1"></a>obj1 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var1 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span> , <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb424-14"><a href="evolution.html#cb424-14" aria-hidden="true" tabindex="-1"></a>obj2 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var2 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;#69b3a2&quot;</span>)</span>
<span id="cb424-15"><a href="evolution.html#cb424-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb424-16"><a href="evolution.html#cb424-16" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; Make the plot with second y axis:</span></span>
<span id="cb424-17"><a href="evolution.html#cb424-17" aria-hidden="true" tabindex="-1"></a><span class="fu">doubleYScale</span>(obj1, obj2, <span class="at">add.ylab2 =</span> <span class="cn">TRUE</span>, <span class="at">use.style=</span><span class="cn">FALSE</span> )</span></code></pre></div>
<p><img src="r-graph_files/figure-html/line-chart-evolution-dual-y-axis-1.png" width="672" /></p>
</div>
<div id="add-legend" class="section level3" number="6.2.32">
<h3><span class="header-section-number">6.2.32</span> Add Legend</h3>
<p>If you stick to it, here is how to add a legend to the chart:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="evolution.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library</span></span>
<span id="cb425-2"><a href="evolution.html#cb425-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(latticeExtra)</span>
<span id="cb425-3"><a href="evolution.html#cb425-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb425-4"><a href="evolution.html#cb425-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb425-5"><a href="evolution.html#cb425-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb425-6"><a href="evolution.html#cb425-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb425-7"><a href="evolution.html#cb425-7" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb425-8"><a href="evolution.html#cb425-8" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> var1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb425-9"><a href="evolution.html#cb425-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,var1,var2)</span>
<span id="cb425-10"><a href="evolution.html#cb425-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb425-11"><a href="evolution.html#cb425-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb425-12"><a href="evolution.html#cb425-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; construct separate plots for each series</span></span>
<span id="cb425-13"><a href="evolution.html#cb425-13" aria-hidden="true" tabindex="-1"></a>obj1 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var1 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span> , <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb425-14"><a href="evolution.html#cb425-14" aria-hidden="true" tabindex="-1"></a>obj2 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var2 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb425-15"><a href="evolution.html#cb425-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb425-16"><a href="evolution.html#cb425-16" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; Make the plot with second y axis AND legend:</span></span>
<span id="cb425-17"><a href="evolution.html#cb425-17" aria-hidden="true" tabindex="-1"></a><span class="fu">doubleYScale</span>(obj1, obj2, <span class="at">text =</span> <span class="fu">c</span>(<span class="st">&quot;obj1&quot;</span>, <span class="st">&quot;obj2&quot;</span>) , <span class="at">add.ylab2 =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/line-chart-evolution-add-legend-1.png" width="672" /></p>
</div>
</div>
<div id="streamgraph" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Streamgraph</h2>
<hr />
<p>A <a href="https://www.data-to-viz.com/graph/streamgraph.html">streamgraph</a> is a type of <a href="https://www.r-graph-gallery.com/stacked-area-graph.html">stacked area chart</a>. It represents the evolution of a numeric variable for several groups. Areas are usually displayed around a central axis, and edges are rounded to give a flowing shape.</p>
<div id="most-basic-streamgraph" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Most Basic Streamgraph</h3>
<p>This section describes how to build a basic streamgraph using R and the streamgraph package. It provides the reproducible code and explanation.</p>
<p>This section describe the basic use of the streamgraph package. Your input needs 3 columns:</p>
<ul>
<li>Numeric variable for the X axis. Usually it provides time.</li>
<li>Numeric variable for the Y axis: this is the variable we are studying.</li>
<li>Categorical variable: each group will be plotted as a distinct shape.</li>
</ul>
<p>The <code>streamgraph()</code> function requires those 3 inputs to work.</p>
<p>Note: The streamgraph package is a work by Bob Rudis.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="evolution.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb426-2"><a href="evolution.html#cb426-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb426-3"><a href="evolution.html#cb426-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb426-4"><a href="evolution.html#cb426-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb426-5"><a href="evolution.html#cb426-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb426-6"><a href="evolution.html#cb426-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1990</span>,<span class="dv">2016</span>) , <span class="at">each=</span><span class="dv">10</span>),</span>
<span id="cb426-7"><a href="evolution.html#cb426-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] , <span class="dv">27</span>),</span>
<span id="cb426-8"><a href="evolution.html#cb426-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.0001</span>) , <span class="dv">270</span>)</span>
<span id="cb426-9"><a href="evolution.html#cb426-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb426-10"><a href="evolution.html#cb426-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb426-11"><a href="evolution.html#cb426-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic stream graph: just give the 3 arguments</span></span>
<span id="cb426-12"><a href="evolution.html#cb426-12" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>, <span class="at">width=</span><span class="st">&quot;1000px&quot;</span>)</span>
<span id="cb426-13"><a href="evolution.html#cb426-13" aria-hidden="true" tabindex="-1"></a>pp </span>
<span id="cb426-14"><a href="evolution.html#cb426-14" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb426-15"><a href="evolution.html#cb426-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlwidgets)</span>
<span id="cb426-16"><a href="evolution.html#cb426-16" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWidget</span>(pp, <span class="at">file=</span><span class="fu">paste0</span>( <span class="fu">getwd</span>(), <span class="st">&quot;/evolutionHtml/streamgraphBasic.html&quot;</span>))</span></code></pre></div>
<center>
<iframe title="Streamgraph Basic" src="evolutionHtml/streamgraphBasic.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="control-streamgraph-offset" class="section level3" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Control Streamgraph Offset</h3>
<p>The streamgraph package offers several options concerning the chart offset. This feature has a massive impact on the general appearance. This section provides a description of the options.</p>
<p>This section follows the previous basic streamgraph. It shows the effect of the offset option that can take 3 values:</p>
<ul>
<li><strong>silhouette</strong>: shapes are displayed on both side of an horizontal axis.</li>
<li><strong>zero</strong>: displayed on top of the 0 line.</li>
<li><strong>expand</strong>: equivalent of a percent stacked area chart: the full height is used to visualize percentages.</li>
</ul>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="evolution.html#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb427-2"><a href="evolution.html#cb427-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb427-3"><a href="evolution.html#cb427-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb427-4"><a href="evolution.html#cb427-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb427-5"><a href="evolution.html#cb427-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1990</span>,<span class="dv">2016</span>) , <span class="at">each=</span><span class="dv">10</span>),</span>
<span id="cb427-6"><a href="evolution.html#cb427-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] , <span class="dv">27</span>),</span>
<span id="cb427-7"><a href="evolution.html#cb427-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.0001</span>) , <span class="dv">270</span>)</span>
<span id="cb427-8"><a href="evolution.html#cb427-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb427-9"><a href="evolution.html#cb427-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Type 1 (default)</span></span>
<span id="cb427-10"><a href="evolution.html#cb427-10" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span> , </span>
<span id="cb427-11"><a href="evolution.html#cb427-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">offset=</span><span class="st">&quot;silhouette&quot;</span>,</span>
<span id="cb427-12"><a href="evolution.html#cb427-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb427-13"><a href="evolution.html#cb427-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb427-14"><a href="evolution.html#cb427-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb427-15"><a href="evolution.html#cb427-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Type 2 </span></span>
<span id="cb427-16"><a href="evolution.html#cb427-16" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span> , </span>
<span id="cb427-17"><a href="evolution.html#cb427-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">offset=</span><span class="st">&quot;zero&quot;</span>,</span>
<span id="cb427-18"><a href="evolution.html#cb427-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb427-19"><a href="evolution.html#cb427-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb427-20"><a href="evolution.html#cb427-20" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb427-21"><a href="evolution.html#cb427-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Type 3.</span></span>
<span id="cb427-22"><a href="evolution.html#cb427-22" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span> , </span>
<span id="cb427-23"><a href="evolution.html#cb427-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">offset=</span><span class="st">&quot;expand&quot;</span>,</span>
<span id="cb427-24"><a href="evolution.html#cb427-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb427-25"><a href="evolution.html#cb427-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb427-26"><a href="evolution.html#cb427-26" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb427-27"><a href="evolution.html#cb427-27" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb427-28"><a href="evolution.html#cb427-28" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p1, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphOffset1.html&quot;))</span></span>
<span id="cb427-29"><a href="evolution.html#cb427-29" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p2, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphOffset2.html&quot;))</span></span>
<span id="cb427-30"><a href="evolution.html#cb427-30" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p3, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphOffset3.html&quot;))</span></span></code></pre></div>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="evolution.html#cb428-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<center>
<iframe title="Streamgraph Offset 1" src="evolutionHtml/streamgraphOffset1.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="evolution.html#cb429-1" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<center>
<iframe title="Streamgraph Offset 2" src="evolutionHtml/streamgraphOffset2.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="evolution.html#cb430-1" aria-hidden="true" tabindex="-1"></a>p3</span></code></pre></div>
<center>
<iframe title="Streamgraph Offset 3" src="evolutionHtml/streamgraphOffset3.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="change-streamgraph-shape" class="section level3" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Change Streamgraph Shape</h3>
<p>By definition a streamgraph has rounded angles, giving a nice feeling of flow. It is possible to change this shape using an option of the streamgraph package.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="evolution.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb431-2"><a href="evolution.html#cb431-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb431-3"><a href="evolution.html#cb431-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb431-4"><a href="evolution.html#cb431-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb431-5"><a href="evolution.html#cb431-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1990</span>,<span class="dv">2016</span>) , <span class="at">each=</span><span class="dv">10</span>),</span>
<span id="cb431-6"><a href="evolution.html#cb431-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] , <span class="dv">27</span>),</span>
<span id="cb431-7"><a href="evolution.html#cb431-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.0001</span>) , <span class="dv">270</span>)</span>
<span id="cb431-8"><a href="evolution.html#cb431-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb431-9"><a href="evolution.html#cb431-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape: classic</span></span>
<span id="cb431-10"><a href="evolution.html#cb431-10" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>,</span>
<span id="cb431-11"><a href="evolution.html#cb431-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb431-12"><a href="evolution.html#cb431-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb431-13"><a href="evolution.html#cb431-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape: stacked area graph</span></span>
<span id="cb431-14"><a href="evolution.html#cb431-14" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span> ,<span class="at">interpolate=</span><span class="st">&quot;linear&quot;</span> ,</span>
<span id="cb431-15"><a href="evolution.html#cb431-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb431-16"><a href="evolution.html#cb431-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb431-17"><a href="evolution.html#cb431-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape: stacked barplot</span></span>
<span id="cb431-18"><a href="evolution.html#cb431-18" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span> ,<span class="at">interpolate=</span><span class="st">&quot;step&quot;</span> ,</span>
<span id="cb431-19"><a href="evolution.html#cb431-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb431-20"><a href="evolution.html#cb431-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb431-21"><a href="evolution.html#cb431-21" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb431-22"><a href="evolution.html#cb431-22" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb431-23"><a href="evolution.html#cb431-23" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p1, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphShape1.html&quot;))</span></span>
<span id="cb431-24"><a href="evolution.html#cb431-24" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p2, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphShape2.html&quot;))</span></span>
<span id="cb431-25"><a href="evolution.html#cb431-25" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p3, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphShape3.html&quot;))</span></span></code></pre></div>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="evolution.html#cb432-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<center>
<iframe title="Streamgraph Shape 1" src="evolutionHtml/streamgraphShape1.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="evolution.html#cb433-1" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<center>
<iframe title="Streamgraph Shape 1" src="evolutionHtml/streamgraphShape2.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="evolution.html#cb434-1" aria-hidden="true" tabindex="-1"></a>p3</span></code></pre></div>
<center>
<iframe title="Streamgraph Shape 1" src="evolutionHtml/streamgraphShape3.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="change-streamgraph-color" class="section level3" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Change Streamgraph Color</h3>
<p>The streamgraph package offers several options to control the color palette in use. Both R Color Brewer and custom color palette are supported.</p>
<p>The streamgraph package offers a few options to customize the chart color:</p>
<ul>
<li><code>scale_fill_brewer()</code>: use one of the R ColorBrewer palette, both continuous and categorical.</li>
<li><code>scale_fill_manual()</code>: buid a custom color palette: just provide a vector containing the chosen colors.</li>
</ul>
<p>Note: you can save the chart as a html file using the <code>saveWidget()</code> function of the htmlwidgets package, as suggested in the commented code below.</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="evolution.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb435-2"><a href="evolution.html#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb435-3"><a href="evolution.html#cb435-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb435-4"><a href="evolution.html#cb435-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb435-5"><a href="evolution.html#cb435-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1990</span>,<span class="dv">2016</span>) , <span class="at">each=</span><span class="dv">10</span>),</span>
<span id="cb435-6"><a href="evolution.html#cb435-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] , <span class="dv">27</span>),</span>
<span id="cb435-7"><a href="evolution.html#cb435-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.0001</span>) , <span class="dv">270</span>)</span>
<span id="cb435-8"><a href="evolution.html#cb435-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb435-9"><a href="evolution.html#cb435-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph 1: choose a RColorBrewer palette -&gt; continuous</span></span>
<span id="cb435-10"><a href="evolution.html#cb435-10" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>,</span>
<span id="cb435-11"><a href="evolution.html#cb435-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb435-12"><a href="evolution.html#cb435-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb435-13"><a href="evolution.html#cb435-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sg_fill_brewer</span>(<span class="st">&quot;Blues&quot;</span>)</span>
<span id="cb435-14"><a href="evolution.html#cb435-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph 2: choose a RColorBrewer palette -&gt; categorical</span></span>
<span id="cb435-15"><a href="evolution.html#cb435-15" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>,</span>
<span id="cb435-16"><a href="evolution.html#cb435-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb435-17"><a href="evolution.html#cb435-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb435-18"><a href="evolution.html#cb435-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sg_fill_brewer</span>(<span class="st">&quot;Pastel1&quot;</span>)</span>
<span id="cb435-19"><a href="evolution.html#cb435-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Graph 3: choose color manually with number, color name, rgb </span></span>
<span id="cb435-20"><a href="evolution.html#cb435-20" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>  ,</span>
<span id="cb435-21"><a href="evolution.html#cb435-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">width=</span><span class="st">&quot;100%&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span></span>
<span id="cb435-22"><a href="evolution.html#cb435-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb435-23"><a href="evolution.html#cb435-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sg_fill_manual</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>))</span>
<span id="cb435-24"><a href="evolution.html#cb435-24" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb435-25"><a href="evolution.html#cb435-25" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb435-26"><a href="evolution.html#cb435-26" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p1, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphColor1.html&quot;))</span></span>
<span id="cb435-27"><a href="evolution.html#cb435-27" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p2, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphColor2.html&quot;))</span></span>
<span id="cb435-28"><a href="evolution.html#cb435-28" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p3, file=paste0( getwd(), &quot;/evolutionHtml/streamgraphColor3.html&quot;))</span></span></code></pre></div>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="evolution.html#cb436-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<center>
<iframe title="Streamgraph Color 1" src="evolutionHtml/streamgraphColor1.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="evolution.html#cb437-1" aria-hidden="true" tabindex="-1"></a>p2</span></code></pre></div>
<center>
<iframe title="Streamgraph Color 2" src="evolutionHtml/streamgraphColor2.html" height="400px" width="100%"></iframe>
</center>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="evolution.html#cb438-1" aria-hidden="true" tabindex="-1"></a>p3</span></code></pre></div>
<center>
<iframe title="Streamgraph Color 3" src="evolutionHtml/streamgraphColor3.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="streamgraph-with-dropdown-button" class="section level3" number="6.3.5">
<h3><span class="header-section-number">6.3.5</span> Streamgraph with Dropdown Button</h3>
<p>The streamgraph package allows to add a dropdown button that controls which group to highlight. See how to use this option with explanation and reproducible code. It is pretty straightforward to add a dropdown button thanks to <code>the sg_legend()</code> function. Unlike other <code>streamgraph()</code> options, <code>sg_legend()</code> is used after the pipe command (%&gt;%).</p>
<p>Note: you can save the chart as a html file using the <code>saveWidget()</code> function of the htmlwidgets package, as suggested in the commented code below.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="evolution.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb439-2"><a href="evolution.html#cb439-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(streamgraph)</span>
<span id="cb439-3"><a href="evolution.html#cb439-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb439-4"><a href="evolution.html#cb439-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data:</span></span>
<span id="cb439-5"><a href="evolution.html#cb439-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb439-6"><a href="evolution.html#cb439-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">year=</span><span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1990</span>,<span class="dv">2016</span>) , <span class="at">each=</span><span class="dv">10</span>),</span>
<span id="cb439-7"><a href="evolution.html#cb439-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] , <span class="dv">27</span>),</span>
<span id="cb439-8"><a href="evolution.html#cb439-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">sample</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.0001</span>) , <span class="dv">270</span>)</span>
<span id="cb439-9"><a href="evolution.html#cb439-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb439-10"><a href="evolution.html#cb439-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb439-11"><a href="evolution.html#cb439-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Stream graph with a legend</span></span>
<span id="cb439-12"><a href="evolution.html#cb439-12" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">streamgraph</span>(data, <span class="at">key=</span><span class="st">&quot;name&quot;</span>, <span class="at">value=</span><span class="st">&quot;value&quot;</span>, <span class="at">date=</span><span class="st">&quot;year&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>, <span class="at">width=</span><span class="st">&quot;300px&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb439-13"><a href="evolution.html#cb439-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sg_legend</span>(<span class="at">show=</span><span class="cn">TRUE</span>, <span class="at">label=</span><span class="st">&quot;names: &quot;</span>)</span>
<span id="cb439-14"><a href="evolution.html#cb439-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb439-15"><a href="evolution.html#cb439-15" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb439-16"><a href="evolution.html#cb439-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlwidgets)</span>
<span id="cb439-17"><a href="evolution.html#cb439-17" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWidget</span>(pp, <span class="at">file=</span><span class="fu">paste0</span>( <span class="fu">getwd</span>(), <span class="st">&quot;/evolutionHtml/streamgraphDropdown.html&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="evolution.html#cb440-1" aria-hidden="true" tabindex="-1"></a>pp</span></code></pre></div>
<center>
<iframe title="Streamgraph Dropdown" src="evolutionHtml/streamgraphDropdown.html" height="400px" width="100%"></iframe>
</center>
</div>
</div>
<div id="time-series" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Time Series</h2>
<hr />
<p>Time series aim to study the evolution of one or several variables through time. This section gives examples using <code>R</code>. A focus is made on the <code>tidyverse</code>: the <code>lubridate</code> package is indeed your best friend to deal with the date format, and <code>ggplot2</code> allows to plot it efficiently. The <code>dygraphs</code> package is also considered to build stunning interactive charts.</p>
<div id="struggling-with-the-date-format-you-will-3-the-lubridate-package" class="section level4" number="6.4.0.1">
<h4><span class="header-section-number">6.4.0.1</span> Struggling with the Date Format? You will &lt;3 The <code>lubridate</code> Package</h4>
<ul>
<li>Building time series requires the time variable to be at the date format. The first step of your analysis must be to double check that R read your data correctly, i.e.at the date format. This is possible thanks to the <code>str()</code> function:</li>
</ul>
<center>
<img src="https://www.r-graph-gallery.com/img/other/strExample.png" style="width:75.0%" />
</center>
<ul>
<li>Getting this date format can be a pain, and the <code>lubridate</code> package is such a life saver. It offers several function which name are composed by 3 letters: year (<code>y</code>), month (<code>m</code>) and day (<code>d</code>). Example:</li>
</ul>
<center>
<img src="https://www.r-graph-gallery.com/img/other/tableYmd.png" style="width:75.0%" />
</center>
</div>
<div id="time-series-with-ggplot2" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Time Series with <code>Ggplot2</code></h3>
<p><code>ggplot2</code> offers great features when it comes to visualize time series. The date format will be recognized automatically, resulting in neat X axis labels. The <code>scale_x_data()</code> makes it a breeze to customize those labels. Last but not least, <code>plotly</code> can turn the resulting chart interactive in one more line of code.</p>
<div id="basic-line-chart-for-time-series-with-ggplot2" class="section level4" number="6.4.1.1">
<h4><span class="header-section-number">6.4.1.1</span> Basic Line Chart for Time Series with <code>ggplot2</code></h4>
<p>The <code>ggplot2</code> package recognizes the <code>date</code> format and automatically uses a specific type of X axis. If the time variable isnt at the <code>date</code> format, this wont work. Always check with <code>str(data)</code> how variables are understood by R. If not read as a date, use <a href="https://www.r-graph-gallery.com/time-series.html">lubridate</a> to convert it. Read more about this <a href="https://www.r-graph-gallery.com/time-series.html">here</a>.</p>
<p>On the chart beside, dates are displayed using a neat format: month + year.</p>
<p><u>Note</u>: The gallery offers a section dedicated to <a href="https://www.r-graph-gallery.com/line-plot.html">line charts</a>.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="evolution.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb441-2"><a href="evolution.html#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb441-3"><a href="evolution.html#cb441-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb441-4"><a href="evolution.html#cb441-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy data</span></span>
<span id="cb441-5"><a href="evolution.html#cb441-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb441-6"><a href="evolution.html#cb441-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">day =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2017-06-14&quot;</span>) <span class="sc">-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">364</span>,</span>
<span id="cb441-7"><a href="evolution.html#cb441-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">runif</span>(<span class="dv">365</span>) <span class="sc">+</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">140</span>, <span class="dv">224</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb441-8"><a href="evolution.html#cb441-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb441-9"><a href="evolution.html#cb441-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb441-10"><a href="evolution.html#cb441-10" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb441-11"><a href="evolution.html#cb441-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb441-12"><a href="evolution.html#cb441-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb441-13"><a href="evolution.html#cb441-13" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-1.png" width="672" /></p>
</div>
</div>
<div id="format-used-on-the-x-axis" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Format used on the X Axis</h3>
<p>As soon as the time variable is recognized as a <code>date</code>, you can use the <code>scale_x_date()</code> function to choose the format displayed on the X axis.</p>
<p>Below are 4 examples on how to call the function. See beside the list of available options. (<a href="http://www.statmethods.net/input/dates.html">source</a>)</p>
<center>
<img src="https://www.r-graph-gallery.com/img/other/tableTimeFormat.png" style="width:75.0%" />
</center>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="evolution.html#cb442-1" aria-hidden="true" tabindex="-1"></a>p<span class="sc">+</span><span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">&quot;%b&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-format-x-axis-1.png" width="672" /></p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="evolution.html#cb443-1" aria-hidden="true" tabindex="-1"></a>p<span class="sc">+</span><span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">&quot;%Y %b %d&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-format-x-axis-2.png" width="672" /></p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="evolution.html#cb444-1" aria-hidden="true" tabindex="-1"></a>p<span class="sc">+</span><span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">&quot;%W&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-format-x-axis-3.png" width="672" /></p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="evolution.html#cb445-1" aria-hidden="true" tabindex="-1"></a>p<span class="sc">+</span><span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">&quot;%m-%Y&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-format-x-axis-4.png" width="672" /></p>
</div>
<div id="breaks-and-minor-breaks" class="section level3" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Breaks and Minor Breaks</h3>
<p>It also possible to control the amount of break and minor breaks to display with <code>date_breaks</code> and <code>date_minor_breaks</code>.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="evolution.html#cb446-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">&quot;1 week&quot;</span>, <span class="at">date_labels =</span> <span class="st">&quot;%W&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-breaks-minor-breaks-1.png" width="672" /></p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="evolution.html#cb447-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_x_date</span>(<span class="at">date_minor_breaks =</span> <span class="st">&quot;2 day&quot;</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-breaks-minor-breaks-2.png" width="672" /></p>
</div>
<div id="add-angle-to-x-axis-labels" class="section level3" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> Add Angle to X Axis Labels</h3>
<p>The <code>ggplot2</code> package recognizes the date format and automatically uses a specific type of X axis. If the time variable isnt at the <code>date</code> format, this wont work. Always check with <code>str(data)</code> how variables are understood by R. If not read as a date, use <a href="https://www.r-graph-gallery.com/time-series.html">lubridate</a> to convert it. Read more about this <a href="https://www.r-graph-gallery.com/time-series.html">here</a>.</p>
<p>On the chart beside, dates are displayed using a neat format: month + year.</p>
<p><u>Note</u>: the gallery offers a section dedicated to <a href="https://www.r-graph-gallery.com/line-plot.html">line charts</a>.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="evolution.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb448-2"><a href="evolution.html#cb448-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb448-3"><a href="evolution.html#cb448-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb448-4"><a href="evolution.html#cb448-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb448-5"><a href="evolution.html#cb448-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy data</span></span>
<span id="cb448-6"><a href="evolution.html#cb448-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb448-7"><a href="evolution.html#cb448-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">day =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2017-06-14&quot;</span>) <span class="sc">-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">364</span>,</span>
<span id="cb448-8"><a href="evolution.html#cb448-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">runif</span>(<span class="dv">365</span>) <span class="sc">-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">140</span>, <span class="dv">224</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb448-9"><a href="evolution.html#cb448-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb448-10"><a href="evolution.html#cb448-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb448-11"><a href="evolution.html#cb448-11" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb448-12"><a href="evolution.html#cb448-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span> </span>
<span id="cb448-13"><a href="evolution.html#cb448-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb448-14"><a href="evolution.html#cb448-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb448-15"><a href="evolution.html#cb448-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>, <span class="at">hjust=</span><span class="dv">1</span>)) </span>
<span id="cb448-16"><a href="evolution.html#cb448-16" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-add-angle-x-axis-labels-1.png" width="672" /></p>
</div>
<div id="select-time-frame" class="section level3" number="6.4.5">
<h3><span class="header-section-number">6.4.5</span> Select Time Frame</h3>
<p>Use the <code>limit</code> option of the <code>scale_x_date()</code> function to select a time frame in the data:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="evolution.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb449-2"><a href="evolution.html#cb449-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb449-3"><a href="evolution.html#cb449-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb449-4"><a href="evolution.html#cb449-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb449-5"><a href="evolution.html#cb449-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy data</span></span>
<span id="cb449-6"><a href="evolution.html#cb449-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb449-7"><a href="evolution.html#cb449-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">day =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2017-06-14&quot;</span>) <span class="sc">-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">364</span>,</span>
<span id="cb449-8"><a href="evolution.html#cb449-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">runif</span>(<span class="dv">365</span>) <span class="sc">+</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">140</span>, <span class="dv">224</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb449-9"><a href="evolution.html#cb449-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb449-10"><a href="evolution.html#cb449-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Most basic bubble plot</span></span>
<span id="cb449-11"><a href="evolution.html#cb449-11" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb449-12"><a href="evolution.html#cb449-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="at">color=</span><span class="st">&quot;steelblue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb449-13"><a href="evolution.html#cb449-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb449-14"><a href="evolution.html#cb449-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb449-15"><a href="evolution.html#cb449-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb449-16"><a href="evolution.html#cb449-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb449-17"><a href="evolution.html#cb449-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">limit=</span><span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2017-01-01&quot;</span>),<span class="fu">as.Date</span>(<span class="st">&quot;2017-02-11&quot;</span>))) <span class="sc">+</span></span>
<span id="cb449-18"><a href="evolution.html#cb449-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">1.5</span>)</span>
<span id="cb449-19"><a href="evolution.html#cb449-19" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-select-time-frame-1.png" width="672" /></p>
</div>
<div id="line-chart-annotation-with-ggplot2-1" class="section level3" number="6.4.6">
<h3><span class="header-section-number">6.4.6</span> Line Chart Annotation with <code>ggplot2</code></h3>
<p>Annotation is a crucial part of a <a href="https://www.r-graph-gallery.com/time-series.html">time series</a> visual. This section shows how to highlight main parts of a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> with text, circles, lines and more.</p>
<p>The <code>ggplot2</code> package recognizes the <code>date</code> format and automatically uses a specific type of X axis. If the time variable isnt at the <code>date</code> format, this wont work. Always check with <code>str(data)</code> how variables are understood by R. If not read as a date, use <a href="https://www.r-graph-gallery.com/time-series.html">lubridate</a> to convert it. Read more about this <a href="https://www.r-graph-gallery.com/time-series.html">here</a>.</p>
<p>On the chart beside, dates are displayed using a neat format: month + year.</p>
<p><u>Note</u>: the gallery offers a section dedicated to <a href="https://www.r-graph-gallery.com/line-plot.html">line charts</a>.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="evolution.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb450-2"><a href="evolution.html#cb450-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb450-3"><a href="evolution.html#cb450-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb450-4"><a href="evolution.html#cb450-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb450-5"><a href="evolution.html#cb450-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb450-6"><a href="evolution.html#cb450-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb450-7"><a href="evolution.html#cb450-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb450-8"><a href="evolution.html#cb450-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb450-9"><a href="evolution.html#cb450-9" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb450-10"><a href="evolution.html#cb450-10" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb450-11"><a href="evolution.html#cb450-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb450-12"><a href="evolution.html#cb450-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb450-13"><a href="evolution.html#cb450-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">22000</span>) <span class="sc">+</span></span>
<span id="cb450-14"><a href="evolution.html#cb450-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">x=</span><span class="fu">as.Date</span>(<span class="st">&quot;2017-01-01&quot;</span>), <span class="at">y=</span><span class="dv">20089</span>, </span>
<span id="cb450-15"><a href="evolution.html#cb450-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">label=</span><span class="st">&quot;Bitcoin price reached 20k $</span><span class="sc">\n</span><span class="st">at the end of 2017&quot;</span>) <span class="sc">+</span></span>
<span id="cb450-16"><a href="evolution.html#cb450-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">x=</span><span class="fu">as.Date</span>(<span class="st">&quot;2017-12-17&quot;</span>), <span class="at">y=</span><span class="dv">20089</span>, <span class="at">size=</span><span class="dv">10</span>, <span class="at">shape=</span><span class="dv">21</span>, <span class="at">fill=</span><span class="st">&quot;transparent&quot;</span>) <span class="sc">+</span></span>
<span id="cb450-17"><a href="evolution.html#cb450-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">5000</span>, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, <span class="at">size=</span>.<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb450-18"><a href="evolution.html#cb450-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="r-graph_files/figure-html/time-series-evolution-line-chart-annotation-1.png" width="672" /></p>
</div>
<div id="dual-y-axis-with-r-and-ggplot2-1" class="section level3" number="6.4.7">
<h3><span class="header-section-number">6.4.7</span> Dual Y Axis with R and <code>ggplot2</code></h3>
<p>This section describes how to build a dual Y axis chart using <code>R</code> and <code>ggplot2</code>. It uses the <code>sec.axis</code> attribute to add the second Y axis. Note that this kind of chart has major <a href="https://www.data-to-viz.com/caveats.html">drawbacks</a>. Use it with care</p>
<p>Interactive area chart with R and plotly</p>
</div>
<div id="using-the-ggplotly-function" class="section level3" number="6.4.8">
<h3><span class="header-section-number">6.4.8</span> Using the <code>ggplotly()</code> Function</h3>
<p>This section follows the previous <a href="https://www.r-graph-gallery.com/164-area-chart-ggplot2.html">basic area chart</a> built with ggplot2.</p>
<p>The idea is to turn the chart interactive:</p>
<ul>
<li>Zoom by selecting an area of interest</li>
<li>Hover the line to get exact time and value</li>
<li>Export to png</li>
<li>Slide axis</li>
<li>Double click to re-initialize.</li>
</ul>
<p>This is done thanks to the <code>ggplotly()</code> function of the plotly package that turn any ggplot2 chart object interactive.</p>
<p>The plotly package allows to build interactive charts directly from R. Here is a application to area chart, using both the <code>plot_ly()</code> and <code>ggplotly()</code> functions.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="evolution.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb451-2"><a href="evolution.html#cb451-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb451-3"><a href="evolution.html#cb451-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb451-4"><a href="evolution.html#cb451-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb451-5"><a href="evolution.html#cb451-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb451-6"><a href="evolution.html#cb451-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset from github</span></span>
<span id="cb451-7"><a href="evolution.html#cb451-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb451-8"><a href="evolution.html#cb451-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb451-9"><a href="evolution.html#cb451-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Usual area chart</span></span>
<span id="cb451-10"><a href="evolution.html#cb451-10" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb451-11"><a href="evolution.html#cb451-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value)) <span class="sc">+</span></span>
<span id="cb451-12"><a href="evolution.html#cb451-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_area</span>(<span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb451-13"><a href="evolution.html#cb451-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;#69b3a2&quot;</span>) <span class="sc">+</span></span>
<span id="cb451-14"><a href="evolution.html#cb451-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;bitcoin price ($)&quot;</span>) <span class="sc">+</span></span>
<span id="cb451-15"><a href="evolution.html#cb451-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_ipsum</span>()</span>
<span id="cb451-16"><a href="evolution.html#cb451-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn it interactive with ggplotly</span></span>
<span id="cb451-17"><a href="evolution.html#cb451-17" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(p)</span>
<span id="cb451-18"><a href="evolution.html#cb451-18" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb451-19"><a href="evolution.html#cb451-19" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb451-20"><a href="evolution.html#cb451-20" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb451-21"><a href="evolution.html#cb451-21" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/ggplotlyAreachart.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/ggplotlyAreachart.html" height="500px" width="100%"></iframe>
</center>
</div>
<div id="using-plot_ly" class="section level3" number="6.4.9">
<h3><span class="header-section-number">6.4.9</span> Using <code>plot_ly()</code></h3>
<p>The <code>ggplotly()</code> function above takes as input a ggplot2 chart and turn it interactive.</p>
<p>But the plotly package also allows to build interactive charts using its own function: <code>plot_ly()</code>.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="evolution.html#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb452-2"><a href="evolution.html#cb452-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb452-3"><a href="evolution.html#cb452-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb452-4"><a href="evolution.html#cb452-4" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">8</span>)</span>
<span id="cb452-5"><a href="evolution.html#cb452-5" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">4</span>)</span>
<span id="cb452-6"><a href="evolution.html#cb452-6" aria-hidden="true" tabindex="-1"></a>var3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb452-7"><a href="evolution.html#cb452-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Area chart with 2 groups</span></span>
<span id="cb452-8"><a href="evolution.html#cb452-8" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">x =</span> var1, <span class="at">y =</span> var2, <span class="at">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="at">mode=</span><span class="st">&quot;markers&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;tozeroy&quot;</span>)</span>
<span id="cb452-9"><a href="evolution.html#cb452-9" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">add_trace</span>(p, <span class="at">x =</span> var1, <span class="at">y =</span> var3, <span class="at">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="at">mode=</span><span class="st">&quot;markers&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;tonexty&quot;</span>)</span>
<span id="cb452-10"><a href="evolution.html#cb452-10" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb452-11"><a href="evolution.html#cb452-11" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb452-12"><a href="evolution.html#cb452-12" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb452-13"><a href="evolution.html#cb452-13" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/plotlyAreachart.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/plotlyAreachart.html" height="500px" width="100%"></iframe>
</center>
</div>
<div id="an-introduction-to-interactive-time-series-with-r-and-dygraphs" class="section level3" number="6.4.10">
<h3><span class="header-section-number">6.4.10</span> An Introduction to Interactive Time Series with R and Dygraphs</h3>
<p>This section is an introduction to the <code>dygraphs</code> package for interactive <a href="https://www.r-graph-gallery.com/time-series.html">time series</a> visualization with R. It shows how to deal with various input formats, and what are the main chart types offered.</p>
<p>The <code>dygraphs</code> package allows to represent <a href="https://www.r-graph-gallery.com/time-series.html">time series</a>: a chart where the X axis represent time, and the Y axis the evolution of one or several variables.</p>
<p><code>dygraphs</code> allows to make interactive charts: you can zoom on a specific time period, hover a data point to have more info, and more. Two input format are possible for the time variable:</p>
<ul>
<li><code>numeric</code>: like 1,2,3,4,5</li>
<li><code>date</code>: like 2017/12/08</li>
</ul>
<p>You can check at which your format your time variable is with <code>str(data)</code>.</p>
</div>
<div id="if-time-is-a-numeric-variable" class="section level3" number="6.4.11">
<h3><span class="header-section-number">6.4.11</span> If Time is a <code>numeric</code> Variable</h3>
<p>Thats the simplest use case. Just make sure that time is displayed on the first column of the data frame.</p>
<p>Here is a code example and the resulting chart:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="evolution.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb453-2"><a href="evolution.html#cb453-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb453-3"><a href="evolution.html#cb453-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb453-4"><a href="evolution.html#cb453-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Format 1: time is represented by a simple number. (must be numeric and ordered)</span></span>
<span id="cb453-5"><a href="evolution.html#cb453-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( </span>
<span id="cb453-6"><a href="evolution.html#cb453-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">time=</span><span class="fu">c</span>( <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="fl">0.5</span>), <span class="dv">40</span>), </span>
<span id="cb453-7"><a href="evolution.html#cb453-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">runif</span>(<span class="dv">42</span>)</span>
<span id="cb453-8"><a href="evolution.html#cb453-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb453-9"><a href="evolution.html#cb453-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check time is numeric</span></span>
<span id="cb453-10"><a href="evolution.html#cb453-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span>
<span id="cb453-11"><a href="evolution.html#cb453-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Use dygraph</span></span>
<span id="cb453-12"><a href="evolution.html#cb453-12" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data)</span>
<span id="cb453-13"><a href="evolution.html#cb453-13" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/timeSeriesDygraph.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="if-time-is-a-date-variable" class="section level3" number="6.4.12">
<h3><span class="header-section-number">6.4.12</span> If Time is a <code>date</code> Variable</h3>
<p>The process is slightly more complicated with the date format.</p>
<ul>
<li><p>First, check time is indeed recognized as a date by R with <code>str(data)</code>. This gives the format of each column, so check that <code>Date</code> is written.</p></li>
<li><p>Second, transform the data frame to the <code>xts</code> format (xts=eXtensible Time Series). This is requested by dygraphs.</p></li>
</ul>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="evolution.html#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb454-2"><a href="evolution.html#cb454-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb454-3"><a href="evolution.html#cb454-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts) <span class="co"># To make the convertion data-frame / xts format</span></span>
<span id="cb454-4"><a href="evolution.html#cb454-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb454-5"><a href="evolution.html#cb454-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Format 2: time is represented by a date.</span></span>
<span id="cb454-6"><a href="evolution.html#cb454-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb454-7"><a href="evolution.html#cb454-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">time=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">40</span>, <span class="at">to=</span><span class="fu">Sys.Date</span>(), <span class="at">by=</span><span class="dv">1</span> ), </span>
<span id="cb454-8"><a href="evolution.html#cb454-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">runif</span>(<span class="dv">41</span>)</span>
<span id="cb454-9"><a href="evolution.html#cb454-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb454-10"><a href="evolution.html#cb454-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb454-11"><a href="evolution.html#cb454-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Your time column MUST be a time format!, check it out with str()</span></span>
<span id="cb454-12"><a href="evolution.html#cb454-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span>
<span id="cb454-13"><a href="evolution.html#cb454-13" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb454-14"><a href="evolution.html#cb454-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Then you can create the xts format, and thus use dygraph</span></span>
<span id="cb454-15"><a href="evolution.html#cb454-15" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data<span class="sc">$</span>value, <span class="at">order.by =</span> data<span class="sc">$</span>time)</span>
<span id="cb454-16"><a href="evolution.html#cb454-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the chart</span></span>
<span id="cb454-17"><a href="evolution.html#cb454-17" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(don)</span>
<span id="cb454-18"><a href="evolution.html#cb454-18" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphsXts.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="several-series" class="section level3" number="6.4.13">
<h3><span class="header-section-number">6.4.13</span> Several Series</h3>
<p>The process to plot several variables is very close. When you do the transformation to the <code>xts</code> format, simply specify all the columns you want to keep on your chart.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="evolution.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb455-2"><a href="evolution.html#cb455-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb455-3"><a href="evolution.html#cb455-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts) <span class="co"># To make the convertion data-frame / xts format</span></span>
<span id="cb455-4"><a href="evolution.html#cb455-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Format 3: Several variables for each date</span></span>
<span id="cb455-5"><a href="evolution.html#cb455-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb455-6"><a href="evolution.html#cb455-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">time=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">40</span>, <span class="at">to=</span><span class="fu">Sys.Date</span>(), <span class="at">by=</span><span class="dv">1</span> ), </span>
<span id="cb455-7"><a href="evolution.html#cb455-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value1=</span><span class="fu">runif</span>(<span class="dv">41</span>), </span>
<span id="cb455-8"><a href="evolution.html#cb455-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value2=</span><span class="fu">runif</span>(<span class="dv">41</span>)<span class="sc">+</span><span class="fl">0.7</span></span>
<span id="cb455-9"><a href="evolution.html#cb455-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb455-10"><a href="evolution.html#cb455-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Then you can create the xts format:</span></span>
<span id="cb455-11"><a href="evolution.html#cb455-11" aria-hidden="true" tabindex="-1"></a>don<span class="ot">=</span><span class="fu">xts</span>( <span class="at">x=</span>data[,<span class="sc">-</span><span class="dv">1</span>], <span class="at">order.by=</span>data<span class="sc">$</span>time)</span>
<span id="cb455-12"><a href="evolution.html#cb455-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Chart</span></span>
<span id="cb455-13"><a href="evolution.html#cb455-13" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(don)</span>
<span id="cb455-14"><a href="evolution.html#cb455-14" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb455-15"><a href="evolution.html#cb455-15" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb455-16"><a href="evolution.html#cb455-16" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb455-17"><a href="evolution.html#cb455-17" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/dygraphs316-3.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs316-3.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="getting-the-date-format" class="section level3" number="6.4.14">
<h3><span class="header-section-number">6.4.14</span> Getting the Date Format</h3>
<p>The hardest part in time series visualization is to get your data at the <code>date</code> format!</p>
<p>This can be a real struggle. Fortunately the <code>lubridate</code> package is here to make your life easier. Have a look to its documentation <a href="http://r4ds.had.co.nz/dates-and-times.html">here</a>.</p>
<p>Most of the time data is available at text format (like from excel spreadsheet). When you load these data you get a <code>character</code> format. You want to transform it in a <code>date</code>, <code>time</code> or <code>date-time</code> format. A set of functions with relevant names exist for that. Here is an example of utilization on a real dataset:</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="evolution.html#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries</span></span>
<span id="cb456-2"><a href="evolution.html#cb456-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb456-3"><a href="evolution.html#cb456-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts) <span class="co"># To make the convertion data-frame / xts format</span></span>
<span id="cb456-4"><a href="evolution.html#cb456-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># You will love it to work with dates</span></span>
<span id="cb456-5"><a href="evolution.html#cb456-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb456-6"><a href="evolution.html#cb456-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb456-7"><a href="evolution.html#cb456-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data (hosted on the gallery website)</span></span>
<span id="cb456-8"><a href="evolution.html#cb456-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://python-graph-gallery.com/wp-content/uploads/bike.csv&quot;</span>, <span class="at">header=</span>T, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb456-9"><a href="evolution.html#cb456-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb456-10"><a href="evolution.html#cb456-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the format, it is not a date yet !</span></span>
<span id="cb456-11"><a href="evolution.html#cb456-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span>
<span id="cb456-12"><a href="evolution.html#cb456-12" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb456-13"><a href="evolution.html#cb456-13" aria-hidden="true" tabindex="-1"></a><span class="co"># The wanna-be-date column looks like that: &quot;2011-02-19 02:00:00&quot;. This is Year, Month, Day, Hour, Minute, Second. Thus I can transform it with the function: ymd_hms</span></span>
<span id="cb456-14"><a href="evolution.html#cb456-14" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>datetime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(data<span class="sc">$</span>datetime)</span>
<span id="cb456-15"><a href="evolution.html#cb456-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb456-16"><a href="evolution.html#cb456-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if it worked properly!</span></span>
<span id="cb456-17"><a href="evolution.html#cb456-17" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span>
<span id="cb456-18"><a href="evolution.html#cb456-18" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb456-19"><a href="evolution.html#cb456-19" aria-hidden="true" tabindex="-1"></a><span class="co"># It does! Let&#39;s go to the its format like seen above, and make the dygraph</span></span>
<span id="cb456-20"><a href="evolution.html#cb456-20" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data<span class="sc">$</span>count, <span class="at">order.by =</span> data<span class="sc">$</span>datetime)</span>
<span id="cb456-21"><a href="evolution.html#cb456-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Chart</span></span>
<span id="cb456-22"><a href="evolution.html#cb456-22" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(don)</span>
<span id="cb456-23"><a href="evolution.html#cb456-23" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb456-24"><a href="evolution.html#cb456-24" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb456-25"><a href="evolution.html#cb456-25" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb456-26"><a href="evolution.html#cb456-26" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs316-4.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs316-4.html" height="400px" width="100%"></iframe>
</center>
<p>As a memo, here is an overview of the function that exist:</p>
<ul>
<li><code>ymd()</code></li>
<li><code>mdy()</code></li>
<li><code>dmy()</code></li>
<li><code>ymd_hms()</code></li>
</ul>
<hr />
</div>
<div id="time-series-with-dygraph" class="section level3" number="6.4.15">
<h3><span class="header-section-number">6.4.15</span> Time Series With Dygraph</h3>
<p>The <a href="https://github.com/rstudio/dygraphs">dygraphs</a> package is a <a href="http://www.htmlwidgets.org/">html widget</a>. It allows to make interactive time series chart: you can zoom and hover data points to get additional information. Start by reading the <a href="https://www.r-graph-gallery.com/316-possible-inputs-for-the-dygraphs-library.html">chart #316</a> for quick introduction and input description. Then, the <a href="https://www.r-graph-gallery.com/317-time-series-with-the-dygraphs-library.html">graph #317</a> gives an overview of the different types of charts that are offered. To go further, check the <a href="https://www.r-graph-gallery.com/318-custom-dygraphs-time-series-example.html">graph #318</a> (interactive version below).</p>
<div id="time-series-visualization-with-the-dygraphs-package" class="section level4" number="6.4.15.1">
<h4><span class="header-section-number">6.4.15.1</span> Time Series Visualization with the Dygraphs Package</h4>
<p>This section describes the options offered by the dygraphs package for interactive time series visualization with R. It shows the different chart types available and how to customize them.</p>
</div>
<div id="connected-scatterplot" class="section level4" number="6.4.15.2">
<h4><span class="header-section-number">6.4.15.2</span> Connected Scatterplot</h4>
<p>Most of the chart types described in this section are called using the <code>dyOptions()</code> function. For connected scatterplots, use <code>drawPoints = TRUE</code>. Note that the gallery offers a <a href="https://www.r-graph-gallery.com/connected-scatterplot.html">whole section</a> on connected scatterplot.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="evolution.html#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb457-2"><a href="evolution.html#cb457-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb457-3"><a href="evolution.html#cb457-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts)          <span class="co"># To make the convertion data-frame / xts format</span></span>
<span id="cb457-4"><a href="evolution.html#cb457-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb457-5"><a href="evolution.html#cb457-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data </span></span>
<span id="cb457-6"><a href="evolution.html#cb457-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb457-7"><a href="evolution.html#cb457-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">time=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">40</span>, <span class="at">to=</span><span class="fu">Sys.Date</span>(), <span class="at">by=</span><span class="dv">1</span> ), </span>
<span id="cb457-8"><a href="evolution.html#cb457-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value=</span><span class="fu">runif</span>(<span class="dv">41</span>)</span>
<span id="cb457-9"><a href="evolution.html#cb457-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb457-10"><a href="evolution.html#cb457-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check time is at the date format</span></span>
<span id="cb457-11"><a href="evolution.html#cb457-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>time)</span>
<span id="cb457-12"><a href="evolution.html#cb457-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch to XTS format</span></span>
<span id="cb457-13"><a href="evolution.html#cb457-13" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data<span class="sc">$</span>value, <span class="at">order.by =</span> data<span class="sc">$</span>time)</span>
<span id="cb457-14"><a href="evolution.html#cb457-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb457-15"><a href="evolution.html#cb457-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Default = line plot --&gt; See chart #316</span></span>
<span id="cb457-16"><a href="evolution.html#cb457-16" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb457-17"><a href="evolution.html#cb457-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Add points</span></span>
<span id="cb457-18"><a href="evolution.html#cb457-18" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb457-19"><a href="evolution.html#cb457-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyOptions</span>( <span class="at">drawPoints =</span> <span class="cn">TRUE</span>, <span class="at">pointSize =</span> <span class="dv">4</span> )</span>
<span id="cb457-20"><a href="evolution.html#cb457-20" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb457-21"><a href="evolution.html#cb457-21" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb457-22"><a href="evolution.html#cb457-22" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb457-23"><a href="evolution.html#cb457-23" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs317-1.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs317-5.html" height="400px" width="100%"></iframe>
</center>
</div>
</div>
<div id="area-chart-1" class="section level3" number="6.4.16">
<h3><span class="header-section-number">6.4.16</span> Area Chart</h3>
<p>Area chart are built thanks to the <code>fillGraph = TRUE</code> option. See the <a href="https://www.r-graph-gallery.com/area-graph.html">area chart</a> section of the gallery.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="evolution.html#cb458-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb458-2"><a href="evolution.html#cb458-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyOptions</span>( <span class="at">fillGraph=</span><span class="cn">TRUE</span> )</span>
<span id="cb458-3"><a href="evolution.html#cb458-3" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb458-4"><a href="evolution.html#cb458-4" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs317-2.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs317-2.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="step-chart" class="section level3" number="6.4.17">
<h3><span class="header-section-number">6.4.17</span> Step Chart</h3>
<p>The step chart is made using the <code>stepPlot</code> option. Use it in conjunction with <code>fillGraph</code> to fill the area below the curve.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="evolution.html#cb459-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb459-2"><a href="evolution.html#cb459-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyOptions</span>( <span class="at">stepPlot=</span><span class="cn">TRUE</span>, <span class="at">fillGraph=</span><span class="cn">TRUE</span>)</span>
<span id="cb459-3"><a href="evolution.html#cb459-3" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb459-4"><a href="evolution.html#cb459-4" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs317-3.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs317-3.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="lollipop-plot" class="section level3" number="6.4.18">
<h3><span class="header-section-number">6.4.18</span> Lollipop Plot</h3>
<p>Called using the <code>stemPlot</code> option. See the <a href="https://www.r-graph-gallery.com/lollipop-plot.html">lollipop plot</a> section of the gallery for more.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="evolution.html#cb460-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb460-2"><a href="evolution.html#cb460-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyOptions</span>( <span class="at">stemPlot=</span><span class="cn">TRUE</span>)</span>
<span id="cb460-3"><a href="evolution.html#cb460-3" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb460-4"><a href="evolution.html#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs317-4.html&quot;))</span></span></code></pre></div>
<p><img src="evolutionHtml/lollipop-plot.PNG" /></p>
</div>
<div id="candlestick-chart" class="section level3" number="6.4.19">
<h3><span class="header-section-number">6.4.19</span> Candlestick Chart</h3>
<p>The candlestick chart represents 4 series and is widely used in finance. <code>dygraphs</code> offers the <code>dyCandlestick()</code> function that allows to build them in minutes.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="evolution.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data (needs 4 data points per date stamp)</span></span>
<span id="cb461-2"><a href="evolution.html#cb461-2" aria-hidden="true" tabindex="-1"></a>trend <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">41</span>))<span class="sc">+</span><span class="fu">runif</span>(<span class="dv">41</span>)</span>
<span id="cb461-3"><a href="evolution.html#cb461-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb461-4"><a href="evolution.html#cb461-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">time=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">40</span>, <span class="at">to=</span><span class="fu">Sys.Date</span>(), <span class="at">by=</span><span class="dv">1</span> ), </span>
<span id="cb461-5"><a href="evolution.html#cb461-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">value1=</span>trend, </span>
<span id="cb461-6"><a href="evolution.html#cb461-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">value2=</span>trend<span class="sc">+</span><span class="fu">rnorm</span>(<span class="dv">41</span>), </span>
<span id="cb461-7"><a href="evolution.html#cb461-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">value3=</span>trend<span class="sc">+</span><span class="fu">rnorm</span>(<span class="dv">41</span>), </span>
<span id="cb461-8"><a href="evolution.html#cb461-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">value4=</span>trend<span class="sc">+</span><span class="fu">rnorm</span>(<span class="dv">41</span>) </span>
<span id="cb461-9"><a href="evolution.html#cb461-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb461-10"><a href="evolution.html#cb461-10" aria-hidden="true" tabindex="-1"></a><span class="co"># switch to xts format</span></span>
<span id="cb461-11"><a href="evolution.html#cb461-11" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data[,<span class="sc">-</span><span class="dv">1</span>], <span class="at">order.by =</span> data<span class="sc">$</span>time)</span>
<span id="cb461-12"><a href="evolution.html#cb461-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot it</span></span>
<span id="cb461-13"><a href="evolution.html#cb461-13" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb461-14"><a href="evolution.html#cb461-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyCandlestick</span>()</span>
<span id="cb461-15"><a href="evolution.html#cb461-15" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb461-16"><a href="evolution.html#cb461-16" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs317-5.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs317-5.html" height="500px" width="100%"></iframe>
</center>
</div>
<div id="line-chart-with-interval" class="section level3" number="6.4.20">
<h3><span class="header-section-number">6.4.20</span> Line Chart with Interval</h3>
<p>This is very handy to represent confidence interval around your time series. Don with <code>dySeries()</code> that takes 3 columns as input: trend and upper and lower limits of the confidence interval.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="evolution.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data</span></span>
<span id="cb462-2"><a href="evolution.html#cb462-2" aria-hidden="true" tabindex="-1"></a>trend <span class="ot">&lt;-</span> <span class="fu">sin</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">41</span>))<span class="sc">+</span><span class="fu">runif</span>(<span class="dv">41</span>)</span>
<span id="cb462-3"><a href="evolution.html#cb462-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb462-4"><a href="evolution.html#cb462-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">time=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">40</span>, <span class="at">to=</span><span class="fu">Sys.Date</span>(), <span class="at">by=</span><span class="dv">1</span> ), </span>
<span id="cb462-5"><a href="evolution.html#cb462-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">trend=</span>trend, </span>
<span id="cb462-6"><a href="evolution.html#cb462-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">max=</span>trend<span class="sc">+</span><span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">41</span>)), </span>
<span id="cb462-7"><a href="evolution.html#cb462-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">min=</span>trend<span class="sc">-</span><span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">41</span>, <span class="at">sd=</span><span class="dv">1</span>))</span>
<span id="cb462-8"><a href="evolution.html#cb462-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb462-9"><a href="evolution.html#cb462-9" aria-hidden="true" tabindex="-1"></a><span class="co"># switch to xts format</span></span>
<span id="cb462-10"><a href="evolution.html#cb462-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data[,<span class="sc">-</span><span class="dv">1</span>], <span class="at">order.by =</span> data<span class="sc">$</span>time)</span>
<span id="cb462-11"><a href="evolution.html#cb462-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb462-12"><a href="evolution.html#cb462-12" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb462-13"><a href="evolution.html#cb462-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dySeries</span>(<span class="fu">c</span>(<span class="st">&quot;min&quot;</span>, <span class="st">&quot;trend&quot;</span>, <span class="st">&quot;max&quot;</span>))</span>
<span id="cb462-14"><a href="evolution.html#cb462-14" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb462-15"><a href="evolution.html#cb462-15" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs317-6.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs317-6.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="custom-dygraphs-time-series-example" class="section level3" number="6.4.21">
<h3><span class="header-section-number">6.4.21</span> Custom Dygraphs Time Series Example</h3>
<p>This post shows what is possible to do for <a href="https://www.r-graph-gallery.com/time-series.html">time series</a> visualization with the <code>dygraphs</code> package, using a good amount of customization. Reproducible code is provided.</p>
<p>The <a href="https://www.r-graph-gallery.com/316-possible-inputs-for-the-dygraphs-library.html">chart #316</a> and <a href="https://www.r-graph-gallery.com/317-time-series-with-the-dygraphs-library.html">#317</a> gives an introduction to time series representation with the <code>dygraphs</code> library.</p>
<p>This page gives a more custom example based on real data (number of bikes located per day). Here is the graph and the code that allows to make it!</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="evolution.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library</span></span>
<span id="cb463-2"><a href="evolution.html#cb463-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb463-3"><a href="evolution.html#cb463-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts)          <span class="co"># To make the convertion data-frame / xts format</span></span>
<span id="cb463-4"><a href="evolution.html#cb463-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb463-5"><a href="evolution.html#cb463-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb463-6"><a href="evolution.html#cb463-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb463-7"><a href="evolution.html#cb463-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data (hosted on the gallery website)</span></span>
<span id="cb463-8"><a href="evolution.html#cb463-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://python-graph-gallery.com/wp-content/uploads/bike.csv&quot;</span>, <span class="at">header=</span>T, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">300</span>)</span>
<span id="cb463-9"><a href="evolution.html#cb463-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Check type of variable</span></span>
<span id="cb463-10"><a href="evolution.html#cb463-10" aria-hidden="true" tabindex="-1"></a><span class="co"># str(data)</span></span>
<span id="cb463-11"><a href="evolution.html#cb463-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb463-12"><a href="evolution.html#cb463-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Since my time is currently a factor, I have to convert it to a date-time format!</span></span>
<span id="cb463-13"><a href="evolution.html#cb463-13" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>datetime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(data<span class="sc">$</span>datetime)</span>
<span id="cb463-14"><a href="evolution.html#cb463-14" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb463-15"><a href="evolution.html#cb463-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Then you can create the xts necessary to use dygraph</span></span>
<span id="cb463-16"><a href="evolution.html#cb463-16" aria-hidden="true" tabindex="-1"></a>don <span class="ot">&lt;-</span> <span class="fu">xts</span>(<span class="at">x =</span> data<span class="sc">$</span>count, <span class="at">order.by =</span> data<span class="sc">$</span>datetime)</span>
<span id="cb463-17"><a href="evolution.html#cb463-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally the plot</span></span>
<span id="cb463-18"><a href="evolution.html#cb463-18" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">dygraph</span>(don) <span class="sc">%&gt;%</span></span>
<span id="cb463-19"><a href="evolution.html#cb463-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyOptions</span>(<span class="at">labelsUTC =</span> <span class="cn">TRUE</span>, <span class="at">fillGraph=</span><span class="cn">TRUE</span>, <span class="at">fillAlpha=</span><span class="fl">0.1</span>, <span class="at">drawGrid =</span> <span class="cn">FALSE</span>, <span class="at">colors=</span><span class="st">&quot;#D8AE5A&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb463-20"><a href="evolution.html#cb463-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyRangeSelector</span>() <span class="sc">%&gt;%</span></span>
<span id="cb463-21"><a href="evolution.html#cb463-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyCrosshair</span>(<span class="at">direction =</span> <span class="st">&quot;vertical&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb463-22"><a href="evolution.html#cb463-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyHighlight</span>(<span class="at">highlightCircleSize =</span> <span class="dv">5</span>, <span class="at">highlightSeriesBackgroundAlpha =</span> <span class="fl">0.2</span>, <span class="at">hideOnMouseOut =</span> <span class="cn">FALSE</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb463-23"><a href="evolution.html#cb463-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dyRoller</span>(<span class="at">rollPeriod =</span> <span class="dv">1</span>)</span>
<span id="cb463-24"><a href="evolution.html#cb463-24" aria-hidden="true" tabindex="-1"></a><span class="co"># save the widget</span></span>
<span id="cb463-25"><a href="evolution.html#cb463-25" aria-hidden="true" tabindex="-1"></a><span class="co"># library(htmlwidgets)</span></span>
<span id="cb463-26"><a href="evolution.html#cb463-26" aria-hidden="true" tabindex="-1"></a><span class="co"># saveWidget(p, file=paste0( getwd(), &quot;/HtmlWidget/dygraphs318.html&quot;))</span></span></code></pre></div>
<center>
<iframe title="My embedded document" src="evolutionHtml/dygraphs318.html" height="400px" width="100%"></iframe>
</center>
</div>
<div id="heatmap-for-time-series" class="section level3" number="6.4.22">
<h3><span class="header-section-number">6.4.22</span> Heatmap for Time Series</h3>
<p><a href="https://www.r-graph-gallery.com/heatmap.html">Heatmaps</a> can be a very good alternative to visualize time series, especially when the time frame you study is repeating, like weeks. Here is a customized example, but visit the <a href="https://www.r-graph-gallery.com/heatmap.html">heatmap section</a> for more.</p>
<div id="the-hourly-heatmap" class="section level4" number="6.4.22.1">
<h4><span class="header-section-number">6.4.22.1</span> The Hourly Heatmap</h4>
<p>A <a href="https://www.r-graph-gallery.com/heatmap.html">heatmap</a> used to display time series with R and <a href="https://www.r-graph-gallery.com/ggplot2-package.html">ggplot2</a>. A submission by <a href="http://johnmackintosh.com/">John MacKintosh</a> with reproducible code.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="evolution.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb464-2"><a href="evolution.html#cb464-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># easier data wrangling </span></span>
<span id="cb464-3"><a href="evolution.html#cb464-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># colour blind friendly palette, works in B&amp;W also</span></span>
<span id="cb464-4"><a href="evolution.html#cb464-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Interpol.T) <span class="co">#  will generate a large dataset on initial load</span></span>
<span id="cb464-5"><a href="evolution.html#cb464-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># for easy date manipulation</span></span>
<span id="cb464-6"><a href="evolution.html#cb464-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra) </span>
<span id="cb464-7"><a href="evolution.html#cb464-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr) </span>
<span id="cb464-8"><a href="evolution.html#cb464-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data</span>(Trentino_hourly_T,<span class="at">package =</span> <span class="st">&quot;Interpol.T&quot;</span>)</span>
<span id="cb464-9"><a href="evolution.html#cb464-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(h_d_t)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;stationid&quot;</span>,<span class="st">&quot;date&quot;</span>,<span class="st">&quot;hour&quot;</span>,<span class="st">&quot;temp&quot;</span>,<span class="st">&quot;flag&quot;</span>)</span>
<span id="cb464-10"><a href="evolution.html#cb464-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tbl_df</span>(h_d_t) <span class="sc">%&gt;%</span></span>
<span id="cb464-11"><a href="evolution.html#cb464-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stationid <span class="sc">==</span><span class="st">&quot;T0001&quot;</span>)</span>
<span id="cb464-12"><a href="evolution.html#cb464-12" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb464-13"><a href="evolution.html#cb464-13" aria-hidden="true" tabindex="-1"></a>                    <span class="at">month =</span> <span class="fu">month</span>(date, <span class="at">label=</span><span class="cn">TRUE</span>),</span>
<span id="cb464-14"><a href="evolution.html#cb464-14" aria-hidden="true" tabindex="-1"></a>                    <span class="at">day =</span> <span class="fu">day</span>(date))</span>
<span id="cb464-15"><a href="evolution.html#cb464-15" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>date<span class="ot">&lt;-</span><span class="fu">ymd</span>(df<span class="sc">$</span>date) <span class="co"># not necessary for plot but </span></span>
<span id="cb464-16"><a href="evolution.html#cb464-16" aria-hidden="true" tabindex="-1"></a>useful <span class="cf">if</span> you want to do further work with the data</span>
<span id="cb464-17"><a href="evolution.html#cb464-17" aria-hidden="true" tabindex="-1"></a><span class="co">#cleanup</span></span>
<span id="cb464-18"><a href="evolution.html#cb464-18" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">c</span>(<span class="st">&quot;h_d_t&quot;</span>,<span class="st">&quot;mo_bias&quot;</span>,<span class="st">&quot;Tn&quot;</span>,<span class="st">&quot;Tx&quot;</span>,</span>
<span id="cb464-19"><a href="evolution.html#cb464-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;Th_int_list&quot;</span>,<span class="st">&quot;calibration_l&quot;</span>,</span>
<span id="cb464-20"><a href="evolution.html#cb464-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;calibration_shape&quot;</span>,<span class="st">&quot;Tm_list&quot;</span>))</span>
<span id="cb464-21"><a href="evolution.html#cb464-21" aria-hidden="true" tabindex="-1"></a><span class="co">#create plotting df</span></span>
<span id="cb464-22"><a href="evolution.html#cb464-22" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> <span class="fu">select</span>(stationid,day,hour,month,year,temp)<span class="sc">%&gt;%</span></span>
<span id="cb464-23"><a href="evolution.html#cb464-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(temp) <span class="co">#optional - see note below</span></span>
<span id="cb464-24"><a href="evolution.html#cb464-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Re: use of fill</span></span>
<span id="cb464-25"><a href="evolution.html#cb464-25" aria-hidden="true" tabindex="-1"></a><span class="co"># This code is for demonstrating a visualisation technique</span></span>
<span id="cb464-26"><a href="evolution.html#cb464-26" aria-hidden="true" tabindex="-1"></a><span class="co"># There are 5 missing hourly values in the dataframe.</span></span>
<span id="cb464-27"><a href="evolution.html#cb464-27" aria-hidden="true" tabindex="-1"></a><span class="co"># see the original plot here (from my ggplot demo earlier this year) to see the white spaces where the missing values occcur:</span></span>
<span id="cb464-28"><a href="evolution.html#cb464-28" aria-hidden="true" tabindex="-1"></a><span class="co"># https://github.com/johnmackintosh/ggplotdemo/blob/master/temp8.png </span></span>
<span id="cb464-29"><a href="evolution.html#cb464-29" aria-hidden="true" tabindex="-1"></a><span class="co"># I used &#39;fill&#39; from  tidyr to take the prior value for each missing value and replace the NA</span></span>
<span id="cb464-30"><a href="evolution.html#cb464-30" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a quick fix for the blog section only - _do not_ do this with your real world data</span></span>
<span id="cb464-31"><a href="evolution.html#cb464-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Should really use either use replace_NA or complete(with fill)in tidyr </span></span>
<span id="cb464-32"><a href="evolution.html#cb464-32" aria-hidden="true" tabindex="-1"></a><span class="co"># OR </span></span>
<span id="cb464-33"><a href="evolution.html#cb464-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Look into more specialist way of replacing these missing values -e.g. imputation.</span></span>
<span id="cb464-34"><a href="evolution.html#cb464-34" aria-hidden="true" tabindex="-1"></a>statno <span class="ot">&lt;-</span><span class="fu">unique</span>(df<span class="sc">$</span>stationid)</span>
<span id="cb464-35"><a href="evolution.html#cb464-35" aria-hidden="true" tabindex="-1"></a><span class="do">######## Plotting starts here#####################</span></span>
<span id="cb464-36"><a href="evolution.html#cb464-36" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span><span class="fu">ggplot</span>(df,<span class="fu">aes</span>(day,hour,<span class="at">fill=</span>temp))<span class="sc">+</span></span>
<span id="cb464-37"><a href="evolution.html#cb464-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color=</span> <span class="st">&quot;white&quot;</span>,<span class="at">size=</span><span class="fl">0.1</span>) <span class="sc">+</span> </span>
<span id="cb464-38"><a href="evolution.html#cb464-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name=</span><span class="st">&quot;Hrly Temps C&quot;</span>,<span class="at">option =</span><span class="st">&quot;C&quot;</span>)</span>
<span id="cb464-39"><a href="evolution.html#cb464-39" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span>p <span class="sc">+</span> <span class="fu">facet_grid</span>(year<span class="sc">~</span>month)</span>
<span id="cb464-40"><a href="evolution.html#cb464-40" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span>p <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;reverse&quot;</span>, <span class="at">breaks =</span> <span class="fu">unique</span>(df<span class="sc">$</span>hour))</span>
<span id="cb464-41"><a href="evolution.html#cb464-41" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span>p <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">31</span>))</span>
<span id="cb464-42"><a href="evolution.html#cb464-42" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span>p <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">8</span>)</span>
<span id="cb464-43"><a href="evolution.html#cb464-43" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span> <span class="fu">paste</span>(<span class="st">&quot;Hourly Temps - Station&quot;</span>,statno), <span class="at">x=</span><span class="st">&quot;Day&quot;</span>, <span class="at">y=</span><span class="st">&quot;Hour Commencing&quot;</span>)</span>
<span id="cb464-44"><a href="evolution.html#cb464-44" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span>p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)<span class="sc">+</span></span>
<span id="cb464-45"><a href="evolution.html#cb464-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>))<span class="sc">+</span></span>
<span id="cb464-46"><a href="evolution.html#cb464-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb464-47"><a href="evolution.html#cb464-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">colour=</span><span class="st">&quot;white&quot;</span>))<span class="sc">+</span></span>
<span id="cb464-48"><a href="evolution.html#cb464-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb464-49"><a href="evolution.html#cb464-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks=</span><span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb464-50"><a href="evolution.html#cb464-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">7</span>))<span class="sc">+</span></span>
<span id="cb464-51"><a href="evolution.html#cb464-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb464-52"><a href="evolution.html#cb464-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">6</span>))<span class="sc">+</span></span>
<span id="cb464-53"><a href="evolution.html#cb464-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">removeGrid</span>()<span class="co">#ggExtra</span></span>
<span id="cb464-54"><a href="evolution.html#cb464-54" aria-hidden="true" tabindex="-1"></a><span class="co"># you will want to expand your plot screen before this bit!</span></span>
<span id="cb464-55"><a href="evolution.html#cb464-55" aria-hidden="true" tabindex="-1"></a>p <span class="co">#awesomeness</span></span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/283-the-hourly-heatmap_files/figure-html/thecode-1.png" style="width:100.0%" />
</center>
</div>
</div>
<div id="dual-y-axis-in-r-2" class="section level3" number="6.4.23">
<h3><span class="header-section-number">6.4.23</span> Dual Y Axis in R</h3>
<p>This section explains how to build a <a href="https://www.r-graph-gallery.com/line-plot.html">line chart</a> with dual Y axis with R. It show the evolution of 2 series, each line having its own Y axis. Reproducible code provided.</p>
<div id="usual-line-chart-1" class="section level4" number="6.4.23.1">
<h4><span class="header-section-number">6.4.23.1</span> Usual Line Chart</h4>
<p>Lets start with an usual line chart displaying the evolution of 2 numeric variables.</p>
<p>This kind of chart can be built using the <code>line()</code> function. But here the <code>xyplot</code> from the <code>latticeExtra</code> package is used (well need it later on.)</p>
<p>One would argue that the exact evolution of the blue variable is hard to read. Another axis could be displayed to zoom on it. This is why the dual axis was born.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="evolution.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library</span></span>
<span id="cb465-2"><a href="evolution.html#cb465-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(latticeExtra)</span>
<span id="cb465-3"><a href="evolution.html#cb465-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb465-4"><a href="evolution.html#cb465-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb465-5"><a href="evolution.html#cb465-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb465-6"><a href="evolution.html#cb465-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb465-7"><a href="evolution.html#cb465-7" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb465-8"><a href="evolution.html#cb465-8" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> var1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb465-9"><a href="evolution.html#cb465-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,var1,var2)</span>
<span id="cb465-10"><a href="evolution.html#cb465-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb465-11"><a href="evolution.html#cb465-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb465-12"><a href="evolution.html#cb465-12" aria-hidden="true" tabindex="-1"></a><span class="co"># usual line chart</span></span>
<span id="cb465-13"><a href="evolution.html#cb465-13" aria-hidden="true" tabindex="-1"></a><span class="fu">xyplot</span>(var1 <span class="sc">+</span> var2 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;steelblue&quot;</span>, <span class="st">&quot;#69b3a2&quot;</span>) , <span class="at">lwd=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="r-graph_files/figure-html/line-chart-evolution-dual-axis-two-series-1.png" width="672" /></p>
</div>
</div>
<div id="dual-y-axis-line-chart-1" class="section level3" number="6.4.24">
<h3><span class="header-section-number">6.4.24</span> Dual Y Axis Line Chart</h3>
<p>The <code>doubleYScale()</code> function of the latticeExtra package can take 2 outputs of the <code>xyplot()</code> function to build a dual Y axis line chart.</p>
<p>This chart is truly misleading: it is easy to conclude that both variables follow the same pattern what is totally wrong. Always double check what axis trully are on dual axis chart.</p>
<p>Conclusion: dont do it!</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="evolution.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library</span></span>
<span id="cb466-2"><a href="evolution.html#cb466-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(latticeExtra)</span>
<span id="cb466-3"><a href="evolution.html#cb466-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb466-4"><a href="evolution.html#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb466-5"><a href="evolution.html#cb466-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb466-6"><a href="evolution.html#cb466-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb466-7"><a href="evolution.html#cb466-7" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb466-8"><a href="evolution.html#cb466-8" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> var1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb466-9"><a href="evolution.html#cb466-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,var1,var2)</span>
<span id="cb466-10"><a href="evolution.html#cb466-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb466-11"><a href="evolution.html#cb466-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb466-12"><a href="evolution.html#cb466-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; construct separate plots for each series</span></span>
<span id="cb466-13"><a href="evolution.html#cb466-13" aria-hidden="true" tabindex="-1"></a>obj1 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var1 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span> , <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;steelb</span></span>
<span id="cb466-14"><a href="evolution.html#cb466-14" aria-hidden="true" tabindex="-1"></a><span class="st">               lue&quot;</span>)</span>
<span id="cb466-15"><a href="evolution.html#cb466-15" aria-hidden="true" tabindex="-1"></a>obj2 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var2 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;#69b3a2&quot;</span>)</span>
<span id="cb466-16"><a href="evolution.html#cb466-16" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb466-17"><a href="evolution.html#cb466-17" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; Make the plot with second y axis:</span></span>
<span id="cb466-18"><a href="evolution.html#cb466-18" aria-hidden="true" tabindex="-1"></a><span class="fu">doubleYScale</span>(obj1, obj2, <span class="at">add.ylab2 =</span> <span class="cn">TRUE</span>, <span class="at">use.style=</span><span class="cn">FALSE</span> )</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/145-two-different-y-axis-on-the-same-plot_files/figure-html/thecode2-1.png" style="width:75.0%" />
</center>
</div>
<div id="add-legend-1" class="section level3" number="6.4.25">
<h3><span class="header-section-number">6.4.25</span> Add Legend</h3>
<p>If you stick to it, here is how to add a legend to the chart:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="evolution.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library</span></span>
<span id="cb467-2"><a href="evolution.html#cb467-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(latticeExtra)</span>
<span id="cb467-3"><a href="evolution.html#cb467-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb467-4"><a href="evolution.html#cb467-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb467-5"><a href="evolution.html#cb467-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb467-6"><a href="evolution.html#cb467-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb467-7"><a href="evolution.html#cb467-7" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb467-8"><a href="evolution.html#cb467-8" aria-hidden="true" tabindex="-1"></a>var2 <span class="ot">&lt;-</span> var1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb467-9"><a href="evolution.html#cb467-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,var1,var2)</span>
<span id="cb467-10"><a href="evolution.html#cb467-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb467-11"><a href="evolution.html#cb467-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb467-12"><a href="evolution.html#cb467-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; construct separate plots for each series</span></span>
<span id="cb467-13"><a href="evolution.html#cb467-13" aria-hidden="true" tabindex="-1"></a>obj1 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var1 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span> , <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb467-14"><a href="evolution.html#cb467-14" aria-hidden="true" tabindex="-1"></a>obj2 <span class="ot">&lt;-</span> <span class="fu">xyplot</span>(var2 <span class="sc">~</span> x, data, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb467-15"><a href="evolution.html#cb467-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb467-16"><a href="evolution.html#cb467-16" aria-hidden="true" tabindex="-1"></a><span class="co"># --&gt; Make the plot with second y axis AND legend:</span></span>
<span id="cb467-17"><a href="evolution.html#cb467-17" aria-hidden="true" tabindex="-1"></a><span class="fu">doubleYScale</span>(obj1, obj2, <span class="at">text =</span> <span class="fu">c</span>(<span class="st">&quot;obj1&quot;</span>, <span class="st">&quot;obj2&quot;</span>) , <span class="at">add.ylab2 =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<center>
<img src="https://www.r-graph-gallery.com/145-two-different-y-axis-on-the-same-plot_files/figure-html/thecode3-1.png" style="width:75.0%" />
</center>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="part.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="map.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
